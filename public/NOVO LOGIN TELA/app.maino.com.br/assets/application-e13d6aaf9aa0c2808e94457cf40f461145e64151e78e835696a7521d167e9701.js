/*!
 * jQuery JavaScript Library v1.12.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-05-20T17:17Z
 */
function jsBuscaCep(){function t(){$("#endereco").val(""),$("#numero").val(""),$("#complemento").val(""),$("#bairro").val(""),$("#uf").val(""),$("#municipio_ibge").val(""),$("#cliente_municipio_id").val("")}var e={AC:1,AL:2,AM:3,AP:4,BA:5,CE:6,DF:7,ES:8,GO:9,MA:10,MG:11,MS:12,MT:13,PA:14,PB:15,PE:16,PI:17,PR:18,RJ:19,RN:20,RO:21,RR:22,RS:23,SC:24,SE:25,SP:26,TO:27,EX:28},i=30;if(""!==$.trim($("#cep").val()))if(/^[0-9]{5}-?[0-9]{3}$/.test($("#cep").val())){var n="/api/v2/cep.json?cep="+$("#cep").val().replace(/[^\d]/g,"");$.getJSON(n,function(t){t?($("#endereco").val(t.logradouro),$("#endereco_bairro").val(t.logradouro+" - "+t.bairro),$("#bairro").val(t.bairro),$("#municipio_ibge").val(t.ibge),$("#uf").val(e[t.uf]),$("#uf").trigger("change"),$("#numero").val(""),$("#numero").focus(),$("#stakeholder_pais_id").val(i)):swal({title:"CEP n\xe3o encontrado",type:"warning"})})}else t(),swal({title:"CEP inv\xe1lido",type:"warning"})}function autocompletePayableFieldsByFornecedor(t,e){t.descricao_pagamento&&$(`#${e}_descricao`).val(t.descricao_pagamento),t.custo_pagamento&&$(`#${e}_custo`).val(t.custo_pagamento).change(),t.centro_de_custo_pagamento&&centroDeCustoToReact(t.centro_de_custo_pagamento),t.plano_de_conta_pagamento&&planoDeContaToReact(t.plano_de_conta_pagamento)}function autocompleteReceivableFieldsByCliente(t,e){t.descricao_recebimento&&$(`#${e}_descricao`).val(t.descricao_recebimento),t.centro_de_custo_recebimento&&centroDeCustoToReact(t.centro_de_custo_recebimento),t.plano_de_conta_recebimento&&planoDeContaToReact(t.plano_de_conta_recebimento)}function centroDeCustoToReact(t){dispatchEvent(new CustomEvent("centroDeCustoToReact",{detail:t}))}function planoDeContaToReact(t){dispatchEvent(new CustomEvent("planoDeContaToReact",{detail:t}))}function disableDialogButton(t){t.removeClass("ui-state-default").addClass("ui-state-disabled").prop("disabled",!0)}function enableDialogButton(t){t.removeClass("ui-state-disabled").addClass("ui-state-default").prop("disabled",!1)}function renderSelect(){var t,e,i,n,o;switch(t=document.getElementById("transportadora_tipo_pessoa_id"),e=document.getElementById("transportadora_cnpj"),i=document.getElementById("transportadora_razao_social"),o=document.getElementById("nomefantasia"),n=document.getElementById("insc"),t.value){case"1":e.parentElement.children[0].innerHTML="CNPJ",i.parentElement.children[0].innerHTML="Raz\xe3o Social",!0===o.children[1].disabled&&(o.children[1].disabled=!1,n.children[1].disabled=!1);break;case"2":case"3":e.parentElement.children[0].innerHTML="CPF",i.parentElement.children[0].innerHTML="Nome",o.children[1].disabled=!0,n.children[1].disabled=!0}}function cpfMask(){$("#cpf").mask("999.999.999-99")}function formataErros(t){let e=["[",", ","]"],i=t.split("&quot;"),n=[],o=1;for(let t=0;t<i.length;t++)if(!e.includes(i[t])){let e=`${o} - ${i[t]} <br>`;n.push(e),o++}return n.join("\n")}function addInvoiceDate(t){return`<div id="invoice-date">\n    <div><span> Data da nota fiscal </span></div>\n    <div class="input-group group-calendar form-control">\n      <span> ${t} </span>\n    </div>\n  </div>`}function voltar(t){document.location=t}function eNumero(t){return t>47&&t<58}function eAuxiliar(t){return t===8||t===9||t===13||t===45}function eVirgula(t){return 44===t||188===t}function ePonto(t){return 46===t}function eLetra(t){return t>64&&t<91||t>96&&t<123}function somente_numero(t){var e=window.event?event.keyCode:t.which;return!!eNumero(e)||(!!eAuxiliar(e)||!!eVirgula(e))}function limpa_numero(t){const e=t.target,i=/[^-\d]/g;e.value=e.value.replace(i,"")}function trocaPontoPorVirgula(t){t.value=t.value.replaceAll(".",",")}function somente_numero_inteiro(t){var e=window.event?event.keyCode:t.which;return!!eNumero(e)||!!eAuxiliar(e)}function somente_numero_inteiro_sem_traco(t){return!!eNumero(window.event?event.keyCode:t.which)}function somente_alfa_numerico(t){var e=window.event?event.keyCode:t.which;return!!eNumero(e)||(!!eLetra(e)||(!!eAuxiliar(e)||!!eVirgula(e)))}function somente_numero_e_ponto(t){var e=window.event?event.keyCode:t.which;return!!eNumero(e)||(!!eLetra(e)||(!!eAuxiliar(e)||!!ePonto(e)))}function to_float(t){let e=isPresent(t)?Number(t.toString().replace(",",".")):"";return isNaN(e)?0:e}function arredondaFloatEFormata(t){return(Math.round(t*Math.pow(10,2))/Math.pow(10,2)).toString().replace(".",",")}function numeroInvalido(t){return!t&&isNaN(t)}function formata_numero(t){if(!numeroInvalido(t))return Number(t).toFixed(2).toString().replace(".",",")}function formata_numero_longo(t){if(!numeroInvalido(t))return Number(t).toFixed(4).toString().replace(".",",")}function formataMoeda(t,e={currency:"BRL"}){let i=t||0;return new Intl.NumberFormat("pt-BR",{style:"currency",currency:e.currency}).format(i)}function calcula_imposto(t,e,i){var n,o;$("#nao_recalcular_impostos").is(":checked")||(n=document.getElementById(e).value,o=(parseFloat(n.replace(",","."))*(parseFloat(t.replace(",","."))/100)).toFixed(2),isNaN(o)||(o=o.replace(".",","),document.getElementById(i).value=o))}function calcula_imposto_unid(t,e,i){var n,o;n=document.getElementById(e).value,o=(o=(parseFloat(n.replace(",","."))*parseFloat(t.replace(",","."))).toString()).replace(".",","),document.getElementById(i).value=o}function bloqueia_enter(t){return 13!==t.which}function mostra_esconde_filtro(t){"none"!==document.getElementById(t).style.display?document.getElementById(t).style.display="none":document.getElementById(t).style.display="block"}function mostra_esconde_generico(t){"none"!==document.getElementById(t).style.display?document.getElementById(t).style.display="none":document.getElementById(t).style.display="block"}function mostra_esconde_elemento(t){"none"!==t.style.display?t.style.display="none":t.style.display="block"}function arredonda_float(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)}function focusDateInput(t){let e=t.target.classList.contains("datetime-ini")?"00:00":"23:59";""==$(this).val()&&$(this).val(moment().format(`YYYY-MM-DDT${e}`))}function submitFiltroDataHora(t){$(t).on("submit",()=>{let t=$(".datetime-ini"),e=$(".datetime-fim"),i=$("[data-inicial-date]"),n=$("[data-final-date]");t.val().length>0?i.val(moment(t.val()).format("DD/MM/YYYY HH:mm")):i.val(""),e.val().length>0?n.val(moment(e.val()).format("DD/MM/YYYY HH:mm")):n.val("")})}function carrega_autocomplete_tag(t){var e=$(t);const i=$("#formulario_ordem_de_compra_em_massa");e.autocomplete({source:e.data("autocomplete-source"),autoFocus:!0,minLength:0,open:function(){if(i.length>0&&i.parent().length>0){let t=$(i).parent().zIndex();$(".ui-menu").css("z-index",t+1)}},response:function(t,i){0===$.grep(i.content,function(t){return t.value===e.val()}).length&&""!==e.val()&&(e.data("create")||e.data("form"))&&(console.log(e.data("form")),i.content.unshift({id:0,label:e.val()+" (criar novo)",value:e.val()}))},select:function(t,i){0===i.item.id&&$("div#"+e.data("form")).dialog("open"),null!==e.data("id-field")&&$("input#"+e.data("id-field")).val(i.item.id),"beneficio_fiscal_em_massa"===e.attr("id")&&$(".campo_beneficio_fiscal").each(function(){$(this).val(i.item.value)})}}),e.keyup(function(){null!==e.data("id-field")&&""===$(t).val()&&$("input#"+e.data("id-field")).val("")})}function isNumber(t){return t>=48&&t<=57}function exibe_mensagem_com_status(t,e){switch($("#alerts").html(""),classe="",e){case"warning":classe="alert alert-warning alert-dismissible float";break;case"success":case"notice":classe="alert alert-success alert-dismissible float";break;case"alert":case"error":classe="alert alert-danger alert-dismissible float";break;default:classe="alert alert-info alert-dismissible float"}$("#alerts").append('<div class="'+classe+'"><button type="button" class="close" data-dismiss="alert">&times;</button>'+t+"</div>")}function exibe_erro(t){exibe_mensagem_com_status(t,"alert")}function exibe_mensagem(t){exibe_mensagem_com_status(t,"success")}function valor_real_mascara(){$(this).find(".valor_real").each(function(){var t=$(this).val().replace(".","").replace(",",".");$(this).val(t)}),$(".valor_cpf").each(trataValorCpf),$(".cpf").each(trataValorCpf),$(".format-dinheiro").each(function(){var t=$(this).val().replace(/[.]/,"").replace(/[,]/,".");$(this).val(t)}),$(".masked-money").each(function(){if($(this).val().length>0){const e=parseInt($(this).data("cents-limit"));var t=Number($(this).unmask())/10**(e||2);isNaN(t)?$(this).val(""):$(this).val(t.toFixed(e||2))}})}function trataValorCpf(){var t=$(this).val().replace(/\D/g,"");$(this).val(t)}function initTooltip(){const t=$('[data-toggle="tooltip"]');t.tooltip({html:!0}),t.on("show.bs.tooltip",function(){let t=$(this).data("bs.tooltip");"customClass"in t.options&&$(t.$tip).addClass(t.options.customClass)})}function initPopOver(){$('[data-toggle="popover"]').popover()}function expandir_tabela(){var t=document.getElementById("tamanho-tabela"),e=document.getElementById("quickview");null!=t&&t.classList.contains("col-md-12")?($("#icon").removeClass("fa-minus-circle").addClass("fa-plus-circle"),$("#busca-field").removeClass("col-md-11").addClass("col-md-10"),t.classList.contains("col-md-3")?(t.style.transition="all .5s",$("#tamanho-tabela").removeClass("col-md-3").addClass("col-md-12")):$("#tamanho-tabela").removeClass("col-md-12").addClass("col-md-3"),null!=e&&e.classList.contains("quickview-open")?$("#quickview").removeClass("quickview-open").addClass("quickview-closed"):$("#quickview").removeClass("quickview-closed").addClass("quickview-open"),$("td:nth-child(2)").hide(),$("td:nth-child(3)").hide(),$("td:nth-child(4)").hide(),$("td:nth-child(5)").hide(),scrollToTop($("html, body")),$('[data-toggle="tooltip"]').tooltip()):($("#icon").removeClass("fa-plus-circle").addClass("fa-minus-circle"),$("#busca-field").removeClass("col-md-10").addClass("col-md-11"),$(".panel-quickview").hide(),null!=t&&t.classList.contains("col-md-3")?(t.style.transition="all .5s",$("#tamanho-tabela").removeClass("col-md-3").addClass("col-md-12")):$("#tamanho-tabela").removeClass("col-md-12").addClass("col-md-3"),null!=e&&e.classList.contains("quickview-open")?$("#quickview").removeClass("quickview-open").addClass("quickview-closed"):$("#quickview").removeClass("quickview-closed").addClass("quickview-open"),$("td:nth-child(2)").show(),$("td:nth-child(3)").show(),$("td:nth-child(4)").show(),$("td:nth-child(5)").show(),scrollToTop($("html, body")),$("#myCarousel").hide())}function atualizar_tabela_apos_busca(){var t=document.getElementById("tamanho-tabela");null!=t&&t.classList.contains("col-md-12")&&($("td:nth-child(2)").show(),$("td:nth-child(3)").show(),$("td:nth-child(4)").show(),$("td:nth-child(5)").show(),$('[data-toggle="tooltip"]').tooltip())}function check_character_limit(t){var e=parseInt(t.data("maxlength")),i=t.val().length;i>e?t.parent().addClass("limite-excedido"):t.parent().removeClass("limite-excedido"),t.closest(".form-group").toggleClass("has-error",i>e),t.parent().find(".cmx-character-counter").text(i+" / "+e)}function teclaSilenciosa(t){var e=[16,17,18,37,38,39,40];return $.inArray(t,e)>-1}function mostra_form_mail_di(t,e){$("#di_id").val(t),$("#email").val(e),exibe_form_complementar($("#"+t)),$("#form_complementar_td").html($("#div_email").clone().show())}function setTooltip(t,e){$(t).attr("data-original-title",e).tooltip("show")}function hideTooltip(t){setTimeout(function(){$(t).removeAttr("data-original-title").tooltip("hide")},1e3)}function aplicaClipboardLinkBoleto(){var t=new Clipboard(".clipboard-link");t.on("success",function(t){$(t.trigger).hasClass("clipboard-tooltip")?(setTooltip(t.trigger,"Copiado!"),hideTooltip(t.trigger)):swal({title:"Copiado para a \xe1rea de transfer\xeancia!",type:"success"})}),t.on("error",function(t){$(t.trigger).hasClass("clipboard-tooltip")?(setTooltip(t.trigger,"Erro ao copiar :("),hideTooltip(t.trigger)):swal({title:"Ocorreu um erro ao copiar",text:"Selecione e copie esta URL:\n\n"+t.text,type:"warning"})})}function isBlank(t){return t===undefined||""===t||null===t}function isPresent(t){return!isBlank(t)}function aplicaChosenSelect(){const t=$(".chosen-select");const e=t.data("parent-select")?t.data("parent-select"):document.querySelector(".parent-select-chosen")?".parent-select-chosen":null;let i={theme:"bootstrap",language:"pt-BR"},n={};e&&(n.dropdownParent=$(e)),t.select2({...i,minimumResultsForSearch:10,...n}),$(".tag-select").select2({...i,...n,tags:!0,minimumResultsForSearch:1}),$(".tag-select-comma").select2({...i,tags:!0,...n,tokenSeparators:[","]}),$(".select2-cfops-multiple").select2({...i,...n,closeOnSelect:!1,minimumResultsForSearch:1,templateSelection:function(t){return isBlank(t.text)?"":t.text.split(" - ")[0]}}),$(".chosen-select-icon").select2({...i,minimumResultsForSearch:10,templateResult:formatOptionWithIcon,templateSelection:formatOptionWithIcon}),$(".select-tipo-visualizacao").data("select2")&&$($(".select-tipo-visualizacao").data("select2").$container).addClass("select2-tipo-visualizacao")}function formatOptionWithIcon(t){var e=$(t.element).data("icon");return isBlank(e)?t.text:$('<span><i class="'+e+'"></i> '+t.text+"</span>")}function scrollToTop(t){t.animate({scrollTop:0},500)}function alerta_base(t){1==t.checked&&(alerta="Esta opera\xe7\xe3o \xe9 irrevers\xedvel. Ou seja, ao alterar as bases de c\xe1lculo dos impostos, caso deseje recuperar os valores anteriores, a nota fiscal dever\xe1 ser novamente parametrizada ou refeita.",alert(alerta))}function soma_total(t){var e=0;return $(t).each(function(){isPresent(this.value)&&(e+=to_float(this.value))}),e}function input_total(t,e){$(e).text("R$ "+formata_numero(soma_total($(t)))),$(t).on("change",function(){$(e).text("R$ "+formata_numero(soma_total($(t))))})}function bsCollapse(){if(!$(this).data("parent"))return;const t=document.querySelector($(this).data("target")),e=document.querySelector($(this).data("parent"));e&&(e.classList.remove("closed"),t&&t.classList.contains("in")&&e.classList.add("closed"))}function tParams(t,e){let i=t,n=e instanceof Object?Object.keys(e):[];return 0===n.length?t:(n.forEach(t=>{let n=new RegExp(`%{(${t})}*`);i=i.replace(n,e[t])}),i)}function t(t,e){if(!translations)return;let i=t.split(".").reduce((t,e)=>""===t?e:t&&t[e]?t[e]:void 0,translations);return"string"==typeof i?tParams(i,e):t}function showAlertImportXmlDi(){const t=location.href.split("dis/");if(Array.isArray(t)&&t[1]){const e=sessionStorage.getItem(t[1]);if(e){const i=JSON.parse(e);exibe_mensagem_com_status(i.message,i.type),sessionStorage.removeItem(t[1])}}}function traducaoDePeriodosDeData(t){return{dias:"days",semanas:"weeks",meses:"months",anos:"years"}[t]}function gtin14Gen(){for(var t=0,e=[0,3],i=[],n=0;n<10;n++)i[n]=Math.floor(10*Math.random());var o=[];for(o.push(t),o.push(e[0]),o.push(e[1]),n=0;n<10;n++)o.push(i[n]);o.push(checkDigit14(o));var a="";for(n=0;n<o.length;n++)a+=""+o[n];return a}function checkDigit14(t){for(var e=0,i=0;i<t.length;i++)e+=i%2!=0?t[i]:3*t[i];var n=0,o=e%10;return 0!==o&&(n=10-o),n}function habilita_campos_exportacao(t){$(".campos-exportacao").attr("disabled",!t)}function showModal(t,e){const i=$("#cancelamento-nfce-modal");i.modal({show:!0,backdrop:"static",keyboard:!1});const n=i.find(".modal-body > article");i.on("shown.bs.modal",()=>{if(n.html(t),e){const t=e.find(".dropdown-toggle");"true"===t.attr("aria-expanded")&&t.dropdown("toggle")}}),i.on("hidden.bs.modal",function(){n.html("")})}function mostra_form_mail(t,e){$("#email").val(e),$("#nota_fiscal_id").val(t),showModal($("#div_email").clone().show(),$("#nota_fiscal-"+t))}function mostra_form_vincula_processo_nfe_propria(t){$("#processo_nota_fiscal_id").val(t),exibe_form_complementar($("#nota_fiscal-"+t)),$("#form_complementar_td").html($("#div_tela_vincula_processo").clone().show())}function mostra_form_mail_boletos(t,e){$("#email").val(e),exibe_form_complementar($("#nota_fiscal-"+t)),$("#form_complementar_td").html($("#div_email").clone().show()),$("#form_complementar_td").find("form").attr("action","/nota_fiscals/"+t+"/email_boletos")}function exibe_form_complementar(t){fecha_form_complementar(),t.after("<tr id='form_complementar' class='form_complementar'><td colspan='11' id='form_complementar_td'></td></tr>"),t.addClass("form_complementar"),$("#form_complementar").addClass(t.attr("class")).removeClass("linha_conteudo")}function fecha_form_complementar(){const t=$('[data-dismiss="modal"]');$("#form_complementar").remove(),$(".form_complementar").removeClass("form_complementar"),t.length>0&&t.click()}function executaAcoesAposSelecionarDadosDeRemessa(){var t=$("#nota_fiscal_de_entrada_para_conta_e_ordem").val(),e=$("#nota_fiscal_stakeholder_id").val();$("#notificacao_acresimo_ao_valor_dos_produtos").html(""),$("#acrescimo_ao_valor_dos_produtos").val(null),$("#produtos-conta-e-ordem").html(""),$("#tipo_de_acrescimo_ao_valor_dos_produtos").val(null),t&&e&&(preencheAcrescimoDosProdutos(t),exibeListagemDeProdutosDaNfe(t,e))}function preencheAcrescimoDosProdutos(t){$("#tipo_de_acrescimo_ao_valor_dos_produtos").val("valor"),$("#simbolo-do-tipo-de-acrescimo").text("R$"),$.ajaxSetup({suppressErrors:!0}),$.getJSON("/acrescimo_ao_valor_dos_produtos_da_nfe/calcula_acrescimo",{nota_fiscal_id:t}).done(function(t){$("#acrescimo_ao_valor_dos_produtos").val(t.valor.toString().replace(".",",")),$("#notificacao_acresimo_ao_valor_dos_produtos").html("O valor do acr\xe9scimo ao valor dos produtos sugerido pelo sistema corresponde as despesas cadastradas no processo "+t.codigo_processo+".")})}function exibeListagemDeProdutosDaNfe(t,e){$("#carregando-produtos-conta-e-ordem").show(),$("#botoes-conta-e-ordem").hide(),$.ajaxSetup({suppressErrors:!0}),$.get("/nota_fiscals/"+t+"/conta_e_ordem/produtos?stakeholder_id="+e).done(function(t){$("#produtos-conta-e-ordem").html(t),$("#carregando-produtos-conta-e-ordem").hide(),$("#botoes-conta-e-ordem").show()})}function acrescimoEmPorcentagem(){$("#simbolo-do-tipo-de-acrescimo").text("%")}function acrescimoEmReais(){let t=$("#nota_fiscal_de_entrada_para_conta_e_ordem").val();$("#simbolo-do-tipo-de-acrescimo").text("R$"),t&&preencheAcrescimoDosProdutos(t)}function confirma_extrair(){swal({title:"Deseja realmente extrair os produtos selecionados para uma nova NF-e?",type:"warning",showCancelButton:!0,confirmButtonColor:"#006cb5",cancelButtonColor:"#d82b0a",confirmButtonText:"Sim",cancelButtonText:"Cancelar"}).then(function(){$("#acao_coletiva_action").val("dividir_com_produtos_selecionados"),$("#mov_estoque_nota_fiscal_acao_em_massa").submit()})["catch"](function(){})}function mostra_form_nao_realizacao(t){swal({title:"Opera\xe7\xe3o n\xe3o realizada",html:"Este evento indica que a opera\xe7\xe3o foi negociada, mas, por algum motivo que n\xe3o justifica uma nota fiscal de devolu\xe7\xe3o, como uma recusa do recebimento, n\xe3o aconteceu.<br><b>Para prosseguir, informe a justificativa da opera\xe7\xe3o n\xe3o ter sido realizada:</b>",input:"text",showCancelButton:!0,confirmButtonColor:"#006cb5",cancelButtonColor:"#d82b0a",confirmButtonText:"Enviar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0}).then(function(e){$.ajax({url:"chave_de_acesso_de_nfes/"+t+"/realizacao_operacao",data:{justificativa:e},type:"DELETE",dataType:"json",success:function(){window.location="/chave_de_acesso_de_nfes"}})})["catch"](function(){})}function alertaHabilitarDue(){swal({type:"warning",title:"Opa, voc\xea ainda n\xe3o possui acesso ao m\xf3dulo para gera\xe7\xe3o de DU-E.",html:"Deseja habilitar este m\xf3dulo?",showCancelButton:!0,confirmButtonColor:"#2A578C",cancelButtonColor:"#F00F00",confirmButtonText:"Sim",cancelButtonText:"N\xe3o, desejo fazer manualmente"}).then(function(){$.post("/declaracoes_exportacao/solicita_modulo")})["catch"](function(){})}function handleClickRow(t){const e=t.querySelector("input");t.addEventListener("click",i=>{const n=["INPUT","A","BUTTON"];t.classList.remove("nova-nfce"),!e||e.disabled||n.includes(i.target.tagName)||n.includes(i.target.parentElement.tagName)||(e.checked=!e.checked,e.dispatchEvent(new Event("change")))}),e.addEventListener("change",e=>{t.classList.remove("selected-row"),e.target.checked&&t.classList.add("selected-row")})}function printerNFCE(t,e){const i="/nota_fiscals/gera_danfe_lote?cupons="+t.join(",");fetch(i,{headers:{"X-CSRF-Token":$.rails.csrfToken()}}).then(t=>{if(!t.ok)throw new Error(`${t.status}`);return t.arrayBuffer()}).then(i=>{const n=new Blob([i],{type:"application/pdf"}),o=window.URL.createObjectURL(n),a=document.createElement("iframe");a.id="print-nfce",a.name="print-nfce",a.src=o,a.style.width="0",a.style.height="0",a.style.position="absolute",a.style.visibility="hidden",a.onload=function(){this.contentWindow.focus(),this.contentWindow.print();let i="focus";const n=()=>{t.map(t=>{let e=document.getElementById("nota_fiscal-"+t);e&&(e.classList.add("item-impresso"),e.classList.remove("nova-nfce","selected-row"),e.querySelector("td:nth-child(1) > input").checked=!1)})},o=()=>{this.contentWindow.removeEventListener(i,o);const t=document.getElementById(a.id);n(),t&&setTimeout(()=>{t.remove()},1e3)};e&&setTimeout(n,1e3),this.contentWindow.addEventListener(i,o)},document.body.appendChild(a)})}function mostra_form_fecha_caixa(t){$("#caixa_id").val(t),$(".div_aberto").is(":visible")?$("#form_complementar").hide():exibe_form_complementar($("#caixa-"+t)),$("#form_complementar_td").html($("#div_fecha_caixa").clone().show()),mascara_fecha_caixa()}function mascara_fecha_caixa(){$(".format-dinheiro").priceFormat({prefix:"",centsSeparator:",",thousandsSeparator:"."})}function tipoDesconto(t){"por_valor"==$(t).val()?($("#valor-percentual").remove(),$("#valor-desconto-total").before("<span class='input-group-addon' id='valor-monetario'>R$</span>"),$("#label-desconto").text("Valor do Desconto")):($("#valor-monetario").remove(),$("#valor-desconto-total").after("<span class='input-group-addon' id='valor-percentual'>%</span>"),$("#label-desconto").text("Porcentagem do Desconto"))}function limpaCampo(t){$(t).length>1?$(t).each(function(){$(this).val("")}):$(t).val("")}function preparaBotaoPagamento(){$(".documento_id").each(function(){$(".documento_id").parents(".fields").appendTo("#listagem_pagamentos");var t=$(this).parents(".fields"),e=$(t).find(".link_remove");switch($(this).val()){case"4":$("#dinheiro").addClass("disabled"),hideReset(t,".parcela",".campo_parcela"),e.addClass("col-md-2");break;case"6":$("#credito").addClass("disabled"),hideReset(t,".troco",".campo_dinheiro_recebido"),e.addClass("col-md-2");break;case"7":$("#debito").addClass("disabled"),hideReset(t,".troco",".campo_dinheiro_recebido"),hideReset(t,".parcela",".campo_parcela"),e.addClass("col-md-10");break;case"5":$("#cheque").addClass("disabled"),hideReset(t,".troco",".campo_dinheiro_recebido"),e.addClass("col-md-2");break;case"54":$("#pix").addClass("disabled"),hideReset(t,".troco",".campo_dinheiro_recebido"),hideReset(t,".parcela",".campo_parcela"),e.addClass("col-md-10");break;default:e.click(),console.log("N\xe3o h\xe1 documento id.")}})}function adicionaCamposProduto(){0==$(".produto-estoque-id").length&&0==$(".descricao_item_cupom_fiscal:visible").length&&($("#incluir-produto").click(),$(".codigo_item_cupom_fiscal:visible").focus())}function impedeSubmitBarCode(t){$(t).keypress(function(t){13===t.which&&t.preventDefault()})}function adicionaDocumentoId(t,e){$(t).find(".documento_id").val($(e.link).data("predefined-id"))}function addValor(){if($(".valor_pagamento:visible").length<=1){let t=aplicaValorTotal();$(".valor_pagamento:visible:first").val(formataFloat(t))}else{var t=descontoSobTotal(valorTotalItem())-valorTotalPagamento();t<0?$(".valor_pagamento:visible:last").val(formataFloat(0)):$(".valor_pagamento:visible:last").val(formataFloat(t))}}function valorTotalPagamento(){for(var t=$(".valor_pagamento:visible"),e=0,i=0;i<t.length;i++){var n=parseFloat(t[i].value.replace(/[.]/,"").replace(/[,]/,"."));isNaN(n)||(e+=n)}return e}function descontoSobTotal(t){var e=$("#tipo-desconto").val(),i=parseFloatVirgula($("#valor-desconto-total").val());return"por_valor"==e?calculoDescontoValor(i,t):calculoDescontoPorcentagem(i,t)}function calculoDescontoValor(t,e){return""==t?e:t>e?0:e-t}function calculoDescontoPorcentagem(t,e){return""==t?e:t>100?0:e-e*(t/100)}function hideReset(t,e,i){$(t).find(e).hide(),$(t).find(i).val("")}function valorPagamentoAtual(t){return parseFloatVirgula($("#valor_"+t).val())}function formataFloat(t){return t.toFixed(2).replace(/[.]/,",")}function parseFloatVirgula(t){if(""==t||null==t)return"";if(/[.]/.test(t))return t;var e=t.replace(/[.]/,"").replace(/[,]/,".");return parseFloat(e)}function valorTotalItem(){for(var t=$(".pu:visible"),e=$(".qtde:visible"),i=$(".desconto-item-cupom:visible"),n=0,o=0;o<t.length;o++){var a=parseFloatVirgula(t[o].value),r=parseFloatVirgula(e[o].value);if(i[o].value.length>0)var s=parseFloatVirgula(i[o].value);else s=0;isNaN(a)||isNaN(r)||(s>a*r||(n+=parseFloat((a*r-s).toFixed(2))))}return n}function decideTroco(t,e){return t<=e?0:t-e}function addDisableWithFinalizando(t){t.setAttribute("disable_with","Finalizando..."),$("#formulario_cupom_fiscal").data("remote",!1)}function ativaTransmissaoCupom(t){$("#deve_transmitir_cupom").val(!0),t.setAttribute("disable_with","Transmitindo...")}function adicionaPuAtacado(){$(".qtde").change(function(){var t=$(this).attr("id").replace("campo_qtde_",""),e=parseFloatVirgula($(this).val()),i=parseFloat($(this).parents().find("#qtde_atacado_"+t).val()),n=parseFloat($(this).parents().find("#preco_atacado_"+t).val());null!==i&&e>=i&&($(this).parents().find("#campo_pu_"+t).val(formataFloat(n)),aplicaValorTotal())})}function insere_placeholder(t){var e=$("#informacao_complementar_texto");e.val(e.val()+" "+t).focus()}function submit_separar_produto_estoque(){isBlank($("#form_separar_produto_estoque #movimentacao_estoque_id").val())?swal({title:"N\xe3o foi selecionada uma movimenta\xe7\xe3o para referenciar o novo produto, deseja continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#006cb5",cancelButtonColor:"#d82b0a",confirmButtonText:"Sim",cancelButtonText:"N\xe3o"}).then(function(){$("#form_separar_produto_estoque").submit()}):$("#form_separar_produto_estoque").submit()}function reset_modal_cadastra_produto(){$("#modalCadastrarProduto form").trigger("reset"),$("#modalCadastrarProduto .errors").html(""),$("#modalCadastrarProduto #produto_estoque_icms_orig_id").val(""),$("#modalCadastrarProduto #produto_estoque_icms_orig_id").change()}function exibeVeiculoTab(t){t?$(".vehicle-tab").css("display","block"):$(".vehicle-tab").css("display","none")}function verificaNcmVeiculo(t){exibeVeiculoTab(["86","87"].some(e=>t.startsWith(e)))}function tipoDeMedidaText(t){return"caixa"==t.val()?t.data("tipoDeMedidaPorCaixa"):t.data("tipoDeMedidaPorUnidade")}function deleteRecords(){swal({title:"Tem certeza que deseja excluir os registros selecionados?",text:"Esta a\xe7\xe3o n\xe3o poder\xe1 ser desfeita.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d82b0a",cancelButtonColor:"#006cb5",confirmButtonText:"Excluir",cancelButtonText:"Cancelar",dangerMode:!0}).then(function(){$("#acoes_coletivas_movimentacao_estoques").submit()})["catch"](function(){})}function modalAcoesEmMassa(t,e){let i="",n=$("#modal-contas-a-receber"),o="";for(let e=0;e<t.length;e++)i+=(o=e>0?"&":"?")+"contas_a_receber_ids[]="+t[e].value;n.find(".modal-body").html('<p class="text-center">Carregando...</p>'),n.modal({show:!0,backdrop:"static",keyboard:!1}),$.rails.ajax({url:e+i,type:"GET",success:function(){aplicaChosenSelect()}}),n.on("hidden.bs.modal",function(){for(let e=0;e<t.length;e++)t[e].checked=!1;n.find(".modal-body").html(""),i=""})}function busca_nfe_car(t){$(".receivable-invoice-date").html(addInvoiceDate(t.item.data_emissao)),$("#contas_a_receber_nota_fiscal_id").val(t.item.id),$("#contas_a_receber_numero_titulo").val(t.item.titulo),$("#contas_a_receber_valor_a_receber").val(Math.max(0,t.item.valor_considerando_devolucoes)),$("#contas_a_receber_descricao").val(t.item.descricao),$("#contas_a_receber_conta_corrente_id").val(t.item.conta_corrente),$("#contas_a_receber_numero_fatura").val(t.item.fatura),$("#contas_a_receber_numero_titulo").val(t.item.titulo),$("#contas_a_receber_stakeholder_cliente_id").val(t.item.stakeholder_id),$("#contas_a_receber_cliente_cnpj").val(t.item.stakeholder_label),$.each(t.item.representantes,function(t,e){$(".autocomplete-representante-nota-fiscal").val(e.id).trigger("change.select2")}),$("#contas_a_receber_data_competencia").val(t.item.data_emissao),applyMask()}function mostra_form_mail_contas_a_pagar_boletos(t,e){$("#conta_a_receber_id").val(t),$("#email").val(e),exibe_form_complementar($("#conta_a_receber-"+t)),$("#form_complementar_td").html($("#div_email").clone().show())}function triggerContasReceberBaixado(t){const e=$(t).is(":checked"),i=$(".campo-pagamento");i.prop("disabled",e),e&&(i.prop("checked",!1),i.val(null).trigger("change",!0))}function applyMask(t=$(".masked-money")){t.each(function(){var t=to_float(this.value);const e=parseInt(this.dataset.centsLimit)||2;canFormatNumber(t)&&(this.value=t.toFixed(e)),$(this).priceFormat({prefix:"",thousandsSeparator:"",centsSeparator:",",centsLimit:e})})}function canFormatNumber(t){return!(isNaN(t)||void 0===t||""===t)}function exibieRecebido(t){t?$("#painel-ja-recebido").show():$("#painel-ja-recebido").hide()}function busca_nfe_conta_a_pagar(t){$(".payables-invoice-date").html(addInvoiceDate(t.item.data_emissao)),$("#conta_a_pagar_compra_id").val(""),$("#conta_a_pagar_nota_fiscal_id").val(t.item.id),$("#conta_a_pagar_numero_documento").val(t.item.fatura),$("#conta_a_pagar_valor").val(t.item.valor),$("#conta_a_pagar_conta_corrente_id").val(t.item.conta_corrente),$("#conta_a_pagar_data_competencia").val(t.item.data_emissao),$("#conta_a_pagar_stakeholder_id").val(t.item.stakeholder_id),$("#conta_a_pagar_fornecedor_cnpj").val(t.item.stakeholder_label),$("#conta_a_pagar_numero_documento_fiscal").val(t.item.value)}function toggleCheckboxCustoDeMercadoria(){const t=$("#conta_a_pagar_custo_de_mercadoria_label"),e=$(".tipo-de-processo");""!==$("#conta_a_pagar_processo_id").val()?(t.show(),e.show()):(t.hide(),e.hide())}function busca_compra_conta_a_pagar(t){$(".payables-invoice-date").html(addInvoiceDate(t.item.data_emissao)),$("#conta_a_pagar_nota_fiscal_id").val(""),$("#conta_a_pagar_compra_id").val(t.item.id),$("#conta_a_pagar_numero_documento").val(t.item.fatura),$("#conta_a_pagar_valor").val(t.item.valor),$("#conta_a_pagar_conta_corrente_id").val(t.item.conta_corrente),$("#conta_a_pagar_data_competencia").val(t.item.data_emissao),$("#conta_a_pagar_stakeholder_id").val(t.item.stakeholder_id),$("#conta_a_pagar_fornecedor_cnpj").val(t.item.stakeholder_label),$("#conta_a_pagar_numero_documento_fiscal").val(t.item.rotulo)}function validaBaixaEmMassa(t){let e=document.querySelectorAll('#acoes_coletivas_conta_a_pagars input[type="checkbox"]:checked'),i=Array.from(e).filter(t=>"false"===t.parentElement.dataset.podeAlterarPagamentoConciliado);if(i.length>0){let t=[];return i.forEach(e=>{t.push(e.parentElement.dataset.codigoDescricao)}),swal("Ops!","H\xe1 pagamento(s) j\xe1 conciliado(s) na sele\xe7\xe3o e voc\xea n\xe3o possui permiss\xe3o para alter\xe1-lo(s). Desmarque o(s) seguinte(s) pagamento(s) para prosseguir:<br>"+t.join(", ")+".","warning"),!1}$("#commit").val(t),$("#acoes_coletivas_conta_a_pagars").submit()}function paidDisplays(t){$("#painel-ja-pago").toggle(t)}function modalAcoesEmMassaCp(t,e){let i="",n=$("#modal-contas-a-pagar"),o="";for(let e=0;e<t.length;e++)i+=(o=e>0?"&":"?")+"payables_ids[]="+t[e].value;n.find(".modal-body").html('<p class="text-center">Carregando...</p>'),n.modal({show:!0,backdrop:"static",keyboard:!1}),$.rails.ajax({url:e+i,type:"GET",success:function(){aplicaChosenSelect(),$(".datepicker_tag").datepicker($.datepicker.regional["pt-br"])}}),n.on("hidden.bs.modal",function(){for(let e=0;e<t.length;e++)t[e].checked=!1;n.find(".modal-body").html(""),i=""})}function toggleElementDisplay(t,e){const i=document.querySelectorAll(t);for(const t of i)t.style.display=e?"":"none"}function habilita_campos(t){const e="0"!==t&&""!==t;toggleElementDisplay(".campos_a_prazo",e),toggleElementDisplay(".campos_a_vista",!e)}function settingsDismemberSalesOrder(t){$("#wrapper-dismember-description").toggle(t.target.checked)}function limparCfopsFaturamento(){$("#configuracao_cfops_faturamento_ids").val([]).change()}function voltarCfopsFaturamentoPadrao(){var t=$("#configuracao_cfops_faturamento_ids").data("padroes");$("#configuracao_cfops_faturamento_ids").val(t).change()}function verificaPresencaIntermediador(t){const e="site_ou_plataforma_terceiros"==t&&t.length>0;$("#campos_intermediador").toggle(e)}function hideOrShowTransportadoraPadraoVtex(){const t="nfce"===$("#configuracao_tipo_pedido_vtex").val()
;t||$("#configuracao_transportadora_padrao_vtex_id").val(null),$(".transportadora_padrao_vtex_col").toggle(t)}function mostra_div_custo_recorrencia(){"credito"==$("#configuracao_recorrencia_status").val()?$("#div-custo").hide():$("#div-custo").show()}function exibeResumoParcelas(){if($("#repetir_conta").is(":checked")){var t=$("#tipo_da_conta").val(),e=null,i=null,n=null;"pagar"===t?(e=$("#conta_a_pagar_numero_documento").val(),i=$("#conta_a_pagar_valor").val().replace(",","."),n=$("#conta_a_pagar_data_vencimento").val()):(e=$("#contas_a_receber_numero_titulo").val(),i=$("#contas_a_receber_valor_a_receber").val().replace(",","."),n=$("#contas_a_receber_data_prevista").val());var o=$("#data_sinal").val(),a=$("#valor_sinal").val(),r=$("#quantidade_parcelas").val(),s=$("#range").val(),l=$("#tipo_range").val(),c=$("#sufixo").val();$.ajax("/previa_contas_em_massa/contas_a_"+t,{data:{titulo:e,valor_total:i,data_inicial:n,data_sinal:o,valor_sinal:a,qtde_parcelas:r,range:s,tipo_range:l,sufixo:c}}).done(function(t){$("#div_contas_em_massa").show(),$("#div_contas_em_massa").html(t),$(".datepicker_tag, .datepicker").datepicker();let e=$("#contas_a_receber_moeda_id option:selected");$(".currency-label").text(e.attr("data-label")),"pagar"===$("#tipo_da_conta").val()&&preencher_moeda_label()})}}function preencher_moeda_label(){$("#div_contas_em_massa #moeda_label").text($("#conta_a_pagar_moeda_id option:selected").text())}function calcula_e_preenche_valor_inputs(t,e,i,n){var o=to_float(t.val()),a=to_float(i.val()),r=to_float(n.val()),s=calcula_valor_liquido(o,a,r);preencheInput(i,a),preencheInput(n,r),preencheInput(e,s),t.on("change",function(){o=to_float(this.value),s=calcula_valor_liquido(o,a,r),preencheInput(e,s)}),i.on("change",function(){o=to_float(t.val()),r=to_float(n.val()),a=to_float(this.value),s=calcula_valor_liquido(o,a,r),preencheInput(e,s)}),n.on("change",function(){o=to_float(t.val()),a=to_float(i.val()),r=to_float(this.value),s=calcula_valor_liquido(o,a,r),preencheInput(e,s)}),e.on("change",function(){s=to_float(this.value),preencheInput(n,calcula_juros(s,o)),preencheInput(i,calcula_desconto(s,o))})}function preencheInput(t,e){isNaN(e)||""===e||t.val(Number(e).toFixed(2))}function calcula_valor_liquido(t,e,i){return to_float(i-e+t)}function calcula_juros(t,e){return resultado=t-e,resultado<0?resultado=0:resultado}function calcula_desconto(t,e){return resultado=e-t,resultado<0?resultado=0:resultado}function habilita_ou_desabilita_campos_modal(t,e,i=!1){$(t).prop("readOnly",e),i&&$(t).val(null)}function campos_dinamicos_modal(){$.each($(".campo_ipi_situacao_tributaria_id"),function(){habilita_ou_desabilita_campos_dinamicos_modal(this)})}function habilita_ou_desabilita_campos_dinamicos_modal(t){let e=$(t).attr("id").split("_")[2],i=$("#icms_ja_reduzido_"+e).is(":checked"),n=$(t).val(),o=codigosIcmsDiferimentoNaoPermitido.includes(n);habilita_ou_desabilita_campos_modal("#percentual_diferimento_"+e,o,o),habilita_ou_desabilita_campos_modal(".campo_beneficio_fiscal_"+e,codigosBeneficioFiscalNaoPermitido.includes(n)),habilita_ou_desabilita_campos_modal("#motivo_desoneracao_id_"+e,n==codigoIcmsTributadoPorSt),habilita_ou_desabilita_campos_modal("#aliquota_icms_"+e,n==codigoIcmsIsento),habilita_ou_desabilita_campos_modal("#aliquota_fcp_"+e,n==codigoIcmsIsento),habilita_ou_desabilita_campos_modal("#p_icms_bc_"+e,n==codigoIcmsTributadoPorSt||i)}function habilita_ou_desabilita_campos(t,e){$(t).prop("disabled",e);let i=null;"checkbox"==$(t).attr("type")&&$(t).attr("checked",!1),e&&$(t).val(i).trigger("change",!0)}function readonly_icms(t,e){$(t).prop("readonly",e),e&&$(t).val(0)}function readOnlyCampos(t,e){let i=null;$(t).prop("readonly",e),e&&$(t).val(i)}function inicializaBusca(){const t=document.querySelector("#buscar-adicao"),e=document.querySelectorAll(".panel-info-icms"),i=Array.from(e);filterLinhasUsuario(i,""),t&&t.addEventListener("keyup",function(){filterLinhasUsuario(i,this.value.toLocaleLowerCase())}),expanderAllAdicao()}function filterLinhasUsuario(t,e){const i=t.filter(t=>t.querySelector(".panel-title > a").innerText.toLocaleLowerCase().includes(e));e.length>0&&t.forEach(t=>{t.style.display="none"}),i.forEach(t=>{t.removeAttribute("style")})}function expanderAllAdicao(){const t=document.querySelector("#expander-all-adicao");t&&t.addEventListener("click",function(t){let e=t.target;const i=document.querySelectorAll(".panel-info-icms .panel-title > a")||[];let n=e.dataset.control,o=!1;"on"===n?(e.innerText="Recolher todos",e.dataset.control="off",o=!0):(e.dataset.control="on",e.innerText="Expandir todos",o=!1),i.forEach(t=>{let e=t.dataset.parent;const i=document.querySelector("#collapse"+e.replace("#",""));o?(i.classList.add("in"),i.removeAttribute("style")):i.classList.remove("in")})})}function inicializaBotaoDeIA(){const t=document.getElementById("botao_adicao_inteligencia_artificial");t&&t.addEventListener("click",getSugestoesDescricaoAdicao)}function getSugestoesDescricaoAdicao(){const{url:t}=this.dataset;this.disabled=!0,$("#progress-ia").show();const e=t=>{const{progress:e}=t.detail;updateProgressBarIA({progress:e})};document.addEventListener("inteligenciaArtificalProgresso",e),$.rails.ajax({url:t,method:"GET",dataType:"json",success:()=>{exibe_mensagem_com_status("Por favor, aguarde enquanto nosso sistema realiza a consulta, isso pode levar alguns minutos. Durante esse processo, evite sair da tela para garantir que todos os dados sejam processados corretamente.","warning")},complete:()=>{document.removeEventListener("inteligenciaArtificalProgresso",e)}})}function handleWebSocketIA({data:t}){if("success"===t.status){const e=$("#modal-ia");e.modal(),e.on("confirmed",i=>{Object.keys(t.results).forEach(e=>{let n=$(`.verifica_codigo_item_dis[data-item-id="${e}"]`),o=t.results[e];if(0!==n.length&&(1==i.detail.confirmed||0==i.detail.confirmed&&""===n.val())){if(!o||"null"==o)return;n.val(o),n.addClass("ia-focus")}}),e.off("confirmed"),e.modal("hide")})}$("#botao_adicao_inteligencia_artificial").prop("disabled",!1),exibe_mensagem_com_status(t.message,t.status)}function updateProgressBarIA(t){let e=t.progress;const i=$("#progress-ia");e&&i.find(".progress-bar").css("width",e+"%").attr("aria-valuenow",e).text(e+"%"),100===e&&i.hide()}function mudouInfCompl(t){if(""!=t.value){let e=document.getElementById("pedido_inf_cpl");e.value.split("; ").includes(t.value)||(e.value+=t.value+"; "),t.value=""}}function mudouInfAdFisco(t){document.getElementById("pedido_inf_ad_fisco").value=t.value}function inclui_info_desconto(){let t=document.getElementById("pu_original").value;null!==document.getElementById("item_pedido_pu_alterado_pedido")&&(t=document.getElementById("item_pedido_pu_alterado_pedido").value);let e=document.getElementById("item_pedido_p_desconto").value;if(null!==t&&null!==e){let i="(Desconto: "+e+"%. PU original R$ "+t+")",n=document.getElementById("item_pedido_informacoes_complementares")||document.getElementById("item_pedido_descricao_unificada");""===n.value?n.value=i:n.value.match(/\(Desconto: [a-zA-Z0-9\%., \$]*\)/)?n.value=n.value.replace(/\(Desconto: [a-zA-Z0-9\%., \$]*\)/g,i):n.value=n.value+"; "+i}}function calcula_novo_pu(){let t=document.getElementById("item_pedido_p_desconto").value,e=null;if(null!==t&&""!==t){if(null!==document.getElementById("item_pedido_pu_alterado_pedido")&&(e=document.getElementById("item_pedido_pu_alterado_pedido").value),null!==document.getElementById("pu_original")&&""===e&&(e=document.getElementById("pu_original").value),null!==e){let i=parseFloat(e.replace(",","."));if(i>0){let e=i*(1-parseFloat(t.replace(",","."))/100);null!==e&&(e=arredonda_float(e,configPrecisaoValorUnitario),document.getElementById("item_pedido_pu").value=formata_numero_longo(e))}}}else e=document.getElementById("item_pedido_pu_alterado_pedido").value,document.getElementById("item_pedido_pu").value=formata_numero_longo(to_float(e))}function calcula_pu(t){let e,i;if("item_pedido_p_desconto"==t.id)null!==document.getElementById("item_pedido_p_desconto")&&calcula_novo_pu();else if("item_pedido_pu"==t.id){if(null!==document.getElementById("item_pedido_pu")&&null!==(e=document.getElementById("item_pedido_pu").value)&&(null!==document.getElementById("item_pedido_pu_alterado_pedido")&&(i=document.getElementById("item_pedido_pu_alterado_pedido").value),null!==document.getElementById("pu_original")&&""===i&&(i=document.getElementById("pu_original").value),null!==i)){let t=parseFloat(i.replace(",","."));if(t>0){let i=100*(1-parseFloat(e.replace(",","."))/t);null!==i&&((i=arredonda_float(i,configPrecisaoValorUnitario))>=0?document.getElementById("item_pedido_p_desconto").value=i.toString().replace(".",","):(document.getElementById("item_pedido_p_desconto").value="",document.getElementById("item_pedido_pu_alterado_pedido").value=formata_numero_longo(to_float(e))))}}}else"item_pedido_pu_alterado_pedido"==t.id&&calcula_novo_pu();null!==(e=document.getElementById("item_pedido_pu").value)&&parseFloat(e.replace(",","."))<parseFloat(document.getElementById("pu_entrada").value)&&(alert("ATEN\xc7\xc3O! Voc\xea est\xe1 vendendo o produto por um pre\xe7o inferior ao pre\xe7o de custo."),$("#item_pedido_informacoes_complementares").focus()),calcula_novo_total(),calcula_novo_pu_a_partir_do_total()}function calcula_novo_total(){let t,e,i,n;if(null!==document.getElementById("item_pedido_qtde")&&(t=document.getElementById("item_pedido_qtde").value),null!==t&&""!==t&&(null!==document.getElementById("item_pedido_pu")&&(e=document.getElementById("item_pedido_pu").value),null!==e&&(i=parseFloat(e.replace(",",".")))>=0)){let e=i*(n=parseFloat(t.replace(",",".")));null!==e&&(e=arredonda_float(e,configPrecisaoValorUnitario),document.getElementById("item_pedido_total").value=formata_numero_longo(e))}}function calcula_novo_pu_a_partir_do_total(){let t,e,i={".":"",",":"."};if(null!==document.getElementById("item_pedido_total")&&(t=document.getElementById("item_pedido_total").value),null!==t&&""!==t&&(null!==document.getElementById("item_pedido_qtde")&&(e=document.getElementById("item_pedido_qtde").value),null!==e)){let n=parseFloat(e.replace(/[.,]/g,t=>i[t]));if(n>0){let e=parseFloat(t.replace(",","."))/n;null!==e&&(e=arredonda_float(e,configPrecisaoValorUnitario),document.getElementById("item_pedido_pu").value=formata_numero_longo(e))}}}function calcula_total(t){"item_pedido_qtde"==t.id&&null!==document.getElementById("item_pedido_qtde")&&calcula_novo_total()}function calcula_pu_a_partir_do_total(t){"item_pedido_total"==t.id&&null!==document.getElementById("item_pedido_total")&&calcula_novo_pu_a_partir_do_total()}function carregaDadosDoVeiculoPedido(t){$("#pedido_stakeholder_transportadora_id").val(t.id),$("#pedido_placa_veiculo").val(t.placa_veiculo),$("#pedido_uf_veiculo_id").val(t.uf_veiculo_id),$("#pedido_antt").val(t.antt),$(".campos_veiculo").show()}function resetModal(){$("#modal-importar-produtos").on("hidden.bs.modal",()=>{$("#errors_por_planilha").toggle(!1)})}function desabilitaBtnImportarPlanilha(){$.rails.enableFormElement($("#btn-importar-planilha"))}function resetPlanilha(){arquivoPlanilha=null;let t=$("#pedido_arquivo");t.length>0&&t.val(""),$("#reset-arquivo-nome").length>0&&$(".image-preview-clear").click()}function toggleButtonsForm(){var t=$(".tab-ativa").next(),e=$(".tab-ativa").prev();t.length>0?$(".botao_prosseguir_pedido").show():$(".botao_prosseguir_pedido").hide(),e.length>0?$(".botao_voltar_pedido").show():$(".botao_voltar_pedido").hide()}function submitShortcut(t){t.ctrlKey&&"Enter"===t.key&&submitNovoProduto()}function submitNovoProduto(){$.rails.disableFormElement($("#botao-incluir-produto"));const t=$("#formulario-novo-produto");$("#buscar_item_produtos_combos_packs").is(":checked")?t.find("form#formulario_produtos_por_combos_packs").submit():t.find("form#new_item_pedido.simple_form.new_item_pedido").submit()}function confirma_excluir_produto_pedido(t){swal({title:"Deseja realmente excluir os produtos selecionados?",type:"warning",showCancelButton:!0,confirmButtonColor:"#006cb5",cancelButtonColor:"#d82b0a",confirmButtonText:"Sim",cancelButtonText:"Cancelar"}).then(function(){$("#loader-anexos").show(),$("#listagem_produtos").hide();var e=[];$('input[name="seleciona[]"]:checked').each(function(){e.push(this.value)}),$.ajax({url:"/pedidos/"+t+"/produtos/excluir_itens",type:"POST",data:{selecionados:e},suppressErrors:!0,success:function(e){window.location="/pedidos/"+t+"/produtos/edit?msg_sucesso="+e.message},error:function(e){window.location="/pedidos/"+t+"/produtos/edit?msg_erro="+e.responseJSON.error}})})["catch"](function(){})}function calculaDescontoPedido(t){var e=$("#formulario_aplicar_desconto #valor_pedido").val(),i=$("#formulario_aplicar_desconto #valor_desconto").val(),n=$("#formulario_aplicar_desconto #porcentagem_desconto").val();e&&(e=parseFloat(e.replace(",",".")))>0&&("valor_desconto"===t.id&&i?(n=100*(1-(e-(i=parseFloat(i.replace(",","."))))/e),novo_valor_pedido=e*(1-n/100),preenche_campos_desconto(i,n,novo_valor_pedido)):"porcentagem_desconto"===t.id&&n&&(n=parseFloat(n.replace(",",".")),novo_valor_pedido=e*(1-n/100),preenche_campos_desconto(i=e-novo_valor_pedido,n,novo_valor_pedido)))}function preenche_campos_desconto(t,e,i){t=t.toFixed(2).replace(".",","),e=e.toFixed(4).replace(".",","),i=i.toFixed(2).replace(".",","),$("#formulario_aplicar_desconto #valor_desconto").val(t),$("#formulario_aplicar_desconto #porcentagem_desconto").val(e),$("#formulario_aplicar_desconto #novo_valor_pedido").val(i)}function calculaAcrescimoPedido(t){let e=$("#formulario_aplicar_desconto #valor_pedido").val(),i=$("#formulario_aplicar_desconto #valor_acrescimo").val(),n=$("#formulario_aplicar_desconto #porcentagem_acrescimo").val();if(e&&(e=parseFloat(e.replace(",",".")))>0)if("valor_acrescimo"===t.id&&i){preenche_campo_acrescimo(i=parseFloat(i.replace(",",".")),n=100*((e+i)/e-1),e*(1+n/100))}else if("porcentagem_acrescimo"===t.id&&n){const t=e*(1+(n=parseFloat(n.replace(",",".")))/100);preenche_campo_acrescimo(i=t-e,n,t)}}function preenche_campo_acrescimo(t,e,i){t=t.toFixed(2).replace(".",","),e=e.toFixed(4).replace(".",","),i=i.toFixed(2).replace(".",","),$("#formulario_aplicar_desconto #valor_acrescimo").val(t),$("#formulario_aplicar_desconto #porcentagem_acrescimo").val(e),$("#formulario_aplicar_desconto #novo_valor_pedido").val(i)}function calculaLoteRestante(t,e){var i=t-$(".qtde_produtos_lote").serializeArray().reduce(function(t,e){return t+to_float(e.value)},0);e.val(formata_numero(i))}function ativandoAutoCompleteDocumento(t){var e=definindoRotaBuscaDocumento(t);$("#documento").autocomplete({autoFocus:!0,source:e,delay:800})}function definindoRotaBuscaDocumento(t){let e;switch(t){case"dis":e="/dis/busca";break;case"nfe_terceiros":e="/compras/busca";break;case"nfe_entradas":e="/nota_fiscals/busca_entrada";break;case"ordem_de_compra":e="/ordem_de_compras/buscar"}return e}function inicializaBuscaMovimentacaoEntrada(){$(".busca_movimentacao_entrada").each(function(){var t=$(this).data("autocomplete-source"),e=$(this);e.dataMap={},e.selectize({preload:"focus",valueField:"id",labelField:"label",searchField:"label",persist:!1,render:{option:function(t,e){return"<div><span>"+e(t.label)+"</span></div>"}},load:function(e,i){$.ajax({url:t,data:{term:e,tipo_movimentacao:"entrada"},type:"GET",error:function(){i()},success:function(t){i(t)}})},onOptionAdd:function(t,i){e.dataMap[t]=i},onChange:function(t){t&&e.dataMap[t]&&$("#item_pedido_chave_nfe_exportacao").val(e.dataMap[t].chave_acesso_nfe)}})})}function processaCamposSeriaisDinamicos(){$(".serial_number").on("keydown",t=>{const e=$(".serial_number:visible");9===t.which&&0===e.filter(function(){return""===this.value}).length&&$(".adiciona_novo_serial").click()})}function handleClienteSelect(t){const e=$("#pedido_id").val(),i=e?{pedido_Id:e}:{};t&&$.ajax({url:`/clientes/${t}/cfops`,type:"GET",dataType:"jsonp",data:{...i}})}function aprovarPedido(t){const e=$(this).data("id");let i=!1;$.rails.ajax({url:`pedidos/${e}`,type:"GET",dataType:"json",async:!1,success:t=>{i=t.permite_desmembramento},error:()=>{exibe_mensagem_com_status("Ocorreu um erro inesperado. Por favor, recarregue a p\xe1gina e tente novamente.","alert")}}),i&&(t.preventDefault(),t.stopPropagation(),swal({title:"Deseja desmembrar este pedido?",text:"Este processo n\xe3o pode ser desfeito.",icon:"warning",showCloseButton:!0,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#FFC107",confirmButtonText:"Sim, desmembrar!",cancelButtonText:"N\xe3o desmembrar"}).then(()=>{processaDesmembramento("aprovado",e,!0)})["catch"](function(t){"cancel"==t&&processaDesmembramento("aprovado",e,!1)}))}function processaDesmembramento(t,e,i){$.rails.ajax({url:`/pedidos/${e}/atualizando_status_orcamento`,type:"PUT",data:{id:e,status_orcamento:t,desmembramento:i}}).then(function(){})}function changeLeituraEEscritaCheckBox(t,e){const i=$(t).data("id"),n=$(`#${e}_${e}_${i}_leitura_e_escrita`);$(t).is(":checked")?(n.show(300),n.prop("checked",!0)):(n.hide(300),n.prop("checked",!1))}function filterLinhasUsuario(t,e){const i=t.filter(t=>t.innerText.toLocaleLowerCase().includes(e));e.length>0&&t.map(t=>{t.style.display="none"}),i.map(t=>{t.removeAttribute("style")})}function exibe_esconde_div_plano_de_conta_na_compra(){$("#compra_vincular_contas_a_pagar").is(":checked")?$("#select_plano_de_conta").show():$("#select_plano_de_conta").hide()}function itemPossuiValorDeSt(t){return"true"==$("#possui_valor_de_st_"+t).val()}function itemPossuiValorDeFCP(t){return"true"==$("#possui_valor_de_fcp_"+t).val()}function mostra_form_vincula_processo_nfe_terceiros(t){$("#processo_compra_id").val(t),exibe_form_complementar($("#compra-"+t)),$("#form_complementar_td").html($("#div_tela_vincula_processo").clone().show())}function VerificaSeCodigoExiste(){let t=$(this).data("item-id");$.ajax({url:"/produto_estoques/verifica_se_codigo_existe",type:"POST",dataType:"json",data:{codigo:this.value},success:function(e){$("#aviso_codigo_duplicado_"+t).toggle(e)}})}function validaFiltroArquivo(t,e){t.preventDefault();let i=$(".data-filtro"),n=i[0].value,o=i[1].value;if(n&&o){let t=$("#filtro-compras");t.find('input[name="format"]').val(e),t.submit()}else{exibe_erro(`Os campos de data precisam estar preenchidos para extrair o ${"xlsx"===e?"excel":"pdf"}.`)}}function submitFormContasProcessos(t,e="conta-receber"){let i=t.serializeArray().reduce(function(t,e){return t[e.name]=e.value,t},{}),n=trataCamposArquivo(t),o=new FormData;trataCamposValor(i,e);for(let t in i)o.append(t,i[t]);n&&o.append(n.name,n.value),$.rails.ajax({url:t.prop("action"),data:o,contentType:!1,processData:!1,dataType:"jsonp",type:"POST",complete:handleResposta(e)})}function trataCamposValor(t,e){"conta-receber"===e?t["contas_a_receber[valor_a_receber]"]=t["contas_a_receber[valor_a_receber]"].replace(",","."):t["conta_a_pagar[valor]"]=t["conta_a_pagar[valor]"].replace(",",".")}function trataCamposArquivo(t){let e=t.find("input[type='file']");return e[0].files.length>0&&{name:e[0].name,value:e[0].files[0]}}function handleResposta(t){"conta-receber"===t?$("#select2-contas_a_receber_cliente_id-container").html(""):$("#conta_a_pagar_custo_de_mercadoria").prop("checked",!0)}function handleViaChangeCrt(){$(".caso-rodoviario").each(function(t,e){let i=e.dataset.label;e.dataset.label=e.innerText,e.innerText=i}),$(".remove-rodoviario").toggleClass("hide")}function selecionaLabelCorretoDeDatasDoProcesso(){"aguarda_embarque"==$("#processo_status").val()?($("#data_embarque").html("Data prevista de embarque"),$("#data_chegada").html("Data prevista de chegada")):"aguarda_chegada"==$("#processo_status").val()?($("#data_embarque").html("Data de embarque"),$("#data_chegada").html("Data prevista de chegada")):($("#data_embarque").html("Data de embarque"),$("#data_chegada").html("Data de chegada"))}function InicializaAcaoEmMassa(){$(".acoes_em_massa_processos").on("click.rails",function(t){t.preventDefault();let e=this.dataset.method;const i=$("#form-processo-acao-em-massa");let n=`${this.href}?${$.param(i.serializeArray())}`;return i.serializeArray().some(t=>"seleciona[]"==t.name)?(i.attr("action",n),i.attr("method",e),i.submit(),!1):(swal("Erro!","Nenhum processo foi selecionado.","error"),!1)})}function confirmarCarregarPagamentosDi(t,e){swal({title:"Deseja substituir os dados j\xe1 cadastrados com os dados da Declara\xe7\xe3o de Importa\xe7\xe3o?",text:"",type:"warning",confirmButtonColor:"#2A578C",confirmButtonText:"Sim",showCloseButton:!0,showCancelButton:!0,cancelButtonText:"N\xe3o",width:"500px"}).then(()=>{carregarPagamentosDi(t,e,!0)})["catch"](i=>{"cancel"==i&&carregarPagamentosDi(t,e,!1)})}function carregarPagamentosDi(t,e,i){let n=`/processos/${t}/carregar_pagamentos_dis/new`;$.rails.ajax({url:n,type:"GET",data:{processo_id:t,can_update:e,sobrescrever_pagamentos:i},dataType:"jsonp"})}function avisoSemDespesas(t){swal({title:"N\xe3o h\xe1 despesas cadastradas neste processo.",type:"warning",confirmButtonColor:"#2A578C",confirmButtonText:"Cadastrar",showCloseButton:!0,showCancelButton:!0,cancelButtonColor:"#D82B0A",cancelButtonText:"Fechar",width:"500px"}).then(function(){Cookies.set("form-processo-tab","tab_contas_a_pagar"),window.location="/processos/"+t+"/edit"})}function avisoCambioPdf(t,e){console.log(e),swal({title:"A taxa de c\xe2mbio informada para este numer\xe1rio \xe9 de R$ "+formata_numero(to_float(e))+".",text:"Deseja gerar o numer\xe1rio com esta taxa?",type:"warning",confirmButtonColor:"#2A578C",confirmButtonText:"Sim",showCloseButton:!0,showCancelButton:!0,cancelButtonText:"N\xe3o, atualizar",width:"500px"}).then(function(){window.open("/processos/"+t+"/solicitacao_de_numerario"),"undefined"!=typeof ativaSegmentAnalytics&&ativaSegmentAnalytics("Gerar PDF de numer\xe1rio","bot\xe3o",null)},function(e){"cancel"==e&&(Cookies.set("form-processo-tab","tab_numerario"),window.location="/processos/"+t+"/edit")})}function getTabHref(t){return t.href.replace(window.location.href+"#","")}function activeTabProcesso(){let t=Cookies.get("form-processo-tab");t&&($(".modal-cadastro-processo .li-tab").removeClass("active"),$(".modal-cadastro-processo .tab-pane").removeClass("active"),$(".modal-cadastro-processo").find('a[href="#'+t+'"]').closest(".li-tab").addClass("active"),$(".modal-cadastro-processo").find("#"+t+".tab-pane").addClass("active")),exibirContinuarFormProcesso()}function activeTabByEtapa(){const t={solicitacao_numerario:"tab_dados_gerais",registro_di:"tab_desembaraco",desembaraco:"tab_di",pagamento_despesas:"tab_contas_a_pagar",prestacao_contas:"tab_prestacao_contas",finalizado:"tab_dados_gerais"};let e=$("#processo_etapa").val();e&&(Cookies.set("form-processo-tab",t[e]),activeTabProcesso())}function exibirContinuarFormProcesso(){var t=Cookies.get("form-processo-tab");t&&0===$(".modal-cadastro-processo").find('a[href="#'+t+'"]').closest("li").nextAll().not(".hide").first().length?($(".modal-cadastro-processo .btn-continuar").hide(),$(".modal-cadastro-processo .btn-salvar").removeClass("btn-default").addClass("btn-primary")):($(".modal-cadastro-processo .btn-continuar").show(),$(".modal-cadastro-processo .btn-salvar").removeClass("btn-primary").addClass("btn-default"))}function preencheInputsTransferencia(){if($("#saldo_final").length>0){var t=calculaSaldoFinal();$("#saldo_final").val(t),toggleFormTransferencia(t),preencheTdSaldoFinal(t)}}function calculaSaldoFinal(){var t=to_float($("#total_receitas").val()),e=to_float($("#total_despesas").val()),i=to_float($("#total_transaferencias_recebidas").val()),n=to_float($("#total_transaferencias_enviadas").val());return to_float($("#processo_saldo_inicial").val())+t+i-e-n}function toggleFormTransferencia(t){isPresent(t)&&(to_float(t)>0?($(".form-transferencia-saldo").show(),$("#transferir_saldo").on("change",function(){$(".input-selecione-processo").toggle($(this).is(":checked"))})):$(".form-transferencia-saldo").hide())}function preencheTdSaldoFinal(t){var e=t.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});to_float(t)>=0?$(".td-saldo-final").addClass("green").removeClass("red"):$(".td-saldo-final").addClass("red").removeClass("green"),$(".td-saldo-final").text(e)}function modalidadeProcessoHandleChange(){toggleBlockContaEOrdemFields(this),toggleBlockTabs(this),handleStakeholderField(this)}function toggleBlockContaEOrdemFields(e){let i=$(e).val(),n=$('[for="processo_cliente_cnpj"]'),o=$(".conta-e-ordem-block");switch(i){case"conta_e_ordem":o.prop("disabled",!0),n.text(t("activerecord.attributes.processo.stakeholder_cliente_id",{tipo:"Adquirinte"}));break;case"encomenda":o.prop("disabled",!1),n.text(t("activerecord.attributes.processo.stakeholder_cliente_id",{tipo:"Encomendante"}));break;default:o.prop("disabled",!1),n.text(t("activerecord.attributes.processo.stakeholder_cliente_id",{tipo:"Adquirinte"}))}}function toggleBlockTabs(t){let e=$(t).val(),i=$(".modalidade-direta-hide");i.removeClass("hide"),"importacao_direta"===e&&i.addClass("hide")}function handleStakeholderField(t){$("#processo_cliente_cnpj").removeAttr("readonly"),"importacao_direta"==$(t).val()&&($("#processo_cliente_cnpj").val(""),$("#processo_stakeholder_cliente_id").val(""),$("#processo_cliente_cnpj").attr("readonly",!0))}function tipoPagamentoSelecionado(){const t=$(this).data("url");let e=$(this).val()||"clear";$.rails.ajax({url:`${t}/${e}`,type:"get",dataType:"json",success:({tipo_de_pagamento:t})=>{preencheCamposPagamento(t)},error:()=>{}})}function preencheCamposPagamento(t){const e=Object.keys(t),i=$("#nova-conta-a-pagar-proceso");e.forEach(e=>{let n=i.find(`[name="conta_a_pagar[${e}]"]`);switch(e){case"stakeholder_id":fillStakeholderSelect(n[0],t[e]);break;case"plano_de_conta_id":fillPlanoDeContasSelect(t[e]),n.val(t[e]);break;case"moeda_id":n.val(t[e]||1);break;default:n.val(t[e])}n.hasClass("chosen-select")&&n.trigger("change")})}function fillStakeholderSelect(t,e){let i=t.selectize;e?i.setValue(e,!1):i.clear()}function fillPlanoDeContasSelect(t){const e=new CustomEvent("changePlanoDeContas",{detail:t});document.dispatchEvent(e)}function chamaChange(){$(".item_producao.pu:visible").change(),$(".item_producao.qtde:visible").change()}function carregaFormulario(t,e){var i=t.field,n=i.find(e+".descricao"),o=i.find(e+".id_field"),a=i.find(e+".codigo"),r=i.find(e+".pu"),s=i.find(e+".qtde"),l=i.find(e+".unidade-de-medida"),c=i.find(e+".unidade-de-medida-id");n.autocomplete({source:n.data("autocomplete-source"),select:function(t,e){o.val(e.item.id),a.val(e.item.codigo),l.text(e.item.codigo_unidade_de_medida),c.val(e.item.id_unidade_de_medida),r.val(e.item.pu_saida_s),s.val("1"),chamaChange()}}),a.autocomplete({source:a.data("autocomplete-source"),select:function(t,e){o.val(e.item.id),a.val(e.item.codigo),l.text(e.item.codigo_unidade_de_medida),c.val(e.item.id_unidade_de_medida),r.val(e.item.pu_saida),n.val(e.item.descricao),r.val(e.item.pu_saida_s),s.val("1"),chamaChange()}})}function requisitaSimulacao(t){const e=montaRequisicao(t||!1);"true"==$("#simula").val()?$.get("/simula_fatura_parcelas",e,function(t){$("#simulacao").html(t),$(".datepicker_tag, .datepicker").datepicker()}):$("#simula").val("true")}function montaRequisicao(t){return{pedido_id:$("#fatura_pedido_id").val(),compra_id:$("#fatura_compra_id").val(),ordem_de_compra_id:$("#fatura_ordem_de_compra_id").val(),condicoes:$(".fatura-condicoes").first().val(),forma_de_pagamento:$(".fatura-forma-de-pagamento").first().val(),numero:$(".fatura-numero").first().val(),vencimento:$(".fatura-vencimento").first().val(),intervalo_vencimento:$(".fatura-intervalo-vencimento").first().val(),intervalo:$(".fatura-intervalo-parcelas").first().val(),tipo_intervalo_vencimento:$(".fatura-tipo-intervalo-vencimento").first().val(),tipo_intervalo:$(".fatura-tipo-intervalo-parcelas").first().val(),data_sinal:$(".fatura-data-sinal").first().val(),valor_sinal:$(".fatura-valor-sinal").first().val(),parcelas:$(".fatura-quantidade-parcelas").first().val(),data_inicio:$("#fatura_dt_inicio_pagamento").val(),sufixo:$(".fatura-sufixo").first().val(),primeira_vez:t}}function preenchendoCondicaoPagamento(t){const e="pagamento_unico"===t.forma_pagamento?0:1;$("#fatura_documento_id").val(t.documento_id),$("#fatura_forma_pagamento").val(e).trigger("change"),$("#fatura_plano_de_conta_id").val(t.plano_de_conta_id).trigger("change"),$("#fatura_conta_corrente_id").val(t.conta_corrente_id).trigger("change"),$("#fatura_dias_para_primeira_parcela").val(t.dias_para_primeira_parcela),$("#fatura_dias_para_sinal").val(t.dias_para_sinal),$("#fatura_quantidade_parcelas").val(t.quantidade_parcelas),$("#fatura_intervalo_parcelas").val(t.intervalo_parcelas),$("#fatura_tipo_intervalo_parcelas").val(t.tipo_intervalo_parcelas),$("#fatura_intervalo_a_vista").val(t.intervalo_a_vista),$("#fatura_tipo_intervalo_a_vista").val(t.tipo_intervalo_a_vista),refreshDataDoSinal($("#fatura_dias_para_sinal").val()),refreshDataPrimeiraParcela($("#fatura_dias_para_primeira_parcela").val()),refreshDataVencimento($("#fatura_intervalo_a_vista").val())}function buscandoCondicaoPagamento(t){$.ajax({url:"/condicoes_pagamento/"+t,success:function(t){preenchendoCondicaoPagamento(t.condicao_pagamento),requisitaSimulacao()}})}function refreshDataDoSinal(t){$("#fatura_data_do_sinal").datepicker("setDate",moment(new Date).add(parseInt(t),"days").format(data_format))}function refreshDataPrimeiraParcela(t){$("#fatura_dt_inicio_pagamento").datepicker("setDate",moment(new Date).add(parseInt(t),"days").format(data_format))}function refreshDataVencimento(t){const e=isNaN(t)?0:t;setTimeout(function(){$("#fatura_data_de_vencimento").datepicker("setDate",moment(new Date).add(parseInt(e),traducaoDePeriodosDeData($("#fatura_tipo_intervalo_a_vista").val())).format(data_format)),requisitaSimulacao()},1)}function refreshDiasParaSinal(t){let e=calculaDiferencaEmDias(t);$("#fatura_dias_para_sinal").val(e)}function refreshDiasParaPrimeiraParcela(t){let e=calculaDiferencaEmDias(t);$("#fatura_dias_para_primeira_parcela").val(e)}function calculaDiferencaEmDias(t){const e=t.split("/"),i=new Date(e[2],e[1]-1,e[0]),n=new Date,o=i.getTime()-n.getTime();return Math.ceil(parseFloat(o/fator_milisegundos_dias))}function calculaDiferencaEmMeses(t){return Math.ceil(calculaDiferencaEmDias(t)/30)}function sincronizarDataPrimeiraParcela(t){"valor_fatura_parcela_valor_a_receber_A_data"==t.id&&$("#fatura_dt_inicio_pagamento").val(t.value).trigger("change")}function refreshIntervaloParaVencimentoAVista(t){const e=t.length>0?t:moment(new Date).format("DD/MM/YYYY"),i="dias"===$("#fatura_tipo_intervalo_a_vista").val()?calculaDiferencaEmDias(e):calculaDiferencaEmMeses(e);$("#fatura_intervalo_a_vista").val(i)}function atualiza(t,e){bc=$(".bc."+t+"[data-index="+e+"]").val(),p=$(".p."+t+"[data-index="+e+"]").val(),valor=formata_numero(to_float(bc)*(to_float(p)/100)),$(".v."+t+"[data-index="+e+"]").val(valor)}function assinalaEmMassa(t,e){$(".cst-"+t).val(e).trigger("change")}function carrega_municipios_na_escrituracao_manual(t,e){isPresent(t)&&$.ajax({url:"/ufs/"+t+"/municipios/todos",type:"GET",success:function(t){$("#escrituracao_manual_municipio_"+e+"_id").children().remove(),$("#escrituracao_manual_municipio_"+e+"_id").append('<option value="">Selecione o Munic\xedpio</option>'),t.municipios.forEach(function(t){$("#escrituracao_manual_municipio_"+e+"_id").append('<option value="'+t.id+'">'+t.nome+"</option>")})}})}function cargaTributariaMediaDivToggle(){$("#uf").val()==MATO_GROSSO_ID?$("#carga_tributaria_media_div").show():$("#carga_tributaria_media_div").hide()}function preenche_dados_emissor(t,e){$("#emissor_razao_social").val(t.razao_social),$("#emissor_nome_fantasia").val(t.nome_fantasia),$("#cep").val(t.cep),$("#endereco").val(t.logradouro),$("#numero").val(t.numero),$("#emissor_complemento").val(t.complemento),$("#bairro").val(t.bairro),$("#municipio_ibge").val(t.codigo_ibge_municipio),$("#municipio_ibge").trigger("change"),$("#uf").val(ufs_id[t.uf]),$("#uf").trigger("change"),$("#erro-busca-numero-do-documento").hide(),$("#success-busca-numero-do-documento").show(),consulta_cnpj_sefaz(e,t.uf)}function busca_pelo_cnpj_emissor(t){let e=busca_stakeholder_por_documento(t);e.done(function(e){let i;e.stakeholders!=undefined&&0==e.stakeholders.length?((i=$.ajax("/consulta_cnpj_apis",{data:{cnpj:t},suppressErrors:!0})).done(e=>preenche_dados_emissor(e,t)),i.fail(function(){erro("Ops! N\xe3o encontramos o cadastro correspondente ao documento informado em nossa base de dados. Isso n\xe3o significa que o documento informado est\xe1 errado, mas voc\xea ter\xe1 que preencher as informa\xe7\xf5es manualmente, com a op\xe7\xe3o Preenchimento Manual abaixo."),$("#fail-busca-numero-do-documento-valido").show()})):erro("J\xe1 existe um cadastro com este CNPJ.")}),e.fail(function(){
erro("Ops! N\xe3o encontramos o cadastro correspondente ao documento informado em nossa base de dados. Isso n\xe3o significa que o documento informado est\xe1 errado, mas voc\xea ter\xe1 que preencher as informa\xe7\xf5es manualmente, selecionando a op\xe7\xe3o Preenchimento Manual.")})}function mostra_form_mail_termos_de_uso(t,e){$("#emissor_id").val(t),$("#email").val(e),exibe_form_complementar($("#emissor-"+t)),$("#form_complementar_td").html($("#div_email_termos_de_uso").clone().show())}function mostra_form_mail_incentivo(t,e,i){$("#i_emissor_id").val(t),$("#i_email").val(e),$("#i_tipo_email").val(i),exibe_form_complementar($("#emissor-"+t)),$("#form_complementar_td").html($("#div_email_incentivo").clone().show())}function continuaAlteracaoDeTributacao(t){$(".btn-modalidade").removeClass("selecionado"),t.addClass("selecionado"),$("#emissor_modalidade_id").val(t.data("id")).trigger("change")}function instrucoesSimplesNacionalToggle(){$("#emissor_modalidade_id").val()==id_modalidade_simples?$("#instrucoes-simples-nacional").show():$("#instrucoes-simples-nacional").hide()}function habilita_desabilita_csosn(){$("#emissor_csosn_id").prop("disabled",$("#emissor_contribuinte_icms").is(":checked")),$("#emissor_p_aproveitamento_icms").prop("disabled",!$("#emissor_contribuinte_icms").is(":checked"))}function aplicaClipBoard(){new Clipboard(".clipboard-termos-de-uso").on("success",function(){alert("Link copiado.\nAten\xe7\xe3o! N\xe3o acesse o link! Caso acessado ele ir\xe1 confirmar a leitura dos termos de uso para o usu\xe1rio")})}function toggleDivCobranca(){$("#div_cobranca").toggle($("#conta_corrente_conta_cobranca").is(":checked"))}function selecionaBanco(t){$("#conta_corrente_banco_id").val(t),$("#conta_corrente_banco_id").change()}function calculaPrecoDeVenda(){let t=$("#atualizador_de_pu_de_saida_dos_produtos_fator_sobre_preco_de_custo").val().replace(",",".");if(t==undefined||null==t)return;let e=$("#atualizador_de_pu_de_saida_dos_produtos_produtos_ids").val().split(" "),i=$("#calcula_somente_produtos").is(":checked"),n=$.ajax("/atualizador_de_pu_de_saida_dos_produtos/calcula_pu",{type:"POST",data:{margem_lucro:t,produtos_ids:e,somente_produtos:i},suppressErrors:!0});n.done(function(t){$(t).each(function(){let t=String($(this)[0].pu_saida.toFixed(4)).replace(".",",");$(`#atualizador_de_pu_de_saida_dos_produtos_pus_saida_produto_estoque_${$(this)[0].id}_pu_saida`).val(t)})}),n.fail(function(){})}function calculaValorTotal(){let t=(100*(parseFloat($("#produto_estoque_valor_total_saida").val().replace(",","."))/parseFloat($("#valor_total_dos_produtos").val())-1)).toFixed(4).toString().replace(".",",");$("#atualizador_de_pu_de_saida_dos_produtos_fator_sobre_preco_de_custo").val(t),calculaPrecoDeVenda()}function agruparStakeholders(){$("#btn-agrupar-stakeholders").hide(),$("#acoes-check-stakeholder").show(),$(".check-stakeholder").removeClass("escondido")}function fecharSelecaoStakeholders(){$(".check-stakeholder").addClass("escondido"),$("#acoes-check-stakeholder").hide(),$("#btn-agrupar-stakeholders").show()}function confirmarSelecaoStakeholders(){$.post("/stakeholders/acoes_em_massa",{seleciona:$.map($('.check-stakeholder > input[type="checkbox"]:checked'),function(t){return t.value})})}function loadMunicipalitiesForState(t,e){const i=$(e).data("index"),n=`#stakeholder_enderecos_attributes_${i}_`,o=$(e).data("municipio");isPresent(e.value)&&$.ajax({url:"/ufs/"+e.value+"/municipios/todos",type:"GET",success:function(t){$(n+"municipio_id").children().remove(),$(n+"municipio_id").append('<option value="">Selecione o Munic\xedpio</option>'),t.municipios.forEach(function(t){$(n+"municipio_id").append('<option value="'+t.id+'">'+t.nome+"</option>")}),$(n+"municipio_id").val(o),$(n+"municipio_id").change(),$(n+"uf_id").data("municipio",null),completarMunicipioExterior(i),cepHabilitadoSeNacional(i)}})}function completarMunicipioExterior(t){if(isUfNacional(t))return;const e=$(`#stakeholder_enderecos_attributes_${t}_municipio_id`),i=e.data("id-exterior");e.val(i).change()}function isUfExterior(t){const e=$(`#stakeholder_enderecos_attributes_${t}_uf_id`),i=e.data("id-exterior");return parseInt(e.val())===i}function isUfNacional(t){return!isUfExterior(t)}function cepHabilitadoSeNacional(t){const e=$(`#stakeholder_enderecos_attributes_${t}_cep`);isUfNacional(t)?e.attr("readonly",!1):(e.attr("readonly",!0),e.val(""))}function autoCompleteAddressByZipCode(t,e){var i="#stakeholder_enderecos_attributes_"+$(e).data("index")+"_",n=$(i+"cep").val();if(""!==$.trim(n))if(/^[0-9]{5}-?[0-9]{3}$/.test(n)){var o="/api/v2/cep.json?cep="+n.replace(/[^\d]/g,"");$.getJSON(o,function(t){t&&isBlank(t.erro)?isPresent($(i+"logradouro").val())?swal({title:"Deseja Atualizar os dados de: ",html:'<ul style="text-align: start;margin-left: 15px;"><li>Logradouro</li><li>Bairro</li><li>UF</li><li>Munic\xedpio</li></ul>',type:"question",allowOutsideClick:"false",allowEscapeKey:"false",showCancelButton:"true",confirmButtonText:"Sim",cancelButtonText:"N\xe3o"}).then(function(){fillInAddressByZipcodeResult(t,i)},function(t){"cancel"===t&&swal({title:"Dados N\xe3o Atualizados",type:"error"})})["catch"](swal.noop):fillInAddressByZipcodeResult(t,i):swal({title:"Dados n\xe3o encontrados para este CEP",type:"warning"})})}else swal({title:"CEP inv\xe1lido",type:"warning"});else swal({title:"Informe um CEP",type:"warning"})}function fillInAddressByZipcodeResult(t,e){var i=$(e+"uf_id option:contains("+t.uf+")").val();municipioRequest(ufs_id[t.uf],t.ibge).done(function(n){isPresent(t.logradouro)?$(e+"logradouro").val(t.logradouro):$(e+"logradouro").val(""),isPresent(t.bairro)?$(e+"bairro").val(t.bairro):$(e+"bairro").val(""),$(e+"uf_id").val(i),$(e+"uf_id").data("municipio",n.municipio.id),$(e+"uf_id").change(),$(e+"pais_id").val($(e+"pais_id").data("brasil-id")),$(e+"pais_id").change()}),$(e+"numero").focus()}function municipioRequest(t,e){return $.ajax("/municipios",{data:{uf_id:t,codigo_ibge:e,format:"json"}})}function initContato(t){$(".star.contato").tooltip(),$(".star.contato").click(function(){$(".star.contato").prop("checked",!1),$(this).prop("checked",!0)});const e=$(".select-country");e.select2(countryOptionsSelect2(t)),e.map((t,e)=>{let i=$(e).data("selected");if(i&&1!=i){let t=allCountries.find(t=>t.sigla===String(i));$(e).val(i).trigger("change.select2"),$(e).parent().find(".ddi-input").val(t.code)}}),autocompleteDdiOnSelectCountry(e)}function countryOptionsSelect2(t){let e={templateResult:formatState,templateSelection:formatStateSelect,data:allCountries,dropdownCssClass:"country-select-ddi",selectionCssClass:"container-select-ddi",theme:"bootstrap",language:"pt-BR"};return void 0===t&&(e=Object.assign(e,{dropdownParent:$(".content-fields-contacts")})),e}function autocompleteDdiOnSelectCountry(t){t.on("select2:select",t=>{let{data:e}=t.params;e&&$(t.target).parent().find(".box-input-ddi").find(".ddi-input").val(e.code)})}function formatState(t){if(!t.id)return t.text;return $(`<span class="box-flas-select drop-input">\n      <span class="iti__flag iti__${t.sigla}"></span>\n      <span class="country-name">${t.text} </span>\n    </span>`)}function formatStateSelect(t){if(!t.id)return t.text;return $(`<span class="box-flas-select selected">\n      <span class="iti__flag iti__${t.sigla}"></span>\n      <span class="country-name"></span>\n    </span>`)}function submitAcaoEmMassaNcm(t,e){$("#classificacao_fiscal_acao_em_massa #acao_em_massa_action").val(t),$("#botao_classificacao_fiscal_acao_em_massa").attr("disabled","disabled"),$("#botao_classificacao_fiscal_acao_em_massa").html('<i class="fa fa-spinner fa-pulse fa-fw"></i>'+e),$("#classificacao_fiscal_acao_em_massa").submit()}function gerarRelatorio(t){$("#classificacao_fiscal_acao_em_massa #acao_em_massa_action").val(t),$("#classificacao_fiscal_acao_em_massa").submit()}function confirmaMonitoramentoNcm(t,e,i){let n="";n+=i?`Os valores de MVA (Margem de Valor Agregado), para c\xe1lculo da\n      substitui\xe7\xe3o tribut\xe1ria do ICMS, ser\xe3o retornados do monitoramento com base no CEST ${i}.`:"Para que seja retornado do monitoramento os valores de MVA (Margem de Valor Agregado),\n      para c\xe1lculo da substitui\xe7\xe3o tribut\xe1ria do ICMS, \xe9 necess\xe1rio que a classifica\xe7\xe3o fiscal\n      tenha a informa\xe7\xe3o do CEST (C\xf3digo especificador da Substitui\xe7\xe3o Tribut\xe1ria).",n+="<br/><br/>N\xe3o ser\xe1 poss\xedvel alterar o CEST depois que a classifica\xe7\xe3o fiscal for monitorada.",swal({title:`<span style="font-size: 22px;">${n}</span>`,text:"Confirma o envio desta classifica\xe7\xe3o fiscal para o monitoramento tribut\xe1rio?",type:"warning",confirmButtonColor:"#2A578C",confirmButtonText:"Sim",showCloseButton:!0,showCancelButton:!0,cancelButtonText:"N\xe3o",width:"500px"}).then(function(){t.text("Enviando..."),$.post(`/classificacao_fiscals/${e}/monitoramento_tributario`)})["catch"](()=>{})}function desabilita_campo_mva(t){var e=$(`.campo_desabilitavel_${t}`)[0];e.disabled?e.disabled=!1:e.disabled=!0}function searchNfeWarrantyOrder(t){$("#ordem_garantia_nota_fiscal_id").val(t.item.id)}function assinalaEmMassaTipoResultado(t){$(".tipo-resultado-analise").val(t).trigger("change")}function exibeEscondeCustoFinalNaTabelaDeVenda(){if(0===$("#tabela_de_venda_parent_id").length)return;const t=$("#tabela_de_venda_parent_id").val(),e=$("#explicacao-custo-final-tabela-fixa"),i=$("#tabela-custo-final");t?(i.hide(),e.show()):(i.show(),e.hide())}function selectize_busca_produto_tabela_fixa(t){var e=$(t).data("autocomplete-source"),i=$(t).data("index"),n="tabela_de_venda_item_tabela_de_vendas_attributes_"+i+"_produto_estoque_id",o=$(t);o.dataMap={},o.selectize({preload:"focus",valueField:"id",labelField:"label",searchField:"label",render:{option:function(t,e){return"<div><span>"+e(t.label)+"</span></div>"}},load:function(t,i){$.ajax({url:e,data:{codigo_ou_descricao:t,limite:20,nao_salvar_filtro:!0},type:"GET",dataType:"json",error:function(){i()},success:function(e){$("#"+n).eq(0).data("selectize").removeOption(0),e.produto_estoques.unshift({id:0,label:t+" (Cadastrar Novo)"}),e.produto_estoques=e.produto_estoques.filter(function(t){return!tabela_fixa_produtos_selecionados_ids().includes(t.id)}),i(e.produto_estoques)}})},onOptionAdd:function(t,e){o.dataMap[t]=e,o.dataMap[t].index=i},onChange:function(t){if("0"==t)$("#modalCadastrarProduto").modal("show"),$("#select_id_cadastrando_produto").val(n);else{if(t&&o.dataMap[t]){if(o.dataMap[t].pu){var e=parseFloat(o.dataMap[t].pu);$("#pu_entrada_"+o.dataMap[t].index).val(formata_numero(e))}if(o.dataMap[t].pu_saida){var i=parseFloat(o.dataMap[t].pu_saida);$("#pu_saida"+o.dataMap[t].index).val(formata_numero(i))}}$("#moeda_cambio_id option").each(function(){$(".item-pu-"+$(this).data("codigoIso")).length>0&&adicionaCambioPorItem($(o).closest(".linha-produto")[0],this)})}}})}function limpa_select_produto_se_necessario(){var t=$("#select_id_cadastrando_produto").val();"0"==$("#"+t).val()&&$("#"+t).eq(0).data("selectize").setValue("")}function tabela_fixa_produtos_selecionados_ids(){return $("select.busca_produto_tabela_fixa").map(function(){return parseInt(this.value)}).toArray()}function confirma_salvar_tabela_fixa(){swal({title:"Deseja realmente salvar os novos dados para essa tabela?",type:"warning",showCancelButton:!0,confirmButtonColor:"#006cb5",cancelButtonColor:"#d82b0a",confirmButtonText:"Sim",cancelButtonText:"N\xe3o"}).then(function(){$("#form-tabela-fixa").submit()})["catch"](function(){})}function filtros_tabela_fixa(){var t=[];return $("#filtro-itens-tabela-fixa").find("input").each(function(){isPresent(this.value)&&t.push(this.name+"="+this.value)}),$("#filtro-itens-tabela-fixa").find("select").each(function(){isPresent(this.value)&&t.push(this.name+"="+this.value)}),t.join("&")}function aplica_reajuste_em_massa(){var t="acrescimo"===$("#reajuste_tipo_calculo").val(),e=to_float($("#reajuste_porcentagem").val())/100,i=t?e+1:1-e;$(".linha-produto").each(function(){var t=$(this).find(".item-pu"),e=to_float(t.val()),n=i*e;t.val(formata_numero(n))})}function reverte_reajuste_em_massa(){$(".linha-produto").each(function(){var t=$(this).find(".item-pu");t.val(t.data("puOriginal"))})}function carregaCambioPadrao(){$("#moeda_cambio_id").length>0&&$("#cambio").val(formata_numero_longo($("#moeda_cambio_id option:selected").data("cambio")))}function adicionaCambio(){var t="col-pu-"+$("#moeda_cambio_id option:selected").data("codigoIso"),e="item-pu-"+$("#moeda_cambio_id option:selected").data("codigoIso");if(0==$("."+e).length){var i=$("#item_tabela_de_vendas > thead > tr")[0];i.insertCell($(i).find("th").length-1).outerHTML='<th id="'+t+'" width="13%"><span>PU ('+$("#moeda_cambio_id option:selected").data("label")+')</span> <button type="button" onclick="removeCambio(\''+$("#moeda_cambio_id option:selected").val()+'\')" style="color: red; background: none; border: none; padding: 0;" title="Remover todos os valores em '+$("#moeda_cambio_id option:selected").data("descricao")+'"><i class="fa fa-times"></i></button></th>'}$("#"+t).show(),$(".linha-produto").each(function(){adicionaCambioPorItem(this,$("#moeda_cambio_id option:selected"))})}function adicionaCambioPorItem(t,e){if($("#col-pu-"+$(e).data("codigoIso")).is(":visible")){var i="item-pu-"+$(e).data("codigoIso"),n=$(t).find(".item-index").val(),o=$(t).find(".item-pu-index").val(),a="tabela_de_venda_item_tabela_de_vendas_attributes_"+n+"_precos_item_tabela_de_venda_attributes_"+o+"_",r="tabela_de_venda[item_tabela_de_vendas_attributes]["+n+"][precos_item_tabela_de_venda_attributes]["+o+"]",s=0;switch($("#pu_base_cambio").val()){case"pu_entrada":s=to_float($(t).find(".item-pu-entrada").val());break;case"pu_saida":s=to_float($(t).find(".item-pu-saida").val());break;case"pu_tabela":s=to_float($(t).find(".item-pu").val())}var l=formata_numero(s/(e.value==$("#moeda_cambio_id option:selected").val()?to_float($("#cambio").val()):$(e).data("cambio")));if(0==$(t).find("."+i).length)t.insertCell($(t).find("td").length-1).outerHTML='<td><input class="form-control valor_real '+i+'" value="'+l+'" type="text" name="'+r+'[pu]" id="'+a+'pu"><input class="moeda-pu" value="'+$(e).val()+'" type="hidden" name="'+r+'[moeda_id]" id="'+a+'moeda_id"><input value="0" type="hidden" name="'+r+'[_destroy]" id="'+a+'_destroy"></td>',$(t).find(".item-pu-index").val(o+1);else $(t).find("."+i).val(l),$("#"+$(t).find("."+i)[0].id.replace("pu","_destroy")).val(0);$(t).find("."+i).closest("td").show()}}function removeCambio(t){var e=$('#moeda_cambio_id option[value="'+t+'"]').data("codigoIso"),i=$('#moeda_cambio_id option[value="'+t+'"]').data("label"),n=$('#moeda_cambio_id option[value="'+t+'"]').data("descricao");swal({title:"Deseja realmente remover todos os valores em "+n+" ("+i+")?",type:"warning",showCancelButton:!0,confirmButtonColor:"#006cb5",cancelButtonColor:"#d82b0a",confirmButtonText:"Sim",cancelButtonText:"N\xe3o"}).then(function(){$("#col-pu-"+e).hide(),$(".item-pu-"+e).each(function(){$(this).closest("td").hide();var t=this.id.replace("pu","_destroy");$("#"+t).val(1)})})["catch"](function(){})}function initListens(){$(".preenchimento_em_massa").change(function(){const t=parseFloat(this.value.replace(",","."));$(`.preencher_${this.name}`).each(function(){const e=parseFloat($(this).closest(".tab-pane").data("cambio")),i=4,n=t=>t.toFixed(i).replace(".",",");if(this.dataset.naoAplicaCambio)$(this).val(n(t));else{const o=arredonda_float(t/e,i);$(this).val(n(o))}})}),$(".preenchimento_de_aliquota_em_massa").change(function(){const t=this.value;$(".preencher_"+this.name).each(function(){$(this).val(t)})})}function deseleciona_cotacao_fornecedor(){$(".seleciona_cotacao_fornecedor").each(function(){$(this).removeClass("fornecedor-cotacao-selecionado")})}function seleciona_cotacao(t){t.classList.remove("produto-cotacao-selecionado"),t.classList.remove("produto-cotacao-nao-selecionado"),t.classList.add("produto-cotacao-selecionado"),$("#produto_cotacao_"+t.dataset.produtoId).val(t.dataset.fornecedorId)}function deseleciona_cotacao(t){t.classList.remove("produto-cotacao-selecionado"),t.classList.remove("produto-cotacao-nao-selecionado"),t.classList.add("produto-cotacao-nao-selecionado")}function trocaTextActionExpander(t,e,i){$(t).removeClass(i?"ex-hide":"ex-show"),$(t).text((i?"Detalhar":"Esconder")+e),$(t).addClass(i?"ex-show":"ex-hide")}function sectionCustoTotal(){if("undefined"!=typeof dadosCotacao)for(let t in dadosCotacao){const e=dadosCotacao[t];e.valor_total_produto=0,e.valor_total_seguro=0,e.valor_frete=0,e.valor_total_outras_despesas=0;let i=document.getElementById("ct-tributos-"+t),n=e.cotacoes,o=0;n.map(t=>{e.valor_total_produto+=Number(t.custo_total),e.valor_total_seguro+=Number(t.valor_seguro),e.valor_frete+=Number(t.valor_frete),e.valor_total_outras_despesas+=Number(t.valor_total_outras_despesas),o+=Number(t.valor_total_outras_despesas)});let a=JSON.parse(JSON.stringify(hashTributos));n.map(t=>{t.tributos.map(t=>{let e=a.findIndex(e=>e.nome==t.nome);e>-1&&(a[e].valor+=Number(t.valor))})});let r="",s=0;for(let t in a)r+=liCustoTotal(a[t].nome,a[t].valor),s+=a[t].valor;r+=liCustoTotal("Total",s,"text-weight-medium"),i.innerHTML=r}}function liCustoTotal(t,e,i){return`<li>\n            <span class="${i||""}">${t}:</span>\n            <span class="${i||""}">${formateCurrrency(e)}</span>\n          </li>`}function formateCurrrency(t){if(!isNaN(t))return t.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function selectFornecedor(t){const e=$("#fornecedor_"+t.value);showFornecedor(t.value),e&&e.length>0&&($(".tab-fornecedor-cotacao .tab-pane").each((t,e)=>{$(e).removeClass("active")}),e.addClass("active"))}function showFornecedor(t){const e=$('[data-target-fornecedor="'+t+'"]');e&&e.length>0&&(handleExpanderCotacao(t),$(".inner-taxas").each((t,e)=>{$(e).removeClass("active")}),e.each((t,e)=>{$(e).addClass("active")}))}function expanderItem(t){t.preventDefault();const e=document.getElementById(t.target.dataset.target);if(e){const i=e.classList.contains("in");$(e).collapse("toggle"),trocaTextActionExpander(t.target,t.target.dataset.texto||"",i)}}function handleExpanderAll(t,e){t.preventDefault();const i=t.target.classList.contains("ex-show");trocaTextActionExpander(t.target,t.target.dataset.texto||"",!i),e.forEach(t=>{i!=t.classList.contains("ex-hide")&&t.click()})}function handleExpanderCotacao(t){const e=document.getElementById("content-fornecedor-selected");if(e){e.innerHTML=document.getElementById(`fornecedor_${t}`).innerHTML;const i=document.querySelectorAll('[data-expander="cotacao-show"] > a');i&&i.forEach(t=>{t.addEventListener("click",expanderItem)});const n=document.querySelector(`#expander-fornecedor-${t}`);n&&n.addEventListener("click",function(t){handleExpanderAll(t,i)})}}function somaProdutoFormFornecedorExterno(){const t=document.querySelectorAll(".preenchimento_cotacao_fornecedor"),e=e=>{let i=0;const n=document.getElementById(e);t.forEach(t=>{const{ncmId:n,quantidade:o}=t.dataset;if(n==e){let e=Number(o.replace(",","."));i+=e*Number(t.value.replace(",","."))}}),n.innerHTML=formateCurrrency(i).replace("R$","")};t&&t.forEach(t=>{t.addEventListener("keyup",function(t){const{ncmId:i}=t.target.dataset;e(i)})})}function filtrarFuxoDeCaixa(t){$("#data_inicial").val($(t).data("dataInicial")),$("#data_final").val($(t).data("dataFinal")),$(".atalho-filtro").attr("disabled",!0),$("#filtro-fluxo-de-caixa").submit()}function disableInputDias(t){"No vencimento"===$(t).find("option:selected").text()?($(t).closest(".row").find(".input-dias").prop("disabled",!0),$(t).closest(".row").find(".input-dias").val(0)):($(t).closest(".row").find(".input-dias").prop("disabled",!1),$(t).closest(".row").find(".input-dias").val(1))}function enviaEmailTeste(){var t=$("#modal-teste-email-cobranca #email").val();$("#blank-email").hide(),isPresent(t)?($("#email_teste").val(t),$("#enviar-teste-email-cobranca").attr("disabled","disabled"),$("#enviar-teste-email-cobranca").text("Enviando..."),$(".edit_regua_de_cobranca").submit()):$("#blank-email").show()}function submitFiltroContaDigital(){$("#transacoes-aprovadas-pjbank > table").hide(),$("#transacoes-pendentes-pjbank > table").hide(),$(".listagem-vazia").hide(),$(".loader").show(),$("#filtro-conta-digital-pjbank").submit()}function getDataCurvaAbc(t,e,i){"/crm/curva_abc"===window.location.pathname&&$.ajax({url:t,type:"GET",suppressErrors:!0,dataType:"JSON",success:function(t){i=i.concat(t[e]),t.next_page?getDataCurvaAbc(t.next_page,e,i):"clientes"===e?(montarTabelaCurvaAbcClientes(i),montarGraficoCurvaAbcClientes(i)):"produtos"===e&&(montarTabelaCurvaAbcProdutos(i),montarGraficoCurvaAbcProdutos(i))}})}function montarGraficoCurvaAbcClientes(t){const e=mapOrderCurvaABC(Object.entries(groupBy(t,"stakeholder_id"))),i=e.slice(0,10).map(function(t){return t[1][0].razao_social}),n=e.slice(0,10).map(function(t){return sumArray(t[1].map(t=>t.valor))});var o=document.getElementById("chart_curva_abc_clientes");new Chart(o,{type:"bar",data:{labels:i,datasets:[{label:"Total vendido",data:n,backgroundColor:"rgba(128, 171, 55, 1)"}]},options:{indexAxis:"y",responsive:!0,scales:{xAxes:[{ticks:{callback:function(t){return"R$"+formata_numero(t)}}}]},title:{display:!0,text:"Top 10 clientes"}}})}function montarTabelaCurvaAbcClientes(t){const e=[];$(".table-listagem-clientes .mes").each(function(){e.push(new Date($(this).data("value")))});const i=sumArray(t.map(t=>t.valor)),n=sumArray(t.map(t=>t.quantidade));mapOrderCurvaABC(Object.entries(groupBy(t,"stakeholder_id"))).forEach(t=>{t[0];let n=t[1],o=n[0],a=sumArray(n.map(t=>t.valor)),r=sumArray(n.map(t=>t.quantidade)),s=100*a/i;$("#tbody-listagem-clientes").append(`\n      <tr>\n        <td>${o.numero_documento}</td>\n        <td>${o.razao_social}</td>\n        <td>${o.uf}</td>\n        ${e.map(t=>{let e=n.filter(e=>t.toDateString()==new Date(e.data).toDateString())[0];return`<td class="text-right">${to_float(e?e.valor:0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}</td>`}).join("")}\n        <td class="text-right">${to_float(a).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}</td>\n        <td class="text-right">${r}</td>\n        <td class="text-right">${formata_numero(s)}%</td>\n      </tr>\n    `)}),$("#tfoot-listagem-clientes").append(`\n    <tr>\n      <th colspan="3">Total informado</th>\n      ${e.map(e=>{return`<th class="text-right">${to_float(sumArray(t.filter(t=>e.toDateString()==new Date(t.data).toDateString()).map(t=>t.valor))).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}</th>`}).join("")}\n      <th class="text-right">${to_float(i).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}</th>\n      <th class="text-right">${n}</th>\n      <th class="text-right">100,00%</th>\n    </tr>\n  `),$("#listagem-clientes #loader").hide(),$(".table-listagem-clientes").show()}function montarGraficoCurvaAbcProdutos(t){const e=mapOrderCurvaABC(Object.entries(groupBy(t,"id"))),i=e.slice(0,10).map(function(t){return t[1][0].descricao}),n=e.slice(0,10).map(function(t){return sumArray(t[1].map(t=>t.valor))});var o=document.getElementById("chart_curva_abc_produtos");new Chart(o,{type:"bar",data:{labels:i,datasets:[{label:"Total vendido",data:n,backgroundColor:"rgba(128, 171, 55, 1)"}]},options:{indexAxis:"y",responsive:!0,scales:{xAxes:[{ticks:{callback:function(t){return"R$"+formata_numero(t)}}}]},title:{display:!0,text:"Top 10 produtos"}}})}function montarTabelaCurvaAbcProdutos(t){const e=[];$(".table-listagem-produtos .mes").each(function(){e.push(new Date($(this).data("value")))});const i=sumArray(t.map(t=>t.valor)),n=sumArray(t.map(t=>t.quantidade));mapOrderCurvaABC(Object.entries(groupBy(t,"top_category_id"))).forEach(t=>{let n=t[1],o=n[0].top_category_id||"0",a=n[0].top_category_name||"Sem categoria",r=sumArray(n.map(t=>t.valor)),s=sumArray(n.map(t=>t.quantidade)),l=100*r/i;$("#tbody-listagem-produtos").append(`\n      <tr class="linha-top-categoria">\n        <td colspan="5">\n          <a class="top-categoria ${o}" data-toggle="collapse" data-parent="#accordion" href=".collapse-${o}" aria-expanded="false" aria-controls=".collapse-${o}">\n            ${a}\n            <i class="glyphicon glyphicon-triangle-bottom"></i>\n          </a>\n        </td>\n        ${e.map(t=>{return`<td class="text-right">${to_float(sumArray(n.filter(e=>t.toDateString()==new Date(e.data).toDateString()).map(t=>t.valor))).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}</td>`}).join("")}\n        <td class="text-right">${to_float(r).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}</td>\n        <td class="text-right">${s}</td>\n        <td class="text-right">${formata_numero(l)}%</td>\n      </tr>\n    `),mapOrderCurvaABC(Object.entries(groupBy(n,"category_id"))).forEach(t=>{let n=t[1],a=n[0].category_id||"00",r=n[0].category_name||"Sem subcategoria",s=sumArray(n.map(t=>t.valor)),l=sumArray(n.map(t=>t.quantidade)),c=100*s/i;$("#tbody-listagem-produtos").append(`\n        <tr class="collapse collapse-${o} linha-sub-categoria">\n          <td></td>\n          <td colspan="4">\n            <a class="sub-categoria ${a}" data-toggle="collapse" data-parent="#accordion" href=".collapse-${a}" aria-expanded="false" aria-controls=".collapse-${a}">\n              ${r}\n              <i class="glyphicon glyphicon-triangle-bottom"></i>\n            </a>\n          </td>\n          ${e.map(t=>{return`<td class="text-right">${to_float(sumArray(n.filter(e=>t.toDateString()==new Date(e.data).toDateString()).map(t=>t.valor))).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}</td>`}).join("")}\n          <td class="text-right">${to_float(s).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}</td>\n          <td class="text-right">${l}</td>\n          <td class="text-right">${formata_numero(c)}%</td>\n        </tr>\n        <tr class="collapse collapse-${a} collapse-${o}">\n          <th></th>\n          <th></th>\n          <th>C\xf3digo</th>\n          <th>Descri\xe7\xe3o</th>\n          <th>Un. de medida</th>\n          ${e.map(()=>"<th></th>").join("")}\n          <th></th>\n          <th></th>\n          <th></th>\n        </tr>\n      `),mapOrderCurvaABC(Object.entries(groupBy(n,"id"))).forEach(t=>{let n=t[1],r=n[0],s=sumArray(n.map(t=>t.valor)),l=sumArray(n.map(t=>t.quantidade)),c=100*s/i;$("#tbody-listagem-produtos").append(`\n          <tr class="collapse collapse-${a} collapse-${o}">\n            <td></td>\n            <td></td>\n            <td>${r.codigo}</td>\n            <td>${r.descricao}</td>\n            <td>${r.unidade_de_medida}</td>\n            ${e.map(t=>{return`<td class="text-right">${to_float(sumArray(n.filter(e=>t.toDateString()==new Date(e.data).toDateString()).map(t=>t.valor))).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}</td>`}).join("")}\n            <td class="text-right">${to_float(s).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}</td>\n            <td class="text-right">${l}</td>\n            <td class="text-right">${formata_numero(c)}%</td>\n          </tr>\n        `)})})}),$("#tfoot-listagem-produtos").append(`\n    <tr>\n      <th colspan="5">Total informado</th>\n      ${e.map(e=>{return`<th class="text-right">${to_float(sumArray(t.filter(t=>e.toDateString()==new Date(t.data).toDateString()).map(t=>t.valor))).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}</th>`}).join("")}\n      <th class="text-right">${to_float(i).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}</th>\n      <th class="text-right">${n}</th>\n      <th class="text-right">100,00%</th>\n    </tr>\n  `),$("#listagem-produtos #loader").hide(),$(".table-listagem-produtos").show()}function groupBy(t,e){return t.reduce(function(t,i){var n=i[e];return t[n]||(t[n]=[]),t[n].push(i),t},{})}function mapOrderCurvaABC(t){return t.sort(function(t,e){const i=sumArray(t[1].map(t=>t.valor)),n=sumArray(e[1].map(t=>t.valor));return"asc"===$("#ordem").val()?i>n?1:-1:i<n?1:-1}),t}function sumArray(t){return t.reduce(function(t,e){return to_float(t)+to_float(e)},0)}function getDataMargemLucro(t,e,i){"/crm/margem_lucro_relatorios"===window.location.pathname&&$.ajax({url:t,type:"GET",suppressErrors:!0,dataType:"JSON",success(t){i=i.concat(t[e]),t.next_page?getDataMargemLucro(t.next_page,e,i):montarTabelaMargemLucroProdutos(i)}})}function montarTabelaMargemLucroProdutos(t){mapOrderCurvaABC(Object.entries(groupBy(t,"top_category_id"))).forEach(t=>{const e=t[1],i=e[0].top_category_id||"0",n=e[0].top_category_name||"Sem categoria",o=sumArray(e.map(t=>t.valor)),a=sumArray(e.map(t=>t.valor_custo)),r=o-a,s=r/o*100,l=sumArray(e.map(t=>t.quantidade));$("#tbody-listagem-produtos").append(`\n      <tr class="linha-top-categoria">\n        <td colspan="6">\n          <a class="top-categoria ${i}" data-toggle="collapse" data-parent="#accordion" href=".collapse-${i}" aria-expanded="false" aria-controls=".collapse-${i}">\n            ${n}\n            <i class="glyphicon glyphicon-triangle-bottom"></i>\n          </a>\n        </td>\n\n        <td class="text-right">${l}</td>\n        <td class="text-right">${to_float(o).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}</td>\n        <td class="text-right">${to_float(a).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}</td>\n        <td class="text-right">${to_float(r).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}</td>\n        <td class="text-right">${formata_numero(s)}%</td>\n      </tr>\n    `),mapOrderCurvaABC(Object.entries(groupBy(e,"category_id"))).forEach(t=>{const e=t[1],n=e[0].category_id||"00",o=e[0].category_name||"Sem subcategoria",a=sumArray(e.map(t=>t.valor)),r=sumArray(e.map(t=>t.valor_custo)),s=a-r,l=s/a*100,c=sumArray(e.map(t=>t.quantidade));$("#tbody-listagem-produtos").append(`\n        <tr class="collapse collapse-${i} linha-sub-categoria">\n          <td></td>\n          <td colspan="5">\n            <a class="sub-categoria ${n}" data-toggle="collapse" data-parent="#accordion" href=".collapse-${n}" aria-expanded="false" aria-controls=".collapse-${n}">\n              ${o}\n              <i class="glyphicon glyphicon-triangle-bottom"></i>\n            </a>\n          </td>\n          <td class="text-right">${c}</td>\n          <td class="text-right">${to_float(a).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}</td>\n          <td class="text-right">${to_float(r).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}</td>\n          <td class="text-right">${to_float(s).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}</td>\n          <td class="text-right">${formata_numero(l)}%</td>\n        </tr>\n        <tr class="collapse collapse-${n} collapse-${i}">\n          <th></th>\n          <th></th>\n          <th>C\xf3digo</th>\n          <th>Descri\xe7\xe3o</th>\n          <th>Un. de medida</th>\n          <th>PU m\xe9dio de custo</th>\n          <th></th>\n          <th></th>\n          <th></th>\n          <th></th>\n          <th></th>\n        </tr>\n      `),mapOrderCurvaABC(Object.entries(groupBy(e,"id"))).forEach(t=>{const e=t[1],o=e[0],a=sumArray(e.map(t=>t.valor)),r=sumArray(e.map(t=>t.valor_custo)),s=a-r,l=s/a*100,c=sumArray(e.map(t=>t.quantidade));$("#tbody-listagem-produtos").append(`\n          <tr class="collapse collapse-${n} collapse-${i}">\n            <td></td>\n            <td></td>\n            <td>${o.codigo}</td>\n            <td>${o.descricao}</td>\n            <td>${o.unidade_de_medida}</td>\n            <td>${to_float(o.pu_custo).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}</td>\n            <td class="text-right">${c}</td>\n            <td class="text-right">${to_float(a).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}</td>\n            <td class="text-right">${to_float(r).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}</td>\n            <td class="text-right">${to_float(s).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}</td>\n            <td class="text-right">${formata_numero(l)}%</td>\n          </tr>\n        `)})})}),$("#listagem-produtos #loader").hide(),$(".table-listagem-produtos").show()}function alteraDescontoAcrescimo(){$("#desconto_ou_acrescimo_input_desconto").change(function(){$("#campo-desconto").toggle($(this).is(":checked")),$("#campo-acrescimo").toggle(!$(this).is(":checked")),$("#botao_aplicar_desconto").find("span").text("Aplicar Desconto"),$("#campo-acrescimo input").not(":disabled").each(function(){$(this).val("0")})}),$("#desconto_ou_acrescimo_input_acrescimo").change(function(){$("#campo-acrescimo").toggle($(this).is(":checked")),$("#campo-desconto").toggle(!$(this).is(":checked")),$("#botao_aplicar_desconto").find("span").text("Aplicar Acr\xe9scimo"),
$("#campo-desconto input").not(":disabled").each(function(){$(this).val("0")})})}function toggleCamposPagamentoParcelado(){var t="pagamento_parcelado"==$("#condicao_pagamento_forma_pagamento").val();$(".campos-pagamento-parcelado").toggle(t),$(".campos-pagamento-a-vista").toggle(!t)}function avisoConfirmacaoMudancaPlano(t){t.preventDefault();const e=$("#modal-meu-plano"),i="#meu-plano-form";let n=to_float($("#valor_mensal_antigo").val());$("#antigo-valor").text(`R$ ${formata_numero(n)}`),$("#novo-valor").text($("#total-plano").text()),e.modal(),e.on("confirmed",t=>{if(1==t.detail.confirmed){const t=$(i);t.on("submit",handleSubmitFormMeuPlano),t.submit(),t.off("submit")}else e.modal("hide")})}function swalError(t){swal({type:"error",text:t})}function formatValues(t){return`R$ ${parseFloat(t).toFixed(2).replace(".",",")}`}function modalConfirmedEvent(t,e={}){return document.getElementById(t).dispatchEvent(new CustomEvent("confirmed",{detail:e}))}function handleSubmitFormMeuPlano(t){t.preventDefault();let e=$(this).serializeArray(),i={name:"valores_plano[valor_plano_base]",value:to_float($("#valor_plano_base").val())},n={...cotas,...funcionalidadesExtras};for(let t in n)e.push({name:`valores_plano[${t}]`,value:n[`${t}`]});return e.push(i),$.rails.ajax({url:"/meu_plano",type:"PUT",data:e,success:t=>{"ok"==t.status?exibe_mensagem_com_status(t.message,"notice"):exibe_mensagem_com_status(t.message,"alert")},error:t=>{exibe_mensagem_com_status(t.message,"alert")},complete:()=>{$("#modal-meu-plano").modal("hide")}}),!1}function initializeSeeMore(){const t=$("#meu-plano-assinaturas"),e=document.getElementById("show-more-link");t.length&&showMore(t,e)}function showMore(t,e){t.find(`tbody > tr.hide:lt(${showMoreLimit})`).removeClass("hide"),checkShowMore(t,e)}function resetShowMore(t,e){t.find("tbody > tr").addClass("hide"),t.find(`tbody > tr.hide:lt(${showMoreLimit})`).removeClass("hide"),e.removeEventListener("click",()=>{}),checkShowMore(t,e)}function checkShowMore(t,e){const i="see-minus";if(t.find("tbody > tr").length<=showMoreLimit)return e.remove();t.find("tbody > tr.hide").length?(e.innerText="Ver mais",e.classList.remove(i)):(e.innerText="Ver menos",e.classList.add(i)),e.addEventListener("click",handleShowMore)}function handleShowMore(t){t.preventDefault();const e=$("#meu-plano-assinaturas");"Ver mais"==t.target.innerText?showMore(e,t.target):resetShowMore(e,t.target),t.target.removeEventListener("click",()=>{})}function initializeFloatPanel(){const t=document.getElementById("plano-resumo-custo");t&&document.addEventListener("scroll",()=>{handleScrollFloatPanel(t)})}function handleScrollFloatPanel(t){const e="float-container";let i=document.getElementById("panel-resumo-custo");t.getBoundingClientRect().top<=i.getBoundingClientRect().top&&t.classList.contains(e)?t.classList.remove(e):i.getBoundingClientRect().bottom>=window.innerHeight&&t.classList.add(e)}function mostra_div_custo_lancamento_automatico(){"credito"==$("#configuracao_lancamento_automatico_status").val()?$("#div-custo").hide():$("#div-custo").show()}function showNotificacao(t){criarElementoNotificacao(t)}function criarElementoNotificacao(t){const e=document.querySelector(".wrapper-notificacao"),i=document.createElement("div"),n=document.createElement("div");i.classList.add("wrapper-notificacao"),t&&(n.data=t),null==e&&(i.appendChild(n),document.body.appendChild(i)),renderNotificacao(n,i)}function renderNotificacao(t,e){e.classList.add("show-notificacao"),_Notificacao.app?_Notificacao.app.config=t.data:_Notificacao.app=new Vue({el:t,data:{config:{}},template:'\n      <div class="inner-notificacao">\n        <header>\n          <h2>{{config.titulo ? config.titulo: \'Notifica\xe7\xe3o\' }}</h2>\n          <button class="close" @click="fechaNotificacao">X</button>\n        </header>\n        <main>\n          <span v-if="config.texto">{{config.texto}}</span>\n          <span v-if="config.html" v-html="config.html"></span>\n        </main>\n      </div>\n      ',methods:{fechaNotificacao(){e.classList.add("hide-notificacao"),e.addEventListener("transitionend",function(){e.remove(),_Notificacao.app=null})}},mounted(){this.config=t.data}})}function importacaoAtualizacaoSubmitForm(t){t.preventDefault();let e=new FormData(t.target);return $.rails.ajax({type:"post",url:t.target.action,data:e,processData:!1,contentType:!1}),!1}function exibeErrosEAlertas(){$.getScript("/importacao_de_atualizacao_de_produtos/new")}function trataWebsocketImportacaoProduto(t){let e=JSON.parse(t),i=$("#loading-importacao-produto");i.length>0&&i.remove(),0===Object.keys(e.avisos).length&&0===Object.keys(e.notificacoes).length?exibe_mensagem_com_status("Produtos atualizados com sucesso!","success"):exibeErrosEAlertas()}function trataWebsocketImportacaoImagens(t){let e=$("#loading-produto-imagens");e.length>0&&e.remove(),0===Object.keys(t).length?exibe_mensagem_com_status("Imagens de produtos atualizadas com sucesso!","success"):exibeErrosEAlertas()}function importacaoDeInventarioSapSubmitForm(t){t.preventDefault();let e=new FormData(t.target);return disableSubmitButton(),$.rails.ajax({type:"post",url:t.target.action,data:e,processData:!1,contentType:!1}).fail(enableSubmitButton),!1}function disableSubmitButton(){$("#submit-importacao-de-inventario-sap").prop("disabled",!0)}function enableSubmitButton(){$("#submit-importacao-de-inventario-sap").prop("disabled",!1)}function atualizaPartials(){$.getScript("/importacao_de_inventario_sap/new")}function trataWebsocketImportacaoDeInventarioSap(t){let e=JSON.parse(t);e.notificacoes?(exibe_mensagem_com_status(e.mensagem||"Ocorreu um erro na importa\xe7\xe3o do arquivo ou no envio para o SAP","error"),enableSubmitButton()):e.mensagem&&exibe_mensagem_com_status(e.mensagem,e.status),"success"===e.status&&enableSubmitButton(),atualizaPartials()}function trataValorDecimal(t){return $(t).val().replace(",",".")}function bloqueiaJavascriptEtapasProcesso(){return!document.getElementById("listagem-etapas-processo")}function inicializaBotaoModalReordenacao(){const t=document.getElementById("abre-modal-reordenacao-etapas"),e=$("#modal-reordenacao-de-etapas");t.addEventListener("click",function(t){t.preventDefault(),e.modal({show:!0,backdrop:"static",keyboard:!1})})}function dataBuilderFluxoDeCaixaContador(t){const e=getComputedStyle(document.body),i=e.getPropertyValue("--sucesso"),n=e.getPropertyValue("--erro");return{labels:t.map(function(t){return t[0]}),datasets:[{label:"Entradas",data:t.map(function(t){return t[1]}),backgroundColor:`${i}`,borderColor:`${i}`,borderWidth:1},{label:"Sa\xeddas",data:t.map(function(t){return t[2]}),backgroundColor:`${n}`,borderColor:`${n}`,borderWidth:1}]}}function handleBuyFirstPackageButton(){comprarPacote(this.dataset.id)}function handleBuyPackageButton(){const t=this.dataset.id,e=$("#modal-confirmar-compra-pacote"),i=$(`#pacote_${t}`);let n=i.find(".preco-pacote").text(),o=i.find(".descricao-pacote").text();e.find("#pacote-descricao").text(o),e.find("#pacote-valor").text(n),e.find(".btn-confirm").on("click",function(){this.disabled=!0,comprarPacote(t)}),e.modal()}function handleCloseModalComprarPacote(){const t=$(this).find(".btn-confirm");t.prop("disabled",!1),t.off("click")}function comprarPacote(t){$.rails.ajax({url:"/pedido_pacotes",method:"POST",data:{pedido_pacote:{pacote_id:t}},dataType:"jsonp"})}function handleBoletoPago({data:t}){document.getElementById("pacotes-pedidos-page")&&$.rails.ajax({url:"pedido_pacotes",type:"GET",dataType:"jsonp"}),exibe_mensagem_com_status(t,"success")}function salvarDadosGestaoDeCambio(){camposGestaoDeCambioNotNested().each(function(){let t=$(this),e=t.attr("name"),i=t.val();gestaDeCambioFormData[e]=i})}function restaurarDadosGestaoDeCambio(){camposGestaoDeCambioNotNested().each(function(){let t=$(this),e=t.attr("name");t.val(gestaDeCambioFormData[e])})}function camposGestaoDeCambioNotNested(){return $("#new_comex_gestao_de_cambio_contrato input, #new_comex_gestao_de_cambio_contrato select, .edit_comex_gestao_de_cambio_contrato input, .edit_comex_gestao_de_cambio_contrato select").filter(function(){return!$(this).closest(".fields").length})}function initializeAnexoInput(t){(t||$(".anexo-input")).each((t,e)=>{$(e).on("change",function(){addFileNameLabel(this)})})}function addFileNameLabel(t){t.files.length>0&&$(t).siblings(".file-name").text(t.files[0].name)}function initializeSelectProcessos(t=$(".select-vinculo-cambio-contrato-processo")){t.each(function(){const t=$(this),e=$("#comex_gestao_de_cambio_contrato_stakeholder_id").val(),i=t.data("index"),n=$(`[data-index="${i}"]`);t.on("change",function(){if(clearNestedForm(i),this.value)return"novoProcesso"==this.value?abrirModalNovoProcessoCambio(i):void $.rails.ajax({url:"/gestao_de_cambio/contrato_processo_pagamentos",data:{processo_id:this.value,stakeholder_id:e},contentType:"application/json; charset=utf-8",dataType:"json",success:e=>{const i=t.closest(".vinculo-processos").find(".select-vinculo-cambio-contrato-pagamento");resetSelect2Pagamentos(i,this.value),addOptionsPagamentosSelect(e.pagamentos,i),addChangeHandlerPagamentosSelect(i),n.removeClass("hidden-fields")}})})})}function abrirModalNovoProcessoCambio(t){$.rails.ajax({url:"/gestao_de_cambio/contrato_processos/new",data:{nested_index:t},contentType:"application/json; charset=utf-8",dataType:"jsonp"})}function startSelectPagamentosHandler(){addChangeHandlerPagamentosSelect($(this))}function resetSelect2Pagamentos(t,e){const i=new Option("Selecione",""),n=new Option("Criar pagamento","novoPagamento");t.empty(),t.data("processoId",e),t.append(i),t.append(n),t.off("change"),t.select2({theme:"bootstrap",language:"pt-BR",minimumResultsForSearch:10})}function addOptionsPagamentosSelect(t,e){t.forEach(t=>{let i=new Option(t.descricao_pagamento,t.id);i.disabled=t.desabilita,e.append(i)}),e.trigger("change")}function addChangeHandlerPagamentosSelect(t){t.on("change",handleGestaoDeCambioPagamentoSelect)}function handleGestaoDeCambioPagamentoSelect(){const t=$(this),e=t.parent(".add-pagamento-select").data("index");if(this.value&&"novoPagamento"!=this.value)$.rails.ajax({url:`/gestao_de_cambio/contrato_processo_pagamentos/${t.val()}`,data:{processo_id:t.data("processoId")},contentType:"application/json; charset=utf-8",dataType:"json",success:t=>{addValueToNestedFields(t,e),updateResumoPagamentosContrato()}});else if("novoPagamento"==this.value){const i=$("#comex_gestao_de_cambio_contrato_stakeholder_id");$.rails.ajax({url:"/gestao_de_cambio/contrato_processo_pagamentos/new",data:{nested_index:e,processo_id:t.data("processoId"),stakeholder_id:i.val()},contentType:"application/json; charset=utf-8",dataType:"jsonp"})}}function addValueToNestedFields(t,e){Object.keys(t).map(i=>{if("valor"===i&&t[i]){const n=$(`[data-key="${i}_${e}"]`),o=$("#comex_gestao_de_cambio_contrato_moeda_id").find(":selected").data("codigo_iso");let a=parseFloat(t[i]).toFixed(2),r=formataMoeda(a,{currency:o});return n.data({value:a}),n.val(r)}$(`[data-key="${i}_${e}"]`).val(t[i])})}function clearNestedForm(t){addValueToNestedFields({codigo_di:"",beneficiario:"",data_vencimento:"",valor:""},t)}function sumAllPagamentosValue(){let t=0;return $(".pagamentos-contrato-de-cambio").each(function(){let e=$(this).data("value")||0;t+=Number(parseFloat(e).toFixed(2))}),t}function updateResumoPagamentosContrato(){const t=$("#comex_gestao_de_cambio_contrato_moeda_id"),e=$("#comex_gestao_de_cambio_contrato_valor_total_moeda_estrangeira").val(),i=$("#finalizar-contrato"),n=t.find(":selected").data("codigo_iso")||"BRL";if(!e)return;let o=sumAllPagamentosValue(),a=parseFloat(e.replace(",",".")),r=a-o;const s=$("#valor-total-pendente-contrato");if($("#valor-total-contrato").text(formataMoeda(a,{currency:n})),$("#valor-total-pago-contrato").text(formataMoeda(o,{currency:n})),s.text(formataMoeda(r,{currency:n})),s.data("value",r),a&&o===a)return i.attr("disabled",!1);i.attr("disabled",!0)}function removerPagamentoModal(t){t.preventDefault();const e=this.dataset.index,i=$(`#remove-pagamento-contrato-${e}`),n=$(`.add-pagamento-select[data-index="${e}"] > select`);let o=!0;if(!possuiPagamentoPresente(n)||novoContrato())return removeNestedForm(i);mainoAlert({textConfirm:"Tem certeza que deseja apagar a fatura?",confirmText:"Apagar tamb\xe9m no financeiro",cancelText:"Apagar somente do contrato",addCustomClass:"modal-excluir-pagamento-contrato-cambio",buttonClose:!0}).then(()=>{$(`#excluir-pagamento-${e}`).val(!0)})["catch"](t=>{"close"===t&&(o=!1)})["finally"](()=>{o&&removeNestedForm(i)})}function removeNestedForm(t){t.click()}function possuiPagamentoPresente(t){return t.val()&&"novoPagamento"!=t.val()}function novoContrato(){return $("#new_comex_gestao_de_cambio_contrato").length>0}function deveExibirAbaDePagamentos(){if(novoContrato())return;const t=$(".contrato-cambio-required");t.change(function(){return habilitaOuDesabilitaAbaDePagamentos(t.filter((t,e)=>e.value).length===t.length)})}function habilitaOuDesabilitaAbaDePagamentos(t){$('[href="#pagamentos-form"]').attr("disabled",!t)}function calculoCamposDeValoresNoCambio(){const t=$(queryCamposDeValor("taxa_cambio")),e=$(queryCamposDeValor("valor_total_moeda_estrangeira")),i=$(queryCamposDeValor("valor_total"));if(!this.value)return;let n=removeMascara(t.val()),o=removeMascara(e.val()),a=removeMascara(i.val());t[0]==this?o?i.val(reaplicaMascara(n*o)):a&&e.val(reaplicaMascara(a/n)):e[0]==this?n?i.val(reaplicaMascara(n*o)):a&&t.val(reaplicaMascara(a/o,4)):i[0]==this&&(n?e.val(reaplicaMascara(a/n)):o&&t.val(reaplicaMascara(a/o,4))),updateResumoPagamentosContrato()}function queryCamposDeValor(t){return`.recalcula-valor-contrato[name='comex_gestao_de_cambio_contrato[${t}]']`}function removeMascara(t){let e=parseFloat(t.replace(",","."));return isNaN(e)?0:e}function reaplicaMascara(t,e=2){return t.toFixed(e).replace(".",",")}function initializeSelectBeneficiario(){const t=$("#comex_gestao_de_cambio_contrato_stakeholder_id");t.on("change",function(){if(!this.value)return;if("novoBeneficiario"==this.value)return openNewStakeholderCambioModal();const e=$("#comex_gestao_de_cambio_contrato_pais_id"),i=t.find(":selected").data("pais");e.val(i),e.trigger("change")})}function gestaoDeCambioUpdatePagamentosMessage(){exibe_mensagem_com_status("Pagamento alterado com sucesso. Salve o contrato para manter as altea\xe7\xf5es.","warning")}function openNewStakeholderCambioModal(){$.rails.ajax({url:"/gestao_de_cambio/contrato_stakeholders/new",contentType:"application/json; charset=utf-8",dataType:"jsonp"})}function changeTabPresentationClass(){const t=$('.cambio-tabs > [role="presentation"]'),e=this;t.removeClass("active"),t.filter(function(){return $(this).children(`[aria-controls="${e.getAttribute("aria-controls")}"]`).length>0}).addClass("active")}function toggleSelectForeignOperator(t){$(".select_foreign_operator_div").toggle(t.is(":checked"))}function renderSelectForeignOperators(t){let e=$("<select name='product_catalog_manufacturer[foreign_operator_code]' id='product_catalog_manufacturer_foreign_operator_code' class='form-control chosen-select'></select>"),i=$("<label for='product_catalog_manufacturer_foreign_operator'> Fabricante/produtor </label>");t.forEach(function(t){e.append($("<option></option>").val(t.code).text(t.name))}),isPresent(t)?($(".select_foreign_operator_div").empty(),$(".select_foreign_operator_div").append(i),$(".select_foreign_operator_div").append(e),activateSelect2(e)):$(".select_foreign_operator_div").empty()}function fillForeignOperatorInputs(t){$("#product_catalog_foreign_operator_internal_code").val(t.codigo),$("#product_catalog_foreign_operator_name").val(t.razao_social)}function erro(t){$("#erro-busca-numero-do-documento").html(t),$("#erro-busca-numero-do-documento").show(),$("#success-busca-numero-do-documento").hide(),aplicaMudancasAposPesquisarCliente()}function busca_stakeholder_por_documento(t){return $.ajax("/stakeholders",{data:{numero_do_documento:t,nao_salvar_filtro:!0,format:"json"},suppressErrors:!0})}function busca_pelo_cpf(t,e,i){request0=busca_stakeholder_por_documento(t),request0.done(function(n){var o;n.stakeholders!=undefined&&0==n.stakeholders.length?((o=$.ajax("/consulta_cpf_apis",{data:{cpf:t},suppressErrors:!0})).done(function(n){$("#stakeholder_numero_do_documento").val(t),$("#stakeholder_razao_social").val(n.nome),$("#stakeholder_pais_id").val(e),$("#stakeholder_pais_id").trigger("change"),$("#stakeholder_tipo_pessoa_id").val(i),$("#stakeholder_tipo_pessoa_id").trigger("change"),$("#erro-busca-numero-do-documento").hide(),$("#success-busca-numero-do-documento").show(),aplicaMudancasAposPesquisarCliente(),defineNaoContribuinte(),$("#segunda-parte").click()}),o.fail(function(){erro("Ops! N\xe3o encontramos o cadastro correspondente ao documento informado em nossa base de dados. Isso n\xe3o significa que o documento informado est\xe1 errado, mas voc\xea ter\xe1 que preencher as informa\xe7\xf5es manualmente, selecionando a op\xe7\xe3o Preenchimento Manual."),$("#segunda-parte").click(),$("#fail-busca-numero-do-documento-valido").show()})):erro("J\xe1 existe um cadastro com este CPF.")})}function busca_pelo_cnpj(t,e,i){request0=busca_stakeholder_por_documento(t),request0.done(function(n){var o;n.stakeholders!=undefined&&0==n.stakeholders.length?((o=$.ajax("/consulta_cnpj_apis",{data:{cnpj:t},suppressErrors:!0})).done(function(n){$("#stakeholder_numero_do_documento").val(t),$("#stakeholder_razao_social").val(n.razao_social),$("#stakeholder_nome_fantasia").val(n.nome_fantasia),$("#cep").val(n.cep),$("#endereco").val(n.logradouro),$("#numero").val(n.numero),$("#complemento").val(n.complemento),$("#bairro").val(n.bairro),$("#municipio_ibge").val(n.codigo_ibge_municipio),$("#municipio_ibge").trigger("change"),$("#uf").val(ufs_id[n.uf]),$("#uf").trigger("change"),$("#stakeholder_pais_id").val(e),$("#stakeholder_pais_id").trigger("change"),$("#stakeholder_tipo_pessoa_id").val(i),$("#stakeholder_tipo_pessoa_id").trigger("change"),$("#stakeholder_modalidade_id").val(n.modalidade),$("#stakeholder_modalidade_id").trigger("change"),$("#erro-busca-numero-do-documento").hide(),$("#success-busca-numero-do-documento").show(),aplicaMudancasAposPesquisarCliente(),$("#segunda-parte").click(),consulta_cnpj_sefaz(t,n.uf)}),o.fail(function(){erro("Ops! N\xe3o encontramos o cadastro correspondente ao documento informado em nossa base de dados. Isso n\xe3o significa que o documento informado est\xe1 errado, mas voc\xea ter\xe1 que preencher as informa\xe7\xf5es manualmente, com a op\xe7\xe3o Preenchimento Manual abaixo."),$("#segunda-parte").click(),$("#fail-busca-numero-do-documento-valido").show()})):erro("J\xe1 existe um cadastro com este CNPJ.")}),request0.fail(function(){erro("Ops! N\xe3o encontramos o cadastro correspondente ao documento informado em nossa base de dados. Isso n\xe3o significa que o documento informado est\xe1 errado, mas voc\xea ter\xe1 que preencher as informa\xe7\xf5es manualmente, selecionando a op\xe7\xe3o Preenchimento Manual.")})}function consulta_cnpj_sefaz(t,e){request=$.ajax("/consulta_cnpj_apis",{data:{fonte:"sefaz",cnpj:t,uf:e},suppressErrors:!0}),request.done(function(t){$("#stakeholder_inscricao_estadual").val(t.inscricao_estadual)})}function numero_de_caracteres_invalido(){$("#erro-busca-numero-do-documento").html("O documento deve ser um CPF ou CNPJ v\xe1lido."),$("#erro-busca-numero-do-documento").show(),$("#success-busca-numero-do-documento").hide(),aplicaMudancasAposPesquisarCliente()}function aplicaMudancasAposPesquisarCliente(){$("#pesquisa-numero-do-documento-stakeholder").find("#icone-pesquisa-numero-do-documento").toggleClass("fa-hourglass-start fa-search"),$("#pesquisa-numero-do-documento-stakeholder").find("#texto-pesquisa-numero-do-documento").html("Buscar dados"),$("#pesquisa-numero-do-documento-stakeholder").css("pointer-events","auto")}function defineNaoContribuinte(){$("#ind-ie-dest-select").val(3).change()}function preenche_nome_ou_documento(t){var e=t.replace(/[^\d]/g,"");11==e.length||14==e.length?($("#stakeholder_numero_do_documento_pesquisa").val(e),$("#pesquisa-numero-do-documento-stakeholder").click()):$("#stakeholder_razao_social").val(t)}function autocomplete_stakeholder(t,e,i){$(t).autocomplete({autoFocus:!0,source:$(t).data("autocomplete-source"),delay:1e3,minLength:3,response:function(e,i){0===$.grep(i.content,function(e){return e.value==$(t).val()}).length&&""!==$(this).val()&&i.content.unshift({id:0,label:$(this).val()+" (criar novo)",value:$(this).val()})},select:function(t,n){if(0===n.item.id){const t=document.querySelector("#formulario-novo-stakeholder-bs");t?$(t).modal({show:!0,backdrop:"static",keyboard:!1}):$("div#formulario_novo_stakeholder").dialog("open"),$("#input-tipos-stakeholder").val(i)}$(e).val(n.item.id),$("#form-foreign_operators").length>0&&fillForeignOperatorInputs(n.item)}}),$(t).keyup(function(){""===$(this).val()&&$(t).val("")})}function ajaxSubmitStakeholderFileForm(){let t=$(".stakeholder-documentos-form"),e=new FormData;t.on("submit",i=>{i.preventDefault(),putDataInFormData(t,e),putFilesInFormData(t,e),$.rails.ajax({url:t.data("url"),type:"post",contentType:!1,data:e,processData:!1,suppressErrors:!0,complete:enableSaveFileForm})})}function putFilesInFormData(t,e){t.find("input[type='file']").each((t,i)=>{i.files.length>0&&e.append(i.name,i.files[0],i.files[0].type)})}function putDataInFormData(t,e){t.serializeArray().forEach(t=>{e.append(t.name,t.value)})}function codigo_ibge_por_id(t){return $("#uf-data").data("ids-ibge")[t]}function mostra_parametrizacao_st_por_regras_da_uf(t){var e=51===codigo_ibge_por_id($(t).val());$(t).closest(".parametrizacao-ncm-dados-uf").find(".parametrizacao-ncm-carga-media").toggle(e)}function is_article(t){return"a"==t||"an"==t}function check_image_preview(){return document.querySelector(".wrapper-field-di")?".wrapper-field-di":".image-preview"}function buscaEmpresa(){for(input=document.getElementById("myInput"),filter=input.value.toUpperCase(),emissor=document.getElementById("emissores"),container=emissor.getElementsByClassName("emissor-container-principal"),i=0;i<container.length;i++)div=container[i].getElementsByTagName("div")[0],nome=container[i].getElementsByClassName("empresa-nome")[0],div.innerHTML.toUpperCase().indexOf(filter)>-1||nome.innerHTML.toUpperCase().indexOf(filter)>-1?container[i].style.display="":container[i].style.display="none"}function listenEventModal(t){const e={idAutocomplete:"#linha_extrato_receita_fornecedor",idValue:"#linha_extrato_receita_fornecedor_id"},i={idAutocomplete:"#linha_extrato_despesa_fornecedor",idValue:"#linha_extrato_despesa_fornecedor_id"};let n={modalContaAReceberSemLinha:e,modalContaAReceber:e,modalContaAPagar:i,modalContaAPagarSemLinha:i};if(n.hasOwnProperty(t.target.id)){initAutocompleteExtratoReceitaFornecedor($(t.target).find(n[t.target.id].idAutocomplete),$(t.target).find(n[t.target.id].idValue))}}function iniciaFiltros(t){let e=t&&"CREDIT"==t?"credito":"debito",i=document.querySelectorAll("#body-conciliacao-"+e+" tr"),n=Array.from(i);filterLinhas(n,""),$("#filtro-cliente").on("keyup",function(){filterLinhas(n,$(this).val().toLocaleLowerCase())}),$("#filtro-data").on("change",function(){let t=$(this).val().length>0?moment($(this).val()).format("DD/MM/YYYY"):"";filterLinhas(n,t)})}function filterLinhas(t,e){let i=t.filter(t=>t.innerText.toLocaleLowerCase().includes(e));e.length>0&&t.map(t=>{const e=t.querySelector('[name="contas_id[]"]');e&&!e.checked&&(t.style.display="none")}),i.map(t=>{t.removeAttribute("style")})}function initAutocompleteExtratoReceitaFornecedor(t,e){t.val(""),t.autocomplete({autoFocus:!0,source:t.data("autocomplete-source"),delay:500,minLength:3,response:function(e,i){0===$.grep(i.content,function(e){return e.value==t.val()}).length&&""!==$(this).val()&&i.content.unshift({id:0,label:$(this).val(),value:$(this).val()})},select:function(t,i){e.val(i.item.id),"#linha_extrato_despesa_fornecedor_id"===e.selector?autocompletePayableFieldsByFornecedor(i.item,"linha_extrato_despesa"):autocompleteReceivableFieldsByCliente(i.item,"linha_extrato_receita")}})}function calculaOutrosInputsExtrato(t){var e=$(t.context),i=t.find(".input_juros"),n=t.find(".input_valor_liquido"),o=t.find(".input_desconto"),a=parseFloat(t.find(".selecionar-conta").data("valor"));e.hasClass("input_juros")||e.hasClass("input_desconto")?n.val(arredondaFloatEFormata(calcula_valor_liquido(a,to_float(o.val()),to_float(i.val())))).trigger("change"):(i.val(arredondaFloatEFormata(calcula_juros(to_float(n.val()),a))),o.val(arredondaFloatEFormata(calcula_desconto(to_float(n.val()),a))))}function desabilitaFiltro(t){let e=document.querySelectorAll(".box-filtro-concilioacao-modal input");if(!e)return!1;e.forEach(e=>{e.disabled=t>0})}function calculaValorFaltante(){let t=calculaTotalValorSelecionados(),e=parseFloat($("#valor_linha_extrato_bancario").val()),i=$(".selecionar-conta:checked, .selecionar-transferencia:checked");diferencaCalculada=e-t,diferencaCalculada<0&&(diferencaCalculada*=-1),diferencaCalculadaComMascara=formataDinheiro(diferencaCalculada.toFixed(2));const n=document.getElementById("texto-conciliacao"),o=document.getElementById("texto-conciliacao-topo");o.classList.remove("bg-red","bg-lime"),e>t?(n.innerHTML="O valor da linha do extrato \xe9 maior que o total selecionado! Faltam "+diferencaCalculadaComMascara,o.innerHTML="Faltam "+diferencaCalculadaComMascara):e<t&&(n.innerHTML="O valor da linha do extrato \xe9 menor que o total selecionado! Ultrapassou "+diferencaCalculadaComMascara,o.innerHTML="Ultrapassou "+diferencaCalculadaComMascara,o.classList.add("bg-red")),e===t?(n.innerHTML="\xd3timo! O valor da linha do extrato \xe9 igual o total selecionado.",o.innerHTML="\xd3timo!",o.classList.add("bg-lime"),$("#processar-conciliacao").prop("disabled",!1)):$("#processar-conciliacao").prop("disabled",!0),0===i.length&&(n.innerHTML="Para realizar a concilia\xe7\xe3o o valor das contas deve se igualar ao valor da linha do extrato banc\xe1rio ("+formataDinheiro(e.toFixed(2))+").",o.innerHTML="",$("#processar-conciliacao").prop("disabled",!0))}function calculaTotalValorSelecionados(){let t=$(".selecionar-conta:checked, .selecionar-transferencia:checked"),e=[];if(t.each(function(){var t=$(this).data("id");e.push(to_float(document.getElementById(t).value))}),e.length>0)return totalValorSelecionados=e.reduce(function(t,e){return t+e}),parseFloat(totalValorSelecionados.toFixed(2))}function formataDinheiro(t){return"R$ "+parseFloat(t).toFixed(2).replace(".",",").replace(/(\d)(?=(\d{3})+\,)/g,"$1.")}function ativandoCarouselParceirosNormais(){$(".cards-parceiros").owlCarousel({margin:2,dots:!1,nav:!0,navText:["<i class='fa fa-arrow-circle-o-left fa-4x'></i>","<i class='fa fa-arrow-circle-o-right fa-4x'></i>"],responsive:{1300:{items:4},1400:{items:5},1600:{items:6}}})}function ativandoCarouselParceirosDestaque(){$(".cards-parceiro-destaque").owlCarousel({dots:!1,nav:!0,navText:["<i class='fa fa-arrow-circle-o-left fa-4x'></i>","<i class='fa fa-arrow-circle-o-right fa-4x'></i>"],responsive:{0:{items:1},600:{items:2},1366:{items:3},1760:{items:4}}})}function salvaEstadoDoFiltro(t=!0){let e;Cookies.set(nomeDoCookie(),statusDoFiltro()),Cookies.get(nomeDoCookie())==statusEscondido()?(e="Filtro fixado <b>fechado</b> com sucesso",animaAposFixarFiltroFechado()):Cookies.get(nomeDoCookie())==statusAparecendo()&&(e="Filtro fixado <b>aberto</b> com sucesso",animaAposFixarFiltroAberto()),t&&exibe_mensagem_com_status(e,"success")}function nomeDoFiltro(){return $("#nome_do_filtro").val()}function nomeDoCookie(){return"filtro-"+nomeDoFiltro()}function statusDoFiltro(){return"Mostrar filtros"==$.trim($("#troca_filtro").text())?statusEscondido():statusAparecendo()}function filtroEscondido(){return statusDoFiltro()==statusEscondido()}function filtroAparecendo(){return statusDoFiltro()==statusAparecendo()}function exibirFiltroPorConfiguracao(){return"true"==$("#configuracao_exibe_filtro").val()}function statusEscondido(){return"escondido"}function statusAparecendo(){return"aparecendo"}function mostraFiltro(t){$("#body-filtro").slideDown(t),$("#troca_filtro").html("Esconder filtros <i class='fa fa-chevron-up' aria-hidden='true'></i>")}function escondeFiltro(t){$("#body-filtro").slideUp(t),$("#troca_filtro").html("Mostrar filtros <i class='fa fa-chevron-down' aria-hidden='true'></i>")}function animaAposFixarFiltroFechado(){$("#prende_filtro").html("<i class='fa fa-anchor fa-rotate-90' aria-hidden='true'></i> Fixar filtro")}function animaAposFixarFiltroAberto(){$("#prende_filtro").html("<i class='fa fa-anchor' aria-hidden='true'></i> Fixar filtro")}function behaviorBtnExpandFilter(t){const e=document.querySelector('[data-target=".row-hidden-filters"]'),i=e.dataset.more||null,n=e.dataset.less||null;"shown"===t.type?(e.classList.add("opened"),e.querySelector("span").innerHTML=n||"menos"):"hidden"===t.type&&(e.classList.remove("opened"),e.querySelector("span").innerHTML=i||"mais")}function removeCampoDofiltro(t){t.stopPropagation();const e=$(".panel-filtro-custom").find("form"),i=this.dataset.filterKey;e.find(`input[name="${i}"]`).val(""),e.submit()}function nomeDoCookieBanner(){return"banner-dashboard-"+$(".b-dashboard-container").data("bannerId")}function statusEscondido(){return"escondido"}function nomeDoCookieCortina(){return"cortina-markerting-"+$(".cortina-marketing-container").data("cortinaId")}function statusEscondido(){return"escondido"}function statusExibindo(){return"exibindo"}function calculateAvailableAmount(){const t=calculateTotalAccountsForRebate(),e=parseFloat($("#saldo_disponivel").val()),i=$(".selecionar-conta-para-abatimento:checked");let n=e-t;const o=$(".selecionar-conta-para-abatimento:not(:checked)");n<=0?(n=0,o.prop("disabled",!0)):o.prop("disabled",!1);const a=currencyFormatForRebateInvoice(n.toFixed(2));e>t?document.getElementById("texto-abatimento-devolucao").innerHTML=`Selecione abaixo as contas que ir\xe3o sofrer abatimentos. Saldo dispon\xedvel: ${a}.`:e<t&&(document.getElementById("texto-abatimento-devolucao").innerHTML=`O valor dispon\xedvel para abatimento foi alcan\xe7ado! Saldo dispon\xedvel ${a}. Lembrando que contas com valores superiores ao dispon\xedvel para abatimentos, ter\xe3o o valor deduzido de forma parcial.`),e===t&&(document.getElementById("texto-abatimento-devolucao").innerHTML=`O valor dispon\xedvel para abatimento foi alcan\xe7ado! Saldo dispon\xedvel ${a}.`),0===i.length&&(document.getElementById("texto-abatimento-devolucao").innerHTML=`Selecione abaixo as contas que ir\xe3o sofrer abatimentos. Saldo dispon\xedvel: ${currencyFormatForRebateInvoice(e.toFixed(2))}.`)}function calculateTotalAccountsForRebate(){const t=$(".selecionar-conta-para-abatimento:checked"),e=[];let i;return t.each(function(){const t=$(this).data("id");e.push(to_float(document.getElementById(t).getAttribute("data-valor")))}),e.length>0?(i=e.reduce((t,e)=>t+e),parseFloat(i.toFixed(2))):0}function currencyFormatForRebateInvoice(t){return isNaN(t)?0:`R$ ${parseFloat(t).toFixed(2).replace(".",",").replace(/(\d)(?=(\d{3})+\,)/g,"$1.")}`}function handleModalInsightDre({data:t}){const{status:e,message:i,insights_dre:n}=t;exibe_mensagem_com_status(i,e),enableBtnInsightDre(),"success"===e&&openInsightSideModal(n.insights)}function openInsightSideModal(t){const e=$("#dre-container"),i=e.find("#panel-insights-dre .panel-body");i.text(t),e.hasClass("show-insights")||(e.addClass("show-insights"),$('[data-dismiss="panel-insights-dre"]').on("click",function(){e.removeClass("show-insights"),i.text(""),$(this).off("click")}))}function enableBtnInsightDre(){const t=$("#gerar_insight_link");t.html(t.data("enableText")),t.removeAttr("disabled")}function upVotyIframe(){if(tokenField.length>0){const t=document.createElement("script");t.onload=function(){upvoty.init("render",{ssoToken:tokenField.val(),baseUrl:"maino.upvoty.com"})},document.head.appendChild(t),t.src="https://maino.upvoty.com/javascript/upvoty.embed.js"}}function handleDashboard(t){let e=new FormData(t);e["delete"]("cfop[]");let i=Object.fromEntries(e);i.cfop=handleTags();let n=`\n    <section class="board-notas-fiscais loading-container">\n      <div class="spinner-border text-maino-blue" role="status">\n        <span class="sr-only"><%= t('helpers.submit.loading') %></span>\n      </div>\n      ${window.t("helpers.submit.loading")}\n    </section>\n  `;if($("#dashboard-relatorio-nfs").html(n),i.data_ini.length<1){let t=new Date;i.data_ini=moment(t).startOf("month").format("DD/MM/YYYY"),i.data_fim=moment(t).endOf("month").format("DD/MM/YYYY"),$("[name=data_ini]").val(i.data_ini),$("[name=data_fim]").val(i.data_fim)}$.rails.ajax({url:"/relatorio_notas_fiscais",data:i,type:"get",dataType:"jsonp",success:t=>{console.log(t)}})}function handleTags(){
let t=document.getElementById("cfop"),e=t.parentElement.querySelectorAll(".select2-selection__rendered li.select2-selection__choice"),i=Array.from(e).map(t=>t.title),n=t.querySelectorAll("option");return Array.from(n).map(t=>({key:t.value,value:t.innerText})).filter(t=>i.includes(t.value)).map(t=>t.key)}function switchMonitoramento(){let t=$("#monitoramento_nfs");t.on("change",function(){t.is(":checked")?swal({title:"Ci\xeancia da Opera\xe7\xe3o",text:warningMonitoramento,type:"warning",confirmButtonText:"Ativar",showCancelButton:!0}).then(()=>{desativaOuAtivaMonitoramento(t)})["catch"](()=>{t.prop("checked",!1)}):desativaOuAtivaMonitoramento(t)})}function desativaOuAtivaMonitoramento(t){$.rails.ajax({url:$(t).data("url"),dataType:"script"})}function conferirProdutos(){$(".conferir-produtos").on("click",function(){let t=$(this).data("chave-id"),e=`/chave_de_acesso_de_nfes/${t}/incorporar_estoque_automaticamente`;swal({title:"Todos os produtos da nota foram conferidos com sucesso.",text:"deseja entrar com os produtos no estoque automaticamente?",type:"warning",confirmButtonText:"Sim",cancelButtonText:"N\xe3o",showCancelButton:!0}).then(()=>{$.rails.ajax({url:e,type:"POST",data:{chave_de_acesso_de_nfe_id:t},success:t=>{exibe_mensagem(t.message)},error:({responseJSON:t,status:e})=>{errosConferirProdutos(t,e)}})})["catch"](()=>{})})}function errosConferirProdutos(t,e){400===e&&exibe_erro(t.message)}function _modalDi(){return{elModal:$("#modal-tab-di"),abrir:function(){this.render(spinnerMaino()),this.elModal.modal({show:!0,backdrop:"static",keyboard:!1}),this.elModal.on("hidden.bs.modal",()=>{this.render(""),$('a[aria-controls="produto"]').click()})},fechar:function(){this.elModal.modal("hide")},render:function(t){this.elModal.find(".content-modal-di-tab").html(t).ready(function(){aplicaChosenSelect()})}}}function spinnerMaino(){return'<div class="text-center"><div class="spinner-border text-maino-blue" role="status"><span class="sr-only"></span></div></div>'}function renderAlterarQuantidade(t){const e=$("#mov-produto-qtd-edit"),i=$("#mov-produto-qtd");let n="flex",o="removeClass";t&&t.length>0&&(o="addClass",n="none"),e[o]("wrapper-alterar-qtd"),i.css({display:n}),e.html(t)}function alterarQuantidade(t,e){const i=$("#mov_estoque_nota_fiscal_quantidade_comercial").val();i&&i.length>0&&($(document).on("ajaxStart",function(){$.rails.disableFormElement($(t))}),$(document).on("ajaxComplete",function(){$.rails.enableFormElement($(t))}),$.rails.ajax({url:e,dataType:"jsonp",data:{mov_estoque_nota_fiscal:{quantidade_comercial:i}},type:"patch"}))}function finalizaAlterarQuantidade(t){if(renderAlterarQuantidade(""),t&&Object.keys(t).length>0){const{mov_estoque_nota_fiscal_valor_total:e,quantidade_comercial:i,quantidade_comercial_formatado:n,unidade_medida:o,valor_unitario_comercial:a}=t,r=$("#quantidade_produtos");r.attr("data-quantidade",i),r.text(`${n} ${o}`),$("#mov_estoque_nota_fiscal_valor_unitario_comercial").val(a,10),$("#mov_estoque_nota_fiscal_valor_total").val(e),window.location.reload()}}function habilitaCampos(t){if(!situacoes)return;const{codigo:e,simples:i}=situacoes;let n="undefined"!=typeof t.type?$(t.target).val():t;i?habilitaCamposSimpesNacional(n,e):_habilitaCampos(n,e)}function habilitaCamposSimpesNacional(t,e){habilita_desabilita_campos_st(!0),habilita_desabilita_campos_ret(!1),habilita_desabilita_campos_credito(!0),habilita_desabilita_campos_icms(!1),t==e.s101?habilita_desabilita_campos_st(!1):[e.s102,e.s103,e.s300,e.s400].includes(t)?(habilita_desabilita_campos_credito(!1),habilita_desabilita_campos_st(!1)):[e.s202,e.s203].includes(t)?habilita_desabilita_campos_credito(!1):t==e.s500?(habilita_desabilita_campos_credito(!1),habilita_desabilita_campos_st(!1),habilita_desabilita_campos_ret(!0)):t==e.s900&&habilita_desabilita_campos_icms(!0)}function _habilitaCampos(t,e){habilita_desabilita_campos_st(!1),habilita_desabilita_campos_icms(!1),$(".campo_st_retido").prop("disabled",!0),$("#mov_estoque_nota_fiscal_percentual_diferimento").prop("disabled",!0),t==e.s00?habilita_desabilita_campos_icms(!0):t==e.s10?(habilita_desabilita_campos_st(!0),habilita_desabilita_campos_icms(!0),monta_campos_st()):t==e.s20?(habilita_desabilita_campos_icms(!0),habilita_desabilita_campos_motivo_desoneracao(!0)):t==e.s30?(habilita_desabilita_campos_st(!0),habilita_desabilita_campos_motivo_desoneracao(!0)):t==e.s41?(habilita_desabilita_campos_icms(!0),habilita_desabilita_campos_motivo_desoneracao(!0)):t==e.s51?(habilita_desabilita_campos_icms(!0),$("#mov_estoque_nota_fiscal_percentual_diferimento").prop("disabled",!1)):[e.s40,e.s50].includes(t)?habilita_desabilita_campos_motivo_desoneracao(!0):t==e.s60?($(".campo_st_retido").prop("disabled",!1),habilita_desabilita_campos_motivo_desoneracao(!0)):[e.s70,e.s90].includes(t)&&(habilita_desabilita_campos_st(!0),habilita_desabilita_campos_icms(!0),habilita_desabilita_campos_motivo_desoneracao(!0))}function habilita_desabilita_campos_motivo_desoneracao(t){handelCampos(["mov_estoque_nota_fiscal_motivo_desoneracao_id"],t)}function habilita_desabilita_campos_credito(t){handelCampos(["mov_estoque_nota_fiscal_p_aproveitamento_icms","mov_estoque_nota_fiscal_v_aproveitamento_icms"],t)}function habilita_desabilita_campos_icms(t){let e=["mov_estoque_nota_fiscal_icms_mod_bc_id","mov_estoque_nota_fiscal_v_icms_bc","mov_estoque_nota_fiscal_p_icms_bc","mov_estoque_nota_fiscal_p_icms","mov_estoque_nota_fiscal_v_icms"];situacoes.simples&&(e=e.concat(["mov_estoque_nota_fiscal_p_fcp_uf_dest"])),handelCampos(e,t)}function habilita_desabilita_campos_st(t){handelCampos(["mov_estoque_nota_fiscal_icms_mod_bc_st_id","mov_estoque_nota_fiscal_p_icms_st_val_ad","mov_estoque_nota_fiscal_p_icms_st_bc","mov_estoque_nota_fiscal_v_icms_st_bc","mov_estoque_nota_fiscal_p_icms_st","mov_estoque_nota_fiscal_v_icms_st","mov_estoque_nota_fiscal_v_fcp_st_bc","mov_estoque_nota_fiscal_p_fcp_st","mov_estoque_nota_fiscal_v_fcp_st"],t)}function handelCampos(t,e,i){Array.isArray(t)&&t.forEach(t=>{let n=document.getElementById(t);n&&(n.disabled=!e,e&&void 0===i&&(n.className="form-control"))})}function habilita_desabilita_campos_ret(t){$(".campo_st_retido").prop("disabled",!t)}function valorIcms(){return situacoes.simples?$("#valor_icms_comum").val():$("#mov_estoque_nota_fiscal_v_icms").val()}function bcIcms(){return situacoes.simples?$("#bc_icms_comum").val():$("#mov_estoque_nota_fiscal_v_icms_bc").val()}function aplicarReducaoBcIcms(t){t.preventDefault();const e=$("#mov_estoque_nota_fiscal_v_icms_bc"),i=e.val().replace(",",".")*(1-$("#mov_estoque_nota_fiscal_p_icms_bc").val().replace(",",".")/100);e.val(i.toFixed(2).replace(".",",")),$("#mov_estoque_nota_fiscal_v_fcp_bc").val(i.toFixed(2).replace(".",",")),calcula_imposto(document.getElementById("mov_estoque_nota_fiscal_p_icms").value,"mov_estoque_nota_fiscal_v_icms_bc","mov_estoque_nota_fiscal_v_icms"),calcula_imposto(document.getElementById("mov_estoque_nota_fiscal_p_fcp").value,"mov_estoque_nota_fiscal_v_fcp_bc","mov_estoque_nota_fiscal_v_fcp")}function isAggregateMarginValue(){return"Margem Valor Agregado (%)"===$("#mov_estoque_nota_fiscal_icms_mod_bc_st_id option:selected").text()}function shouldRecalculateTaxes(){return!$("#nao_recalcular_impostos").is(":checked")}function calculateICMSST(){const t=bcIcms(),e=(document.getElementById("aliquota").value,document.getElementById("aliquota_interna").value,document.getElementById("valor_ipi").value);let i=document.getElementById("mov_estoque_nota_fiscal_p_icms_st_val_ad").value;const n=valorIcms();i=i.replace(",",".");const o=parseFloat(t),a=parseFloat(e);parseFloat(n);let r=o;isDi||(r+=a);const s=r*(1+i/100);shouldRecalculateTaxes()&&isAggregateMarginValue()&&(isNaN(s)||(document.getElementById("mov_estoque_nota_fiscal_v_icms_st_bc").value=(""+s.toFixed(2)).replace(".",","),document.getElementById("mov_estoque_nota_fiscal_v_fcp_st_bc").value=(""+s.toFixed(2)).replace(".",","))),recalculateICMSST()}function recalculateICMSST(){const t=document.getElementById("mov_estoque_nota_fiscal_v_icms_st_bc").value.replace(",","."),e=document.getElementById("mov_estoque_nota_fiscal_p_icms_st").value.replace(",","."),i=document.getElementById("mov_estoque_nota_fiscal_p_fcp_st").value.replace(",","."),n=document.getElementById("mov_estoque_nota_fiscal_v_icms").value.replace(",","."),o=document.getElementById("mov_estoque_nota_fiscal_v_fcp").value.replace(",","."),a=document.getElementById("mov_estoque_nota_fiscal_credito_icms_no_st").value.replace(",","."),r=document.getElementById("mov_estoque_nota_fiscal_credito_fcp_no_st").value.replace(",","."),s=parseFloat(t),l=parseFloat(e),c=parseFloat(i),u=parseFloat(n),d=parseFloat(o),p=parseFloat(a),h=parseFloat(r);let f=s*(l/100),m=s*(c/100);""!=n&&(f-=u*(p/100)),""!=o&&(m-=d*(h/100)),shouldRecalculateTaxes()&&isAggregateMarginValue()&&(isNaN(f)||(document.getElementById("mov_estoque_nota_fiscal_v_icms_st").value=(""+f.toFixed(2)).replace(".",",")),isNaN(m)||(document.getElementById("mov_estoque_nota_fiscal_v_fcp_st").value=(""+m.toFixed(2)).replace(".",",")))}function monta_campos_st(){const t=document.getElementById("aliquota_interna").value;"0,00"==document.getElementById("mov_estoque_nota_fiscal_p_icms_st").value&&(document.getElementById("mov_estoque_nota_fiscal_p_icms_st").value=(""+parseFloat(t).toFixed(2)).replace(".",",")),calculateICMSST()}function aplicarReducaoBcIcmsSt(t){t.preventDefault();const e=$("#mov_estoque_nota_fiscal_v_icms_st_bc").val().replace(",",".")*(1-$("#mov_estoque_nota_fiscal_p_icms_st_bc").val().replace(",",".")/100);$("#mov_estoque_nota_fiscal_v_icms_st_bc").val(e.toFixed(2).replace(".",",")),$("#mov_estoque_nota_fiscal_v_fcp_st_bc").val(e.toFixed(2).replace(".",",")),calcula_imposto(document.getElementById("mov_estoque_nota_fiscal_p_icms_st").value,"mov_estoque_nota_fiscal_v_icms_st_bc","mov_estoque_nota_fiscal_v_icms_st"),calcula_imposto(document.getElementById("mov_estoque_nota_fiscal_p_fcp_st").value,"mov_estoque_nota_fiscal_v_fcp_st_bc","mov_estoque_nota_fiscal_v_fcp_st"),recalculateICMSST()}function mostraEscondePartesIpi(t){handelCampos(["ipi_cod_enq","mov_estoque_nota_fiscal_ipi_cnpj_produtor","mov_estoque_nota_fiscal_ipi_cod_selo_controle","mov_estoque_nota_fiscal_ipi_qtde_selo_controle"],t,null)}function habilitaCamposIpi(t,e){if(!situacoes)return;const{ipi:i,ipi_tipo:n}=situacoes;let o;"undefined"!=typeof t.type?(o=t.target.value,e=document.getElementById("mov_estoque_nota_fiscal_ipi_tipo_calculo_id").value):o=t,0==o?(mostraEscondePartesIpi(!1),handelCampos(["mov_estoque_nota_fiscal_ipi_vbc","mov_estoque_nota_fiscal_p_ipi","mov_estoque_nota_fiscal_ipi_qtde_total_unid_padrao","mov_estoque_nota_fiscal_v_ipi_un","mov_estoque_nota_fiscal_v_ipi"],!1,null)):[i.s00,i.s49,i.s50,i.s99].includes(o)?(mostraEscondePartesIpi(!0),document.getElementById("mov_estoque_nota_fiscal_ipi_tipo_calculo_id").disabled=!1,document.getElementById("mov_estoque_nota_fiscal_v_ipi").disabled=!1,e==n.sP?(handelCampos(["mov_estoque_nota_fiscal_ipi_vbc","mov_estoque_nota_fiscal_p_ipi"],!0,null),handelCampos(["mov_estoque_nota_fiscal_ipi_qtde_total_unid_padrao","mov_estoque_nota_fiscal_v_ipi_un"],!1,null)):e==n.sV&&(handelCampos(["mov_estoque_nota_fiscal_ipi_vbc","mov_estoque_nota_fiscal_p_ipi"],!1,null),handelCampos(["mov_estoque_nota_fiscal_ipi_qtde_total_unid_padrao","mov_estoque_nota_fiscal_v_ipi_un"],!0,null))):(document.getElementById("mov_estoque_nota_fiscal_ipi_tipo_calculo_id").disabled=!0,mostraEscondePartesIpi(!0),handelCampos(["mov_estoque_nota_fiscal_ipi_vbc","mov_estoque_nota_fiscal_p_ipi","mov_estoque_nota_fiscal_ipi_qtde_total_unid_padrao","mov_estoque_nota_fiscal_v_ipi_un","mov_estoque_nota_fiscal_v_ipi"],!1,null))}function habilitaCamposPis(t){if(!situacoes)return;const{pis:e,grupo_outros:i}=situacoes;let n;n="undefined"!=typeof t.type?t.target.value:t,esconde_primeira_parte(),esconde_segunda_parte(),0==n?escondeEscondeTipoCalculo(!0):i.indexOf(n)>-1?(escondeEscondeTipoCalculo(!1),mostra_segunda_parte()):n==e.s01||n==e.s02?(escondeEscondeTipoCalculo(!0),mostra_segunda_parte(),mostra_primeira_parte_percentual()):n==e.s03?(escondeEscondeTipoCalculo(!0),mostra_segunda_parte(),mostra_primeira_parte_valor()):(escondeEscondeTipoCalculo(!0),mostra_segunda_parte())}function escondeEscondeTipoCalculo(t){document.getElementById("mov_estoque_nota_fiscal_"+tabName()+"_tipo_calculo_id").disabled=t,esconde_primeira_parte(),t||mostra_primeira_parte()}function esconde_primeira_parte(){handelCampos(["mov_estoque_nota_fiscal_v_"+tabName()+"_bc","mov_estoque_nota_fiscal_p_"+tabName(),"mov_estoque_nota_fiscal_v_"+tabName(),"mov_estoque_nota_fiscal_"+tabName()+"_aliq_reais","mov_estoque_nota_fiscal_"+tabName()+"_qtde_vendida"],!1,null)}function mostra_primeira_parte_percentual(){handelCampos(["mov_estoque_nota_fiscal_v_"+tabName()+"_bc","mov_estoque_nota_fiscal_p_"+tabName(),"mov_estoque_nota_fiscal_v_"+tabName()],!0,null)}function mostra_primeira_parte_valor(){handelCampos(["mov_estoque_nota_fiscal_"+tabName()+"_aliq_reais","mov_estoque_nota_fiscal_"+tabName()+"_qtde_vendida","mov_estoque_nota_fiscal_v_"+tabName()],!0,null)}function mostra_primeira_parte(){const{ipi_tipo:t}=situacoes,e=document.getElementById("mov_estoque_nota_fiscal_"+tabName()+"_tipo_calculo_id").value;e==t.sP?mostra_primeira_parte_percentual():e==t.sV?mostra_primeira_parte_valor():esconde_primeira_parte()}function esconde_segunda_parte(){handelCampos(["mov_estoque_nota_fiscal_"+tabName()+"_st_v_bc","mov_estoque_nota_fiscal_"+tabName()+"_st_aliq_percentual","mov_estoque_nota_fiscal_"+tabName()+"_st_aliq_reais","mov_estoque_nota_fiscal_"+tabName()+"_st_qtde_vendida","mov_estoque_nota_fiscal_"+tabName()+"_st_valor"],!1,null)}function mostra_segunda_parte(){const{ipi_tipo:t}=situacoes;document.getElementById("mov_estoque_nota_fiscal_"+tabName()+"_st_valor").disabled=!1;const e=document.getElementById("mov_estoque_nota_fiscal_"+tabName()+"_st_tipo_calculo_id").value;e==t.sP?handelCampos(["mov_estoque_nota_fiscal_"+tabName()+"_st_v_bc","mov_estoque_nota_fiscal_"+tabName()+"_st_aliq_percentual"],!0,null):e==t.sV?handelCampos(["mov_estoque_nota_fiscal_"+tabName()+"_st_aliq_reais","mov_estoque_nota_fiscal_"+tabName()+"_st_qtde_vendida"],!0,null):esconde_segunda_parte()}function tabName(){if(globaTab)return globaTab.replace("tab-","")}function onloadCallback(t){document.getElementById("solicitar-alteracao").disabled=void 0===t}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e=!!t&&"length"in t&&t.length,i=ht.type(t);return"function"!==i&&!ht.isWindow(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}function n(t,e,i){if(ht.isFunction(e))return ht.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return ht.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(xt.test(e))return ht.filter(e,t,i);e=ht.filter(e,t)}return ht.grep(t,function(t){return ht.inArray(t,e)>-1!==i})}function o(t,e){do{t=t[e]}while(t&&1!==t.nodeType);return t}function a(t){var e={};return ht.each(t.match(Et)||[],function(t,i){e[i]=!0}),e}function r(){nt.addEventListener?(nt.removeEventListener("DOMContentLoaded",s),t.removeEventListener("load",s)):(nt.detachEvent("onreadystatechange",s),t.detachEvent("onload",s))}function s(){(nt.addEventListener||"load"===t.event.type||"complete"===nt.readyState)&&(r(),ht.ready())}function l(t,e,i){if(i===undefined&&1===t.nodeType){var n="data-"+e.replace(Pt,"-$1").toLowerCase();if("string"==typeof(i=t.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:It.test(i)?ht.parseJSON(i):i)}catch(o){}ht.data(t,e,i)}else i=undefined}return i}function c(t){var e;for(e in t)if(("data"!==e||!ht.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function u(t,e,i,n){if(Ot(t)){var o,a,r=ht.expando,s=t.nodeType,l=s?ht.cache:t,c=s?t[r]:t[r]&&r;if(c&&l[c]&&(n||l[c].data)||i!==undefined||"string"!=typeof e)return c||(c=s?t[r]=it.pop()||ht.guid++:r),l[c]||(l[c]=s?{}:{toJSON:ht.noop}),"object"!=typeof e&&"function"!=typeof e||(n?l[c]=ht.extend(l[c],e):l[c].data=ht.extend(l[c].data,e)),a=l[c],n||(a.data||(a.data={}),a=a.data),i!==undefined&&(a[ht.camelCase(e)]=i),"string"==typeof e?null==(o=a[e])&&(o=a[ht.camelCase(e)]):o=a,o}}function d(t,e,i){if(Ot(t)){var n,o,a=t.nodeType,r=a?ht.cache:t,s=a?t[ht.expando]:ht.expando;if(r[s]){if(e&&(n=i?r[s]:r[s].data)){o=(e=ht.isArray(e)?e.concat(ht.map(e,ht.camelCase)):e in n?[e]:(e=ht.camelCase(e))in n?[e]:e.split(" ")).length;for(;o--;)delete n[e[o]];if(i?!c(n):!ht.isEmptyObject(n))return}(i||(delete r[s].data,c(r[s])))&&(a?ht.cleanData([t],!0):dt.deleteExpando||r!=r.window?delete r[s]:r[s]=undefined)}}}function p(t,e,i,n){var o,a=1,r=20,s=n?function(){return n.cur()}:function(){return ht.css(t,e,"")},l=s(),c=i&&i[3]||(ht.cssNumber[e]?"":"px"),u=(ht.cssNumber[e]||"px"!==c&&+l)&&jt.exec(ht.css(t,e));if(u&&u[3]!==c){c=c||u[3],i=i||[],u=+l||1;do{u/=a=a||".5",ht.style(t,e,u+c)}while(a!==(a=s()/l)&&1!==a&&--r)}return i&&(u=+u||+l||0,o=i[1]?u+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=u,n.end=o)),o}function h(t){var e=Ut.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function f(t,e){var i,n,o=0,a="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):undefined;if(!a)for(a=[],i=t.childNodes||t;null!=(n=i[o]);o++)!e||ht.nodeName(n,e)?a.push(n):ht.merge(a,f(n,e));return e===undefined||e&&ht.nodeName(t,e)?ht.merge([t],a):a}function m(t,e){for(var i,n=0;null!=(i=t[n]);n++)ht._data(i,"globalEval",!e||ht._data(e[n],"globalEval"))}function g(t){Ht.test(t.type)&&(t.defaultChecked=t.checked)}function v(t,e,i,n,o){for(var a,r,s,l,c,u,d,p=t.length,v=h(e),_=[],b=0;b<p;b++)if((r=t[b])||0===r)if("object"===ht.type(r))ht.merge(_,r.nodeType?[r]:r);else if(Kt.test(r)){for(l=l||v.appendChild(e.createElement("div")),c=(Wt.exec(r)||["",""])[1].toLowerCase(),d=Gt[c]||Gt._default,l.innerHTML=d[1]+ht.htmlPrefilter(r)+d[2],a=d[0];a--;)l=l.lastChild;if(!dt.leadingWhitespace&&Vt.test(r)&&_.push(e.createTextNode(Vt.exec(r)[0])),!dt.tbody)for(a=(r="table"!==c||Jt.test(r)?"<table>"!==d[1]||Jt.test(r)?0:l:l.firstChild)&&r.childNodes.length;a--;)ht.nodeName(u=r.childNodes[a],"tbody")&&!u.childNodes.length&&r.removeChild(u);for(ht.merge(_,l.childNodes),l.textContent="";l.firstChild;)l.removeChild(l.firstChild);l=v.lastChild}else _.push(e.createTextNode(r));for(l&&v.removeChild(l),dt.appendChecked||ht.grep(f(_,"input"),g),b=0;r=_[b++];)if(n&&ht.inArray(r,n)>-1)o&&o.push(r);else if(s=ht.contains(r.ownerDocument,r),l=f(v.appendChild(r),"script"),s&&m(l),i)for(a=0;r=l[a++];)Yt.test(r.type||"")&&i.push(r);return l=null,v}function _(){return!0}function b(){return!1}function y(){try{return nt.activeElement}catch(t){}}function w(t,e,i,n,o,a){var r,s;if("object"==typeof e){for(s in"string"!=typeof i&&(n=n||i,i=undefined),e)w(t,s,i,n,e[s],a);return t}if(null==n&&null==o?(o=i,n=i=undefined):null==o&&("string"==typeof i?(o=n,n=undefined):(o=n,n=i,i=undefined)),!1===o)o=b;else if(!o)return t;return 1===a&&(r=o,(o=function(t){return ht().off(t),r.apply(this,arguments)}).guid=r.guid||(r.guid=ht.guid++)),t.each(function(){ht.event.add(this,e,o,n,i)})}function $(t,e){return ht.nodeName(t,"table")&&ht.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function x(t){return t.type=(null!==ht.find.attr(t,"type"))+"/"+t.type,t}function k(t){var e=se.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function C(t,e){if(1===e.nodeType&&ht.hasData(t)){var i,n,o,a=ht._data(t),r=ht._data(e,a),s=a.events;if(s)for(i in delete r.handle,r.events={},s)for(n=0,o=s[i].length;n<o;n++)ht.event.add(e,i,s[i][n]);r.data&&(r.data=ht.extend({},r.data))}}function D(t,e){var i,n,o;if(1===e.nodeType){if(i=e.nodeName.toLowerCase(),!dt.noCloneEvent&&e[ht.expando]){for(n in(o=ht._data(e)).events)ht.removeEvent(e,n,o.handle);e.removeAttribute(ht.expando)}"script"===i&&e.text!==t.text?(x(e).text=t.text,k(e)):"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),dt.html5Clone&&t.innerHTML&&!ht.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&Ht.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.defaultSelected=e.selected=t.defaultSelected:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}}function S(t,e,i,n){e=at.apply([],e);var o,a,r,s,l,c,u=0,d=t.length,p=d-1,h=e[0],m=ht.isFunction(h);if(m||d>1&&"string"==typeof h&&!dt.checkClone&&re.test(h))return t.each(function(o){var a=t.eq(o);m&&(e[0]=h.call(this,o,a.html())),S(a,e,i,n)});if(d&&(o=(c=v(e,t[0].ownerDocument,!1,t,n)).firstChild,1===c.childNodes.length&&(c=o),o||n)){for(r=(s=ht.map(f(c,"script"),x)).length;u<d;u++)a=c,u!==p&&(a=ht.clone(a,!0,!0),r&&ht.merge(s,f(a,"script"))),i.call(t[u],a,u);if(r)for(l=s[s.length-1].ownerDocument,ht.map(s,k),u=0;u<r;u++)a=s[u],Yt.test(a.type||"")&&!ht._data(a,"globalEval")&&ht.contains(l,a)&&(a.src?ht._evalUrl&&ht._evalUrl(a.src):ht.globalEval((a.text||a.textContent||a.innerHTML||"").replace(le,"")));c=o=null}return t}function T(t,e,i){for(var n,o=e?ht.filter(e,t):t,a=0;null!=(n=o[a]);a++)i||1!==n.nodeType||ht.cleanData(f(n)),n.parentNode&&(i&&ht.contains(n.ownerDocument,n)&&m(f(n,"script")),n.parentNode.removeChild(n));return t}function A(t,e){var i=ht(e.createElement(t)).appendTo(e.body),n=ht.css(i[0],"display");return i.detach(),n}function E(t){var e=nt,i=de[t];return i||("none"!==(i=A(t,e))&&i||((e=((ue=(ue||ht("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentWindow||ue[0].contentDocument).document).write(),e.close(),i=A(t,e),ue.detach()),de[t]=i),i}function M(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}function O(t){if(t in De)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),i=Ce.length;i--;)if((t=Ce[i]+e)in De)return t}function I(t,e){for(var i,n,o,a=[],r=0,s=t.length;r<s;r++)(n=t[r]).style&&(a[r]=ht._data(n,"olddisplay"),i=n.style.display,e?(a[r]||"none"!==i||(n.style.display=""),""===n.style.display&&qt(n)&&(a[r]=ht._data(n,"olddisplay",E(n.nodeName)))):(o=qt(n),(i&&"none"!==i||!o)&&ht._data(n,"olddisplay",o?i:ht.css(n,"display"))));for(r=0;r<s;r++)(n=t[r]).style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?a[r]||"":"none"));return t}function P(t,e,i){var n=$e.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function N(t,e,i,n,o){for(var a=i===(n?"border":"content")?4:"width"===e?1:0,r=0;a<4;a+=2)"margin"===i&&(r+=ht.css(t,i+Bt[a],!0,o)),n?("content"===i&&(r-=ht.css(t,"padding"+Bt[a],!0,o)),"margin"!==i&&(r-=ht.css(t,"border"+Bt[a]+"Width",!0,o))):(r+=ht.css(t,"padding"+Bt[a],!0,o),"padding"!==i&&(r+=ht.css(t,"border"+Bt[a]+"Width",!0,o)));return r}function L(t,e,i){var n=!0,o="width"===e?t.offsetWidth:t.offsetHeight,a=ge(t),r=dt.boxSizing&&"border-box"===ht.css(t,"boxSizing",!1,a);if(o<=0||null==o){if(((o=ve(t,e,a))<0||null==o)&&(o=t.style[e]),he.test(o))return o;n=r&&(dt.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+N(t,e,i||(r?"border":"content"),n,a)+"px"}function R(t,e,i,n,o){return new R.prototype.init(t,e,i,n,o)}function F(){return t.setTimeout(function(){Se=undefined}),Se=ht.now()}function j(t,e){var i,n={height:t},o=0;for(e=e?1:0;o<4;o+=2-e)n["margin"+(i=Bt[o])]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function B(t,e,i){for(var n,o=(H.tweeners[e]||[]).concat(H.tweeners["*"]),a=0,r=o.length;a<r;a++)if(n=o[a].call(i,e,t))return n}function q(t,e,i){var n,o,a,r,s,l,c,u=this,d={},p=t.style,h=t.nodeType&&qt(t),f=ht._data(t,"fxshow");for(n in i.queue||(null==(s=ht._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,ht.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===("none"===(c=ht.css(t,"display"))?ht._data(t,"olddisplay")||E(t.nodeName):c)&&"none"===ht.css(t,"float")&&(dt.inlineBlockNeedsLayout&&"inline"!==E(t.nodeName)?p.zoom=1:p.display="inline-block")),i.overflow&&(p.overflow="hidden",dt.shrinkWrapBlocks()||u.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]})),e)if(o=e[n],Ae.exec(o)){if(delete e[n],a=a||"toggle"===o,o===(h?"hide":"show")){if("show"!==o||!f||f[n]===undefined)continue;h=!0}d[n]=f&&f[n]||ht.style(t,n)}else c=undefined;if(ht.isEmptyObject(d))"inline"===("none"===c?E(t.nodeName):c)&&(p.display=c);else for(n in f?"hidden"in f&&(h=f.hidden):f=ht._data(t,"fxshow",{}),a&&(f.hidden=!h),h?ht(t).show():u.done(function(){ht(t).hide()}),u.done(function(){var e;for(e in ht._removeData(t,"fxshow"),d)ht.style(t,e,d[e])}),d)r=B(h?f[n]:0,n,u),n in f||(f[n]=r.start,h&&(r.end=r.start,r.start="width"===n||"height"===n?1:0))}function z(t,e){var i,n,o,a,r;for(i in t)if(o=e[n=ht.camelCase(i)],a=t[i],ht.isArray(a)&&(o=a[1],a=t[i]=a[0]),i!==n&&(t[n]=a,delete t[i]),(r=ht.cssHooks[n])&&"expand"in r)for(i in a=r.expand(a),delete t[n],a)i in t||(t[i]=a[i],e[i]=o);else e[n]=o}function H(t,e,i){var n,o,a=0,r=H.prefilters.length,s=ht.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=Se||F(),i=Math.max(0,c.startTime+c.duration-e),n=1-(i/c.duration||0),a=0,r=c.tweens.length;a<r;a++)c.tweens[a].run(n);return s.notifyWith(t,[c,n,i]),n<1&&r?i:(s.resolveWith(t,[c]),!1)},c=s.promise({elem:t,props:ht.extend({},e),opts:ht.extend(!0,{specialEasing:{},easing:ht.easing._default},i),originalProperties:e,originalOptions:i,startTime:Se||F(),duration:i.duration,tweens:[],createTween:function(e,i){var n=ht.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(o)return this;for(o=!0;i<n;i++)c.tweens[i].run(1);return e?(s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c,e])):s.rejectWith(t,[c,e]),this}}),u=c.props;for(z(u,c.opts.specialEasing);a<r;a++)if(n=H.prefilters[a].call(c,t,u,c.opts))return ht.isFunction(n.stop)&&(ht._queueHooks(c.elem,c.opts.queue).stop=ht.proxy(n.stop,n)),n;return ht.map(u,B,c),ht.isFunction(c.opts.start)&&c.opts.start.call(t,c),ht.fx.timer(ht.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function W(t){return ht.attr(t,"class")||""}function Y(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,o=0,a=e.toLowerCase().match(Et)||[];if(ht.isFunction(i))for(;n=a[o++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function V(t,e,i,n){function o(s){var l;return a[s]=!0,ht.each(t[s]||[],function(t,s){var c=s(e,i,n);return"string"!=typeof c||r||a[c]?r?!(l=c):void 0:(e.dataTypes.unshift(c),o(c),!1)}),l}var a={},r=t===ti;return o(e.dataTypes[0])||!a["*"]&&o("*")}function U(t,e){var i,n,o=ht.ajaxSettings.flatOptions||{};for(n in e)e[n]!==undefined&&((o[n]?t:i||(i={}))[n]=e[n]);return i&&ht.extend(!0,t,i),t}function G(t,e,i){for(var n,o,a,r,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),o===undefined&&(o=t.mimeType||e.getResponseHeader("Content-Type"));if(o)for(r in s)if(s[r]&&s[r].test(o)){l.unshift(r);break}if(l[0]in i)a=l[0];else{for(r in i){if(!l[0]||t.converters[r+" "+l[0]]){a=r;break}n||(n=r)}a=a||n}if(a)return a!==l[0]&&l.unshift(a),i[a]}function K(t,e,i,n){var o,a,r,s,l,c={},u=t.dataTypes.slice();if(u[1])for(r in t.converters)c[r.toLowerCase()]=t.converters[r];for(a=u.shift();a;)if(t.responseFields[a]&&(i[t.responseFields[a]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=a,a=u.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(r=c[l+" "+a]||c["* "+a]))for(o in c)if((s=o.split(" "))[1]===a&&(r=c[l+" "+s[0]]||c["* "+s[0]])){!0===r?r=c[o]:!0!==c[o]&&(a=s[0],u.unshift(s[1]));break}if(!0!==r)if(r&&t.throws)e=r(e);else try{e=r(e)}catch(d){return{state:"parsererror",error:r?d:"No conversion from "+l+" to "+a}}}return{state:"success",data:e}}function J(t){return t.style&&t.style.display||ht.css(t,"display")}function Q(t){if(!ht.contains(t.ownerDocument||nt,t))return!0;for(;t&&1===t.nodeType;){if("none"===J(t)||"hidden"===t.type)return!0;t=t.parentNode}return!1}function X(t,e,i,n){var o;if(ht.isArray(e))ht.each(e,function(e,o){i||ai.test(t)?n(t,o):X(t+"["+("object"==typeof o&&null!=o?e:"")+"]",o,i,n)});else if(i||"object"!==ht.type(e))n(t,e);else for(o in e)X(t+"["+o+"]",e[o],i,n)}function Z(){try{return new t.XMLHttpRequest}catch(e){}}function tt(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function et(t){return ht.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}var it=[],nt=t.document,ot=it.slice,at=it.concat,rt=it.push,st=it.indexOf,lt={},ct=lt.toString,ut=lt.hasOwnProperty,dt={},pt="1.12.4",ht=function(t,e){return new ht.fn.init(t,e)},ft=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,mt=/^-ms-/,gt=/-([\da-z])/gi,vt=function(t,e){return e.toUpperCase()};ht.fn=ht.prototype={jquery:pt,constructor:ht,selector:"",length:0,toArray:function(){return ot.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:ot.call(this)},pushStack:function(t){var e=ht.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return ht.each(this,t)},map:function(t){return this.pushStack(ht.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(ot.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:rt,sort:it.sort,splice:it.splice},ht.extend=ht.fn.extend=function(){var t,e,i,n,o,a,r=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[s]||{},s++),"object"==typeof r||ht.isFunction(r)||(r={}),s===l&&(r=this,s--);s<l;s++)if(null!=(o=arguments[s]))for(n in o)t=r[n],r!==(i=o[n])&&(c&&i&&(ht.isPlainObject(i)||(e=ht.isArray(i)))?(e?(e=!1,a=t&&ht.isArray(t)?t:[]):a=t&&ht.isPlainObject(t)?t:{},r[n]=ht.extend(c,a,i)):i!==undefined&&(r[n]=i));return r},ht.extend({expando:"jQuery"+(pt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===ht.type(t)},isArray:Array.isArray||function(t){return"array"===ht.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){var e=t&&t.toString();return!ht.isArray(t)&&e-parseFloat(e)+1>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==ht.type(t)||t.nodeType||ht.isWindow(t))return!1;try{if(t.constructor&&!ut.call(t,"constructor")&&!ut.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(!dt.ownFirst)for(e in t)return ut.call(t,e);for(e in t);return e===undefined||ut.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?lt[ct.call(t)]||"object":typeof t},globalEval:function(e){e&&ht.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(mt,"ms-").replace(gt,vt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var n,o=0;if(i(t))for(n=t.length;o<n&&!1!==e.call(t[o],o,t[o]);o++);else for(o in t)if(!1===e.call(t[o],o,t[o]))break;return t},trim:function(t){return null==t?"":(t+"").replace(ft,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?ht.merge(n,"string"==typeof t?[t]:t):rt.call(n,t)),n},inArray:function(t,e,i){var n;if(e){if(st)return st.call(e,t,i);for(n=e.length,i=i?i<0?Math.max(0,n+i):i:0;i<n;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,e){for(var i=+e.length,n=0,o=t.length;n<i;)t[o++]=e[n++];if(i!=i)for(;e[n]!==undefined;)t[o++]=e[n++];return t.length=o,t},grep:function(t,e,i){for(var n=[],o=0,a=t.length,r=!i;o<a;o++)!e(t[o],o)!==r&&n.push(t[o]);return n},map:function(t,e,n){var o,a,r=0,s=[];if(i(t))for(o=t.length;r<o;r++)null!=(a=e(t[r],r,n))&&s.push(a);else for(r in t)null!=(a=e(t[r],r,n))&&s.push(a);return at.apply([],s)},guid:1,proxy:function(t,e){var i,n,o;return"string"==typeof e&&(o=t[e],e=t,t=o),ht.isFunction(t)?(i=ot.call(arguments,2),(n=function(){return t.apply(e||this,i.concat(ot.call(arguments)))}).guid=t.guid=t.guid||ht.guid++,n):undefined},now:function(){return+new Date},support:dt}),
"function"==typeof Symbol&&(ht.fn[Symbol.iterator]=it[Symbol.iterator]),ht.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){lt["[object "+e+"]"]=e.toLowerCase()});var _t=
/*!
 * Sizzle CSS Selector Engine v2.2.1
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-10-17
 */
function(t){function e(t,e,i,n){var o,a,r,s,l,c,d,h,f=e&&e.ownerDocument,m=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==m&&9!==m&&11!==m)return i;if(!n&&((e?e.ownerDocument||e:B)!==O&&M(e),e=e||O,P)){if(11!==m&&(c=vt.exec(t)))if(o=c[1]){if(9===m){if(!(r=e.getElementById(o)))return i;if(r.id===o)return i.push(r),i}else if(f&&(r=f.getElementById(o))&&F(e,r)&&r.id===o)return i.push(r),i}else{if(c[2])return X.apply(i,e.getElementsByTagName(t)),i;if((o=c[3])&&w.getElementsByClassName&&e.getElementsByClassName)return X.apply(i,e.getElementsByClassName(o)),i}if(w.qsa&&!Y[t+" "]&&(!N||!N.test(t))){if(1!==m)f=e,h=t;else if("object"!==e.nodeName.toLowerCase()){for((s=e.getAttribute("id"))?s=s.replace(bt,"\\$&"):e.setAttribute("id",s=j),a=(d=C(t)).length,l=pt.test(s)?"#"+s:"[id='"+s+"']";a--;)d[a]=l+" "+p(d[a]);h=d.join(","),f=_t.test(t)&&u(e.parentNode)||e}if(h)try{return X.apply(i,f.querySelectorAll(h)),i}catch(g){}finally{s===j&&e.removeAttribute("id")}}}return S(t.replace(st,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>$.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[j]=!0,t}function o(t){var e=O.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function a(t,e){for(var i=t.split("|"),n=i.length;n--;)$.attrHandle[i[n]]=e}function r(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||U)-(~t.sourceIndex||U);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function s(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function l(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function c(t){return n(function(e){return e=+e,n(function(i,n){for(var o,a=t([],i.length,e),r=a.length;r--;)i[o=a[r]]&&(i[o]=!(n[o]=i[o]))})})}function u(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function d(){}function p(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function h(t,e,i){var n=e.dir,o=i&&"parentNode"===n,a=z++;return e.first?function(e,i,a){for(;e=e[n];)if(1===e.nodeType||o)return t(e,i,a)}:function(e,i,r){var s,l,c,u=[q,a];if(r){for(;e=e[n];)if((1===e.nodeType||o)&&t(e,i,r))return!0}else for(;e=e[n];)if(1===e.nodeType||o){if((s=(l=(c=e[j]||(e[j]={}))[e.uniqueID]||(c[e.uniqueID]={}))[n])&&s[0]===q&&s[1]===a)return u[2]=s[2];if(l[n]=u,u[2]=t(e,i,r))return!0}}}function f(t){return t.length>1?function(e,i,n){for(var o=t.length;o--;)if(!t[o](e,i,n))return!1;return!0}:t[0]}function m(t,i,n){for(var o=0,a=i.length;o<a;o++)e(t,i[o],n);return n}function g(t,e,i,n,o){for(var a,r=[],s=0,l=t.length,c=null!=e;s<l;s++)(a=t[s])&&(i&&!i(a,n,o)||(r.push(a),c&&e.push(s)));return r}function v(t,e,i,o,a,r){return o&&!o[j]&&(o=v(o)),a&&!a[j]&&(a=v(a,r)),n(function(n,r,s,l){var c,u,d,p=[],h=[],f=r.length,v=n||m(e||"*",s.nodeType?[s]:s,[]),_=!t||!n&&e?v:g(v,p,t,s,l),b=i?a||(n?t:f||o)?[]:r:_;if(i&&i(_,b,s,l),o)for(c=g(b,h),o(c,[],s,l),u=c.length;u--;)(d=c[u])&&(b[h[u]]=!(_[h[u]]=d));if(n){if(a||t){if(a){for(c=[],u=b.length;u--;)(d=b[u])&&c.push(_[u]=d);a(null,b=[],c,l)}for(u=b.length;u--;)(d=b[u])&&(c=a?tt(n,d):p[u])>-1&&(n[c]=!(r[c]=d))}}else b=g(b===r?b.splice(f,b.length):b),a?a(null,r,b,l):X.apply(r,b)})}function _(t){for(var e,i,n,o=t.length,a=$.relative[t[0].type],r=a||$.relative[" "],s=a?1:0,l=h(function(t){return t===e},r,!0),c=h(function(t){return tt(e,t)>-1},r,!0),u=[function(t,i,n){var o=!a&&(n||i!==T)||((e=i).nodeType?l(t,i,n):c(t,i,n));return e=null,o}];s<o;s++)if(i=$.relative[t[s].type])u=[h(f(u),i)];else{if((i=$.filter[t[s].type].apply(null,t[s].matches))[j]){for(n=++s;n<o&&!$.relative[t[n].type];n++);return v(s>1&&f(u),s>1&&p(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(st,"$1"),i,s<n&&_(t.slice(s,n)),n<o&&_(t=t.slice(n)),n<o&&p(t))}u.push(i)}return f(u)}function b(t,i){var o=i.length>0,a=t.length>0,r=function(n,r,s,l,c){var u,d,p,h=0,f="0",m=n&&[],v=[],_=T,b=n||a&&$.find.TAG("*",c),y=q+=null==_?1:Math.random()||.1,w=b.length;for(c&&(T=r===O||r||c);f!==w&&null!=(u=b[f]);f++){if(a&&u){for(d=0,r||u.ownerDocument===O||(M(u),s=!P);p=t[d++];)if(p(u,r||O,s)){l.push(u);break}c&&(q=y)}o&&((u=!p&&u)&&h--,n&&m.push(u))}if(h+=f,o&&f!==h){for(d=0;p=i[d++];)p(m,v,r,s);if(n){if(h>0)for(;f--;)m[f]||v[f]||(v[f]=J.call(l));v=g(v)}X.apply(l,v),c&&!n&&v.length>0&&h+i.length>1&&e.uniqueSort(l)}return c&&(q=y,T=_),m};return o?n(r):r}var y,w,$,x,k,C,D,S,T,A,E,M,O,I,P,N,L,R,F,j="sizzle"+1*new Date,B=t.document,q=0,z=0,H=i(),W=i(),Y=i(),V=function(t,e){return t===e&&(E=!0),0},U=1<<31,G={}.hasOwnProperty,K=[],J=K.pop,Q=K.push,X=K.push,Z=K.slice,tt=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",nt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot="\\["+it+"*("+nt+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+nt+"))|)"+it+"*\\]",at=":("+nt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",rt=new RegExp(it+"+","g"),st=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),lt=new RegExp("^"+it+"*,"+it+"*"),ct=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ut=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),dt=new RegExp(at),pt=new RegExp("^"+nt+"$"),ht={ID:new RegExp("^#("+nt+")"),CLASS:new RegExp("^\\.("+nt+")"),TAG:new RegExp("^("+nt+"|[*])"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},ft=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,gt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_t=/[+~]/,bt=/'|\\/g,yt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),wt=function(t,e,i){var n="0x"+e-65536;return n!=n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},$t=function(){M()};try{X.apply(K=Z.call(B.childNodes),B.childNodes),K[B.childNodes.length].nodeType}catch(xt){X={apply:K.length?function(t,e){Q.apply(t,Z.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}for(y in w=e.support={},k=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},M=e.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:B;return n!==O&&9===n.nodeType&&n.documentElement?(I=(O=n).documentElement,P=!k(O),(i=O.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",$t,!1):i.attachEvent&&i.attachEvent("onunload",$t)),w.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=o(function(t){return t.appendChild(O.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=gt.test(O.getElementsByClassName),w.getById=o(function(t){return I.appendChild(t).id=j,!O.getElementsByName||!O.getElementsByName(j).length}),w.getById?($.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&P){var i=e.getElementById(t);return i?[i]:[]}},$.filter.ID=function(t){var e=t.replace(yt,wt);return function(t){return t.getAttribute("id")===e}}):(delete $.find.ID,$.filter.ID=function(t){var e=t.replace(yt,wt);return function(t){var i="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}}),$.find.TAG=w.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):w.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],o=0,a=e.getElementsByTagName(t);if("*"===t){for(;i=a[o++];)1===i.nodeType&&n.push(i);return n}return a},$.find.CLASS=w.getElementsByClassName&&function(t,e){if("undefined"!=typeof e.getElementsByClassName&&P)return e.getElementsByClassName(t)},L=[],N=[],(w.qsa=gt.test(O.querySelectorAll))&&(o(function(t){I.appendChild(t).innerHTML="<a id='"+j+"'></a><select id='"+j+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&N.push("[*^$]="+it+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||N.push("\\["+it+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+j+"-]").length||N.push("~="),t.querySelectorAll(":checked").length||N.push(":checked"),t.querySelectorAll("a#"+j+"+*").length||N.push(".#.+[+~]")}),o(function(t){var e=O.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&N.push("name"+it+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||N.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),N.push(",.*:")})),(w.matchesSelector=gt.test(R=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&o(function(t){w.disconnectedMatch=R.call(t,"div"),R.call(t,"[s!='']:x"),L.push("!=",at)}),N=N.length&&new RegExp(N.join("|")),L=L.length&&new RegExp(L.join("|")),e=gt.test(I.compareDocumentPosition),F=e||gt.test(I.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=e?function(t,e){if(t===e)return E=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!w.sortDetached&&e.compareDocumentPosition(t)===i?t===O||t.ownerDocument===B&&F(B,t)?-1:e===O||e.ownerDocument===B&&F(B,e)?1:A?tt(A,t)-tt(A,e):0:4&i?-1:1)}:function(t,e){if(t===e)return E=!0,0;var i,n=0,o=t.parentNode,a=e.parentNode,s=[t],l=[e];if(!o||!a)return t===O?-1:e===O?1:o?-1:a?1:A?tt(A,t)-tt(A,e):0;if(o===a)return r(t,e);for(i=t;i=i.parentNode;)s.unshift(i);for(i=e;i=i.parentNode;)l.unshift(i);for(;s[n]===l[n];)n++;return n?r(s[n],l[n]):s[n]===B?-1:l[n]===B?1:0},O):O},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==O&&M(t),i=i.replace(ut,"='$1']"),w.matchesSelector&&P&&!Y[i+" "]&&(!L||!L.test(i))&&(!N||!N.test(i)))try{var n=R.call(t,i);if(n||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(xt){}return e(i,O,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==O&&M(t),F(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==O&&M(t);var i=$.attrHandle[e.toLowerCase()],n=i&&G.call($.attrHandle,e.toLowerCase())?i(t,e,!P):undefined;return n!==undefined?n:w.attributes||!P?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,o=0;if(E=!w.detectDuplicates,A=!w.sortStable&&t.slice(0),t.sort(V),E){for(;e=t[o++];)e===t[o]&&(n=i.push(o));for(;n--;)t.splice(i[n],1)}return A=null,t},x=e.getText=function(t){var e,i="",n=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=x(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[n++];)i+=x(e);return i},($=e.selectors={cacheLength:50,createPseudo:n,match:ht,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(yt,wt),t[3]=(t[3]||t[4]||t[5]||"").replace(yt,wt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return ht.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&dt.test(i)&&(e=C(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(yt,wt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=H[t+" "];return e||(e=new RegExp("(^|"+it+")"+t+"("+it+"|$)"))&&H(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(o){var a=e.attr(o,t);return null==a?"!="===i:!i||(a+="","="===i?a===n:"!="===i?a!==n:"^="===i?n&&0===a.indexOf(n):"*="===i?n&&a.indexOf(n)>-1:"$="===i?n&&a.slice(-n.length)===n:"~="===i?(" "+a.replace(rt," ")+" ").indexOf(n)>-1:"|="===i&&(a===n||a.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,i,n,o){var a="nth"!==t.slice(0,3),r="last"!==t.slice(-4),s="of-type"===e;return 1===n&&0===o?function(t){return!!t.parentNode}:function(e,i,l){var c,u,d,p,h,f,m=a!==r?"nextSibling":"previousSibling",g=e.parentNode,v=s&&e.nodeName.toLowerCase(),_=!l&&!s,b=!1;if(g){if(a){for(;m;){for(p=e;p=p[m];)if(s?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[r?g.firstChild:g.lastChild],r&&_){for(b=(h=(c=(u=(d=(p=g)[j]||(p[j]={}))[p.uniqueID]||(d[p.uniqueID]={}))[t]||[])[0]===q&&c[1])&&c[2],p=h&&g.childNodes[h];p=++h&&p&&p[m]||(b=h=0)||f.pop();)if(1===p.nodeType&&++b&&p===e){u[t]=[q,h,b];break}}else if(_&&(b=h=(c=(u=(d=(p=e)[j]||(p[j]={}))[p.uniqueID]||(d[p.uniqueID]={}))[t]||[])[0]===q&&c[1]),!1===b)for(;(p=++h&&p&&p[m]||(b=h=0)||f.pop())&&((s?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++b||(_&&((u=(d=p[j]||(p[j]={}))[p.uniqueID]||(d[p.uniqueID]={}))[t]=[q,b]),p!==e)););return(b-=o)===n||b%n==0&&b/n>=0}}},PSEUDO:function(t,i){var o,a=$.pseudos[t]||$.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return a[j]?a(i):a.length>1?(o=[t,t,"",i],$.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,o=a(t,i),r=o.length;r--;)t[n=tt(t,o[r])]=!(e[n]=o[r])}):function(t){return a(t,0,o)}):a}},pseudos:{not:n(function(t){var e=[],i=[],o=D(t.replace(st,"$1"));return o[j]?n(function(t,e,i,n){for(var a,r=o(t,null,n,[]),s=t.length;s--;)(a=r[s])&&(t[s]=!(e[s]=a))}):function(t,n,a){return e[0]=t,o(e,null,a,i),e[0]=null,!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return t=t.replace(yt,wt),function(e){return(e.textContent||e.innerText||x(e)).indexOf(t)>-1}}),lang:n(function(t){return pt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(yt,wt).toLowerCase(),function(e){var i;do{if(i=P?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===I},focus:function(t){return t===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!$.pseudos.empty(t)},header:function(t){return mt.test(t.nodeName)},input:function(t){return ft.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,i){return[i<0?i+e:i]}),even:c(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:c(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:c(function(t,e,i){for(var n=i<0?i+e:i;--n>=0;)t.push(n);return t}),gt:c(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}}).pseudos.nth=$.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})$.pseudos[y]=s(y);for(y in{submit:!0,reset:!0})$.pseudos[y]=l(y);return d.prototype=$.filters=$.pseudos,$.setFilters=new d,C=e.tokenize=function(t,i){var n,o,a,r,s,l,c,u=W[t+" "];if(u)return i?0:u.slice(0);for(s=t,l=[],c=$.preFilter;s;){for(r in n&&!(o=lt.exec(s))||(o&&(s=s.slice(o[0].length)||s),l.push(a=[])),n=!1,(o=ct.exec(s))&&(n=o.shift(),a.push({value:n,type:o[0].replace(st," ")}),s=s.slice(n.length)),$.filter)!(o=ht[r].exec(s))||c[r]&&!(o=c[r](o))||(n=o.shift(),a.push({value:n,type:r,matches:o}),s=s.slice(n.length));if(!n)break}return i?s.length:s?e.error(t):W(t,l).slice(0)},D=e.compile=function(t,e){var i,n=[],o=[],a=Y[t+" "];if(!a){for(e||(e=C(t)),i=e.length;i--;)(a=_(e[i]))[j]?n.push(a):o.push(a);(a=Y(t,b(o,n))).selector=t}return a},S=e.select=function(t,e,i,n){var o,a,r,s,l,c="function"==typeof t&&t,d=!n&&C(t=c.selector||t);if(i=i||[],1===d.length){if((a=d[0]=d[0].slice(0)).length>2&&"ID"===(r=a[0]).type&&w.getById&&9===e.nodeType&&P&&$.relative[a[1].type]){if(!(e=($.find.ID(r.matches[0].replace(yt,wt),e)||[])[0]))return i;c&&(e=e.parentNode),t=t.slice(a.shift().value.length)}for(o=ht.needsContext.test(t)?0:a.length;o--&&(r=a[o],!$.relative[s=r.type]);)if((l=$.find[s])&&(n=l(r.matches[0].replace(yt,wt),_t.test(a[0].type)&&u(e.parentNode)||e))){if(a.splice(o,1),!(t=n.length&&p(a)))return X.apply(i,n),i;break}}return(c||D(t,d))(n,e,!P,i,!e||_t.test(t)&&u(e.parentNode)||e),i},w.sortStable=j.split("").sort(V).join("")===j,w.detectDuplicates=!!E,M(),w.sortDetached=o(function(t){return 1&t.compareDocumentPosition(O.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||a("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||a("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||a(et,function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);ht.find=_t,ht.expr=_t.selectors,ht.expr[":"]=ht.expr.pseudos,ht.uniqueSort=ht.unique=_t.uniqueSort,ht.text=_t.getText,ht.isXMLDoc=_t.isXML,ht.contains=_t.contains;var bt=function(t,e,i){for(var n=[],o=i!==undefined;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&ht(t).is(i))break;n.push(t)}return n},yt=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},wt=ht.expr.match.needsContext,$t=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,xt=/^.[^:#\[\.,]*$/;ht.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?ht.find.matchesSelector(n,t)?[n]:[]:ht.find.matches(t,ht.grep(e,function(t){return 1===t.nodeType}))},ht.fn.extend({find:function(t){var e,i=[],n=this,o=n.length;if("string"!=typeof t)return this.pushStack(ht(t).filter(function(){for(e=0;e<o;e++)if(ht.contains(n[e],this))return!0}));for(e=0;e<o;e++)ht.find(t,n[e],i);return(i=this.pushStack(o>1?ht.unique(i):i)).selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&wt.test(t)?ht(t):t||[],!1).length}});var kt,Ct=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(ht.fn.init=function(t,e,i){var n,o;if(!t)return this;if(i=i||kt,"string"==typeof t){if(!(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:Ct.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof ht?e[0]:e,ht.merge(this,ht.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:nt,!0)),$t.test(n[1])&&ht.isPlainObject(e))for(n in e)ht.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}if((o=nt.getElementById(n[2]))&&o.parentNode){if(o.id!==n[2])return kt.find(t);this.length=1,this[0]=o}return this.context=nt,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):ht.isFunction(t)?"undefined"!=typeof i.ready?i.ready(t):t(ht):(t.selector!==undefined&&(this.selector=t.selector,this.context=t.context),ht.makeArray(t,this))}).prototype=ht.fn,kt=ht(nt);var Dt=/^(?:parents|prev(?:Until|All))/,St={children:!0,contents:!0,next:!0,prev:!0};ht.fn.extend({has:function(t){var e,i=ht(t,this),n=i.length;return this.filter(function(){for(e=0;e<n;e++)if(ht.contains(this,i[e]))return!0})},closest:function(t,e){for(var i,n=0,o=this.length,a=[],r=wt.test(t)||"string"!=typeof t?ht(t,e||this.context):0;n<o;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&ht.find.matchesSelector(i,t))){a.push(i);break}return this.pushStack(a.length>1?ht.uniqueSort(a):a)},index:function(t){return t?"string"==typeof t?ht.inArray(this[0],ht(t)):ht.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(ht.uniqueSort(ht.merge(this.get(),ht(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),ht.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return bt(t,"parentNode")},parentsUntil:function(t,e,i){return bt(t,"parentNode",i)},next:function(t){return o(t,"nextSibling")},prev:function(t){return o(t,"previousSibling")},nextAll:function(t){return bt(t,"nextSibling")},prevAll:function(t){return bt(t,"previousSibling")},nextUntil:function(t,e,i){return bt(t,"nextSibling",i)},prevUntil:function(t,e,i){return bt(t,"previousSibling",i)},siblings:function(t){return yt((t.parentNode||{}).firstChild,t)},children:function(t){return yt(t.firstChild)},contents:function(t){return ht.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:ht.merge([],t.childNodes)}},function(t,e){ht.fn[t]=function(i,n){var o=ht.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=ht.filter(n,o)),this.length>1&&(St[t]||(o=ht.uniqueSort(o)),Dt.test(t)&&(o=o.reverse())),this.pushStack(o)}});var Tt,At,Et=/\S+/g;for(At in ht.Callbacks=function(t){t="string"==typeof t?a(t):ht.extend({},t);var e,i,n,o,r=[],s=[],l=-1,c=function(){for(o=t.once,n=e=!0;s.length;l=-1)for(i=s.shift();++l<r.length;)!1===r[l].apply(i[0],i[1])&&t.stopOnFalse&&(l=r.length,i=!1);t.memory||(i=!1),e=!1,o&&(r=i?[]:"")},u={add:function(){return r&&(i&&!e&&(l=r.length-1,s.push(i)),function n(e){ht.each(e,function(e,i){ht.isFunction(i)?t.unique&&u.has(i)||r.push(i):i&&i.length&&"string"!==ht.type(i)&&n(i)})}(arguments),i&&!e&&c()),this},remove:function(){return ht.each(arguments,function(t,e){for(var i;(i=ht.inArray(e,r,i))>-1;)r.splice(i,1),i<=l&&l--}),this},has:function(t){return t?ht.inArray(t,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=s=[],r=i="",this},disabled:function(){return!r},lock:function(){return o=!0,i||u.disable(),this},locked:function(){return!!o},fireWith:function(t,i){return o||(i=[t,(i=i||[]).slice?i.slice():i],s.push(i),e||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},ht.extend({Deferred:function(t){var e=[["resolve","done",ht.Callbacks("once memory"),"resolved"],["reject","fail",ht.Callbacks("once memory"),"rejected"],["notify","progress",ht.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return ht.Deferred(function(i){ht.each(e,function(e,a){var r=ht.isFunction(t[e])&&t[e];o[a[1]](function(){var t=r&&r.apply(this,arguments);t&&ht.isFunction(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[a[0]+"With"](this===n?i.promise():this,r?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?ht.extend(t,n):n}},o={};return n.pipe=n.then,ht.each(e,function(t,a){var r=a[2],s=a[3];n[a[1]]=r.add,s&&r.add(function(){i=s},e[1^t][2].disable,e[2][2].lock),o[a[0]]=function(){return o[a[0]+"With"](this===o?n:this,arguments),this},o[a[0]+"With"]=r.fireWith}),n.promise(o),t&&t.call(o,o),o},when:function(t){var e,i,n,o=0,a=ot.call(arguments),r=a.length,s=1!==r||t&&ht.isFunction(t.promise)?r:0,l=1===s?t:ht.Deferred(),c=function(t,i,n){return function(o){i[t]=this,n[t]=arguments.length>1?ot.call(arguments):o,n===e?l.notifyWith(i,n):--s||l.resolveWith(i,n)}};if(r>1)for(e=new Array(r),i=new Array(r),n=new Array(r);o<r;o++)a[o]&&ht.isFunction(a[o].promise)?a[o].promise().progress(c(o,i,e)).done(c(o,n,a)).fail(l.reject):--s;return s||l.resolveWith(n,a),l.promise()}}),ht.fn.ready=function(t){return ht.ready.promise().done(t),this},ht.extend({isReady:!1,readyWait:1,holdReady:function(t){t?ht.readyWait++:ht.ready(!0)},ready:function(t){(!0===t?--ht.readyWait:ht.isReady)||(ht.isReady=!0,!0!==t&&--ht.readyWait>0||(Tt.resolveWith(nt,[ht]),ht.fn.triggerHandler&&(ht(nt).triggerHandler("ready"),ht(nt).off("ready"))))}}),ht.ready.promise=function(e){if(!Tt)if(Tt=ht.Deferred(),"complete"===nt.readyState||"loading"!==nt.readyState&&!nt.documentElement.doScroll)t.setTimeout(ht.ready);else if(nt.addEventListener)nt.addEventListener("DOMContentLoaded",s),t.addEventListener("load",s);else{nt.attachEvent("onreadystatechange",s),t.attachEvent("onload",s);var i=!1;try{i=null==t.frameElement&&nt.documentElement}catch(n){}i&&i.doScroll&&function e(){if(!ht.isReady){try{i.doScroll("left")}catch(n){return t.setTimeout(e,50)}r(),ht.ready()}}()}return Tt.promise(e)},ht.ready.promise(),ht(dt))break;dt.ownFirst="0"===At,dt.inlineBlockNeedsLayout=!1,ht(function(){var t,e,i,n;(i=nt.getElementsByTagName("body")[0])&&i.style&&(e=nt.createElement("div"),(n=nt.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),"undefined"!=typeof e.style.zoom&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",dt.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(i.style.zoom=1)),i.removeChild(n))}),function(){var t=nt.createElement("div");dt.deleteExpando=!0;try{delete t.test}catch(e){dt.deleteExpando=!1}t=null}();var Mt,Ot=function(t){var e=ht.noData[(t.nodeName+" ").toLowerCase()],i=+t.nodeType||1;return(1===i||9===i)&&(!e||!0!==e&&t.getAttribute("classid")===e)},It=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Pt=/([A-Z])/g;ht.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return!!(t=t.nodeType?ht.cache[t[ht.expando]]:t[ht.expando])&&!c(t)},data:function(t,e,i){return u(t,e,i)},removeData:function(t,e){return d(t,e)},_data:function(t,e,i){return u(t,e,i,!0)},_removeData:function(t,e){return d(t,e,!0)}}),ht.fn.extend({data:function(t,e){var i,n,o,a=this[0],r=a&&a.attributes;if(t===undefined){if(this.length&&(o=ht.data(a),1===a.nodeType&&!ht._data(a,"parsedAttrs"))){for(i=r.length;i--;)r[i]&&0===(n=r[i].name).indexOf("data-")&&l(a,n=ht.camelCase(n.slice(5)),o[n]);ht._data(a,"parsedAttrs",!0)}return o}return"object"==typeof t?this.each(function(){ht.data(this,t)}):arguments.length>1?this.each(function(){ht.data(this,t,e)}):a?l(a,t,ht.data(a,t)):undefined},removeData:function(t){return this.each(function(){ht.removeData(this,t)})}}),ht.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=ht._data(t,e),i&&(!n||ht.isArray(i)?n=ht._data(t,e,ht.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=ht.queue(t,e),n=i.length,o=i.shift(),a=ht._queueHooks(t,e),r=function(){ht.dequeue(t,e)};"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===e&&i.unshift("inprogress"),delete a.stop,o.call(t,r,a)),!n&&a&&a.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return ht._data(t,i)||ht._data(t,i,{empty:ht.Callbacks("once memory").add(function(){ht._removeData(t,e+"queue"),ht._removeData(t,i)})})}}),ht.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?ht.queue(this[0],t):e===undefined?this:this.each(function(){var i=ht.queue(this,t,e);ht._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&ht.dequeue(this,t)})},dequeue:function(t){return this.each(function(){ht.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,o=ht.Deferred(),a=this,r=this.length,s=function(){--n||o.resolveWith(a,[a])};for("string"!=typeof t&&(e=t,t=undefined),t=t||"fx";r--;)(i=ht._data(a[r],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(s));return s(),o.promise(e)}}),dt.shrinkWrapBlocks=function(){return null!=Mt?Mt:(Mt=!1,(e=nt.getElementsByTagName("body")[0])&&e.style?(t=nt.createElement("div"),(i=nt.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",e.appendChild(i).appendChild(t),"undefined"!=typeof t.style.zoom&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(nt.createElement("div")).style.width="5px",Mt=3!==t.offsetWidth),e.removeChild(i),Mt):void 0);var t,e,i};var Nt,Lt,Rt,Ft=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,jt=new RegExp("^(?:([+-])=|)("+Ft+")([a-z%]*)$","i"),Bt=["Top","Right","Bottom","Left"],qt=function(t,e){return t=e||t,"none"===ht.css(t,"display")||!ht.contains(t.ownerDocument,t)},zt=function(t,e,i,n,o,a,r){var s=0,l=t.length,c=null==i;if("object"===ht.type(i))for(s in o=!0,i)zt(t,e,s,i[s],!0,a,r);else if(n!==undefined&&(o=!0,ht.isFunction(n)||(r=!0),c&&(r?(e.call(t,n),e=null):(c=e,e=function(t,e,i){return c.call(ht(t),i)})),e))for(;s<l;s++)e(t[s],i,r?n:n.call(t[s],s,e(t[s],i)));return o?t:c?e.call(t):l?e(t[0],i):a},Ht=/^(?:checkbox|radio)$/i,Wt=/<([\w:-]+)/,Yt=/^$|\/(?:java|ecma)script/i,Vt=/^\s+/,Ut="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";Nt=nt.createElement("div"),Lt=nt.createDocumentFragment(),Rt=nt.createElement("input"),Nt.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",dt.leadingWhitespace=3===Nt.firstChild.nodeType,dt.tbody=!Nt.getElementsByTagName("tbody").length,dt.htmlSerialize=!!Nt.getElementsByTagName("link").length,dt.html5Clone="<:nav></:nav>"!==nt.createElement("nav").cloneNode(!0).outerHTML,Rt.type="checkbox",Rt.checked=!0,Lt.appendChild(Rt),dt.appendChecked=Rt.checked,Nt.innerHTML="<textarea>x</textarea>",dt.noCloneChecked=!!Nt.cloneNode(!0).lastChild.defaultValue,Lt.appendChild(Nt),(Rt=nt.createElement("input")).setAttribute("type","radio"),Rt.setAttribute("checked","checked"),Rt.setAttribute("name","t"),Nt.appendChild(Rt),dt.checkClone=Nt.cloneNode(!0).cloneNode(!0).lastChild.checked,dt.noCloneEvent=!!Nt.addEventListener,Nt[ht.expando]=1,dt.attributes=!Nt.getAttribute(ht.expando);var Gt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:dt.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};Gt.optgroup=Gt.option,Gt.tbody=Gt.tfoot=Gt.colgroup=Gt.caption=Gt.thead,Gt.th=Gt.td;var Kt=/<|&#?\w+;/,Jt=/<tbody/i;!function(){var e,i,n=nt.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})i="on"+e,(dt[e]=i in t)||(n.setAttribute(i,"t"),dt[e]=!1===n.attributes[i].expando);n=null}();var Qt=/^(?:input|select|textarea)$/i,Xt=/^key/,Zt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,te=/^(?:focusinfocus|focusoutblur)$/,ee=/^([^.]*)(?:\.(.+)|)/;ht.event={global:{},add:function(t,e,i,n,o){var a,r,s,l,c,u,d,p,h,f,m,g=ht._data(t);if(g){for(i.handler&&(i=(l=i).handler,o=l.selector),i.guid||(i.guid=ht.guid++),(r=g.events)||(r=g.events={}),(u=g.handle)||((u=g.handle=function(t){return void 0===ht||t&&ht.event.triggered===t.type?undefined:ht.event.dispatch.apply(u.elem,arguments)}).elem=t),s=(e=(e||"").match(Et)||[""]).length;s--;)h=m=(a=ee.exec(e[s])||[])[1],f=(a[2]||"").split(".").sort(),h&&(c=ht.event.special[h]||{},h=(o?c.delegateType:c.bindType)||h,c=ht.event.special[h]||{},d=ht.extend({type:h,origType:m,data:n,handler:i,guid:i.guid,selector:o,
needsContext:o&&ht.expr.match.needsContext.test(o),namespace:f.join(".")},l),(p=r[h])||((p=r[h]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,n,f,u)||(t.addEventListener?t.addEventListener(h,u,!1):t.attachEvent&&t.attachEvent("on"+h,u))),c.add&&(c.add.call(t,d),d.handler.guid||(d.handler.guid=i.guid)),o?p.splice(p.delegateCount++,0,d):p.push(d),ht.event.global[h]=!0);t=null}},remove:function(t,e,i,n,o){var a,r,s,l,c,u,d,p,h,f,m,g=ht.hasData(t)&&ht._data(t);if(g&&(u=g.events)){for(c=(e=(e||"").match(Et)||[""]).length;c--;)if(h=m=(s=ee.exec(e[c])||[])[1],f=(s[2]||"").split(".").sort(),h){for(d=ht.event.special[h]||{},p=u[h=(n?d.delegateType:d.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=a=p.length;a--;)r=p[a],!o&&m!==r.origType||i&&i.guid!==r.guid||s&&!s.test(r.namespace)||n&&n!==r.selector&&("**"!==n||!r.selector)||(p.splice(a,1),r.selector&&p.delegateCount--,d.remove&&d.remove.call(t,r));l&&!p.length&&(d.teardown&&!1!==d.teardown.call(t,f,g.handle)||ht.removeEvent(t,h,g.handle),delete u[h])}else for(h in u)ht.event.remove(t,h+e[c],i,n,!0);ht.isEmptyObject(u)&&(delete g.handle,ht._removeData(t,"events"))}},trigger:function(e,i,n,o){var a,r,s,l,c,u,d,p=[n||nt],h=ut.call(e,"type")?e.type:e,f=ut.call(e,"namespace")?e.namespace.split("."):[];if(s=u=n=n||nt,3!==n.nodeType&&8!==n.nodeType&&!te.test(h+ht.event.triggered)&&(h.indexOf(".")>-1&&(h=(f=h.split(".")).shift(),f.sort()),r=h.indexOf(":")<0&&"on"+h,(e=e[ht.expando]?e:new ht.Event(h,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=f.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=undefined,e.target||(e.target=n),i=null==i?[e]:ht.makeArray(i,[e]),c=ht.event.special[h]||{},o||!c.trigger||!1!==c.trigger.apply(n,i))){if(!o&&!c.noBubble&&!ht.isWindow(n)){for(l=c.delegateType||h,te.test(l+h)||(s=s.parentNode);s;s=s.parentNode)p.push(s),u=s;u===(n.ownerDocument||nt)&&p.push(u.defaultView||u.parentWindow||t)}for(d=0;(s=p[d++])&&!e.isPropagationStopped();)e.type=d>1?l:c.bindType||h,(a=(ht._data(s,"events")||{})[e.type]&&ht._data(s,"handle"))&&a.apply(s,i),(a=r&&s[r])&&a.apply&&Ot(s)&&(e.result=a.apply(s,i),!1===e.result&&e.preventDefault());if(e.type=h,!o&&!e.isDefaultPrevented()&&(!c._default||!1===c._default.apply(p.pop(),i))&&Ot(n)&&r&&n[h]&&!ht.isWindow(n)){(u=n[r])&&(n[r]=null),ht.event.triggered=h;try{n[h]()}catch(m){}ht.event.triggered=undefined,u&&(n[r]=u)}return e.result}},dispatch:function(t){t=ht.event.fix(t);var e,i,n,o,a,r=[],s=ot.call(arguments),l=(ht._data(this,"events")||{})[t.type]||[],c=ht.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){for(r=ht.event.handlers.call(this,t,l),e=0;(o=r[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,i=0;(a=o.handlers[i++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(a.namespace)||(t.handleObj=a,t.data=a.data,(n=((ht.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,s))!==undefined&&!1===(t.result=n)&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,o,a,r=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(n=[],i=0;i<s;i++)n[o=(a=e[i]).selector+" "]===undefined&&(n[o]=a.needsContext?ht(o,this).index(l)>-1:ht.find(o,this,null,[l]).length),n[o]&&n.push(a);n.length&&r.push({elem:l,handlers:n})}return s<e.length&&r.push({elem:this,handlers:e.slice(s)}),r},fix:function(t){if(t[ht.expando])return t;var e,i,n,o=t.type,a=t,r=this.fixHooks[o];for(r||(this.fixHooks[o]=r=Zt.test(o)?this.mouseHooks:Xt.test(o)?this.keyHooks:{}),n=r.props?this.props.concat(r.props):this.props,t=new ht.Event(a),e=n.length;e--;)t[i=n[e]]=a[i];return t.target||(t.target=a.srcElement||nt),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,r.filter?r.filter(t,a):t},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,o,a=e.button,r=e.fromElement;return null==t.pageX&&null!=e.clientX&&(o=(n=t.target.ownerDocument||nt).documentElement,i=n.body,t.pageX=e.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&r&&(t.relatedTarget=r===t.target?e.toElement:r),t.which||a===undefined||(t.which=1&a?1:2&a?3:4&a?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==y()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){if(this===y()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(ht.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(t){return ht.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==undefined&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i){var n=ht.extend(new ht.Event,i,{type:t,isSimulated:!0});ht.event.trigger(n,null,e),n.isDefaultPrevented()&&i.preventDefault()}},ht.removeEvent=nt.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)}:function(t,e,i){var n="on"+e;t.detachEvent&&("undefined"==typeof t[n]&&(t[n]=null),t.detachEvent(n,i))},ht.Event=function(t,e){if(!(this instanceof ht.Event))return new ht.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.defaultPrevented===undefined&&!1===t.returnValue?_:b):this.type=t,e&&ht.extend(this,e),this.timeStamp=t&&t.timeStamp||ht.now(),this[ht.expando]=!0},ht.Event.prototype={constructor:ht.Event,isDefaultPrevented:b,isPropagationStopped:b,isImmediatePropagationStopped:b,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=_,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=_,t&&!this.isSimulated&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=_,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},ht.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){ht.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,o=t.relatedTarget,a=t.handleObj;return o&&(o===n||ht.contains(n,o))||(t.type=a.origType,i=a.handler.apply(this,arguments),t.type=e),i}}}),dt.submit||(ht.event.special.submit={setup:function(){if(ht.nodeName(this,"form"))return!1;ht.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,i=ht.nodeName(e,"input")||ht.nodeName(e,"button")?ht.prop(e,"form"):undefined;i&&!ht._data(i,"submit")&&(ht.event.add(i,"submit._submit",function(t){t._submitBubble=!0}),ht._data(i,"submit",!0))})},postDispatch:function(t){t._submitBubble&&(delete t._submitBubble,this.parentNode&&!t.isTrigger&&ht.event.simulate("submit",this.parentNode,t))},teardown:function(){if(ht.nodeName(this,"form"))return!1;ht.event.remove(this,"._submit")}}),dt.change||(ht.event.special.change={setup:function(){if(Qt.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(ht.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._justChanged=!0)}),ht.event.add(this,"click._change",function(t){this._justChanged&&!t.isTrigger&&(this._justChanged=!1),ht.event.simulate("change",this,t)})),!1;ht.event.add(this,"beforeactivate._change",function(t){var e=t.target;Qt.test(e.nodeName)&&!ht._data(e,"change")&&(ht.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||ht.event.simulate("change",this.parentNode,t)}),ht._data(e,"change",!0))})},handle:function(t){var e=t.target;if(this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type)return t.handleObj.handler.apply(this,arguments)},teardown:function(){return ht.event.remove(this,"._change"),!Qt.test(this.nodeName)}}),dt.focusin||ht.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){ht.event.simulate(e,t.target,ht.event.fix(t))};ht.event.special[e]={setup:function(){var n=this.ownerDocument||this,o=ht._data(n,e);o||n.addEventListener(t,i,!0),ht._data(n,e,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=ht._data(n,e)-1;o?ht._data(n,e,o):(n.removeEventListener(t,i,!0),ht._removeData(n,e))}}}),ht.fn.extend({on:function(t,e,i,n){return w(this,t,e,i,n)},one:function(t,e,i,n){return w(this,t,e,i,n,1)},off:function(t,e,i){var n,o;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,ht(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=undefined),!1===i&&(i=b),this.each(function(){ht.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){ht.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return ht.event.trigger(t,e,i,!0)}});var ie=/ jQuery\d+="(?:null|\d+)"/g,ne=new RegExp("<(?:"+Ut+")[\\s/>]","i"),oe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ae=/<script|<style|<link/i,re=/checked\s*(?:[^=]|=\s*.checked.)/i,se=/^true\/(.*)/,le=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ce=h(nt).appendChild(nt.createElement("div"));ht.extend({htmlPrefilter:function(t){return t.replace(oe,"<$1></$2>")},clone:function(t,e,i){var n,o,a,r,s,l=ht.contains(t.ownerDocument,t);if(dt.html5Clone||ht.isXMLDoc(t)||!ne.test("<"+t.nodeName+">")?a=t.cloneNode(!0):(ce.innerHTML=t.outerHTML,ce.removeChild(a=ce.firstChild)),!(dt.noCloneEvent&&dt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||ht.isXMLDoc(t)))for(n=f(a),s=f(t),r=0;null!=(o=s[r]);++r)n[r]&&D(o,n[r]);if(e)if(i)for(s=s||f(t),n=n||f(a),r=0;null!=(o=s[r]);r++)C(o,n[r]);else C(t,a);return(n=f(a,"script")).length>0&&m(n,!l&&f(t,"script")),n=s=o=null,a},cleanData:function(t,e){for(var i,n,o,a,r=0,s=ht.expando,l=ht.cache,c=dt.attributes,u=ht.event.special;null!=(i=t[r]);r++)if((e||Ot(i))&&(a=(o=i[s])&&l[o])){if(a.events)for(n in a.events)u[n]?ht.event.remove(i,n):ht.removeEvent(i,n,a.handle);l[o]&&(delete l[o],c||"undefined"==typeof i.removeAttribute?i[s]=undefined:i.removeAttribute(s),it.push(o))}}}),ht.fn.extend({domManip:S,detach:function(t){return T(this,t,!0)},remove:function(t){return T(this,t)},text:function(t){return zt(this,function(t){return t===undefined?ht.text(this):this.empty().append((this[0]&&this[0].ownerDocument||nt).createTextNode(t))},null,t,arguments.length)},append:function(){return S(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||$(this,t).appendChild(t)})},prepend:function(){return S(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=$(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return S(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return S(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&ht.cleanData(f(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&ht.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return ht.clone(this,t,e)})},html:function(t){return zt(this,function(t){var e=this[0]||{},i=0,n=this.length;if(t===undefined)return 1===e.nodeType?e.innerHTML.replace(ie,""):undefined;if("string"==typeof t&&!ae.test(t)&&(dt.htmlSerialize||!ne.test(t))&&(dt.leadingWhitespace||!Vt.test(t))&&!Gt[(Wt.exec(t)||["",""])[1].toLowerCase()]){t=ht.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(ht.cleanData(f(e,!1)),e.innerHTML=t);e=0}catch(o){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return S(this,arguments,function(e){var i=this.parentNode;ht.inArray(this,t)<0&&(ht.cleanData(f(this)),i&&i.replaceChild(e,this))},t)}}),ht.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){ht.fn[t]=function(t){for(var i,n=0,o=[],a=ht(t),r=a.length-1;n<=r;n++)i=n===r?this:this.clone(!0),ht(a[n])[e](i),rt.apply(o,i.get());return this.pushStack(o)}});var ue,de={HTML:"block",BODY:"block"},pe=/^margin/,he=new RegExp("^("+Ft+")(?!px)[a-z%]+$","i"),fe=function(t,e,i,n){var o,a,r={};for(a in e)r[a]=t.style[a],t.style[a]=e[a];for(a in o=i.apply(t,n||[]),e)t.style[a]=r[a];return o},me=nt.documentElement;!function(){function e(){var e,u,d=nt.documentElement;d.appendChild(l),c.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",i=o=s=!1,n=r=!0,t.getComputedStyle&&(u=t.getComputedStyle(c),i="1%"!==(u||{}).top,s="2px"===(u||{}).marginLeft,o="4px"===(u||{width:"4px"}).width,c.style.marginRight="50%",n="4px"===(u||{marginRight:"4px"}).marginRight,(e=c.appendChild(nt.createElement("div"))).style.cssText=c.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",c.style.width="1px",r=!parseFloat((t.getComputedStyle(e)||{}).marginRight),c.removeChild(e)),c.style.display="none",(a=0===c.getClientRects().length)&&(c.style.display="",c.innerHTML="<table><tr><td></td><td>t</td></tr></table>",c.childNodes[0].style.borderCollapse="separate",(e=c.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(a=0===e[0].offsetHeight)&&(e[0].style.display="",e[1].style.display="none",a=0===e[0].offsetHeight)),d.removeChild(l)}var i,n,o,a,r,s,l=nt.createElement("div"),c=nt.createElement("div");c.style&&(c.style.cssText="float:left;opacity:.5",dt.opacity="0.5"===c.style.opacity,dt.cssFloat=!!c.style.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",dt.clearCloneStyle="content-box"===c.style.backgroundClip,(l=nt.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",c.innerHTML="",l.appendChild(c),dt.boxSizing=""===c.style.boxSizing||""===c.style.MozBoxSizing||""===c.style.WebkitBoxSizing,ht.extend(dt,{reliableHiddenOffsets:function(){return null==i&&e(),a},boxSizingReliable:function(){return null==i&&e(),o},pixelMarginRight:function(){return null==i&&e(),n},pixelPosition:function(){return null==i&&e(),i},reliableMarginRight:function(){return null==i&&e(),r},reliableMarginLeft:function(){return null==i&&e(),s}}))}();var ge,ve,_e=/^(top|right|bottom|left)$/;t.getComputedStyle?(ge=function(e){var i=e.ownerDocument.defaultView;return i&&i.opener||(i=t),i.getComputedStyle(e)},ve=function(t,e,i){var n,o,a,r,s=t.style;return""!==(r=(i=i||ge(t))?i.getPropertyValue(e)||i[e]:undefined)&&r!==undefined||ht.contains(t.ownerDocument,t)||(r=ht.style(t,e)),i&&!dt.pixelMarginRight()&&he.test(r)&&pe.test(e)&&(n=s.width,o=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=r,r=i.width,s.width=n,s.minWidth=o,s.maxWidth=a),r===undefined?r:r+""}):me.currentStyle&&(ge=function(t){return t.currentStyle},ve=function(t,e,i){var n,o,a,r,s=t.style;return null==(r=(i=i||ge(t))?i[e]:undefined)&&s&&s[e]&&(r=s[e]),he.test(r)&&!_e.test(e)&&(n=s.left,(a=(o=t.runtimeStyle)&&o.left)&&(o.left=t.currentStyle.left),s.left="fontSize"===e?"1em":r,r=s.pixelLeft+"px",s.left=n,a&&(o.left=a)),r===undefined?r:r+""||"auto"});var be=/alpha\([^)]*\)/i,ye=/opacity\s*=\s*([^)]*)/i,we=/^(none|table(?!-c[ea]).+)/,$e=new RegExp("^("+Ft+")(.*)$","i"),xe={position:"absolute",visibility:"hidden",display:"block"},ke={letterSpacing:"0",fontWeight:"400"},Ce=["Webkit","O","Moz","ms"],De=nt.createElement("div").style;ht.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=ve(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:dt.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,a,r,s=ht.camelCase(e),l=t.style;if(e=ht.cssProps[s]||(ht.cssProps[s]=O(s)||s),r=ht.cssHooks[e]||ht.cssHooks[s],i===undefined)return r&&"get"in r&&(o=r.get(t,!1,n))!==undefined?o:l[e];if("string"===(a=typeof i)&&(o=jt.exec(i))&&o[1]&&(i=p(t,e,o),a="number"),null!=i&&i==i&&("number"===a&&(i+=o&&o[3]||(ht.cssNumber[s]?"":"px")),dt.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),!(r&&"set"in r&&(i=r.set(t,i,n))===undefined)))try{l[e]=i}catch(c){}}},css:function(t,e,i,n){var o,a,r,s=ht.camelCase(e);return e=ht.cssProps[s]||(ht.cssProps[s]=O(s)||s),(r=ht.cssHooks[e]||ht.cssHooks[s])&&"get"in r&&(a=r.get(t,!0,i)),a===undefined&&(a=ve(t,e,n)),"normal"===a&&e in ke&&(a=ke[e]),""===i||i?(o=parseFloat(a),!0===i||isFinite(o)?o||0:a):a}}),ht.each(["height","width"],function(t,e){ht.cssHooks[e]={get:function(t,i,n){if(i)return we.test(ht.css(t,"display"))&&0===t.offsetWidth?fe(t,xe,function(){return L(t,e,n)}):L(t,e,n)},set:function(t,i,n){var o=n&&ge(t);return P(t,i,n?N(t,e,n,dt.boxSizing&&"border-box"===ht.css(t,"boxSizing",!1,o),o):0)}}}),dt.opacity||(ht.cssHooks.opacity={get:function(t,e){return ye.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,o=ht.isNumeric(e)?"alpha(opacity="+100*e+")":"",a=n&&n.filter||i.filter||"";i.zoom=1,(e>=1||""===e)&&""===ht.trim(a.replace(be,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===e||n&&!n.filter)||(i.filter=be.test(a)?a.replace(be,o):a+" "+o)}}),ht.cssHooks.marginRight=M(dt.reliableMarginRight,function(t,e){if(e)return fe(t,{display:"inline-block"},ve,[t,"marginRight"])}),ht.cssHooks.marginLeft=M(dt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(ve(t,"marginLeft"))||(ht.contains(t.ownerDocument,t)?t.getBoundingClientRect().left-fe(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}):0))+"px"}),ht.each({margin:"",padding:"",border:"Width"},function(t,e){ht.cssHooks[t+e]={expand:function(i){for(var n=0,o={},a="string"==typeof i?i.split(" "):[i];n<4;n++)o[t+Bt[n]+e]=a[n]||a[n-2]||a[0];return o}},pe.test(t)||(ht.cssHooks[t+e].set=P)}),ht.fn.extend({css:function(t,e){return zt(this,function(t,e,i){var n,o,a={},r=0;if(ht.isArray(e)){for(n=ge(t),o=e.length;r<o;r++)a[e[r]]=ht.css(t,e[r],!1,n);return a}return i!==undefined?ht.style(t,e,i):ht.css(t,e)},t,e,arguments.length>1)},show:function(){return I(this,!0)},hide:function(){return I(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){qt(this)?ht(this).show():ht(this).hide()})}}),ht.Tween=R,R.prototype={constructor:R,init:function(t,e,i,n,o,a){this.elem=t,this.prop=i,this.easing=o||ht.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=a||(ht.cssNumber[i]?"":"px")},cur:function(){var t=R.propHooks[this.prop];return t&&t.get?t.get(this):R.propHooks._default.get(this)},run:function(t){var e,i=R.propHooks[this.prop];return this.options.duration?this.pos=e=ht.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=ht.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){ht.fx.step[t.prop]?ht.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[ht.cssProps[t.prop]]&&!ht.cssHooks[t.prop]?t.elem[t.prop]=t.now:ht.style(t.elem,t.prop,t.now+t.unit)}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},ht.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},ht.fx=R.prototype.init,ht.fx.step={};var Se,Te,Ae=/^(?:toggle|show|hide)$/,Ee=/queueHooks$/;ht.Animation=ht.extend(H,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return p(i.elem,t,jt.exec(e),i),i}]},tweener:function(t,e){ht.isFunction(t)?(e=t,t=["*"]):t=t.match(Et);for(var i,n=0,o=t.length;n<o;n++)i=t[n],H.tweeners[i]=H.tweeners[i]||[],H.tweeners[i].unshift(e)},prefilters:[q],prefilter:function(t,e){e?H.prefilters.unshift(t):H.prefilters.push(t)}}),ht.speed=function(t,e,i){var n=t&&"object"==typeof t?ht.extend({},t):{complete:i||!i&&e||ht.isFunction(t)&&t,duration:t,easing:i&&e||e&&!ht.isFunction(e)&&e};return n.duration=ht.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in ht.fx.speeds?ht.fx.speeds[n.duration]:ht.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){ht.isFunction(n.old)&&n.old.call(this),n.queue&&ht.dequeue(this,n.queue)},n},ht.fn.extend({fadeTo:function(t,e,i,n){return this.filter(qt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var o=ht.isEmptyObject(t),a=ht.speed(e,i,n),r=function(){var e=H(this,ht.extend({},t),a);(o||ht._data(this,"finish"))&&e.stop(!0)};return r.finish=r,o||!1===a.queue?this.each(r):this.queue(a.queue,r)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=undefined),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",a=ht.timers,r=ht._data(this);if(o)r[o]&&r[o].stop&&n(r[o]);else for(o in r)r[o]&&r[o].stop&&Ee.test(o)&&n(r[o]);for(o=a.length;o--;)a[o].elem!==this||null!=t&&a[o].queue!==t||(a[o].anim.stop(i),e=!1,a.splice(o,1));!e&&i||ht.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,i=ht._data(this),n=i[t+"queue"],o=i[t+"queueHooks"],a=ht.timers,r=n?n.length:0;for(i.finish=!0,ht.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=a.length;e--;)a[e].elem===this&&a[e].queue===t&&(a[e].anim.stop(!0),a.splice(e,1));for(e=0;e<r;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),ht.each(["toggle","show","hide"],function(t,e){var i=ht.fn[e];ht.fn[e]=function(t,n,o){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(j(e,!0),t,n,o)}}),ht.each({slideDown:j("show"),slideUp:j("hide"),slideToggle:j("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){ht.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),ht.timers=[],ht.fx.tick=function(){var t,e=ht.timers,i=0;for(Se=ht.now();i<e.length;i++)(t=e[i])()||e[i]!==t||e.splice(i--,1);e.length||ht.fx.stop(),Se=undefined},ht.fx.timer=function(t){ht.timers.push(t),t()?ht.fx.start():ht.timers.pop()},ht.fx.interval=13,ht.fx.start=function(){Te||(Te=t.setInterval(ht.fx.tick,ht.fx.interval))},ht.fx.stop=function(){t.clearInterval(Te),Te=null},ht.fx.speeds={slow:600,fast:200,_default:400},ht.fn.delay=function(e,i){return e=ht.fx&&ht.fx.speeds[e]||e,i=i||"fx",this.queue(i,function(i,n){var o=t.setTimeout(i,e);n.stop=function(){t.clearTimeout(o)}})},function(){var t,e=nt.createElement("input"),i=nt.createElement("div"),n=nt.createElement("select"),o=n.appendChild(nt.createElement("option"));(i=nt.createElement("div")).setAttribute("className","t"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=i.getElementsByTagName("a")[0],e.setAttribute("type","checkbox"),i.appendChild(e),(t=i.getElementsByTagName("a")[0]).style.cssText="top:1px",dt.getSetAttribute="t"!==i.className,dt.style=/top/.test(t.getAttribute("style")),dt.hrefNormalized="/a"===t.getAttribute("href"),dt.checkOn=!!e.value,dt.optSelected=o.selected,dt.enctype=!!nt.createElement("form").enctype,n.disabled=!0,dt.optDisabled=!o.disabled,(e=nt.createElement("input")).setAttribute("value",""),dt.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),dt.radioValue="t"===e.value}();var Me=/\r/g,Oe=/[\x20\t\r\n\f]+/g;ht.fn.extend({val:function(t){var e,i,n,o=this[0];return arguments.length?(n=ht.isFunction(t),this.each(function(i){var o;1===this.nodeType&&(null==(o=n?t.call(this,i,ht(this).val()):t)?o="":"number"==typeof o?o+="":ht.isArray(o)&&(o=ht.map(o,function(t){return null==t?"":t+""})),(e=ht.valHooks[this.type]||ht.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&e.set(this,o,"value")!==undefined||(this.value=o))})):o?(e=ht.valHooks[o.type]||ht.valHooks[o.nodeName.toLowerCase()])&&"get"in e&&(i=e.get(o,"value"))!==undefined?i:"string"==typeof(i=o.value)?i.replace(Me,""):null==i?"":i:void 0}}),ht.extend({valHooks:{option:{get:function(t){var e=ht.find.attr(t,"value");return null!=e?e:ht.trim(ht.text(t)).replace(Oe," ")}},select:{get:function(t){for(var e,i,n=t.options,o=t.selectedIndex,a="select-one"===t.type||o<0,r=a?null:[],s=a?o+1:n.length,l=o<0?s:a?o:0;l<s;l++)if(((i=n[l]).selected||l===o)&&(dt.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!ht.nodeName(i.parentNode,"optgroup"))){if(e=ht(i).val(),a)return e;r.push(e)}return r},set:function(t,e){for(var i,n,o=t.options,a=ht.makeArray(e),r=o.length;r--;)if(n=o[r],ht.inArray(ht.valHooks.option.get(n),a)>-1)try{n.selected=i=!0}catch(s){n.scrollHeight}else n.selected=!1;return i||(t.selectedIndex=-1),o}}}}),ht.each(["radio","checkbox"],function(){ht.valHooks[this]={set:function(t,e){if(ht.isArray(e))return t.checked=ht.inArray(ht(t).val(),e)>-1}},dt.checkOn||(ht.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Ie,Pe,Ne=ht.expr.attrHandle,Le=/^(?:checked|selected)$/i,Re=dt.getSetAttribute,Fe=dt.input;ht.fn.extend({attr:function(t,e){return zt(this,ht.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){ht.removeAttr(this,t)})}}),ht.extend({attr:function(t,e,i){var n,o,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return"undefined"==typeof t.getAttribute?ht.prop(t,e,i):(1===a&&ht.isXMLDoc(t)||(e=e.toLowerCase(),o=ht.attrHooks[e]||(ht.expr.match.bool.test(e)?Pe:Ie)),i!==undefined?null===i?void ht.removeAttr(t,e):o&&"set"in o&&(n=o.set(t,i,e))!==undefined?n:(t.setAttribute(e,i+""),i):o&&"get"in o&&null!==(n=o.get(t,e))?n:null==(n=ht.find.attr(t,e))?undefined:n)},attrHooks:{type:{set:function(t,e){if(!dt.radioValue&&"radio"===e&&ht.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n,o=0,a=e&&e.match(Et);if(a&&1===t.nodeType)for(;i=a[o++];)n=ht.propFix[i]||i,ht.expr.match.bool.test(i)?Fe&&Re||!Le.test(i)?t[n]=!1:t[ht.camelCase("default-"+i)]=t[n]=!1:ht.attr(t,i,""),t.removeAttribute(Re?i:n)}}),Pe={set:function(t,e,i){return!1===e?ht.removeAttr(t,i):Fe&&Re||!Le.test(i)?t.setAttribute(!Re&&ht.propFix[i]||i,i):t[ht.camelCase("default-"+i)]=t[i]=!0,i}},ht.each(ht.expr.match.bool.source.match(/\w+/g),function(t,e){var i=Ne[e]||ht.find.attr;Fe&&Re||!Le.test(e)?Ne[e]=function(t,e,n){var o,a;return n||(a=Ne[e],Ne[e]=o,o=null!=i(t,e,n)?e.toLowerCase():null,Ne[e]=a),o}:Ne[e]=function(t,e,i){if(!i)return t[ht.camelCase("default-"+e)]?e.toLowerCase():null}}),Fe&&Re||(ht.attrHooks.value={set:function(t,e,i){if(!ht.nodeName(t,"input"))return Ie&&Ie.set(t,e,i);t.defaultValue=e}}),Re||(Ie={set:function(t,e,i){var n=t.getAttributeNode(i);if(n||t.setAttributeNode(n=t.ownerDocument.createAttribute(i)),n.value=e+="","value"===i||e===t.getAttribute(i))return e}},Ne.id=Ne.name=Ne.coords=function(t,e,i){var n;if(!i)return(n=t.getAttributeNode(e))&&""!==n.value?n.value:null},ht.valHooks.button={get:function(t,e){var i=t.getAttributeNode(e);if(i&&i.specified)return i.value},set:Ie.set},ht.attrHooks.contenteditable={set:function(t,e,i){Ie.set(t,""!==e&&e,i)}},ht.each(["width","height"],function(t,e){ht.attrHooks[e]={set:function(t,i){if(""===i)return t.setAttribute(e,"auto"),i}}})),dt.style||(ht.attrHooks.style={get:function(t){return t.style.cssText||undefined},set:function(t,e){return t.style.cssText=e+""}});var je=/^(?:input|select|textarea|button|object)$/i,Be=/^(?:a|area)$/i;ht.fn.extend({prop:function(t,e){return zt(this,ht.prop,t,e,arguments.length>1)},removeProp:function(t){return t=ht.propFix[t]||t,this.each(function(){try{this[t]=undefined,delete this[t]}catch(e){}})}}),ht.extend({prop:function(t,e,i){var n,o,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&ht.isXMLDoc(t)||(e=ht.propFix[e]||e,o=ht.propHooks[e]),i!==undefined?o&&"set"in o&&(n=o.set(t,i,e))!==undefined?n:t[e]=i:o&&"get"in o&&null!==(n=o.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=ht.find.attr(t,"tabindex");return e?parseInt(e,10):je.test(t.nodeName)||Be.test(t.nodeName)&&t.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),dt.hrefNormalized||ht.each(["href","src"],function(t,e){ht.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),dt.optSelected||(ht.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),ht.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ht.propFix[this.toLowerCase()]=this}),dt.enctype||(ht.propFix.enctype="encoding");var qe=/[\t\r\n\f]/g;ht.fn.extend({addClass:function(t){var e,i,n,o,a,r,s,l=0;if(ht.isFunction(t))return this.each(function(e){ht(this).addClass(t.call(this,e,W(this)))});if("string"==typeof t&&t)for(e=t.match(Et)||[];i=this[l++];)if(o=W(i),n=1===i.nodeType&&(" "+o+" ").replace(qe," ")){for(r=0;a=e[r++];)n.indexOf(" "+a+" ")<0&&(n+=a+" ");o!==(s=ht.trim(n))&&ht.attr(i,"class",s)}return this},removeClass:function(t){var e,i,n,o,a,r,s,l=0;if(ht.isFunction(t))return this.each(function(e){ht(this).removeClass(t.call(this,e,W(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(Et)||[];i=this[l++];)if(o=W(i),n=1===i.nodeType&&(" "+o+" ").replace(qe," ")){for(r=0;a=e[r++];)for(;n.indexOf(" "+a+" ")>-1;)n=n.replace(" "+a+" "," ");o!==(s=ht.trim(n))&&ht.attr(i,"class",s)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):ht.isFunction(t)?this.each(function(i){ht(this).toggleClass(t.call(this,i,W(this),e),e)}):this.each(function(){var e,n,o,a;if("string"===i)for(n=0,o=ht(this),a=t.match(Et)||[];e=a[n++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else t!==undefined&&"boolean"!==i||((e=W(this))&&ht._data(this,"__className__",e),ht.attr(this,"class",e||!1===t?"":ht._data(this,"__className__")||""))})},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+W(i)+" ").replace(qe," ").indexOf(e)>-1)return!0;return!1}}),ht.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){ht.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),ht.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}});var ze=t.location,He=ht.now(),We=/\?/,Ye=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ht.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var i,n=null,o=ht.trim(e+"");return o&&!ht.trim(o.replace(Ye,function(t,e,o,a){return i&&e&&(n=0),0===n?t:(i=o||e,n+=!a-!o,"")}))?Function("return "+o)():ht.error("Invalid JSON: "+e)},ht.parseXML=function(e){var i;if(!e||"string"!=typeof e)return null;try{t.DOMParser?i=(new t.DOMParser).parseFromString(e,"text/xml"):((i=new t.ActiveXObject("Microsoft.XMLDOM")).async="false",i.loadXML(e))}catch(n){i=undefined}
return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||ht.error("Invalid XML: "+e),i};var Ve=/#.*$/,Ue=/([?&])_=[^&]*/,Ge=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ke=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Je=/^(?:GET|HEAD)$/,Qe=/^\/\//,Xe=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ze={},ti={},ei="*/".concat("*"),ii=ze.href,ni=Xe.exec(ii.toLowerCase())||[];ht.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ii,type:"GET",isLocal:Ke.test(ni[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ei,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ht.parseJSON,"text xml":ht.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?U(U(t,ht.ajaxSettings),e):U(ht.ajaxSettings,t)},ajaxPrefilter:Y(Ze),ajaxTransport:Y(ti),ajax:function(e,i){function n(e,i,n,o){var a,d,_,b,w,x=i;2!==y&&(y=2,l&&t.clearTimeout(l),u=undefined,s=o||"",$.readyState=e>0?4:0,a=e>=200&&e<300||304===e,n&&(b=G(p,$,n)),b=K(p,b,$,a),a?(p.ifModified&&((w=$.getResponseHeader("Last-Modified"))&&(ht.lastModified[r]=w),(w=$.getResponseHeader("etag"))&&(ht.etag[r]=w)),204===e||"HEAD"===p.type?x="nocontent":304===e?x="notmodified":(x=b.state,d=b.data,a=!(_=b.error))):(_=x,!e&&x||(x="error",e<0&&(e=0))),$.status=e,$.statusText=(i||x)+"",a?m.resolveWith(h,[d,x,$]):m.rejectWith(h,[$,x,_]),$.statusCode(v),v=undefined,c&&f.trigger(a?"ajaxSuccess":"ajaxError",[$,p,a?d:_]),g.fireWith(h,[$,x]),c&&(f.trigger("ajaxComplete",[$,p]),--ht.active||ht.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=undefined),i=i||{};var o,a,r,s,l,c,u,d,p=ht.ajaxSetup({},i),h=p.context||p,f=p.context&&(h.nodeType||h.jquery)?ht(h):ht.event,m=ht.Deferred(),g=ht.Callbacks("once memory"),v=p.statusCode||{},_={},b={},y=0,w="canceled",$={readyState:0,getResponseHeader:function(t){var e;if(2===y){if(!d)for(d={};e=Ge.exec(s);)d[e[1].toLowerCase()]=e[2];e=d[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===y?s:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return y||(t=b[i]=b[i]||t,_[t]=e),this},overrideMimeType:function(t){return y||(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(y<2)for(e in t)v[e]=[v[e],t[e]];else $.always(t[$.status]);return this},abort:function(t){var e=t||w;return u&&u.abort(e),n(0,e),this}};if(m.promise($).complete=g.add,$.success=$.done,$.error=$.fail,p.url=((e||p.url||ii)+"").replace(Ve,"").replace(Qe,ni[1]+"//"),p.type=i.method||i.type||p.method||p.type,p.dataTypes=ht.trim(p.dataType||"*").toLowerCase().match(Et)||[""],null==p.crossDomain&&(o=Xe.exec(p.url.toLowerCase()),p.crossDomain=!(!o||o[1]===ni[1]&&o[2]===ni[2]&&(o[3]||("http:"===o[1]?"80":"443"))===(ni[3]||("http:"===ni[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=ht.param(p.data,p.traditional)),V(Ze,p,i,$),2===y)return $;for(a in(c=ht.event&&p.global)&&0==ht.active++&&ht.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Je.test(p.type),r=p.url,p.hasContent||(p.data&&(r=p.url+=(We.test(r)?"&":"?")+p.data,delete p.data),!1===p.cache&&(p.url=Ue.test(r)?r.replace(Ue,"$1_="+He++):r+(We.test(r)?"&":"?")+"_="+He++)),p.ifModified&&(ht.lastModified[r]&&$.setRequestHeader("If-Modified-Since",ht.lastModified[r]),ht.etag[r]&&$.setRequestHeader("If-None-Match",ht.etag[r])),(p.data&&p.hasContent&&!1!==p.contentType||i.contentType)&&$.setRequestHeader("Content-Type",p.contentType),$.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+ei+"; q=0.01":""):p.accepts["*"]),p.headers)$.setRequestHeader(a,p.headers[a]);if(p.beforeSend&&(!1===p.beforeSend.call(h,$,p)||2===y))return $.abort();for(a in w="abort",{success:1,error:1,complete:1})$[a](p[a]);if(u=V(ti,p,i,$)){if($.readyState=1,c&&f.trigger("ajaxSend",[$,p]),2===y)return $;p.async&&p.timeout>0&&(l=t.setTimeout(function(){$.abort("timeout")},p.timeout));try{y=1,u.send(_,n)}catch(x){if(!(y<2))throw x;n(-1,x)}}else n(-1,"No Transport");return $},getJSON:function(t,e,i){return ht.get(t,e,i,"json")},getScript:function(t,e){return ht.get(t,undefined,e,"script")}}),ht.each(["get","post"],function(t,e){ht[e]=function(t,i,n,o){return ht.isFunction(i)&&(o=o||n,n=i,i=undefined),ht.ajax(ht.extend({url:t,type:e,dataType:o,data:i,success:n},ht.isPlainObject(t)&&t))}}),ht._evalUrl=function(t){return ht.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},ht.fn.extend({wrapAll:function(t){if(ht.isFunction(t))return this.each(function(e){ht(this).wrapAll(t.call(this,e))});if(this[0]){var e=ht(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return ht.isFunction(t)?this.each(function(e){ht(this).wrapInner(t.call(this,e))}):this.each(function(){var e=ht(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=ht.isFunction(t);return this.each(function(i){ht(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){ht.nodeName(this,"body")||ht(this).replaceWith(this.childNodes)}).end()}}),ht.expr.filters.hidden=function(t){return dt.reliableHiddenOffsets()?t.offsetWidth<=0&&t.offsetHeight<=0&&!t.getClientRects().length:Q(t)},ht.expr.filters.visible=function(t){return!ht.expr.filters.hidden(t)};var oi=/%20/g,ai=/\[\]$/,ri=/\r?\n/g,si=/^(?:submit|button|image|reset|file)$/i,li=/^(?:input|select|textarea|keygen)/i;ht.param=function(t,e){var i,n=[],o=function(t,e){e=ht.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(e===undefined&&(e=ht.ajaxSettings&&ht.ajaxSettings.traditional),ht.isArray(t)||t.jquery&&!ht.isPlainObject(t))ht.each(t,function(){o(this.name,this.value)});else for(i in t)X(i,t[i],e,o);return n.join("&").replace(oi,"+")},ht.fn.extend({serialize:function(){return ht.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=ht.prop(this,"elements");return t?ht.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!ht(this).is(":disabled")&&li.test(this.nodeName)&&!si.test(t)&&(this.checked||!Ht.test(t))}).map(function(t,e){var i=ht(this).val();return null==i?null:ht.isArray(i)?ht.map(i,function(t){return{name:e.name,value:t.replace(ri,"\r\n")}}):{name:e.name,value:i.replace(ri,"\r\n")}}).get()}}),ht.ajaxSettings.xhr=t.ActiveXObject!==undefined?function(){return this.isLocal?tt():nt.documentMode>8?Z():/^(get|post|head|put|delete|options)$/i.test(this.type)&&Z()||tt()}:Z;var ci=0,ui={},di=ht.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in ui)ui[t](undefined,!0)}),dt.cors=!!di&&"withCredentials"in di,(di=dt.ajax=!!di)&&ht.ajaxTransport(function(e){var i;if(!e.crossDomain||dt.cors)return{send:function(n,o){var a,r=e.xhr(),s=++ci;if(r.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)r[a]=e.xhrFields[a];for(a in e.mimeType&&r.overrideMimeType&&r.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)n[a]!==undefined&&r.setRequestHeader(a,n[a]+"");r.send(e.hasContent&&e.data||null),i=function(t,n){var a,l,c;if(i&&(n||4===r.readyState))if(delete ui[s],i=undefined,r.onreadystatechange=ht.noop,n)4!==r.readyState&&r.abort();else{c={},a=r.status,"string"==typeof r.responseText&&(c.text=r.responseText);try{l=r.statusText}catch(u){l=""}a||!e.isLocal||e.crossDomain?1223===a&&(a=204):a=c.text?200:404}c&&o(a,l,c,r.getAllResponseHeaders())},e.async?4===r.readyState?t.setTimeout(i):r.onreadystatechange=ui[s]=i:i()},abort:function(){i&&i(undefined,!0)}}}),ht.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return ht.globalEval(t),t}}}),ht.ajaxPrefilter("script",function(t){t.cache===undefined&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),ht.ajaxTransport("script",function(t){if(t.crossDomain){var e,i=nt.head||ht("head")[0]||nt.documentElement;return{send:function(n,o){(e=nt.createElement("script")).async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,i){(i||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,i||o(200,"success"))},i.insertBefore(e,i.firstChild)},abort:function(){e&&e.onload(undefined,!0)}}}});var pi=[],hi=/(=)\?(?=&|$)|\?\?/;ht.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=pi.pop()||ht.expando+"_"+He++;return this[t]=!0,t}}),ht.ajaxPrefilter("json jsonp",function(e,i,n){var o,a,r,s=!1!==e.jsonp&&(hi.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&hi.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=ht.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(hi,"$1"+o):!1!==e.jsonp&&(e.url+=(We.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return r||ht.error(o+" was not called"),r[0]},e.dataTypes[0]="json",a=t[o],t[o]=function(){r=arguments},n.always(function(){a===undefined?ht(t).removeProp(o):t[o]=a,e[o]&&(e.jsonpCallback=i.jsonpCallback,pi.push(o)),r&&ht.isFunction(a)&&a(r[0]),r=a=undefined}),"script"}),ht.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||nt;var n=$t.exec(t),o=!i&&[];return n?[e.createElement(n[1])]:(n=v([t],e,o),o&&o.length&&ht(o).remove(),ht.merge([],n.childNodes))};var fi=ht.fn.load;ht.fn.load=function(t,e,i){if("string"!=typeof t&&fi)return fi.apply(this,arguments);var n,o,a,r=this,s=t.indexOf(" ");return s>-1&&(n=ht.trim(t.slice(s,t.length)),t=t.slice(0,s)),ht.isFunction(e)?(i=e,e=undefined):e&&"object"==typeof e&&(o="POST"),r.length>0&&ht.ajax({url:t,type:o||"GET",dataType:"html",data:e}).done(function(t){a=arguments,r.html(n?ht("<div>").append(ht.parseHTML(t)).find(n):t)}).always(i&&function(t,e){r.each(function(){i.apply(this,a||[t.responseText,e,t])})}),this},ht.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){ht.fn[e]=function(t){return this.on(e,t)}}),ht.expr.filters.animated=function(t){return ht.grep(ht.timers,function(e){return t===e.elem}).length},ht.offset={setOffset:function(t,e,i){var n,o,a,r,s,l,c=ht.css(t,"position"),u=ht(t),d={};"static"===c&&(t.style.position="relative"),s=u.offset(),a=ht.css(t,"top"),l=ht.css(t,"left"),("absolute"===c||"fixed"===c)&&ht.inArray("auto",[a,l])>-1?(r=(n=u.position()).top,o=n.left):(r=parseFloat(a)||0,o=parseFloat(l)||0),ht.isFunction(e)&&(e=e.call(t,i,ht.extend({},s))),null!=e.top&&(d.top=e.top-s.top+r),null!=e.left&&(d.left=e.left-s.left+o),"using"in e?e.using.call(t,d):u.css(d)}},ht.fn.extend({offset:function(t){if(arguments.length)return t===undefined?this:this.each(function(e){ht.offset.setOffset(this,t,e)});var e,i,n={top:0,left:0},o=this[0],a=o&&o.ownerDocument;return a?(e=a.documentElement,ht.contains(e,o)?("undefined"!=typeof o.getBoundingClientRect&&(n=o.getBoundingClientRect()),i=et(a),{top:n.top+(i.pageYOffset||e.scrollTop)-(e.clientTop||0),left:n.left+(i.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):n):void 0},position:function(){if(this[0]){var t,e,i={top:0,left:0},n=this[0];return"fixed"===ht.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),ht.nodeName(t[0],"html")||(i=t.offset()),i.top+=ht.css(t[0],"borderTopWidth",!0),i.left+=ht.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-ht.css(n,"marginTop",!0),left:e.left-i.left-ht.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&!ht.nodeName(t,"html")&&"static"===ht.css(t,"position");)t=t.offsetParent;return t||me})}}),ht.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i=/Y/.test(e);ht.fn[t]=function(n){return zt(this,function(t,n,o){var a=et(t);if(o===undefined)return a?e in a?a[e]:a.document.documentElement[n]:t[n];a?a.scrollTo(i?ht(a).scrollLeft():o,i?o:ht(a).scrollTop()):t[n]=o},t,n,arguments.length,null)}}),ht.each(["top","left"],function(t,e){ht.cssHooks[e]=M(dt.pixelPosition,function(t,i){if(i)return i=ve(t,e),he.test(i)?ht(t).position()[e]+"px":i})}),ht.each({Height:"height",Width:"width"},function(t,e){ht.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){ht.fn[n]=function(n,o){var a=arguments.length&&(i||"boolean"!=typeof n),r=i||(!0===n||!0===o?"margin":"border");return zt(this,function(e,i,n){var o;return ht.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):n===undefined?ht.css(e,i,r):ht.style(e,i,n,r)},e,a?n:undefined,a,null)}})}),ht.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}}),ht.fn.size=function(){return this.length},ht.fn.andSelf=ht.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ht});var mi=t.jQuery,gi=t.$;return ht.noConflict=function(e){return t.$===ht&&(t.$=gi),e&&t.jQuery===ht&&(t.jQuery=mi),ht},e||(t.jQuery=t.$=ht),ht}),function(t,e){"use strict";var i;t.rails!==e&&t.error("jquery-ujs has already been loaded!");var n=t(document);t.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return t("meta[name=csrf-token]").attr("content")},csrfParam:function(){return t("meta[name=csrf-param]").attr("content")},CSRFProtection:function(t){var e=i.csrfToken();e&&t.setRequestHeader("X-CSRF-Token",e)},refreshCSRFTokens:function(){t('form input[name="'+i.csrfParam()+'"]').val(i.csrfToken())},fire:function(e,i,n){var o=t.Event(i);return e.trigger(o,n),!1!==o.result},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t[0].href},isRemote:function(t){return t.data("remote")!==e&&!1!==t.data("remote")},handleRemote:function(n){var o,a,r,s,l,c;if(i.fire(n,"ajax:before")){if(s=n.data("with-credentials")||null,l=n.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,n.is("form")){o=n.data("ujs:submit-button-formmethod")||n.attr("method"),a=n.data("ujs:submit-button-formaction")||n.attr("action"),r=t(n[0]).serializeArray();var u=n.data("ujs:submit-button");u&&(r.push(u),n.data("ujs:submit-button",null)),n.data("ujs:submit-button-formmethod",null),n.data("ujs:submit-button-formaction",null)}else n.is(i.inputChangeSelector)?(o=n.data("method"),a=n.data("url"),r=n.serialize(),n.data("params")&&(r=r+"&"+n.data("params"))):n.is(i.buttonClickSelector)?(o=n.data("method")||"get",a=n.data("url"),r=n.serialize(),n.data("params")&&(r=r+"&"+n.data("params"))):(o=n.data("method"),a=i.href(n),r=n.data("params")||null);return c={type:o||"GET",data:r,dataType:l,beforeSend:function(t,o){if(o.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+o.accepts.script),!i.fire(n,"ajax:beforeSend",[t,o]))return!1;n.trigger("ajax:send",t)},success:function(t,e,i){n.trigger("ajax:success",[t,e,i])},complete:function(t,e){n.trigger("ajax:complete",[t,e])},error:function(t,e,i){n.trigger("ajax:error",[t,e,i])},crossDomain:i.isCrossDomain(a)},s&&(c.xhrFields={withCredentials:s}),a&&(c.url=a),i.ajax(c)}return!1},isCrossDomain:function(t){var e=document.createElement("a");e.href=location.href;var i=document.createElement("a");try{return i.href=t,i.href=i.href,!((!i.protocol||":"===i.protocol)&&!i.host||e.protocol+"//"+e.host==i.protocol+"//"+i.host)}catch(n){return!0}},handleMethod:function(n){var o=i.href(n),a=n.data("method"),r=n.attr("target"),s=i.csrfToken(),l=i.csrfParam(),c=t('<form method="post" action="'+o+'"></form>'),u='<input name="_method" value="'+a+'" type="hidden" />';l===e||s===e||i.isCrossDomain(o)||(u+='<input name="'+l+'" value="'+s+'" type="hidden" />'),r&&c.attr("target",r),c.hide().append(u).appendTo("body"),c.submit()},formElements:function(e,i){return e.is("form")?t(e[0].elements).filter(i):e.find(i)},disableFormElements:function(e){i.formElements(e,i.disableSelector).each(function(){i.disableFormElement(t(this))})},disableFormElement:function(t){var i,n;i=t.is("button")?"html":"val",(n=t.data("disable-with"))!==e&&(t.data("ujs:enable-with",t[i]()),t[i](n)),t.prop("disabled",!0),t.data("ujs:disabled",!0)},enableFormElements:function(e){i.formElements(e,i.enableSelector).each(function(){i.enableFormElement(t(this))})},enableFormElement:function(t){var i=t.is("button")?"html":"val";t.data("ujs:enable-with")!==e&&(t[i](t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.prop("disabled",!1),t.removeData("ujs:disabled")},allowAction:function(t){var e,n=t.data("confirm"),o=!1;if(!n)return!0;if(i.fire(t,"confirm")){try{o=i.confirm(n)}catch(a){(console.error||console.log).call(console,a.stack||a)}e=i.fire(t,"confirm:complete",[o])}return o&&e},blankInputs:function(e,i,n){var o,a,r,s=t(),l=i||"input,textarea",c=e.find(l),u={};return c.each(function(){(o=t(this)).is("input[type=radio]")?(r=o.attr("name"),u[r]||(0===e.find('input[type=radio]:checked[name="'+r+'"]').length&&(a=e.find('input[type=radio][name="'+r+'"]'),s=s.add(a)),u[r]=r)):(o.is("input[type=checkbox],input[type=radio]")?o.is(":checked"):!!o.val())===n&&(s=s.add(o))}),!!s.length&&s},nonBlankInputs:function(t,e){return i.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var n=t.data("disable-with");n!==e&&(t.data("ujs:enable-with",t.html()),t.html(n)),t.bind("click.railsDisable",function(t){return i.stopEverything(t)}),t.data("ujs:disabled",!0)},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable"),t.removeData("ujs:disabled")}},i.fire(n,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,n){t.crossDomain||i.CSRFProtection(n)}),t(window).on("pageshow.rails",function(){t(t.rails.enableSelector).each(function(){var e=t(this);e.data("ujs:disabled")&&t.rails.enableFormElement(e)}),t(t.rails.linkDisableSelector).each(function(){var e=t(this);e.data("ujs:disabled")&&t.rails.enableElement(e)})}),n.on("ajax:complete",i.linkDisableSelector,function(){i.enableElement(t(this))}),n.on("ajax:complete",i.buttonDisableSelector,function(){i.enableFormElement(t(this))}),n.on("click.rails",i.linkClickSelector,function(e){var n=t(this),o=n.data("method"),a=n.data("params"),r=e.metaKey||e.ctrlKey;if(!i.allowAction(n))return i.stopEverything(e);if(!r&&n.is(i.linkDisableSelector)&&i.disableElement(n),i.isRemote(n)){if(r&&(!o||"GET"===o)&&!a)return!0;var s=i.handleRemote(n);return!1===s?i.enableElement(n):s.fail(function(){i.enableElement(n)}),!1}return o?(i.handleMethod(n),!1):void 0}),n.on("click.rails",i.buttonClickSelector,function(e){var n=t(this);if(!i.allowAction(n)||!i.isRemote(n))return i.stopEverything(e);n.is(i.buttonDisableSelector)&&i.disableFormElement(n);var o=i.handleRemote(n);return!1===o?i.enableFormElement(n):o.fail(function(){i.enableFormElement(n)}),!1}),n.on("change.rails",i.inputChangeSelector,function(e){var n=t(this);return i.allowAction(n)&&i.isRemote(n)?(i.handleRemote(n),!1):i.stopEverything(e)}),n.on("submit.rails",i.formSubmitSelector,function(n){var o,a,r=t(this),s=i.isRemote(r);if(!i.allowAction(r))return i.stopEverything(n);if(r.attr("novalidate")===e)if(r.data("ujs:formnovalidate-button")===e){if((o=i.blankInputs(r,i.requiredInputSelector,!1))&&i.fire(r,"ajax:aborted:required",[o]))return i.stopEverything(n)}else r.data("ujs:formnovalidate-button",e);if(s){if(a=i.nonBlankInputs(r,i.fileInputSelector)){setTimeout(function(){i.disableFormElements(r)},13);var l=i.fire(r,"ajax:aborted:file",[a]);return l||setTimeout(function(){i.enableFormElements(r)},13),l}return i.handleRemote(r),!1}setTimeout(function(){i.disableFormElements(r)},13)}),n.on("click.rails",i.formInputClickSelector,function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);var o=n.attr("name"),a=o?{name:o,value:n.val()}:null,r=n.closest("form");0===r.length&&(r=t("#"+n.attr("form"))),r.data("ujs:submit-button",a),r.data("ujs:formnovalidate-button",n.attr("formnovalidate")),r.data("ujs:submit-button-formaction",n.attr("formaction")),r.data("ujs:submit-button-formmethod",n.attr("formmethod"))}),n.on("ajax:send.rails",i.formSubmitSelector,function(e){this===e.target&&i.disableFormElements(t(this))}),n.on("ajax:complete.rails",i.formSubmitSelector,function(e){this===e.target&&i.enableFormElements(t(this))}),t(function(){i.refreshCSRFTokens()}))}(jQuery),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){function i(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),o=n.length>>>0;if(0===o)return!1;for(var a=0|e,r=Math.max(a>=0?a:o-Math.abs(a),0);r<o;){if(i(n[r],t))return!0;r++}return!1}}),$("input.number").on("change",function(){$(this).val($(this).val().replace(",","."))}),
/*! jQuery UI - v1.12.1 - 2016-09-16
 * http://jqueryui.com
 * Includes: position.js
 * Copyright jQuery Foundation and other contributors; Licensed MIT */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){t.ui=t.ui||{};t.ui.version="1.12.1";
/*!
     * jQuery UI Position 1.12.1
     * http://jqueryui.com
     *
     * Copyright jQuery Foundation and other contributors
     * Released under the MIT license.
     * http://jquery.org/license
     *
     * http://api.jqueryui.com/position/
     */
/*!
     * jQuery UI Position 1.12.1
     * http://jqueryui.com
     *
     * Copyright jQuery Foundation and other contributors
     * Released under the MIT license.
     * http://jquery.org/license
     *
     * http://api.jqueryui.com/position/
     */
!function(){function e(t,e,i){return[parseFloat(t[0])*(d.test(t[0])?e/100:1),parseFloat(t[1])*(d.test(t[1])?i/100:1)]}function i(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}var o,a=Math.max,r=Math.abs,s=/left|center|right/,l=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,d=/%$/,p=t.fn.position;t.position={scrollbarWidth:function(){if(o!==undefined)return o;var e,i,n=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=n.children()[0];return t("body").append(n),e=a.offsetWidth,n.css("overflow","scroll"),e===(i=a.offsetWidth)&&(i=n[0].clientWidth),n.remove(),o=e-i},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),o="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight?t.position.scrollbarWidth():0,height:o?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]),o=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:o,offset:!n&&!o?t(e).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},t.fn.position=function(o){if(!o||!o.of)return p.apply(this,arguments);o=t.extend({},o);var d,h,f,m,g,v,_=t(o.of),b=t.position.getWithinInfo(o.within),y=t.position.getScrollInfo(b),w=(o.collision||"flip").split(" "),$={};return v=n(_),_[0].preventDefault&&(o.at="left top"),h=v.width,f=v.height,m=v.offset,g=t.extend({},m),t.each(["my","at"],function(){var t,e,i=(o[this]||"").split(" ");1===i.length&&(i=s.test(i[0])?i.concat(["center"]):l.test(i[0])?["center"].concat(i):["center","center"]),i[0]=s.test(i[0])?i[0]:"center",i[1]=l.test(i[1])?i[1]:"center",t=c.exec(i[0]),e=c.exec(i[1]),$[this]=[t?t[0]:0,e?e[0]:0],o[this]=[u.exec(i[0])[0],u.exec(i[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===o.at[0]?g.left+=h:"center"===o.at[0]&&(g.left+=h/2),"bottom"===o.at[1]?g.top+=f:"center"===o.at[1]&&(g.top+=f/2),d=e($.at,h,f),g.left+=d[0],g.top+=d[1],this.each(function(){var n,s,l=t(this),c=l.outerWidth(),u=l.outerHeight(),p=i(this,"marginLeft"),v=i(this,"marginTop"),x=c+p+i(this,"marginRight")+y.width,k=u+v+i(this,"marginBottom")+y.height,C=t.extend({},g),D=e($.my,l.outerWidth(),l.outerHeight());"right"===o.my[0]?C.left-=c:"center"===o.my[0]&&(C.left-=c/2),"bottom"===o.my[1]?C.top-=u:"center"===o.my[1]&&(C.top-=u/2),C.left+=D[0],C.top+=D[1],n={marginLeft:p,marginTop:v},t.each(["left","top"],function(e,i){t.ui.position[w[e]]&&t.ui.position[w[e]][i](C,{targetWidth:h,targetHeight:f,elemWidth:c,elemHeight:u,collisionPosition:n,collisionWidth:x,collisionHeight:k,offset:[d[0]+D[0],d[1]+D[1]],my:o.my,at:o.at,within:b,elem:l})}),o.using&&(s=function(t){var e=m.left-C.left,i=e+h-c,n=m.top-C.top,s=n+f-u,d={target:{element:_,left:m.left,top:m.top,width:h,height:f},element:{element:l,left:C.left,top:C.top,width:c,height:u},horizontal:i<0?"left":e>0?"right":"center",vertical:s<0?"top":n>0?"bottom":"middle"};h<c&&r(e+i)<h&&(d.horizontal="center"),f<u&&r(n+s)<f&&(d.vertical="middle"),a(r(e),r(i))>a(r(n),r(s))?d.important="horizontal":d.important="vertical",o.using.call(this,t,d)}),l.offset(t.extend(C,{using:s}))})},t.ui.position={fit:{left:function(t,e){var i,n=e.within,o=n.isWindow?n.scrollLeft:n.offset.left,r=n.width,s=t.left-e.collisionPosition.marginLeft,l=o-s,c=s+e.collisionWidth-r-o;e.collisionWidth>r?l>0&&c<=0?(i=t.left+l+e.collisionWidth-r-o,t.left+=l-i):t.left=c>0&&l<=0?o:l>c?o+r-e.collisionWidth:o:l>0?t.left+=l:c>0?t.left-=c:t.left=a(t.left-s,t.left)},top:function(t,e){var i,n=e.within,o=n.isWindow?n.scrollTop:n.offset.top,r=e.within.height,s=t.top-e.collisionPosition.marginTop,l=o-s,c=s+e.collisionHeight-r-o;e.collisionHeight>r?l>0&&c<=0?(i=t.top+l+e.collisionHeight-r-o,t.top+=l-i):t.top=c>0&&l<=0?o:l>c?o+r-e.collisionHeight:o:l>0?t.top+=l:c>0?t.top-=c:t.top=a(t.top-s,t.top)}},flip:{left:function(t,e){var i,n,o=e.within,a=o.offset.left+o.scrollLeft,s=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=t.left-e.collisionPosition.marginLeft,u=c-l,d=c+e.collisionWidth-s-l,p="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,h="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];u<0?((i=t.left+p+h+f+e.collisionWidth-s-a)<0||i<r(u))&&(t.left+=p+h+f):d>0&&((n=t.left-e.collisionPosition.marginLeft+p+h+f-l)>0||r(n)<d)&&(t.left+=p+h+f)},top:function(t,e){var i,n,o=e.within,a=o.offset.top+o.scrollTop,s=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=t.top-e.collisionPosition.marginTop,u=c-l,d=c+e.collisionHeight-s-l,p="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,h="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,f=-2*e.offset[1];u<0?((n=t.top+p+h+f+e.collisionHeight-s-a)<0||n<r(u))&&(t.top+=p+h+f):d>0&&((i=t.top-e.collisionPosition.marginTop+p+h+f-l)>0||r(i)<d)&&(t.top+=p+h+f)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}();t.ui.position}),
/*!
 * jQuery contextMenu v2.4.3-dev - Plugin for simple contextMenu handling
 *
 * Version: v2.4.3-dev
 *
 * Authors: Bjrn Brala (SWIS.nl), Rodney Rehm, Addy Osmani (patches for FF)
 * Web: http://swisnl.github.io/jQuery-contextMenu/
 *
 * Copyright (c) 2011-2017 SWIS BV and contributors
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *   GPL v3 http://opensource.org/licenses/GPL-3.0
 *
 * Date: 2017-01-02T09:05:55.691Z
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}(function(t){"use strict";function e(t){for(var e,i=t.split(/\s+/),n=[],o=0;e=i[o];o++)e=e.charAt(0).toUpperCase(),n.push(e);return n}function i(e){return e.id&&t('label[for="'+e.id+'"]').val()||e.name}function n(e,o,a){return a||(a=0),o.each(function(){var o,r,s=t(this),l=this,c=this.nodeName.toLowerCase();switch("label"===c&&s.find("input, textarea, select").length&&(o=s.text(),c=(l=(s=s.children().first()).get(0)).nodeName.toLowerCase()),c){case"menu":r={name:s.attr("label"),items:{}},a=n(r.items,s.children(),a);break;case"a":case"button":r={name:s.text(),disabled:!!s.attr("disabled"),callback:function(){s.click()}};break;case"menuitem":case"command":switch(s.attr("type")){case undefined:case"command":case"menuitem":r={name:s.attr("label"),disabled:!!s.attr("disabled"),icon:s.attr("icon"),callback:function(){s.click()}};break;case"checkbox":r={type:"checkbox",disabled:!!s.attr("disabled"),name:s.attr("label"),selected:!!s.attr("checked")};break;case"radio":r={type:"radio",disabled:!!s.attr("disabled"),name:s.attr("label"),radio:s.attr("radiogroup"),value:s.attr("id"),selected:!!s.attr("checked")};break;default:r=undefined}break;case"hr":r="-------";break;case"input":switch(s.attr("type")){case"text":r={type:"text",name:o||i(l),disabled:!!s.attr("disabled"),value:s.val()};break;case"checkbox":r={type:"checkbox",name:o||i(l),disabled:!!s.attr("disabled"),selected:!!s.attr("checked")};break;case"radio":r={type:"radio",name:o||i(l),disabled:!!s.attr("disabled"),radio:!!s.attr("name"),value:s.val(),selected:!!s.attr("checked")};break;default:r=undefined}break;case"select":r={type:"select",name:o||i(l),disabled:!!s.attr("disabled"),selected:s.val(),options:{}},s.children().each(function(){r.options[this.value]=t(this).text()});break;case"textarea":r={type:"textarea",name:o||i(l),disabled:!!s.attr("disabled"),value:s.val()};break;case"label":break;default:r={type:"html",html:s.clone(!0)}}r&&(e["key"+ ++a]=r)}),a}var o;t.support.htmlMenuitem="HTMLMenuItemElement"in window,t.support.htmlCommand="HTMLCommandElement"in window,t.support.eventSelectstart="onselectstart"in document.documentElement,t.ui&&t.widget||(t.cleanData=(o=t.cleanData,function(e){var i,n,a;for(a=0;null!=e[a];a++){n=e[a];try{(i=t._data(n,"events"))&&i.remove&&t(n).triggerHandler("remove")}catch(r){}}o(e)}));var a=null,r=!1,s=t(window),l=0,c={},u={},d={},p={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!0,selectableSubMenu:!1,classNames:{hover:"context-menu-hover",disabled:"context-menu-disabled",visible:"context-menu-visible",notSelectable:"context-menu-not-selectable",icon:"context-menu-icon",iconEdit:"context-menu-icon-edit",iconCut:"context-menu-icon-cut",iconCopy:"context-menu-icon-copy",iconPaste:"context-menu-icon-paste",iconDelete:"context-menu-icon-delete",iconAdd:"context-menu-icon-add",iconQuit:"context-menu-icon-quit",iconLoadingClass:"context-menu-icon-loading"},determinePosition:function(e){if(t.ui&&t.ui.position)e.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");else{var i=this.offset();i.top+=this.outerHeight(),i.left+=this.outerWidth()/2-e.outerWidth()/2,e.css(i)}},position:function(t,e,i){var n;if(e||i){n="maintain"===e&&"maintain"===i?t.$menu.position():{top:i,left:e};var o=s.scrollTop()+s.height(),a=s.scrollLeft()+s.width(),r=t.$menu.outerHeight(),l=t.$menu.outerWidth();n.top+r>o&&(n.top-=r),n.top<0&&(n.top=0),n.left+l>a&&(n.left-=l),n.left<0&&(n.left=0),t.$menu.css(n)}else t.determinePosition.call(this,t.$menu)},positionSubmenu:function(e){if(e!==undefined)if(t.ui&&t.ui.position)e.css("display","block").position({my:"left top-5",at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var i={top:-9,left:this.outerWidth()-5};e.css(i)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:t.noop,hide:t.noop},callback:null,items:{}},h={timer:null,pageX:null,pageY:null},f=function(t){for(var e=0,i=t;e=Math.max(e,parseInt(i.css("z-index"),10)||0),(i=i.parent())&&i.length&&!("html body".indexOf(i.prop("nodeName").toLowerCase())>-1););return e},m={abortevent:function(t){t.preventDefault(),t.stopImmediatePropagation()},contextmenu:function(e){var i=t(this);if("right"===e.data.trigger&&(e.preventDefault(),e.stopImmediatePropagation()),!("right"!==e.data.trigger&&"demand"!==e.data.trigger&&e.originalEvent||!(e.mouseButton===undefined||!e.data||"left"===e.data.trigger&&0===e.mouseButton||"right"===e.data.trigger&&2===e.mouseButton)||i.hasClass("context-menu-active")||i.hasClass("context-menu-disabled"))){if(a=i,e.data.build){var n=e.data.build(a,e);if(!1===n)return;if(e.data=t.extend(!0,{},p,e.data,n||{}),!e.data.items||t.isEmptyObject(e.data.items))throw window.console&&(console.error||console.log).call(console,"No items specified to show in contextMenu"),new Error("No Items specified");e.data.$trigger=a,g.create(e.data)}var o=!1;for(var r in e.data.items){if(e.data.items.hasOwnProperty(r))(t.isFunction(e.data.items[r].visible)?e.data.items[r].visible.call(t(e.currentTarget),r,e.data):"undefined"==typeof e.data.items[r]||!e.data.items[r].visible||!0===e.data.items[r].visible)&&(o=!0)}o&&g.show.call(i,e.data,e.pageX,e.pageY)}},click:function(e){e.preventDefault(),e.stopImmediatePropagation(),t(this).trigger(t.Event("contextmenu",{data:e.data,pageX:e.pageX,pageY:e.pageY}))},mousedown:function(e){var i=t(this);a&&a.length&&!a.is(i)&&a.data("contextMenu").$menu.trigger("contextmenu:hide"),2===e.button&&(a=i.data("contextMenuActive",!0))},mouseup:function(e){var i=t(this);i.data("contextMenuActive")&&a&&a.length&&a.is(i)&&!i.hasClass("context-menu-disabled")&&(e.preventDefault(),e.stopImmediatePropagation(),a=i,i.trigger(t.Event("contextmenu",{data:e.data,pageX:e.pageX,pageY:e.pageY}))),i.removeData("contextMenuActive")},mouseenter:function(e){var i=t(this),n=t(e.relatedTarget),o=t(document);n.is(".context-menu-list")||n.closest(".context-menu-list").length||a&&a.length||(h.pageX=e.pageX,h.pageY=e.pageY,h.data=e.data,o.on("mousemove.contextMenuShow",m.mousemove),h.timer=setTimeout(function(){h.timer=null,o.off("mousemove.contextMenuShow"),a=i,i.trigger(t.Event("contextmenu",{data:h.data,pageX:h.pageX,pageY:h.pageY}))},e.data.delay))},mousemove:function(t){h.pageX=t.pageX,h.pageY=t.pageY},mouseleave:function(e){var i=t(e.relatedTarget);if(!i.is(".context-menu-list")&&!i.closest(".context-menu-list").length){try{clearTimeout(h.timer)}catch(e){}h.timer=null}},layerClick:function(e){var i,n,o=t(this).data("contextMenuRoot"),a=e.button,r=e.pageX,l=e.pageY;e.preventDefault(),e.stopImmediatePropagation(),setTimeout(function(){var c,u="left"===o.trigger&&0===a||"right"===o.trigger&&2===a;if(document.elementFromPoint&&o.$layer){if(o.$layer.hide(),(i=document.elementFromPoint(r-s.scrollLeft(),l-s.scrollTop())).isContentEditable){var d=document.createRange(),p=window.getSelection();d.selectNode(i),d.collapse(!0),p.removeAllRanges(),p.addRange(d)}o.$layer.show()}if(o.reposition&&u)if(document.elementFromPoint){if(o.$trigger.is(i)||o.$trigger.has(i).length)return void o.position.call(o.$trigger,o,r,l)}else if(n=o.$trigger.offset(),c=t(window),n.top+=c.scrollTop(),n.top<=e.pageY&&(n.left+=c.scrollLeft(),n.left<=e.pageX&&(n.bottom=n.top+o.$trigger.outerHeight(),n.bottom>=e.pageY&&(n.right=n.left+o.$trigger.outerWidth(),n.right>=e.pageX))))return void o.position.call(o.$trigger,o,r,l);i&&u&&o.$trigger.one("contextmenu:hidden",function(){t(i).contextMenu({x:r,y:l,button:a})}),null!=o&&null!=o.$menu&&o.$menu.trigger("contextmenu:hide")},50)},keyStop:function(t,e){e.isInput||t.preventDefault(),t.stopPropagation()},key:function(t){var e={};a&&(e=a.data("contextMenu")||{}),e.zIndex===undefined&&(e.zIndex=0);var i=0,n=function(t){""!==t.style.zIndex?i=t.style.zIndex:null!==t.offsetParent&&t.offsetParent!==undefined?n(t.offsetParent):null!==t.parentElement&&t.parentElement!==undefined&&n(t.parentElement)};if(n(t.target),!(i>e.zIndex)){switch(t.keyCode){case 9:case 38:if(m.keyStop(t,e),e.isInput){if(9===t.keyCode&&t.shiftKey)return t.preventDefault(),e.$selected&&e.$selected.find("input, textarea, select").blur(),void(null!=e.$menu&&e.$menu.trigger("prevcommand"));if(38===t.keyCode&&"checkbox"===e.$selected.find("input, textarea, select").prop("type"))return void t.preventDefault()}else if(9!==t.keyCode||t.shiftKey)return void(null!=e.$menu&&e.$menu.trigger("prevcommand"));break;case 40:if(m.keyStop(t,e),!e.isInput)return void(null!=e.$menu&&e.$menu.trigger("nextcommand"));if(9===t.keyCode)return t.preventDefault(),e.$selected&&e.$selected.find("input, textarea, select").blur(),void(null!=e.$menu&&e.$menu.trigger("nextcommand"));if(40===t.keyCode&&"checkbox"===e.$selected.find("input, textarea, select").prop("type"))return void t.preventDefault();break;case 37:if(m.keyStop(t,e),e.isInput||!e.$selected||!e.$selected.length)break;if(!e.$selected.parent().hasClass("context-menu-root")){var o=e.$selected.parent().parent();return e.$selected.trigger("contextmenu:blur"),void(e.$selected=o)}break;case 39:if(m.keyStop(t,e),e.isInput||!e.$selected||!e.$selected.length)break;var r=e.$selected.data("contextMenu")||{};if(r.$menu&&e.$selected.hasClass("context-menu-submenu"))return e.$selected=null,r.$selected=null,void r.$menu.trigger("nextcommand");break;case 35:case 36:return e.$selected&&e.$selected.find("input, textarea, select").length?void 0:((e.$selected&&e.$selected.parent()||e.$menu).children(":not(."+e.classNames.disabled+", ."+e.classNames.notSelectable+")")[36===t.keyCode?"first":"last"]().trigger("contextmenu:focus"),void t.preventDefault());case 13:if(m.keyStop(t,e),e.isInput){if(e.$selected&&!e.$selected.is("textarea, select"))return void t.preventDefault();break}return void("undefined"!=typeof e.$selected&&null!==e.$selected&&e.$selected.trigger("mouseup"));case 32:case 33:case 34:return void m.keyStop(t,e);case 27:return m.keyStop(t,e),void(null!=e.$menu&&e.$menu.trigger("contextmenu:hide"));default:var s=String.fromCharCode(t.keyCode).toUpperCase();if(e.accesskeys&&e.accesskeys[s])return void e.accesskeys[s].$node.trigger(e.accesskeys[s].$menu?"contextmenu:focus":"mouseup")}t.stopPropagation(),"undefined"!=typeof e.$selected&&null!==e.$selected&&e.$selected.trigger(t)}},prevItem:function(e){e.stopPropagation();var i=t(this).data("contextMenu")||{},n=t(this).data("contextMenuRoot")||{};if(i.$selected){var o=i.$selected;(i=i.$selected.parent().data("contextMenu")||{}).$selected=o}for(var a=i.$menu.children(),r=i.$selected&&i.$selected.prev().length?i.$selected.prev():a.last(),s=r;r.hasClass(n.classNames.disabled)||r.hasClass(n.classNames.notSelectable)||r.is(":hidden");)if((r=r.prev().length?r.prev():a.last()).is(s))return;i.$selected&&m.itemMouseleave.call(i.$selected.get(0),e),m.itemMouseenter.call(r.get(0),e);var l=r.find("input, textarea, select");l.length&&l.focus()},nextItem:function(e){e.stopPropagation();var i=t(this).data("contextMenu")||{},n=t(this).data("contextMenuRoot")||{};if(i.$selected){var o=i.$selected;(i=i.$selected.parent().data("contextMenu")||{}).$selected=o}for(var a=i.$menu.children(),r=i.$selected&&i.$selected.next().length?i.$selected.next():a.first(),s=r;r.hasClass(n.classNames.disabled)||r.hasClass(n.classNames.notSelectable)||r.is(":hidden");)if((r=r.next().length?r.next():a.first()).is(s))return;i.$selected&&m.itemMouseleave.call(i.$selected.get(0),e),m.itemMouseenter.call(r.get(0),e);var l=r.find("input, textarea, select");l.length&&l.focus()},focusInput:function(){var e=t(this).closest(".context-menu-item"),i=e.data(),n=i.contextMenu,o=i.contextMenuRoot;o.$selected=n.$selected=e,o.isInput=n.isInput=!0},blurInput:function(){var e=t(this).closest(".context-menu-item").data(),i=e.contextMenu;e.contextMenuRoot.isInput=i.isInput=!1},menuMouseenter:function(){t(this).data().contextMenuRoot.hovering=!0},menuMouseleave:function(e){var i=t(this).data().contextMenuRoot;i.$layer&&i.$layer.is(e.relatedTarget)&&(i.hovering=!1)},itemMouseenter:function(e){var i=t(this),n=i.data(),o=n.contextMenu,a=n.contextMenuRoot;a.hovering=!0,e&&a.$layer&&a.$layer.is(e.relatedTarget)&&(e.preventDefault(),e.stopImmediatePropagation()),(o.$menu?o:a).$menu.children("."+a.classNames.hover).trigger("contextmenu:blur").children(".hover").trigger("contextmenu:blur"),i.hasClass(a.classNames.disabled)||i.hasClass(a.classNames.notSelectable)?o.$selected=null:i.trigger("contextmenu:focus")},itemMouseleave:function(e){var i=t(this),n=i.data(),o=n.contextMenu,a=n.contextMenuRoot;if(a!==o&&a.$layer&&a.$layer.is(e.relatedTarget))return"undefined"!=typeof a.$selected&&null!==a.$selected&&a.$selected.trigger("contextmenu:blur"),e.preventDefault(),e.stopImmediatePropagation(),void(a.$selected=o.$selected=o.$node);i.trigger("contextmenu:blur")},itemClick:function(e){var i,n=t(this),o=n.data(),a=o.contextMenu,r=o.contextMenuRoot,s=o.contextMenuKey;if(!(!a.items[s]||n.is("."+r.classNames.disabled+", .context-menu-separator, ."+r.classNames.notSelectable)||n.is(".context-menu-submenu")&&!1===r.selectableSubMenu)){if(e.preventDefault(),e.stopImmediatePropagation(),t.isFunction(a.callbacks[s])&&Object.prototype.hasOwnProperty.call(a.callbacks,s))i=a.callbacks[s];else{if(!t.isFunction(r.callback))return;i=r.callback}!1!==i.call(r.$trigger,s,r)?r.$menu.trigger("contextmenu:hide"):r.$menu.parent().length&&g.update.call(r.$trigger,r)}},inputClick:function(t){t.stopImmediatePropagation()},hideMenu:function(e,i){var n=t(this).data("contextMenuRoot");g.hide.call(n.$trigger,n,i&&i.force)},focusItem:function(e){e.stopPropagation();var i=t(this),n=i.data(),o=n.contextMenu,a=n.contextMenuRoot;i.hasClass(a.classNames.disabled)||i.hasClass(a.classNames.notSelectable)||(i.addClass([a.classNames.hover,a.classNames.visible].join(" ")).parent().find(".context-menu-item").not(i).removeClass(a.classNames.visible).filter("."+a.classNames.hover).trigger("contextmenu:blur"),o.$selected=a.$selected=i,o.$node&&a.positionSubmenu.call(o.$node,o.$menu))},blurItem:function(e){e.stopPropagation();var i=t(this),n=i.data(),o=n.contextMenu,a=n.contextMenuRoot;o.autoHide&&i.removeClass(a.classNames.visible),i.removeClass(a.classNames.hover),o.$selected=null}},g={show:function(e,i,n){var o=t(this),r={};if(t("#context-menu-layer").trigger("mousedown"),e.$trigger=o,!1!==e.events.show.call(o,e)){if(g.update.call(o,e),e.position.call(o,e,i,n),e.zIndex){var s=e.zIndex;"function"==typeof e.zIndex&&(s=e.zIndex.call(o,e)),r.zIndex=f(o)+s}g.layer.call(e.$menu,e,r.zIndex),e.$menu.find("ul").css("zIndex",r.zIndex+1),e.$menu.css(r)[e.animation.show](e.animation.duration,function(){o.trigger("contextmenu:visible")}),o.data("contextMenu",e).addClass("context-menu-active"),t(document).off("keydown.contextMenu").on("keydown.contextMenu",m.key),e.autoHide&&t(document).on("mousemove.contextMenuAutoHide",function(t){var i=o.offset();i.right=i.left+o.outerWidth(),i.bottom=i.top+o.outerHeight(),!e.$layer||e.hovering||t.pageX>=i.left&&t.pageX<=i.right&&t.pageY>=i.top&&t.pageY<=i.bottom||setTimeout(function(){e.hovering||null==e.$menu||e.$menu.trigger("contextmenu:hide")},50)})}else a=null},hide:function(e,i){var n=t(this);if(e||(e=n.data("contextMenu")||{}),i||!e.events||!1!==e.events.hide.call(n,e)){if(n.removeData("contextMenu").removeClass("context-menu-active"),e.$layer){setTimeout((o=e.$layer,function(){o.remove()}),10);try{delete e.$layer}catch(r){e.$layer=null}}var o;a=null,e.$menu.find("."+e.classNames.hover).trigger("contextmenu:blur"),e.$selected=null,e.$menu.find("."+e.classNames.visible).removeClass(e.classNames.visible),t(document).off(".contextMenuAutoHide").off("keydown.contextMenu"),e.$menu&&e.$menu[e.animation.hide](e.animation.duration,function(){e.build&&(e.$menu.remove(),t.each(e,function(t){switch(t){case"ns":case"selector":case"build":case"trigger":return!0;default:e[t]=undefined;try{delete e[t]}catch(r){}return!0}})),setTimeout(function(){n.trigger("contextmenu:hidden")},10)})}},create:function(i,n){function o(e){var i=t("<span></span>");if(e._accesskey)e._beforeAccesskey&&i.append(document.createTextNode(e._beforeAccesskey)),t("<span></span>").addClass("context-menu-accesskey").text(e._accesskey).appendTo(i),e._afterAccesskey&&i.append(document.createTextNode(e._afterAccesskey));else if(e.isHtmlName){if("undefined"!=typeof e.accesskey)throw new Error("accesskeys are not compatible with HTML names and cannot be used together in the same item");i.html(e.name)}else i.text(e.name);return i}n===undefined&&(n=i),i.$menu=t('<ul class="context-menu-list"></ul>').addClass(i.className||"").data({contextMenu:i,contextMenuRoot:n}),t.each(["callbacks","commands","inputs"],function(t,e){i[e]={},n[e]||(n[e]={})}),n.accesskeys||(n.accesskeys={}),t.each(i.items,function(a,r){var s=t('<li class="context-menu-item"></li>').addClass(r.className||""),l=null,c=null;if(s.on("click",t.noop),"string"!=typeof r&&"cm_separator"!==r.type||(r={type:"cm_seperator"}),r.$node=s.data({contextMenu:i,contextMenuRoot:n,contextMenuKey:a}),"undefined"!=typeof r.accesskey)for(var u,p=e(r.accesskey),h=0;u=p[h];h++)if(!n.accesskeys[u]){n.accesskeys[u]=r;var f=r.name.match(new RegExp("^(.*?)("+u+")(.*)$","i"));f&&(r._beforeAccesskey=f[1],r._accesskey=f[2],r._afterAccesskey=f[3]);break}if(r.type&&d[r.type])d[r.type].call(s,r,i,n),t.each([i,n],function(e,n){n.commands[a]=r,!t.isFunction(r.callback)||n.callbacks[a]!==undefined&&i.type!==undefined||(n.callbacks[a]=r.callback)});else{switch("cm_seperator"===r.type?s.addClass("context-menu-separator "+n.classNames.notSelectable):"html"===r.type?s.addClass("context-menu-html "+n.classNames.notSelectable):"sub"===r.type||(r.type?(l=t("<label></label>").appendTo(s),o(r).appendTo(l),s.addClass("context-menu-input"),i.hasTypes=!0,t.each([i,n],function(t,e){e.commands[a]=r,e.inputs[a]=r})):r.items&&(r.type="sub")),r.type){case"cm_seperator":break;case"text":c=t('<input type="text" value="1" name="" />').attr("name","context-menu-input-"+a).val(r.value||"").appendTo(l);break;case"textarea":c=t('<textarea name=""></textarea>').attr("name","context-menu-input-"+a).val(r.value||"").appendTo(l),r.height&&c.height(r.height);break;case"checkbox":c=t('<input type="checkbox" value="1" name="" />').attr("name","context-menu-input-"+a).val(r.value||"").prop("checked",!!r.selected).prependTo(l);break;case"radio":c=t('<input type="radio" value="1" name="" />').attr("name","context-menu-input-"+r.radio).val(r.value||"").prop("checked",!!r.selected).prependTo(l);break;case"select":c=t('<select name=""></select>').attr("name","context-menu-input-"+a).appendTo(l),r.options&&(t.each(r.options,function(e,i){t("<option></option>").val(e).text(i).appendTo(c)}),c.val(r.selected));break;case"sub":o(r).appendTo(s),r.appendTo=r.$node,s.data("contextMenu",r).addClass("context-menu-submenu"),r.callback=null,"function"==typeof r.items.then?g.processPromises(r,n,r.items):g.create(r,n);break;case"html":t(r.html).appendTo(s);break;default:t.each([i,n],function(e,n){n.commands[a]=r,!t.isFunction(r.callback)||n.callbacks[a]!==undefined&&i.type!==undefined||(n.callbacks[a]=r.callback)}),o(r).appendTo(s)}r.type&&"sub"!==r.type&&"html"!==r.type&&"cm_seperator"!==r.type&&(c.on("focus",m.focusInput).on("blur",m.blurInput),r.events&&c.on(r.events,i)),r.icon&&(t.isFunction(r.icon)?r._icon=r.icon.call(this,this,s,a,r):"string"==typeof r.icon&&"fa-"===r.icon.substring(0,3)?r._icon=n.classNames.icon+" "+n.classNames.icon+"--fa fa "+r.icon:r._icon=n.classNames.icon+" "+n.classNames.icon+"-"+r.icon,s.addClass(r._icon))}r.$input=c,r.$label=l,s.appendTo(i.$menu),!i.hasTypes&&t.support.eventSelectstart&&s.on("selectstart.disableTextSelect",m.abortevent)}),i.$node||i.$menu.css("display","none").addClass("context-menu-root"),i.$menu.appendTo(i.appendTo||document.body)},resize:function(e,i){var n;e.css({position:"absolute",display:"block"}),e.data("width",(n=e.get(0)).getBoundingClientRect?Math.ceil(n.getBoundingClientRect().width):e.outerWidth()+1),e.css({position:"static",minWidth:"0px",maxWidth:"100000px"}),e.find("> li > ul").each(function(){g.resize(t(this),!0)}),i||e.find("ul").addBack().css({position:"",display:"",minWidth:"",maxWidth:""}).outerWidth(function(){return t(this).data("width")})},update:function(e,i){var n=this;i===undefined&&(i=e,g.resize(e.$menu)),e.$menu.children().each(function(){var o=t(this),a=o.data("contextMenuKey"),r=e.items[a],s=t.isFunction(r.disabled)&&r.disabled.call(n,a,i)||!0===r.disabled;if(o[(t.isFunction(r.visible)?r.visible.call(n,a,i):"undefined"==typeof r.visible||!0===r.visible)?"show":"hide"](),o[s?"addClass":"removeClass"](i.classNames.disabled),t.isFunction(r.icon)&&(o.removeClass(r._icon),r._icon=r.icon.call(this,n,o,a,r),o.addClass(r._icon)),r.type)switch(o.find("input, select, textarea").prop("disabled",s),r.type){case"text":case"textarea":r.$input.val(r.value||"");break;case"checkbox":case"radio":r.$input.val(r.value||"").prop("checked",!!r.selected);break;case"select":r.$input.val(r.selected||"")}r.$menu&&g.update.call(n,r,i)})},layer:function(e,i){var n=e.$layer=t('<div id="context-menu-layer" style="position:fixed; z-index:'+i+'; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;"></div>').css({height:s.height(),width:s.width(),display:"block"}).data("contextMenuRoot",e).insertBefore(this).on("contextmenu",m.abortevent).on("mousedown",m.layerClick);return document.body.style.maxWidth===undefined&&n.css({position:"absolute",height:t(document).height()}),n},processPromises:function(t,e,i){function n(t,e,i){i===undefined&&o(undefined),a(t,e,i)}function o(t,e,i){i===undefined?(i={error:{name:"No items and no error item",icon:"context-menu-icon context-menu-icon-quit"}},window.console&&(console.error||console.log).call(console,'When you reject a promise, provide an "items" object, equal to normal sub-menu items')):"string"==typeof i&&(i={error:{name:i}}),a(t,e,i)}function a(t,e,i){e.$menu!==undefined&&e.$menu.is(":visible")&&(t.$node.removeClass(e.classNames.iconLoadingClass),t.items=i,g.create(t,e,!0),g.update(t,e),e.positionSubmenu.call(t.$node,t.$menu))}t.$node.addClass(e.classNames.iconLoadingClass),i.then(n.bind(this,t,e),o.bind(this,t,e))}};t.fn.contextMenu=function(e){var i=this,n=e;if(this.length>0)if(e===undefined)this.first().trigger("contextmenu");else if(e.x!==undefined&&e.y!==undefined)this.first().trigger(t.Event("contextmenu",{pageX:e.x,pageY:e.y,mouseButton:e.button}));else if("hide"===e){var o=this.first().data("contextMenu")?this.first().data("contextMenu").$menu:null;o&&o.trigger("contextmenu:hide")}else"destroy"===e?t.contextMenu("destroy",{context:this}):t.isPlainObject(e)?(e.context=this,t.contextMenu("create",e)):e?this.removeClass("context-menu-disabled"):e||this.addClass("context-menu-disabled");else t.each(u,function(){this.selector===i.selector&&(n.data=this,t.extend(n.data,{trigger:"demand"}))}),m.contextmenu.call(n.target,n);return this},t.contextMenu=function(e,i){"string"!=typeof e&&(i=e,e="create"),"string"==typeof i?i={selector:i}:i===undefined&&(i={});var n=t.extend(!0,{},p,i||{}),o=t(document),a=o,s=!1;switch(n.context&&n.context.length?(a=t(n.context).first(),n.context=a.get(0),s=!t(n.context).is(document)):n.context=document,e){case"create":if(!n.selector)throw new Error("No selector specified");if(n.selector.match(/.context-menu-(list|item|input)($|\s)/))throw new Error('Cannot bind to selector "'+n.selector+'" as it contains a reserved className');if(!n.build&&(!n.items||t.isEmptyObject(n.items)))throw new Error("No Items specified");if(l++,n.ns=".contextMenu"+l,s||(c[n.selector]=n.ns),u[n.ns]=n,n.trigger||(n.trigger="right"),!r){var d="click"===n.itemClickEvent?"click.contextMenu":"mouseup.contextMenu",h={"contextmenu:focus.contextMenu":m.focusItem,"contextmenu:blur.contextMenu":m.blurItem,"contextmenu.contextMenu":m.abortevent,"mouseenter.contextMenu":m.itemMouseenter,"mouseleave.contextMenu":m.itemMouseleave};h[d]=m.itemClick,o.on({"contextmenu:hide.contextMenu":m.hideMenu,"prevcommand.contextMenu":m.prevItem,"nextcommand.contextMenu":m.nextItem,"contextmenu.contextMenu":m.abortevent,"mouseenter.contextMenu":m.menuMouseenter,"mouseleave.contextMenu":m.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",m.inputClick).on(h,".context-menu-item"),r=!0}switch(a.on("contextmenu"+n.ns,n.selector,n,m.contextmenu),s&&a.on("remove"+n.ns,function(){t(this).contextMenu("destroy")}),n.trigger){case"hover":a.on("mouseenter"+n.ns,n.selector,n,m.mouseenter).on("mouseleave"+n.ns,n.selector,n,m.mouseleave);break;case"left":a.on("click"+n.ns,n.selector,n,m.click)}n.build||g.create(n);break;case"destroy":var f;if(s){var v=n.context;t.each(u,function(e,i){if(!i)return!0;if(!t(v).is(i.selector))return!0;(f=t(".context-menu-list").filter(":visible")).length&&f.data().contextMenuRoot.$trigger.is(t(i.context).find(i.selector))&&f.trigger("contextmenu:hide",{force:!0});try{u[i.ns].$menu&&u[i.ns].$menu.remove(),delete u[i.ns]}catch(n){u[i.ns]=null}return t(i.context).off(i.ns),!0})}else if(n.selector){if(c[n.selector]){(f=t(".context-menu-list").filter(":visible")).length&&f.data().contextMenuRoot.$trigger.is(n.selector)&&f.trigger("contextmenu:hide",{force:!0});try{u[c[n.selector]].$menu&&u[c[n.selector]].$menu.remove(),delete u[c[n.selector]]}catch(_){u[c[n.selector]]=null}o.off(c[n.selector])}}else o.off(".contextMenu .contextMenuAutoHide"),t.each(u,function(e,i){t(i.context).off(i.ns)}),c={},u={},l=0,r=!1,t("#context-menu-layer, .context-menu-list").remove();break;case"html5":(!t.support.htmlCommand&&!t.support.htmlMenuitem||"boolean"==typeof i&&i)&&t('menu[type="context"]').each(function(){this.id&&t.contextMenu({selector:"[contextmenu="+this.id+"]",items:t.contextMenu.fromMenu(this)})}).css("display","none");break;default:throw new Error('Unknown operation "'+e+'"')}return this},t.contextMenu.setInputValues=function(e,i){i===undefined&&(i={}),t.each(e.inputs,function(t,e){switch(e.type){case"text":case"textarea":e.value=i[t]||"";break;case"checkbox":e.selected=!!i[t];break;case"radio":e.selected=(i[e.radio]||"")===e.value;break;case"select":e.selected=i[t]||""}})},t.contextMenu.getInputValues=function(e,i){return i===undefined&&(i={}),t.each(e.inputs,function(t,e){switch(e.type){case"text":case"textarea":case"select":i[t]=e.$input.val();break;case"checkbox":i[t]=e.$input.prop("checked");break;case"radio":e.$input.prop("checked")&&(i[e.radio]=e.value)}}),i},t.contextMenu.fromMenu=function(e){var i={};return n(i,t(e).children()),i},t.contextMenu.defaults=p,t.contextMenu.types=d,t.contextMenu.handle=m,t.contextMenu.op=g,t.contextMenu.menus=u}),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.affix"),a="object"==typeof e&&e;o||n.data("bs.affix",o=new i(this,a)),"string"==typeof e&&o[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n);var o=this.options.target===i.DEFAULTS.target?t(this.options.target):t(document).find(this.options.target);this.$target=o.on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.4.1",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,n){var o=this.$target.scrollTop(),a=this.$element.offset(),r=this.$target.height();if(null!=i&&"top"==this.affixed)return o<i&&"top";if("bottom"==this.affixed)return null!=i?!(o+this.unpin<=a.top)&&"bottom":!(o+r<=t-n)&&"bottom";var s=null==this.affixed,l=s?o:a.top;return null!=i&&o<=i?"top":null!=n&&l+(s?r:e)>=t-n&&"bottom"},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),n=this.options.offset,o=n.top,a=n.bottom,r=Math.max(t(document).height(),t(document.body).height());"object"!=typeof n&&(a=o=n),"function"==typeof o&&(o=n.top(this.$element)),"function"==typeof a&&(a=n.bottom(this.$element));var s=this.getState(r,e,o,a);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),c=t.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:r-e-a})}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.alert");o||i.data("bs.alert",o=new n(this)),"string"==typeof e&&o[e].call(i)})}var i='[data-dismiss="alert"]',n=function(e){t(e).on("click",i,this.close)};n.VERSION="3.4.1",n.TRANSITION_DURATION=150,n.prototype.close=function(e){function i(){r.detach().trigger("closed.bs.alert").remove()}var o=t(this),a=o.attr("data-target");a||(a=(a=o.attr("href"))&&a.replace(/.*(?=#[^\s]*$)/,"")),a="#"===a?[]:a;var r=t(document).find(a);e&&e.preventDefault(),r.length||(r=o.closest(".alert")),r.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var o=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=o,this},t(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.button"),a="object"==typeof e&&e;o||n.data("bs.button",o=new i(this,a)),"toggle"==e?o.toggle():e&&o.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.4.1",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,o=n.is("input")?"val":"html",a=n.data();e+="Text",null==a.resetText&&n.data("resetText",n[o]()),setTimeout(t.proxy(function(){n[o](null==a[e]?this.options[e]:a[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i).prop(i,!0)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i).prop(i,!1))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target).closest(".btn");e.call(n,"toggle"),t(i.target).is('input[type="radio"], input[type="checkbox"]')||(i.preventDefault(),n.is("input,button")?n.trigger("focus"):n.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.carousel"),a=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),r="string"==typeof e?e:a.slide;o||n.data("bs.carousel",o=new i(this,a)),"number"==typeof e?o.to(e):r?o[r]():a.interval&&o.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),
"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.4.1",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e);if(("prev"==t&&0===i||"next"==t&&i==this.$items.length-1)&&!this.options.wrap)return e;var n=(i+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(n)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){if(!this.sliding)return this.slide("next")},i.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},i.prototype.slide=function(e,n){var o=this.$element.find(".item.active"),a=n||this.getItemForDirection(e,o),r=this.interval,s="next"==e?"left":"right",l=this;if(a.hasClass("active"))return this.sliding=!1;var c=a[0],u=t.Event("slide.bs.carousel",{relatedTarget:c,direction:s});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=t(this.$indicators.children()[this.getItemIndex(a)]);d&&d.addClass("active")}var p=t.Event("slid.bs.carousel",{relatedTarget:c,direction:s});return t.support.transition&&this.$element.hasClass("slide")?(a.addClass(e),"object"==typeof a&&a.length&&a[0].offsetWidth,o.addClass(s),a.addClass(s),o.one("bsTransitionEnd",function(){a.removeClass([e,s].join(" ")).addClass("active"),o.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(p)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(o.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger(p)),r&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this};var o=function(i){var n=t(this),o=n.attr("href");o&&(o=o.replace(/.*(?=#[^\s]+$)/,""));var a=n.attr("data-target")||o,r=t(document).find(a);if(r.hasClass("carousel")){var s=t.extend({},r.data(),n.data()),l=n.attr("data-slide-to");l&&(s.interval=!1),e.call(r,s),l&&r.data("bs.carousel").to(l),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),function(t){"use strict";function e(e){var i,n=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(document).find(n)}function i(e){return this.each(function(){var i=t(this),o=i.data("bs.collapse"),a=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);!o&&a.toggle&&/show|hide/.test(e)&&(a.toggle=!1),o||i.data("bs.collapse",o=new n(this,a)),"string"==typeof e&&o[e]()})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.4.1",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(e=o.data("bs.collapse"))&&e.transitioning)){var a=t.Event("show.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){o&&o.length&&(i.call(o,"hide"),e||o.data("bs.collapse",null));var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return s.call(this);var l=t.camelCase(["scroll",r].join("-"));this.$element.one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[r](this.$element[0][l])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!t.support.transition)return o.call(this);this.$element[i](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(n.TRANSITION_DURATION)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return t(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,n){var o=t(n);this.addAriaAndCollapsedClass(e(o),o)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var o=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=n,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var o=t(this);o.attr("data-target")||n.preventDefault();var a=e(o),r=a.data("bs.collapse")?"toggle":o.data();i.call(a,r)})}(jQuery),function(t){"use strict";function e(e){var i=e.attr("data-target");i||(i=(i=e.attr("href"))&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n="#"!==i?t(document).find(i):null;return n&&n.length?n:e.parent()}function i(i){i&&3===i.which||(t(o).remove(),t(a).each(function(){var n=t(this),o=e(n),a={relatedTarget:this};o.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&t.contains(o[0],i.target)||(o.trigger(i=t.Event("hide.bs.dropdown",a)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),o.removeClass("open").trigger(t.Event("hidden.bs.dropdown",a)))))}))}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new r(this)),"string"==typeof e&&n[e].call(i)})}var o=".dropdown-backdrop",a='[data-toggle="dropdown"]',r=function(e){t(e).on("click.bs.dropdown",this.toggle)};r.VERSION="3.4.1",r.prototype.toggle=function(n){var o=t(this);if(!o.is(".disabled, :disabled")){var a=e(o),r=a.hasClass("open");if(i(),!r){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var s={relatedTarget:this};if(a.trigger(n=t.Event("show.bs.dropdown",s)),n.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),a.toggleClass("open").trigger(t.Event("shown.bs.dropdown",s))}return!1}},r.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=t(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var o=e(n),r=o.hasClass("open");if(!r&&27!=i.which||r&&27==i.which)return 27==i.which&&o.find(a).trigger("focus"),n.trigger("click");var s=" li:not(.disabled):visible a",l=o.find(".dropdown-menu"+s);if(l.length){var c=l.index(i.target);38==i.which&&c>0&&c--,40==i.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var s=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",a,r.prototype.toggle).on("keydown.bs.dropdown.data-api",a,r.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",r.prototype.keydown)}(jQuery),function(t){"use strict";function e(e,n){return this.each(function(){var o=t(this),a=o.data("bs.modal"),r=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e);a||o.data("bs.modal",a=new i(this,r)),"string"==typeof e?a[e](n):r.show&&a.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom",this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.4.1",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var n=this,o=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),o&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var a=t.Event("shown.bs.modal",{relatedTarget:e});o?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(a)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(a)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var n=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=t.support.transition&&o;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),a&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;a?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):r()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";var i=this.scrollbarWidth;this.bodyIsOverflowing&&(this.$body.css("padding-right",e+i),t(this.fixedContent).each(function(e,n){var o=n.style.paddingRight,a=t(n).css("padding-right");t(n).data("padding-right",o).css("padding-right",parseFloat(a)+i+"px")}))},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad),t(this.fixedContent).each(function(e,i){var n=t(i).data("padding-right");t(i).removeData("padding-right"),i.style.paddingRight=n||""})},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),o=n.attr("href"),a=n.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,""),r=t(document).find(a),s=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},r.data(),n.data());n.is("a")&&i.preventDefault(),r.one("show.bs.modal",function(t){t.isDefaultPrevented()||r.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(r,s,this)})}(jQuery),function(t){"use strict";function e(i,n){this.$body=t(document.body),this.$scrollElement=t(i).is(document.body)?t(window):t(i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),o=n.data("bs.scrollspy"),a="object"==typeof i&&i;o||n.data("bs.scrollspy",o=new e(this,a)),"string"==typeof i&&o[i]()})}e.VERSION="3.4.1",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),o=e.data("target")||e.attr("href"),a=/^#./.test(o)&&t(o);return a&&a.length&&a.is(":visible")&&[[a[i]().top+n,o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),o=this.offsets,a=this.targets,r=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return r!=(t=a[a.length-1])&&this.activate(t);if(r&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)r!=a[t]&&e>=o[t]&&(o[t+1]===undefined||e<o[t+1])&&this.activate(a[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.tab");o||n.data("bs.tab",o=new i(this)),"string"==typeof e&&o[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.4.1",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=i.find(".active:last a"),a=t.Event("hide.bs.tab",{relatedTarget:e[0]}),r=t.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(a),e.trigger(r),!r.isDefaultPrevented()&&!a.isDefaultPrevented()){var s=t(document).find(n);this.activate(e.closest("li"),i),this.activate(s,s.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},i.prototype.activate=function(e,n,o){function a(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var r=n.find("> .active"),s=o&&t.support.transition&&(r.length&&r.hasClass("fade")||!!n.find("> .fade").length);r.length&&s?r.one("bsTransitionEnd",a).emulateTransitionEnd(i.TRANSITION_DURATION):a(),r.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var o=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(t.style[i]!==undefined)return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;return t(this).one("bsTransitionEnd",function(){i=!0}),setTimeout(function(){i||t(n).trigger(t.support.transition.end)},e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(t){"use strict";function e(e,i){var n=e.nodeName.toLowerCase();if(-1!==t.inArray(n,i))return-1===t.inArray(n,a)||Boolean(e.nodeValue.match(s)||e.nodeValue.match(l));for(var o=t(i).filter(function(t,e){return e instanceof RegExp}),r=0,c=o.length;r<c;r++)if(n.match(o[r]))return!0;return!1}function i(i,n,o){if(0===i.length)return i;if(o&&"function"==typeof o)return o(i);if(!document.implementation||!document.implementation.createHTMLDocument)return i;var a=document.implementation.createHTMLDocument("sanitization");a.body.innerHTML=i;for(var r=t.map(n,function(t,e){return e}),s=t(a.body).find("*"),l=0,c=s.length;l<c;l++){var u=s[l],d=u.nodeName.toLowerCase();if(-1!==t.inArray(d,r))for(var p=t.map(u.attributes,function(t){return t}),h=[].concat(n["*"]||[],n[d]||[]),f=0,m=p.length;f<m;f++)e(p[f],h)||u.removeAttribute(p[f].nodeName);else u.parentNode.removeChild(u)}return a.body.innerHTML}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.tooltip"),o="object"==typeof e&&e;!n&&/destroy|hide/.test(e)||(n||i.data("bs.tooltip",n=new c(this,o)),"string"==typeof e&&n[e]())})}var o=["sanitize","whiteList","sanitizeFn"],a=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],r={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},s=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,l=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i,c=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};c.VERSION="3.4.1",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},sanitize:!0,sanitizeFn:null,whiteList:r},c.prototype.init=function(e,i,n){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(document).find(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),a=o.length;a--;){var r=o[a];if("click"==r)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=r){var s="hover"==r?"mouseenter":"focusin",l="hover"==r?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(e){var n=this.$element.data();for(var a in n)n.hasOwnProperty(a)&&-1!==t.inArray(a,o)&&delete n[a];return(e=t.extend({},this.getDefaults(),n,e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e.sanitize&&(e.template=i(e.template,e.whiteList,e.sanitizeFn)),e},c.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},c.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState)i.hoverState="in";else{if(clearTimeout(i.timeout),i.hoverState="in",!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)}},c.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},c.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),!i.isInStateTrue()){if(clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)}},c.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var n=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,l=s.test(r);l&&(r=r.replace(s,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?o.appendTo(t(document).find(this.options.container)):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),d=o[0].offsetWidth,p=o[0].offsetHeight;if(l){var h=r,f=this.getPosition(this.$viewport);r="bottom"==r&&u.bottom+p>f.bottom?"top":"top"==r&&u.top-p<f.top?"bottom":"right"==r&&u.right+d>f.width?"left":"left"==r&&u.left-d<f.left?"right":r,o.removeClass(h).addClass(r)}var m=this.getCalculatedOffset(r,u,d,p);this.applyPlacement(m,r);var g=function(){var t=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==t&&n.leave(n)};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",g).emulateTransitionEnd(c.TRANSITION_DURATION):g()}},c.prototype.applyPlacement=function(e,i){var n=this.tip(),o=n[0].offsetWidth,a=n[0].offsetHeight,r=parseInt(n.css("margin-top"),10),s=parseInt(n.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(s)&&(s=0),e.top+=r,e.left+=s,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=a&&(e.top=e.top+a-c);var u=this.getViewportAdjustedDelta(i,e,l,c);u.left?e.left+=u.left:e.top+=u.top;var d=/top|bottom/.test(i),p=d?2*u.left-o+l:2*u.top-a+c,h=d?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(p,n[0][h],d)},c.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},c.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();this.options.html?(this.options.sanitize&&(e=i(e,this.options.whiteList,this.options.sanitizeFn)),t.find(".tooltip-inner").html(e)):t.find(".tooltip-inner").text(e),t.removeClass("fade in top bottom left right")},c.prototype.hide=function(e){function i(){"in"!=n.hoverState&&o.detach(),n.$element&&n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type),e&&e()}var n=this,o=t(this.$tip),a=t.Event("hide.bs."+this.type);if(this.$element.trigger(a),!a.isDefaultPrevented())return o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",i).emulateTransitionEnd(c.TRANSITION_DURATION):i(),this.hoverState=null,this},c.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(e){var i=(e=e||this.$element)[0],n="BODY"==i.tagName,o=i.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var a=window.SVGElement&&i instanceof window.SVGElement,r=n?{top:0,left:0}:a?null:e.offset(),s={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},l=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,s,l,r)},c.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},c.prototype.getViewportAdjustedDelta=function(t,e,i,n){var o={top:0,left:0};if(!this.$viewport)return o;var a=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-a-r.scroll,l=e.top+a-r.scroll+n;s<r.top?o.top=r.top-s:l>r.top+r.height&&(o.top=r.top+r.height-l)}else{var c=e.left-a,u=e.left+a+i;c<r.left?o.left=r.left-c:u>r.right&&(o.left=r.left+r.width-u)}return o},c.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},c.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(e){var i=this;e&&((i=t(e.currentTarget).data("bs."+this.type))||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},c.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})},c.prototype.sanitizeHtml=function(t){return i(t,this.options.whiteList,this.options.sanitizeFn)};var u=t.fn.tooltip;t.fn.tooltip=n,t.fn.tooltip.Constructor=c,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=u,this}}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.popover"),a="object"==typeof e&&e;!o&&/destroy|hide/.test(e)||(o||n.data("bs.popover",o=new i(this,a)),"string"==typeof e&&o[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.4.1",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();if(this.options.html){var n=typeof i;this.options.sanitize&&(e=this.sanitizeHtml(e),"string"===n&&(i=this.sanitizeHtml(i))),t.find(".popover-title").html(e),t.find(".popover-content").children().detach().end()["string"===n?"html":"append"](i)}else t.find(".popover-title").text(e),t.find(".popover-content").children().detach().end().text(i);t.removeClass("fade top bottom left right in"),
t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),
/* ========================================================================
 * bootstrap-switch - v3.3.2
 * http://www.bootstrap-switch.org
 * ========================================================================
 * Copyright 2012-2013 Mattia Larentis
 *
 * ========================================================================
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================================
 */
function(){var t=[].slice;!function(e,i){"use strict";var n;n=function(){function t(t,i){var n;null==i&&(i={}),this.$element=e(t),this.options=e.extend({},e.fn.bootstrapSwitch.defaults,{state:this.$element.is(":checked"),size:this.$element.data("size"),animate:this.$element.data("animate"),disabled:this.$element.is(":disabled"),readonly:this.$element.is("[readonly]"),indeterminate:this.$element.data("indeterminate"),inverse:this.$element.data("inverse"),radioAllOff:this.$element.data("radio-all-off"),onColor:this.$element.data("on-color"),offColor:this.$element.data("off-color"),onText:this.$element.data("on-text"),offText:this.$element.data("off-text"),labelText:this.$element.data("label-text"),handleWidth:this.$element.data("handle-width"),labelWidth:this.$element.data("label-width"),baseClass:this.$element.data("base-class"),wrapperClass:this.$element.data("wrapper-class")},i),this.$wrapper=e("<div>",{"class":(n=this,function(){var t;return(t=[""+n.options.baseClass].concat(n._getClasses(n.options.wrapperClass))).push(n.options.state?n.options.baseClass+"-on":n.options.baseClass+"-off"),null!=n.options.size&&t.push(n.options.baseClass+"-"+n.options.size),n.options.disabled&&t.push(n.options.baseClass+"-disabled"),n.options.readonly&&t.push(n.options.baseClass+"-readonly"),n.options.indeterminate&&t.push(n.options.baseClass+"-indeterminate"),n.options.inverse&&t.push(n.options.baseClass+"-inverse"),n.$element.attr("id")&&t.push(n.options.baseClass+"-id-"+n.$element.attr("id")),t.join(" ")})()}),this.$container=e("<div>",{"class":this.options.baseClass+"-container"}),this.$on=e("<span>",{html:this.options.onText,"class":this.options.baseClass+"-handle-on "+this.options.baseClass+"-"+this.options.onColor}),this.$off=e("<span>",{html:this.options.offText,"class":this.options.baseClass+"-handle-off "+this.options.baseClass+"-"+this.options.offColor}),this.$label=e("<span>",{html:this.options.labelText,"class":this.options.baseClass+"-label"}),this.$element.on("init.bootstrapSwitch",function(e){return function(){return e.options.onInit.apply(t,arguments)}}(this)),this.$element.on("switchChange.bootstrapSwitch",function(e){return function(){return e.options.onSwitchChange.apply(t,arguments)}}(this)),this.$container=this.$element.wrap(this.$container).parent(),this.$wrapper=this.$container.wrap(this.$wrapper).parent(),this.$element.before(this.options.inverse?this.$off:this.$on).before(this.$label).before(this.options.inverse?this.$on:this.$off),this.options.indeterminate&&this.$element.prop("indeterminate",!0),this._init(),this._elementHandlers(),this._handleHandlers(),this._labelHandlers(),this._formHandler(),this._externalLabelHandler(),this.$element.trigger("init.bootstrapSwitch")}return t.prototype._constructor=t,t.prototype.state=function(t,e){return void 0===t?this.options.state:this.options.disabled||this.options.readonly?this.$element:this.options.state&&!this.options.radioAllOff&&this.$element.is(":radio")?this.$element:(this.options.indeterminate&&this.indeterminate(!1),t=!!t,this.$element.prop("checked",t).trigger("change.bootstrapSwitch",e),this.$element)},t.prototype.toggleState=function(t){return this.options.disabled||this.options.readonly?this.$element:this.options.indeterminate?(this.indeterminate(!1),this.state(!0)):this.$element.prop("checked",!this.options.state).trigger("change.bootstrapSwitch",t)},t.prototype.size=function(t){return void 0===t?this.options.size:(null!=this.options.size&&this.$wrapper.removeClass(this.options.baseClass+"-"+this.options.size),t&&this.$wrapper.addClass(this.options.baseClass+"-"+t),this._width(),this._containerPosition(),this.options.size=t,this.$element)},t.prototype.animate=function(t){return void 0===t?this.options.animate:(t=!!t)===this.options.animate?this.$element:this.toggleAnimate()},t.prototype.toggleAnimate=function(){return this.options.animate=!this.options.animate,this.$wrapper.toggleClass(this.options.baseClass+"-animate"),this.$element},t.prototype.disabled=function(t){return void 0===t?this.options.disabled:(t=!!t)===this.options.disabled?this.$element:this.toggleDisabled()},t.prototype.toggleDisabled=function(){return this.options.disabled=!this.options.disabled,this.$element.prop("disabled",this.options.disabled),this.$wrapper.toggleClass(this.options.baseClass+"-disabled"),this.$element},t.prototype.readonly=function(t){return void 0===t?this.options.readonly:(t=!!t)===this.options.readonly?this.$element:this.toggleReadonly()},t.prototype.toggleReadonly=function(){return this.options.readonly=!this.options.readonly,this.$element.prop("readonly",this.options.readonly),this.$wrapper.toggleClass(this.options.baseClass+"-readonly"),this.$element},t.prototype.indeterminate=function(t){return void 0===t?this.options.indeterminate:(t=!!t)===this.options.indeterminate?this.$element:this.toggleIndeterminate()},t.prototype.toggleIndeterminate=function(){return this.options.indeterminate=!this.options.indeterminate,this.$element.prop("indeterminate",this.options.indeterminate),this.$wrapper.toggleClass(this.options.baseClass+"-indeterminate"),this._containerPosition(),this.$element},t.prototype.inverse=function(t){return void 0===t?this.options.inverse:(t=!!t)===this.options.inverse?this.$element:this.toggleInverse()},t.prototype.toggleInverse=function(){var t,e;return this.$wrapper.toggleClass(this.options.baseClass+"-inverse"),e=this.$on.clone(!0),t=this.$off.clone(!0),this.$on.replaceWith(t),this.$off.replaceWith(e),this.$on=t,this.$off=e,this.options.inverse=!this.options.inverse,this.$element},t.prototype.onColor=function(t){var e;return e=this.options.onColor,void 0===t?e:(null!=e&&this.$on.removeClass(this.options.baseClass+"-"+e),this.$on.addClass(this.options.baseClass+"-"+t),this.options.onColor=t,this.$element)},t.prototype.offColor=function(t){var e;return e=this.options.offColor,void 0===t?e:(null!=e&&this.$off.removeClass(this.options.baseClass+"-"+e),this.$off.addClass(this.options.baseClass+"-"+t),this.options.offColor=t,this.$element)},t.prototype.onText=function(t){return void 0===t?this.options.onText:(this.$on.html(t),this._width(),this._containerPosition(),this.options.onText=t,this.$element)},t.prototype.offText=function(t){return void 0===t?this.options.offText:(this.$off.html(t),this._width(),this._containerPosition(),this.options.offText=t,this.$element)},t.prototype.labelText=function(t){return void 0===t?this.options.labelText:(this.$label.html(t),this._width(),this.options.labelText=t,this.$element)},t.prototype.handleWidth=function(t){return void 0===t?this.options.handleWidth:(this.options.handleWidth=t,this._width(),this._containerPosition(),this.$element)},t.prototype.labelWidth=function(t){return void 0===t?this.options.labelWidth:(this.options.labelWidth=t,this._width(),this._containerPosition(),this.$element)},t.prototype.baseClass=function(){return this.options.baseClass},t.prototype.wrapperClass=function(t){return void 0===t?this.options.wrapperClass:(t||(t=e.fn.bootstrapSwitch.defaults.wrapperClass),this.$wrapper.removeClass(this._getClasses(this.options.wrapperClass).join(" ")),this.$wrapper.addClass(this._getClasses(t).join(" ")),this.options.wrapperClass=t,this.$element)},t.prototype.radioAllOff=function(t){return void 0===t?this.options.radioAllOff:(t=!!t)===this.options.radioAllOff?this.$element:(this.options.radioAllOff=t,this.$element)},t.prototype.onInit=function(t){return void 0===t?this.options.onInit:(t||(t=e.fn.bootstrapSwitch.defaults.onInit),this.options.onInit=t,this.$element)},t.prototype.onSwitchChange=function(t){return void 0===t?this.options.onSwitchChange:(t||(t=e.fn.bootstrapSwitch.defaults.onSwitchChange),this.options.onSwitchChange=t,this.$element)},t.prototype.destroy=function(){var t;return(t=this.$element.closest("form")).length&&t.off("reset.bootstrapSwitch").removeData("bootstrap-switch"),this.$container.children().not(this.$element).remove(),this.$element.unwrap().unwrap().off(".bootstrapSwitch").removeData("bootstrap-switch"),this.$element},t.prototype._width=function(){var t,e,i;return(t=this.$on.add(this.$off)).add(this.$label).css("width",""),e="auto"===this.options.handleWidth?Math.max(this.$on.width(),this.$off.width()):this.options.handleWidth,t.width(e),this.$label.width((i=this,function(t,n){return"auto"!==i.options.labelWidth?i.options.labelWidth:n<e?e:n})),this._handleWidth=this.$on.outerWidth(),this._labelWidth=this.$label.outerWidth(),this.$container.width(2*this._handleWidth+this._labelWidth),this.$wrapper.width(this._handleWidth+this._labelWidth)},t.prototype._containerPosition=function(t,e){var i;if(null==t&&(t=this.options.state),this.$container.css("margin-left",(i=this,function(){var e;return e=[0,"-"+i._handleWidth+"px"],i.options.indeterminate?"-"+i._handleWidth/2+"px":t?i.options.inverse?e[1]:e[0]:i.options.inverse?e[0]:e[1]})),e)return setTimeout(function(){return e()},50)},t.prototype._init=function(){var t,e,n;return n=this,t=function(){return n._width(),n._containerPosition(null,function(){if(n.options.animate)return n.$wrapper.addClass(n.options.baseClass+"-animate")})},this.$wrapper.is(":visible")?t():e=i.setInterval(function(n){return function(){if(n.$wrapper.is(":visible"))return t(),i.clearInterval(e)}}(this),50)},t.prototype._elementHandlers=function(){return this.$element.on({"change.bootstrapSwitch":(t=this,function(i,n){var o;if(i.preventDefault(),i.stopImmediatePropagation(),o=t.$element.is(":checked"),t._containerPosition(o),o!==t.options.state)return t.options.state=o,t.$wrapper.toggleClass(t.options.baseClass+"-off").toggleClass(t.options.baseClass+"-on"),n?void 0:(t.$element.is(":radio")&&e("[name='"+t.$element.attr("name")+"']").not(t.$element).prop("checked",!1).trigger("change.bootstrapSwitch",!0),t.$element.trigger("switchChange.bootstrapSwitch",[o]))}),"focus.bootstrapSwitch":function(t){return function(e){return e.preventDefault(),t.$wrapper.addClass(t.options.baseClass+"-focused")}}(this),"blur.bootstrapSwitch":function(t){return function(e){return e.preventDefault(),t.$wrapper.removeClass(t.options.baseClass+"-focused")}}(this),"keydown.bootstrapSwitch":function(t){return function(e){if(e.which&&!t.options.disabled&&!t.options.readonly)switch(e.which){case 37:return e.preventDefault(),e.stopImmediatePropagation(),t.state(!1);case 39:return e.preventDefault(),e.stopImmediatePropagation(),t.state(!0)}}}(this)});var t},t.prototype._handleHandlers=function(){var t;return this.$on.on("click.bootstrapSwitch",(t=this,function(e){return e.preventDefault(),e.stopPropagation(),t.state(!1),t.$element.trigger("focus.bootstrapSwitch")})),this.$off.on("click.bootstrapSwitch",function(t){return function(e){return e.preventDefault(),e.stopPropagation(),t.state(!0),t.$element.trigger("focus.bootstrapSwitch")}}(this))},t.prototype._labelHandlers=function(){return this.$label.on({"mousedown.bootstrapSwitch touchstart.bootstrapSwitch":(t=this,function(e){if(!(t._dragStart||t.options.disabled||t.options.readonly))return e.preventDefault(),e.stopPropagation(),t._dragStart=(e.pageX||e.originalEvent.touches[0].pageX)-parseInt(t.$container.css("margin-left"),10),t.options.animate&&t.$wrapper.removeClass(t.options.baseClass+"-animate"),t.$element.trigger("focus.bootstrapSwitch")}),"mousemove.bootstrapSwitch touchmove.bootstrapSwitch":function(t){return function(e){var i;if(null!=t._dragStart&&(e.preventDefault(),!((i=(e.pageX||e.originalEvent.touches[0].pageX)-t._dragStart)<-t._handleWidth||i>0)))return t._dragEnd=i,t.$container.css("margin-left",t._dragEnd+"px")}}(this),"mouseup.bootstrapSwitch touchend.bootstrapSwitch":function(t){return function(e){var i;if(t._dragStart)return e.preventDefault(),t.options.animate&&t.$wrapper.addClass(t.options.baseClass+"-animate"),t._dragEnd?(i=t._dragEnd>-t._handleWidth/2,t._dragEnd=!1,t.state(t.options.inverse?!i:i)):t.state(!t.options.state),t._dragStart=!1}}(this),"mouseleave.bootstrapSwitch":function(t){return function(){return t.$label.trigger("mouseup.bootstrapSwitch")}}(this)});var t},t.prototype._externalLabelHandler=function(){var t,e;return(t=this.$element.closest("label")).on("click",(e=this,function(i){if(i.preventDefault(),i.stopImmediatePropagation(),i.target===t[0])return e.toggleState()}))},t.prototype._formHandler=function(){var t;if(!(t=this.$element.closest("form")).data("bootstrap-switch"))return t.on("reset.bootstrapSwitch",function(){return i.setTimeout(function(){return t.find("input").filter(function(){return e(this).data("bootstrap-switch")}).each(function(){return e(this).bootstrapSwitch("state",this.checked)})},1)}).data("bootstrap-switch",!0)},t.prototype._getClasses=function(t){var i,n,o,a;if(!e.isArray(t))return[this.options.baseClass+"-"+t];for(n=[],o=0,a=t.length;o<a;o++)i=t[o],n.push(this.options.baseClass+"-"+i);return n},t}(),e.fn.bootstrapSwitch=function(){var i,o,a;return o=arguments[0],i=2<=arguments.length?t.call(arguments,1):[],a=this,this.each(function(){var t,r;if((r=(t=e(this)).data("bootstrap-switch"))||t.data("bootstrap-switch",r=new n(this,o)),"string"==typeof o)return a=r[o].apply(r,i)}),a},e.fn.bootstrapSwitch.Constructor=n,e.fn.bootstrapSwitch.defaults={state:!0,size:"small",animate:!0,disabled:!1,readonly:!1,indeterminate:!1,inverse:!1,radioAllOff:!1,onColor:"primary",offColor:"default",onText:"Sim",offText:"N\xe3o",labelText:"&nbsp;",handleWidth:"auto",labelWidth:"auto",baseClass:"bootstrap-switch",wrapperClass:"wrapper",onInit:function(){},onSwitchChange:function(){}}}(window.jQuery,window)}.call(this),
/*!
 * jQuery UI Core 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(e,n){var o,a,r,s=e.nodeName.toLowerCase();return"area"===s?(a=(o=e.parentNode).name,!(!e.href||!a||"map"!==o.nodeName.toLowerCase())&&(!!(r=t("img[usemap='#"+a+"']")[0])&&i(r))):(/^(input|select|textarea|button|object)$/.test(s)?!e.disabled:"a"===s&&e.href||n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var n,o,a,r;t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(e){var i=this.css("position"),n="absolute"===i,o=e?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var e=t(this);return(!n||"static"!==e.css("position"))&&o.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&a.length?a:t(this[0].ownerDocument||document)},uniqueId:(n=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(i){return e(i,!isNaN(t.attr(i,"tabindex")))},tabbable:function(i){var n=t.attr(i,"tabindex"),o=isNaN(n);return(o||n>=0)&&e(i,!o)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,i){function n(e,i,n,a){return t.each(o,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),a&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var o="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return e===undefined?r["inner"+i].call(this):this.each(function(){t(this).css(a,n(this,e)+"px")})},t.fn["outer"+i]=function(e,o){return"number"!=typeof e?r["outer"+i].call(this,e):this.each(function(){t(this).css(a,n(this,e,!0,o)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=(o=t.fn.removeData,function(e){return arguments.length?o.call(this,t.camelCase(e)):o.call(this)})),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:(r=t.fn.focus,function(e,i){return"number"==typeof e?this.each(function(){var n=this;setTimeout(function(){t(n).focus(),i&&i.call(n)},e)}):r.apply(this,arguments)}),disableSelection:(a="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.bind(a+".ui-disableSelection",function(t){t.preventDefault()})}),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(e!==undefined)return this.css("zIndex",e);if(this.length)for(var i,n,o=t(this[0]);o.length&&o[0]!==document;){if(("absolute"===(i=o.css("position"))||"relative"===i||"fixed"===i)&&(n=parseInt(o.css("zIndex"),10),!isNaN(n)&&0!==n))return n;o=o.parent()}return 0}}),t.ui.plugin={add:function(e,i,n){var o,a=t.ui[e].prototype;for(o in n)a.plugins[o]=a.plugins[o]||[],a.plugins[o].push([i,n[o]])},call:function(t,e,i,n){var o,a=t.plugins[e];if(a&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(o=0;o<a.length;o++)t.options[a[o][0]]&&a[o][1].apply(t.element,i)}}}),
/*!
 * jQuery UI Datepicker 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/datepicker/
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","./core"],t):t(jQuery)}(function(t){function e(t){for(var e,i;t.length&&t[0]!==document;){if(("absolute"===(e=t.css("position"))||"relative"===e||"fixed"===e)&&(i=parseInt(t.css("zIndex"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=n(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",o)}function o(){t.datepicker._isDisabledDatepicker(r.inline?r.dpDiv.parent()[0]:r.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function a(e,i){for(var n in t.extend(e,i),i)null==i[n]&&(e[n]=i[n]);return e}var r;return t.extend(t.ui,{datepicker:{version:"1.11.4"}}),t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return a(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var n,o,a;o="div"===(n=e.nodeName.toLowerCase())||"span"===n,e.id||(this.uuid+=1,e.id="dp"+this.uuid),(a=this._newInst(t(e),o)).settings=t.extend({},i||{}),"input"===n?this._connectDatepicker(e,a):o&&this._inlineDatepicker(e,a)},_newInst:function(e,i){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var n=t(e);i.append=t([]),i.trigger=t([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,"datepicker",i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var n,o,a,r=this._get(i,"appendText"),s=this._get(i,"isRTL");i.append&&i.append.remove(),r&&(i.append=t("<span class='"+this._appendClass+"'>"+r+"</span>"),e[s?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),"focus"!==(n=this._get(i,"showOn"))&&"both"!==n||e.focus(this._showDatepicker),"button"!==n&&"both"!==n||(o=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:a,alt:o,title:o}):t("<button type='button'></button>").addClass(this._triggerClass).html(a?t("<img/>").attr({src:a,alt:o,title:o}):o)),e[s?"before":"after"](i.trigger),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,n,o,a=new Date(2009,11,20),r=this._get(t,"dateFormat");r.match(/[DM]/)&&(e=function(t){for(i=0,n=0,o=0;o<t.length;o++)t[o].length>i&&(i=t[o].length,n=o);return n},a.setMonth(e(this._get(t,r.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(e(this._get(t,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),t.input.attr("size",this._formatDate(t,a).length)}},_inlineDatepicker:function(e,i){var n=t(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),t.data(e,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,n,o,r){var s,l,c,u,d,p=this._dialogInst;return p||(this.uuid+=1,s="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+s+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),(p=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},t.data(this._dialogInput[0],"datepicker",p)),a(p.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(l=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+u,c/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",p),this},_destroyDatepicker:function(e){var i,n=t(e),o=t.data(e,"datepicker");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===i?(o.append.remove(),o.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==i&&"span"!==i||n.removeClass(this.markerClassName).empty(),r===o&&(r=null))},_enableDatepicker:function(e){var i,n,o=t(e),a=t.data(e,"datepicker");o.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==i&&"span"!==i||((n=o.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,n,o=t(e),a=t.data(e,"datepicker");o.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==i&&"span"!==i||((n=o.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,i,n){var o,r,s,l,c=this._getInst(e);if(2===arguments.length&&"string"==typeof i)return"defaults"===i?t.extend({},t.datepicker._defaults):c?"all"===i?t.extend({},c.settings):this._get(c,i):null;o=i||{},"string"==typeof i&&((o={})[i]=n),c&&(this._curInst===c&&this._hideDatepicker(),r=this._getDateDatepicker(e,!0),s=this._getMinMaxDate(c,"min"),l=this._getMinMaxDate(c,"max"),a(c.settings,o),null!==s&&o.dateFormat!==undefined&&o.minDate===undefined&&(c.settings.minDate=this._formatDate(c,s)),null!==l&&o.dateFormat!==undefined&&o.maxDate===undefined&&(c.settings.maxDate=this._formatDate(c,l)),"disabled"in o&&(o.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),c),this._autoSize(c),this._setDate(c,r),this._updateAlternate(c),this._updateDatepicker(c))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,n,o,a=t.datepicker._getInst(e.target),r=!0,s=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),r=!1;break;case 13:return(o=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",a.dpDiv))[0]&&t.datepicker._selectDay(e.target,a.selectedMonth,a.selectedYear,o[0]),(i=t.datepicker._get(a,"onSelect"))?(n=t.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[n,a])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(a,"stepBigMonths"):-t.datepicker._get(a,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(a,"stepBigMonths"):+t.datepicker._get(a,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),r=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),r=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,s?1:-1,"D"),r=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(a,"stepBigMonths"):-t.datepicker._get(a,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),r=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,s?-1:1,"D"),r=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(a,"stepBigMonths"):+t.datepicker._get(a,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),r=e.ctrlKey||e.metaKey;break;default:r=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):r=!1;r&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,n,o=t.datepicker._getInst(e.target);if(t.datepicker._get(o,"constrainInput"))return i=t.datepicker._possibleChars(t.datepicker._get(o,"dateFormat")),n=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||n<" "||!i||i.indexOf(n)>-1},_doKeyUp:function(e){var i=t.datepicker._getInst(e.target);if(i.input.val()!==i.lastVal)try{t.datepicker.parseDate(t.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,t.datepicker._getFormatConfig(i))&&(t.datepicker._setDateFromField(i),t.datepicker._updateAlternate(i),t.datepicker._updateDatepicker(i))}catch(n){}return!0},_showDatepicker:function(i){var n,o,r,s,l,c,u;("input"!==(i=i.target||i).nodeName.toLowerCase()&&(i=t("input",i.parentNode)[0]),t.datepicker._isDisabledDatepicker(i)||t.datepicker._lastInput===i)||(n=t.datepicker._getInst(i),t.datepicker._curInst&&t.datepicker._curInst!==n&&(t.datepicker._curInst.dpDiv.stop(!0,!0),n&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),!1!==(r=(o=t.datepicker._get(n,"beforeShow"))?o.apply(i,[i,n]):{})&&(a(n.settings,r),n.lastVal=null,t.datepicker._lastInput=i,t.datepicker._setDateFromField(n),t.datepicker._inDialog&&(i.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(i),t.datepicker._pos[1]+=i.offsetHeight),s=!1,t(i).parents().each(function(){return!(s|="fixed"===t(this).css("position"))}),l={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(n),l=t.datepicker._checkOffset(n,l,s),n.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":s?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"}),n.inline||(c=t.datepicker._get(n,"showAnim"),u=t.datepicker._get(n,"duration"),n.dpDiv.css("z-index",e(t(i))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[c]?n.dpDiv.show(c,t.datepicker._get(n,"showOptions"),u):n.dpDiv[c||"show"](c?u:null),t.datepicker._shouldFocusInput(n)&&n.input.focus(),t.datepicker._curInst=n)))},_updateDatepicker:function(e){this.maxRows=4,r=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i,n=this._getNumberOfMonths(e),a=n[1],s=17,l=e.dpDiv.find("."+this._dayOverClass+" a");l.length>0&&o.apply(l.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),a>1&&e.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",s*a+"em"),e.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,n){var o=e.dpDiv.outerWidth(),a=e.dpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,s=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:t(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?o-r:0,i.left-=n&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=n&&i.top===e.input.offset().top+s?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+o>l&&l>o?Math.abs(i.left+o-l):0),i.top-=Math.min(i.top,i.top+a>c&&c>a?Math.abs(a+s):0),i},_findPos:function(e){for(var i,n=this._getInst(e),o=this._get(n,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[o?"previousSibling":"nextSibling"];return[(i=t(e).offset()).left,i.top]},_hideDatepicker:function(e){var i,n,o,a,r=this._curInst;!r||e&&r!==t.data(e,"datepicker")||this._datepickerShowing&&(i=this._get(r,"showAnim"),n=this._get(r,"duration"),o=function(){t.datepicker._tidyDialog(r)},t.effects&&(t.effects.effect[i]||t.effects[i])?r.dpDiv.hide(i,t.datepicker._get(r,"showOptions"),n,o):r.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,o),i||o(),this._datepickerShowing=!1,(a=this._get(r,"onClose"))&&a.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),n=t.datepicker._getInst(i[0]);(i[0].id===t.datepicker._mainDivId||0!==i.parents("#"+t.datepicker._mainDivId).length||i.hasClass(t.datepicker.markerClassName)||i.closest("."+t.datepicker._triggerClass).length||!t.datepicker._datepickerShowing||t.datepicker._inDialog&&t.blockUI)&&(!i.hasClass(t.datepicker.markerClassName)||t.datepicker._curInst===n)||t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,n){var o=t(e),a=this._getInst(o[0]);this._isDisabledDatepicker(o[0])||(this._adjustInstDate(a,i+("M"===n?this._get(a,"showCurrentAtPos"):0),n),this._updateDatepicker(a))},_gotoToday:function(e){var i,n=t(e),o=this._getInst(n[0]);this._get(o,"gotoCurrent")&&o.currentDay?(o.selectedDay=o.currentDay,o.drawMonth=o.selectedMonth=o.currentMonth,o.drawYear=o.selectedYear=o.currentYear):(i=new Date,o.selectedDay=i.getDate(),o.drawMonth=o.selectedMonth=i.getMonth(),o.drawYear=o.selectedYear=i.getFullYear()),this._notifyChange(o),this._adjustDate(n)},_selectMonthYear:function(e,i,n){var o=t(e),a=this._getInst(o[0]);a["selected"+("M"===n?"Month":"Year")]=a["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(o)},_selectDay:function(e,i,n,o){var a,r=t(e);t(o).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||((a=this._getInst(r[0])).selectedDay=a.currentDay=t("a",o).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=n,this._selectDate(e,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var n,o=t(e),a=this._getInst(o[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),(n=this._get(a,"onSelect"))?n.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,n,o,a=this._get(e,"altField");a&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),o=this.formatDate(i,n,this._getFormatConfig(e)),t(a).each(function(){t(this).val(o)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&e<6,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,n){if(null==e||null==i)throw"Invalid arguments";if(""===(i="object"==typeof i?i.toString():i+""))return null;var o,a,r,s,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,p=(n?n.dayNames:null)||this._defaults.dayNames,h=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,f=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,_=-1,b=!1,y=function(t){var i=o+1<e.length&&e.charAt(o+1)===t;return i&&o++,i},w=function(t){var e=y(t),n="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,o=new RegExp("^\\d{"+("y"===t?n:1)+","+n+"}"),a=i.substring(l).match(o);if(!a)throw"Missing number at position "+l;return l+=a[0].length,parseInt(a[0],10)},$=function(e,n,o){var a=-1,r=t.map(y(e)?o:n,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(r,function(t,e){var n=e[1];if(i.substr(l,n.length).toLowerCase()===n.toLowerCase())return a=e[0],l+=n.length,!1}),-1!==a)return a+1;throw"Unknown name at position "+l},x=function(){if(i.charAt(l)!==e.charAt(o))throw"Unexpected literal at position "+l;l++};for(o=0;o<e.length;o++)if(b)"'"!==e.charAt(o)||y("'")?x():b=!1;else switch(e.charAt(o)){case"d":v=w("d");break;case"D":$("D",d,p);break;case"o":_=w("o");break;case"m":g=w("m");break;case"M":g=$("M",h,f);break;case"y":m=w("y");break;case"@":m=(s=new Date(w("@"))).getFullYear(),g=s.getMonth()+1,v=s.getDate();break;case"!":m=(s=new Date((w("!")-this._ticksTo1970)/1e4)).getFullYear(),g=s.getMonth()+1,v=s.getDate();break;case"'":y("'")?x():b=!0;break;default:x()}if(l<i.length&&(r=i.substr(l),!/^\s+/.test(r)))throw"Extra/unparsed characters found in date: "+r;if(-1===m?m=(new Date).getFullYear():m<100&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(m<=u?0:-100)),_>-1)for(g=1,v=_;;){if(v<=(a=this._getDaysInMonth(m,g-1)))break;g++,v-=a}if((s=this._daylightSavingAdjust(new Date(m,g-1,v))).getFullYear()!==m||s.getMonth()+1!==g||s.getDate()!==v)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,i){if(!e)return"";var n,o=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,s=(i?i.monthNames:null)||this._defaults.monthNames,l=function(e){var i=n+1<t.length&&t.charAt(n+1)===e;return i&&n++,i},c=function(t,e,i){var n=""+e;if(l(t))for(;n.length<i;)n="0"+n;return n},u=function(t,e,i,n){return l(t)?n[e]:i[e]},d="",p=!1;if(e)for(n=0;n<t.length;n++)if(p)"'"!==t.charAt(n)||l("'")?d+=t.charAt(n):p=!1;else switch(t.charAt(n)){case"d":d+=c("d",e.getDate(),2);break;case"D":d+=u("D",e.getDay(),o,a);break;case"o":d+=c("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=c("m",e.getMonth()+1,2);break;case"M":d+=u("M",e.getMonth(),r,s);break;case"y":d+=l("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":d+=e.getTime();break;case"!":d+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":p=!0;break;default:d+=t.charAt(n)}return d},_possibleChars:function(t){var e,i="",n=!1,o=function(i){var n=e+1<t.length&&t.charAt(e+1)===i;return n&&e++,n};for(e=0;e<t.length;e++)if(n)"'"!==t.charAt(e)||o("'")?i+=t.charAt(e):n=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":o("'")?i+="'":n=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,e){return t.settings[e]!==undefined?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),n=t.lastVal=t.input?t.input.val():null,o=this._getDefaultDate(t),a=o,r=this._getFormatConfig(t);try{a=this.parseDate(i,n,r)||o}catch(event){n=e?"":n}t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),t.currentDay=n?a.getDate():0,t.currentMonth=n?a.getMonth():0,t.currentYear=n?a.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,n){var o=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},a=null==i||""===i?n:"string"==typeof i?function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(c){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,o=n.getFullYear(),a=n.getMonth(),r=n.getDate(),s=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=s.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":a+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a));break;case"y":case"Y":o+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a))}l=s.exec(i)}return new Date(o,a,r)}(i):"number"==typeof i?isNaN(i)?n:o(i):new Date(i.getTime());return(a=a&&"Invalid Date"===a.toString()?n:a)&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var n=!e,o=t.selectedMonth,a=t.selectedYear,r=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=r.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=r.getMonth(),t.drawYear=t.selectedYear=t.currentYear=r.getFullYear(),o===t.selectedMonth&&a===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(n?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(n,-i,"M")},next:function(){t.datepicker._adjustDate(n,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(n)},selectDay:function(){return t.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(n,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,n,o,a,r,s,l,c,u,d,p,h,f,m,g,v,_,b,y,w,$,x,k,C,D,S,T,A,E,M,O,I,P,N,L,R,F,j,B=new Date,q=this._daylightSavingAdjust(new Date(B.getFullYear(),B.getMonth(),B.getDate())),z=this._get(t,"isRTL"),H=this._get(t,"showButtonPanel"),W=this._get(t,"hideIfNoPrevNext"),Y=this._get(t,"navigationAsDateFormat"),V=this._getNumberOfMonths(t),U=this._get(t,"showCurrentAtPos"),G=this._get(t,"stepMonths"),K=1!==V[0]||1!==V[1],J=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(t,"min"),X=this._getMinMaxDate(t,"max"),Z=t.drawMonth-U,tt=t.drawYear;if(Z<0&&(Z+=12,tt--),X)for(e=this._daylightSavingAdjust(new Date(X.getFullYear(),X.getMonth()-V[0]*V[1]+1,X.getDate())),e=Q&&e<Q?Q:e;this._daylightSavingAdjust(new Date(tt,Z,1))>e;)--Z<0&&(Z=11,tt--);for(t.drawMonth=Z,t.drawYear=tt,i=this._get(t,"prevText"),i=Y?this.formatDate(i,this._daylightSavingAdjust(new Date(tt,Z-G,1)),this._getFormatConfig(t)):i,n=this._canAdjustMonth(t,-1,tt,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"e":"w")+"'>"+i+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"e":"w")+"'>"+i+"</span></a>",o=this._get(t,"nextText"),o=Y?this.formatDate(o,this._daylightSavingAdjust(new Date(tt,Z+G,1)),this._getFormatConfig(t)):o,a=this._canAdjustMonth(t,1,tt,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"w":"e")+"'>"+o+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"w":"e")+"'>"+o+"</span></a>",r=this._get(t,"currentText"),s=this._get(t,"gotoCurrent")&&t.currentDay?J:q,r=Y?this.formatDate(r,s,this._getFormatConfig(t)):r,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",c=H?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(z?l:"")+(this._isInRange(t,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+(z?"":l)+"</div>":"",u=parseInt(this._get(t,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(t,"showWeek"),p=this._get(t,"dayNames"),h=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),_=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),y="",$=0;$<V[0];$++){for(x="",this.maxRows=4,k=0;k<V[1];k++){if(C=this._daylightSavingAdjust(new Date(tt,Z,t.selectedDay)),D=" ui-corner-all",S="",K){if(S+="<div class='ui-datepicker-group",V[1]>1)switch(k){case 0:S+=" ui-datepicker-group-first",D=" ui-corner-"+(z?"right":"left");break;case V[1]-1:S+=" ui-datepicker-group-last",D=" ui-corner-"+(z?"left":"right");break;default:S+=" ui-datepicker-group-middle",D=""}S+="'>"}for(S+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+D+"'>"+(/all|left/.test(D)&&0===$?z?a:n:"")+(/all|right/.test(D)&&0===$?z?n:a:"")+this._generateMonthYearHeader(t,Z,tt,Q,X,$>0||k>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",T=d?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;w<7;w++)T+="<th scope='col'"+((w+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+p[A=(w+u)%7]+"'>"+h[A]+"</span></th>";for(S+=T+"</tr></thead><tbody>",E=this._getDaysInMonth(tt,Z),tt===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,E)),M=(this._getFirstDayOfMonth(tt,Z)-u+7)%7,O=Math.ceil((M+E)/7),I=K&&this.maxRows>O?this.maxRows:O,this.maxRows=I,P=this._daylightSavingAdjust(new Date(tt,Z,1-M)),N=0;N<I;N++){for(S+="<tr>",L=d?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(P)+"</td>":"",w=0;w<7;w++)R=g?g.apply(t.input?t.input[0]:null,[P]):[!0,""],j=(F=P.getMonth()!==Z)&&!_||!R[0]||Q&&P<Q||X&&P>X,L+="<td class='"+((w+u+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(P.getTime()===C.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===P.getTime()&&b.getTime()===C.getTime()?" "+this._dayOverClass:"")+(j?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!v?"":" "+R[1]+(P.getTime()===J.getTime()?" "+this._currentClass:"")+(P.getTime()===q.getTime()?" ui-datepicker-today":""))+"'"+(F&&!v||!R[2]?"":" title='"+R[2].replace(/'/g,"&#39;")+"'")+(j?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(F&&!v?"&#xa0;":j?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===q.getTime()?" ui-state-highlight":"")+(P.getTime()===J.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>",P.setDate(P.getDate()+1),P=this._daylightSavingAdjust(P);S+=L+"</tr>"}++Z>11&&(Z=0,tt++),x+=S+="</tbody></table>"+(K?"</div>"+(V[0]>0&&k===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}y+=x}return y+=c,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,n,o,a,r,s){var l,c,u,d,p,h,f,m,g=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),_=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(a||!g)y+="<span class='ui-datepicker-month'>"+r[e]+"</span>";else{for(l=n&&n.getFullYear()===i,c=o&&o.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;u<12;u++)(!l||u>=n.getMonth())&&(!c||u<=o.getMonth())&&(y+="<option value='"+u+"'"+(u===e?" selected='selected'":"")+">"+s[u]+"</option>");y+="</select>"}if(_||(b+=y+(!a&&g&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(t,"yearRange").split(":"),p=(new Date).getFullYear(),f=(h=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?p+parseInt(t,10):parseInt(t,10);return isNaN(e)?p:e})(d[0]),m=Math.max(f,h(d[1]||"")),f=n?Math.max(f,n.getFullYear()):f,m=o?Math.min(m,o.getFullYear()):m,
t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f<=m;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),_&&(b+=(!a&&g&&v?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(t,e,i){var n=t.drawYear+("Y"===i?e:0),o=t.drawMonth+("M"===i?e:0),a=Math.min(t.selectedDay,this._getDaysInMonth(n,o))+("D"===i?e:0),r=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(n,o,a)));t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max"),o=i&&e<i?i:e;return n&&o>n?n:o},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,n){var o=this._getNumberOfMonths(t),a=this._daylightSavingAdjust(new Date(i,n+(e<0?e:o[0]*o[1]),1));return e<0&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(t,a)},_isInRange:function(t,e){var i,n,o=this._getMinMaxDate(t,"min"),a=this._getMinMaxDate(t,"max"),r=null,s=null,l=this._get(t,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),r=parseInt(i[0],10),s=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=n),i[1].match(/[+\-].*/)&&(s+=n)),(!o||e.getTime()>=o.getTime())&&(!a||e.getTime()<=a.getTime())&&(!r||e.getFullYear()>=r)&&(!s||e.getFullYear()<=s)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,n){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var o=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(n,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),o,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.11.4",t.datepicker}),
/*!
 * jQuery UI Widget 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){var e,i=0,n=Array.prototype.slice;return t.cleanData=(e=t.cleanData,function(i){var n,o,a;for(a=0;null!=(o=i[a]);a++)try{(n=t._data(o,"events"))&&n.remove&&t(o).triggerHandler("remove")}catch(r){}e(i)}),t.widget=function(e,i,n){var o,a,r,s,l={},c=e.split(".")[0];return e=e.split(".")[1],o=c+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[c]=t[c]||{},a=t[c][e],r=t[c][e]=function(t,e){if(!this._createWidget)return new r(t,e);arguments.length&&this._createWidget(t,e)},t.extend(r,a,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),(s=new i).options=t.widget.extend({},s.options),t.each(n,function(e,n){var o,a;t.isFunction(n)?l[e]=(o=function(){return i.prototype[e].apply(this,arguments)},a=function(t){return i.prototype[e].apply(this,t)},function(){var t,e=this._super,i=this._superApply;return this._super=o,this._superApply=a,t=n.apply(this,arguments),this._super=e,this._superApply=i,t}):l[e]=n}),r.prototype=t.widget.extend(s,{widgetEventPrefix:a&&s.widgetEventPrefix||e},l,{constructor:r,namespace:c,widgetName:e,widgetFullName:o}),a?(t.each(a._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete a._childConstructors):i._childConstructors.push(r),t.widget.bridge(e,r),r},t.widget.extend=function(e){for(var i,o,a=n.call(arguments,1),r=0,s=a.length;r<s;r++)for(i in a[r])o=a[r][i],a[r].hasOwnProperty(i)&&o!==undefined&&(t.isPlainObject(o)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],o):t.widget.extend({},o):e[i]=o);return e},t.widget.bridge=function(e,i){var o=i.prototype.widgetFullName||e;t.fn[e]=function(a){var r="string"==typeof a,s=n.call(arguments,1),l=this;return r?this.each(function(){var i,n=t.data(this,o);return"instance"===a?(l=n,!1):n?t.isFunction(n[a])&&"_"!==a.charAt(0)?(i=n[a].apply(n,s))!==n&&i!==undefined?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:t.error("no such method '"+a+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+a+"'")}):(s.length&&(a=t.widget.extend.apply(null,[a].concat(s))),this.each(function(){var e=t.data(this,o);e?(e.option(a||{}),e._init&&e._init()):t.data(this,o,new i(a,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,o,a,r=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(r={},e=(n=e.split(".")).shift(),n.length){for(o=r[e]=t.widget.extend({},this.options[e]),a=0;a<n.length-1;a++)o[n[a]]=o[n[a]]||{},o=o[n[a]];if(e=n.pop(),1===arguments.length)return o[e]===undefined?null:o[e];o[e]=i}else{if(1===arguments.length)return this.options[e]===undefined?null:this.options[e];r[e]=i}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,i,n){var o,a=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=o=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),t.each(n,function(n,r){function s(){if(e||!0!==a.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof r?a[r]:r).apply(a,arguments)}"string"!=typeof r&&(s.guid=r.guid=r.guid||s.guid||t.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+a.eventNamespace,u=l[2];u?o.delegate(u,c,s):i.bind(c,s)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(i).undelegate(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var o,a,r=this.options[e];if(n=n||{},(i=t.Event(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(o in a)o in i||(i[o]=a[o]);return this.element.trigger(i,n),!(t.isFunction(r)&&!1===r.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,o,a){"string"==typeof o&&(o={effect:o});var r,s=o?!0===o||"number"==typeof o?i:o.effect||i:e;"number"==typeof(o=o||{})&&(o={duration:o}),r=!t.isEmptyObject(o),o.complete=a,o.delay&&n.delay(o.delay),r&&t.effects&&t.effects.effect[s]?n[e](o):s!==e&&n[s]?n[s](o.duration,o.easing,a):n.queue(function(i){t(this)[e](),a&&a.call(n[0]),i()})}}),t.widget}),
/*!
 * jQuery UI Button 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/button/
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget"],t):t(jQuery)}(function(t){var e,i="ui-button ui-widget ui-state-default ui-corner-all",n="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",o=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},a=function(e){var i=e.name,n=e.form,o=t([]);return i&&(i=i.replace(/'/g,"\\'"),o=n?t(n).find("[name='"+i+"'][type=radio]"):t("[name='"+i+"'][type=radio]",e.ownerDocument).filter(function(){return!this.form})),o};return t.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,o),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var n=this,r=this.options,s="checkbox"===this.type||"radio"===this.type,l=s?"":"ui-state-active";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(i).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){r.disabled||this===e&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){r.disabled||t(this).removeClass(l)}).bind("click"+this.eventNamespace,function(t){r.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),s&&this.element.bind("change"+this.eventNamespace,function(){n.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled)return!1;t(this).addClass("ui-state-active"),n.buttonElement.attr("aria-pressed","true");var e=n.element[0];a(e).not(e).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(r.disabled)return!1;t(this).addClass("ui-state-active"),e=this,n.document.one("mouseup",function(){e=null})}).bind("mouseup"+this.eventNamespace,function(){if(r.disabled)return!1;t(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(e){if(r.disabled)return!1;e.keyCode!==t.ui.keyCode.SPACE&&e.keyCode!==t.ui.keyCode.ENTER||t(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),(i=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(i+" ui-state-active "+n).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){if(this._super(t,e),"disabled"===t)return this.widget().toggleClass("ui-state-disabled",!!e),this.element.prop("disabled",!!e),void(e&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")));this._resetButton()},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?a(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var e=this.buttonElement.removeClass(n),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),o=this.options.icons,a=o.primary&&o.secondary,r=[];o.primary||o.secondary?(this.options.text&&r.push("ui-button-text-icon"+(a?"s":o.primary?"-primary":"-secondary")),o.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+o.primary+"'></span>"),o.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+o.secondary+"'></span>"),this.options.text||(r.push(a?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):r.push("ui-button-text-only"),e.addClass(r.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),t.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction"),i=this.element.find(this.options.items),n=i.filter(":ui-button");i.not(":ui-button").button(),n.button("refresh"),this.buttons=i.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),t.ui.button}),
/*!
 * jQuery UI Mouse 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","./widget"],t):t(jQuery)}(function(t){var e=!1;return t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,o=1===i.which,a=!("string"!=typeof this.options.cancel||!i.target.nodeName)&&t(i.target).closest(this.options.cancel).length;return!(o&&!a&&this._mouseCapture(i))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=!1!==this._mouseStart(i),!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(i){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,i.target===this._mouseDownEvent.target&&t.data(i.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(i)),e=!1,!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),
/*!
 * jQuery UI Draggable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],t):t(jQuery)}(function(t){return t.widget("ui.draggable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var i=this.options;return this._blurActiveElement(e),!(this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=this.document[0];if(this.handleElement.is(e.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&t(i.activeElement).blur()}catch(n){}},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._normalizeRightBottom(),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",e,n))return this._mouseUp({}),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,n=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==i._trigger("stop",e)&&i._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.focus(),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper),o=n?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,o=this.options,a=this.document[0];this.relativeContainer=null,o.containment?"window"!==o.containment?"document"!==o.containment?o.containment.constructor!==Array?("parent"===o.containment&&(o.containment=this.helper[0].parentNode),(n=(i=t(o.containment))[0])&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i)):this.containment=o.containment:this.containment=[0,0,t(a).width()-this.helperProportions.width-this.margins.left,(t(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,n,o,a,r=this.options,s=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;return s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),r.grid&&(o=r.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,c=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-r.grid[1]:o+r.grid[1]:o,a=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,l=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-r.grid[0]:a+r.grid[0]:a),"y"===r.axis&&(l=this.originalPageX),"x"===r.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,n){var o=t.extend({},i,{item:n.element});n.sortables=[],t(n.options.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,o))})},stop:function(e,i,n){var o=t.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,t.each(n.sortables,function(){var t=this;t.isOver?(t.isOver=0,n.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,o))})},drag:function(e,i,n){t.each(n.sortables,function(){var o=!1,a=this;a.positionAbs=n.positionAbs,a.helperProportions=n.helperProportions,a.offset.click=n.offset.click,a._intersectsWith(a.containerCache)&&(o=!0,t.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==a&&this._intersectsWith(this.containerCache)&&t.contains(a.element[0],this.element[0])&&(o=!1),o})),o?(a.isOver||(a.isOver=1,n._parent=i.helper.parent(),a.currentItem=i.helper.appendTo(a.element).data("ui-sortable-item",!0),a.options._helper=a.options.helper,a.options.helper=function(){return i.helper[0]},e.target=a.currentItem[0],a._mouseCapture(e,!0),a._mouseStart(e,!0,!0),a.offset.click.top=n.offset.click.top,a.offset.click.left=n.offset.click.left,a.offset.parent.left-=n.offset.parent.left-a.offset.parent.left,a.offset.parent.top-=n.offset.parent.top-a.offset.parent.top,n._trigger("toSortable",e),n.dropped=a.element,t.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,a.fromOutside=n),a.currentItem&&(a._mouseDrag(e),i.position=a.position)):a.isOver&&(a.isOver=0,a.cancelHelperRemoval=!0,a.options._revert=a.options.revert,a.options.revert=!1,a._trigger("out",e,a._uiHash(a)),a._mouseStop(e,!0),a.options.revert=a.options._revert,a.options.helper=a.options._helper,a.placeholder&&a.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(e),i.position=n._generatePosition(e,!0),n._trigger("fromSortable",e),n.dropped=!1,t.each(n.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,n){var o=t("body"),a=n.options;o.css("cursor")&&(a._cursor=o.css("cursor")),o.css("cursor",a.cursor)},stop:function(e,i,n){var o=n.options;o._cursor&&t("body").css("cursor",o._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,n){var o=t(i.helper),a=n.options;o.css("opacity")&&(a._opacity=o.css("opacity")),o.css("opacity",a.opacity)},stop:function(e,i,n){var o=n.options;o._opacity&&t(i.helper).css("opacity",o._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,n){var o=n.options,a=!1,r=n.scrollParentNotHidden[0],s=n.document[0];r!==s&&"HTML"!==r.tagName?(o.axis&&"x"===o.axis||(n.overflowOffset.top+r.offsetHeight-e.pageY<o.scrollSensitivity?r.scrollTop=a=r.scrollTop+o.scrollSpeed:e.pageY-n.overflowOffset.top<o.scrollSensitivity&&(r.scrollTop=a=r.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(n.overflowOffset.left+r.offsetWidth-e.pageX<o.scrollSensitivity?r.scrollLeft=a=r.scrollLeft+o.scrollSpeed:e.pageX-n.overflowOffset.left<o.scrollSensitivity&&(r.scrollLeft=a=r.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(e.pageY-t(s).scrollTop()<o.scrollSensitivity?a=t(s).scrollTop(t(s).scrollTop()-o.scrollSpeed):t(window).height()-(e.pageY-t(s).scrollTop())<o.scrollSensitivity&&(a=t(s).scrollTop(t(s).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(e.pageX-t(s).scrollLeft()<o.scrollSensitivity?a=t(s).scrollLeft(t(s).scrollLeft()-o.scrollSpeed):t(window).width()-(e.pageX-t(s).scrollLeft())<o.scrollSensitivity&&(a=t(s).scrollLeft(t(s).scrollLeft()+o.scrollSpeed)))),!1!==a&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,n){var o=n.options;n.snapElements=[],t(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var e=t(this),i=e.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,n){var o,a,r,s,l,c,u,d,p,h,f=n.options,m=f.snapTolerance,g=i.offset.left,v=g+n.helperProportions.width,_=i.offset.top,b=_+n.helperProportions.height;for(p=n.snapElements.length-1;p>=0;p--)c=(l=n.snapElements[p].left-n.margins.left)+n.snapElements[p].width,d=(u=n.snapElements[p].top-n.margins.top)+n.snapElements[p].height,v<l-m||g>c+m||b<u-m||_>d+m||!t.contains(n.snapElements[p].item.ownerDocument,n.snapElements[p].item)?(n.snapElements[p].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[p].item})),n.snapElements[p].snapping=!1):("inner"!==f.snapMode&&(o=Math.abs(u-b)<=m,a=Math.abs(d-_)<=m,r=Math.abs(l-v)<=m,s=Math.abs(c-g)<=m,o&&(i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),a&&(i.position.top=n._convertPositionTo("relative",{top:d,left:0}).top),r&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c}).left)),h=o||a||r||s,"outer"!==f.snapMode&&(o=Math.abs(u-_)<=m,a=Math.abs(d-b)<=m,r=Math.abs(l-g)<=m,s=Math.abs(c-v)<=m,o&&(i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.top=n._convertPositionTo("relative",{top:d-n.helperProportions.height,left:0}).top),r&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left)),!n.snapElements[p].snapping&&(o||a||r||s||h)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[p].item})),n.snapElements[p].snapping=o||a||r||s||h)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,n){var o,a=n.options,r=t.makeArray(t(a.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});r.length&&(o=parseInt(t(r[0]).css("zIndex"),10)||0,t(r).each(function(e){t(this).css("zIndex",o+e)}),this.css("zIndex",o+r.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,n){var o=t(i.helper),a=n.options;o.css("zIndex")&&(a._zIndex=o.css("zIndex")),o.css("zIndex",a.zIndex)},stop:function(e,i,n){var o=n.options;o._zIndex&&t(i.helper).css("zIndex",o._zIndex)}}),t.ui.draggable}),
/*!
 * jQuery UI Position 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){return function(){function e(t,e,i){return[parseFloat(t[0])*(h.test(t[0])?e/100:1),parseFloat(t[1])*(h.test(t[1])?i/100:1)]}function i(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var o,a,r=Math.max,s=Math.abs,l=Math.round,c=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,p=/^\w+/,h=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(o!==undefined)return o;var e,i,n=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=n.children()[0];return t("body").append(n),e=a.offsetWidth,n.css("overflow","scroll"),e===(i=a.offsetWidth)&&(i=n[0].clientWidth),n.remove(),o=e-i},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),o="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight?t.position.scrollbarWidth():0,height:o?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]),o=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:o,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n||o?i.width():i.outerWidth(),height:n||o?i.height():i.outerHeight()}}},t.fn.position=function(o){if(!o||!o.of)return f.apply(this,arguments);o=t.extend({},o);var h,m,g,v,_,b,y=t(o.of),w=t.position.getWithinInfo(o.within),$=t.position.getScrollInfo(w),x=(o.collision||"flip").split(" "),k={};return b=n(y),y[0].preventDefault&&(o.at="left top"),m=b.width,g=b.height,v=b.offset,_=t.extend({},v),t.each(["my","at"],function(){var t,e,i=(o[this]||"").split(" ");1===i.length&&(i=c.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=c.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",t=d.exec(i[0]),e=d.exec(i[1]),k[this]=[t?t[0]:0,e?e[0]:0],o[this]=[p.exec(i[0])[0],p.exec(i[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===o.at[0]?_.left+=m:"center"===o.at[0]&&(_.left+=m/2),"bottom"===o.at[1]?_.top+=g:"center"===o.at[1]&&(_.top+=g/2),h=e(k.at,m,g),_.left+=h[0],_.top+=h[1],this.each(function(){var n,c,u=t(this),d=u.outerWidth(),p=u.outerHeight(),f=i(this,"marginLeft"),b=i(this,"marginTop"),C=d+f+i(this,"marginRight")+$.width,D=p+b+i(this,"marginBottom")+$.height,S=t.extend({},_),T=e(k.my,u.outerWidth(),u.outerHeight());"right"===o.my[0]?S.left-=d:"center"===o.my[0]&&(S.left-=d/2),"bottom"===o.my[1]?S.top-=p:"center"===o.my[1]&&(S.top-=p/2),S.left+=T[0],S.top+=T[1],a||(S.left=l(S.left),S.top=l(S.top)),n={marginLeft:f,marginTop:b},t.each(["left","top"],function(e,i){t.ui.position[x[e]]&&t.ui.position[x[e]][i](S,{targetWidth:m,targetHeight:g,elemWidth:d,elemHeight:p,collisionPosition:n,collisionWidth:C,collisionHeight:D,offset:[h[0]+T[0],h[1]+T[1]],my:o.my,at:o.at,within:w,elem:u})}),o.using&&(c=function(t){var e=v.left-S.left,i=e+m-d,n=v.top-S.top,a=n+g-p,l={target:{element:y,left:v.left,top:v.top,width:m,height:g},element:{element:u,left:S.left,top:S.top,width:d,height:p},horizontal:i<0?"left":e>0?"right":"center",vertical:a<0?"top":n>0?"bottom":"middle"};m<d&&s(e+i)<m&&(l.horizontal="center"),g<p&&s(n+a)<g&&(l.vertical="middle"),r(s(e),s(i))>r(s(n),s(a))?l.important="horizontal":l.important="vertical",o.using.call(this,t,l)}),u.offset(t.extend(S,{using:c}))})},t.ui.position={fit:{left:function(t,e){var i,n=e.within,o=n.isWindow?n.scrollLeft:n.offset.left,a=n.width,s=t.left-e.collisionPosition.marginLeft,l=o-s,c=s+e.collisionWidth-a-o;e.collisionWidth>a?l>0&&c<=0?(i=t.left+l+e.collisionWidth-a-o,t.left+=l-i):t.left=c>0&&l<=0?o:l>c?o+a-e.collisionWidth:o:l>0?t.left+=l:c>0?t.left-=c:t.left=r(t.left-s,t.left)},top:function(t,e){var i,n=e.within,o=n.isWindow?n.scrollTop:n.offset.top,a=e.within.height,s=t.top-e.collisionPosition.marginTop,l=o-s,c=s+e.collisionHeight-a-o;e.collisionHeight>a?l>0&&c<=0?(i=t.top+l+e.collisionHeight-a-o,t.top+=l-i):t.top=c>0&&l<=0?o:l>c?o+a-e.collisionHeight:o:l>0?t.top+=l:c>0?t.top-=c:t.top=r(t.top-s,t.top)}},flip:{left:function(t,e){var i,n,o=e.within,a=o.offset.left+o.scrollLeft,r=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=t.left-e.collisionPosition.marginLeft,u=c-l,d=c+e.collisionWidth-r-l,p="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,h="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];u<0?((i=t.left+p+h+f+e.collisionWidth-r-a)<0||i<s(u))&&(t.left+=p+h+f):d>0&&((n=t.left-e.collisionPosition.marginLeft+p+h+f-l)>0||s(n)<d)&&(t.left+=p+h+f)},top:function(t,e){var i,n,o=e.within,a=o.offset.top+o.scrollTop,r=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=t.top-e.collisionPosition.marginTop,u=c-l,d=c+e.collisionHeight-r-l,p="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,h="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,f=-2*e.offset[1];u<0?((n=t.top+p+h+f+e.collisionHeight-r-a)<0||n<s(u))&&(t.top+=p+h+f):d>0&&((i=t.top-e.collisionPosition.marginTop+p+h+f-l)>0||s(i)<d)&&(t.top+=p+h+f)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,n,o,r,s=document.getElementsByTagName("body")[0],l=document.createElement("div");for(r in e=document.createElement(s?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&t.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"}),n)e.style[r]=n[r];e.appendChild(l),(i=s||document.documentElement).insertBefore(e,i.firstChild),l.style.cssText="position: absolute; left: 10.7432222px;",o=t(l).offset().left,a=o>10&&o<11,e.innerHTML="",i.removeChild(e)}()}(),t.ui.position}),
/*!
 * jQuery UI Resizable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],t):t(jQuery)}(function(t){return t.widget("ui.resizable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseInt(t,10)||0},_isNumber:function(t){return!isNaN(parseInt(t,10))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",o=!1;return e[n]>0||(e[n]=1,o=e[n]>0,e[n]=0,o)},_create:function(){var e,i,n,o,a=this,r=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;i<e.length;i++)n=t.trim(e[i]),(o=t("<div class='ui-resizable-handle "+("ui-resizable-"+n)+"'></div>")).css({zIndex:r.zIndex}),"se"===n&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(o);this._renderAxis=function(e){var i,n,o,r;for(i in e=e||this.element,this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=t(this.handles[i],this.element),r=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(o,r),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=o&&o[1]?o[1]:"se")}),r.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(t(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){r.disabled||a.resizing||(t(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,n,o=!1;for(i in this.handles)((n=t(this.handles[i])[0])===e.target||t.contains(n,e.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(e){var i,n,o,a=this.options,r=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),a.containment&&(i+=t(a.containment).scrollLeft()||0,n+=t(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalPosition={left:i,top:n},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===o?this.axis+"-resize":o),r.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,n,o=this.originalMousePosition,a=this.axis,r=e.pageX-o.left||0,s=e.pageY-o.top||0,l=this._change[a];return this._updatePrevProperties(),!!l&&(i=l.apply(this,[e,r,s]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1)},_mouseStop:function(e){this.resizing=!1;var i,n,o,a,r,s,l,c=this.options,u=this;return this._helper&&(o=(n=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&this._hasScroll(i[0],"left")?0:u.sizeDiff.height,a=n?0:u.sizeDiff.width,r={width:u.helper.width()-a,height:u.helper.height()-o},s=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,l=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(t.extend(r,{top:l,left:s})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,n,o,a,r=this.options;a={minWidth:this._isNumber(r.minWidth)?r.minWidth:0,maxWidth:this._isNumber(r.maxWidth)?r.maxWidth:Infinity,minHeight:this._isNumber(r.minHeight)?r.minHeight:0,maxHeight:this._isNumber(r.maxHeight)?r.maxHeight:Infinity},(this._aspectRatio||t)&&(e=a.minHeight*this.aspectRatio,n=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,o=a.maxWidth/this.aspectRatio,e>a.minWidth&&(a.minWidth=e),n>a.minHeight&&(a.minHeight=n),i<a.maxWidth&&(a.maxWidth=i),o<a.maxHeight&&(a.maxHeight=o)),this._vBoundaries=a},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,n=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,n=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,a=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,r=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,s=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,c=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return a&&(t.width=e.minWidth),r&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),a&&c&&(t.left=s-e.minWidth),n&&c&&(t.left=s-e.maxWidth),r&&u&&(t.top=l-e.minHeight),o&&u&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],n=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],o=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)i[e]=parseInt(n[e],10)||0,i[e]+=parseInt(o[e],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize;return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),n=i.options,o=i._proportionallyResizeElements,a=o.length&&/textarea/i.test(o[0].nodeName),r=a&&i._hasScroll(o[0],"left")?0:i.sizeDiff.height,s=a?0:i.sizeDiff.width,l={width:i.size.width-s,height:i.size.height-r},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,u&&c?{top:u,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};o&&o.length&&t(o[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,n,o,a,r,s,l=t(this).resizable("instance"),c=l.options,u=l.element,d=c.containment,p=d instanceof t?d.get(0):/parent/.test(d)?u.parent().get(0):d;p&&(l.containerElement=t(p),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(p),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,n){i[t]=l._num(e.css("padding"+n))}),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},n=l.containerOffset,o=l.containerSize.height,a=l.containerSize.width,r=l._hasScroll(p,"left")?p.scrollWidth:a,s=l._hasScroll(p)?p.scrollHeight:o,l.parentData={element:p,left:n.left,top:n.top,width:r,height:s}))},resize:function(e){var i,n,o,a,r=t(this).resizable("instance"),s=r.options,l=r.containerOffset,c=r.position,u=r._aspectRatio||e.shiftKey,d={top:0,left:0},p=r.containerElement,h=!0;p[0]!==document&&/static/.test(p.css("position"))&&(d=l),c.left<(r._helper?l.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-l.left:r.position.left-d.left),u&&(r.size.height=r.size.width/r.aspectRatio,h=!1),r.position.left=s.helper?l.left:0),c.top<(r._helper?l.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-l.top:r.position.top),u&&(r.size.width=r.size.height*r.aspectRatio,h=!1),r.position.top=r._helper?l.top:0),o=r.containerElement.get(0)===r.element.parent().get(0),a=/relative|absolute/.test(r.containerElement.css("position")),o&&a?(r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top):(r.offset.left=r.element.offset().left,r.offset.top=r.element.offset().top),i=Math.abs(r.sizeDiff.width+(r._helper?r.offset.left-d.left:r.offset.left-l.left)),n=Math.abs(r.sizeDiff.height+(r._helper?r.offset.top-d.top:r.offset.top-l.top)),i+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-i,u&&(r.size.height=r.size.width/r.aspectRatio,h=!1)),n+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-n,u&&(r.size.width=r.size.height*r.aspectRatio,h=!1)),h||(r.position.left=r.prevPosition.left,r.position.top=r.prevPosition.top,r.size.width=r.prevSize.width,r.size.height=r.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,n=e.containerOffset,o=e.containerPosition,a=e.containerElement,r=t(e.helper),s=r.offset(),l=r.outerWidth()-e.sizeDiff.width,c=r.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(a.css("position"))&&t(this).css({left:s.left-o.left-n.left,width:l,height:c}),e._helper&&!i.animate&&/static/.test(a.css("position"))&&t(this).css({left:s.left-o.left-n.left,width:l,height:c})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance").options;t(e.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})},resize:function(e,i){var n=t(this).resizable("instance"),o=n.options,a=n.originalSize,r=n.originalPosition,s={height:n.size.height-a.height||0,width:n.size.width-a.width||0,top:n.position.top-r.top||0,left:n.position.left-r.left||0};t(o.alsoResize).each(function(){var e=t(this),n=t(this).data("ui-resizable-alsoresize"),o={},a=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(a,function(t,e){var i=(n[e]||0)+(s[e]||0);i&&i>=0&&(o[e]=i||null)}),e.css(o)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.options,n=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),n=i.options,o=i.size,a=i.originalSize,r=i.originalPosition,s=i.axis,l="number"==typeof n.grid?[n.grid,n.grid]:n.grid,c=l[0]||1,u=l[1]||1,d=Math.round((o.width-a.width)/c)*c,p=Math.round((o.height-a.height)/u)*u,h=a.width+d,f=a.height+p,m=n.maxWidth&&n.maxWidth<h,g=n.maxHeight&&n.maxHeight<f,v=n.minWidth&&n.minWidth>h,_=n.minHeight&&n.minHeight>f;n.grid=l,v&&(h+=c),_&&(f+=u),m&&(h-=c),g&&(f-=u),/^(se|s|e)$/.test(s)?(i.size.width=h,i.size.height=f):/^(ne)$/.test(s)?(i.size.width=h,i.size.height=f,i.position.top=r.top-p):/^(sw)$/.test(s)?(i.size.width=h,i.size.height=f,i.position.left=r.left-d):((f-u<=0||h-c<=0)&&(e=i._getPaddingPlusBorderDimensions(this)),f-u>0?(i.size.height=f,i.position.top=r.top-p):(f=u-e.height,i.size.height=f,i.position.top=r.top+a.height-f),h-c>0?(i.size.width=h,i.position.left=r.left-d):(h=c-e.width,i.size.width=h,i.position.left=r.left+a.width-h))}}),t.ui.resizable}),
/*!
 * jQuery UI Dialog 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/dialog/
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./button","./draggable","./mouse","./position","./resizable"],t):t(jQuery)}(function(t){return t.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;i<0&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i,n=this;if(this._isOpen&&!1!==this._trigger("beforeClose",e)){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{(i=this.document[0].activeElement)&&"body"!==i.nodeName.toLowerCase()&&t(i).blur()}catch(o){}this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",e)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,i){var n=!1,o=this.uiDialog.siblings(".ui-front:visible").map(function(){return+t(this).css("z-index")}).get(),a=Math.max.apply(null,o);return a>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",a+1),n=!0),n&&!i&&this._trigger("focus",e),n},open:function(){var e=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]")),t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function i(){var e=this.document[0].activeElement;this.uiDialog[0]===e||t.contains(this.uiDialog[0],e)||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===t.ui.keyCode.TAB&&!e.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),o=i.filter(":last");e.target!==o[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==n[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay(function(){o.focus()}),e.preventDefault()):(this._delay(function(){n.focus()}),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?this.uiDialog.removeClass("ui-dialog-buttons"):(t.each(i,function(i,n){var o,a;n=t.isFunction(n)?{click:n,text:i}:n,n=t.extend({type:"button"},n),o=n.click,n.click=function(){o.apply(e.element[0],arguments)},a={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,t("<button></button>",n).button(a).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,o){t(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,e(o))},drag:function(t,n){i._trigger("drag",t,e(n))},stop:function(o,a){var r=a.offset.left-i.document.scrollLeft(),s=a.offset.top-i.document.scrollTop();n.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" top"+(s>=0?"+":"")+s,of:i.window},t(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",o,e(a))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var i=this,n=this.options,o=n.resizable,a=this.uiDialog.css("position"),r="string"==typeof o?o:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:r,start:function(n,o){t(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,e(o))},resize:function(t,n){i._trigger("resize",t,e(n))},stop:function(o,a){var r=i.uiDialog.offset(),s=r.left-i.document.scrollLeft(),l=r.top-i.document.scrollTop();n.height=i.uiDialog.height(),n.width=i.uiDialog.width(),n.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" top"+(l>=0?"+":"")+l,of:i.window},t(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",o,e(a))}}).css("position",a)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=t(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),i=t.inArray(this,e);-1!==i&&e.splice(i,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var i=this,n=!1,o={};t.each(e,function(t,e){i._setOption(t,e),t in i.sizeRelatedOptions&&(n=!0),t in i.resizableRelatedOptions&&(o[t]=e)}),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(t,e){var i,n,o=this.uiDialog;"dialogClass"===t&&o.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&((i=o.is(":data(ui-draggable)"))&&!e&&o.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((n=o.is(":data(ui-resizable)"))&&!e&&o.resizable("destroy"),n&&"string"==typeof e&&o.resizable("option","handles",e),n||!1===e||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),t=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),e=Math.max(0,n.minHeight-t),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-t):"none","auto"===n.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!t(e.target).closest(".ui-dialog").length||!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=!0;this._delay(function(){e=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}})}),
/*!
 * jQuery UI Menu 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/menu/
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./position"],t):t(jQuery)}(function(t){return t.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(e){var i=t(e.target);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&t(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){if(!this.previousFilter){var i=t(e.currentTarget);i.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){var i,n,o,a,r=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:r=!1,n=this.previousFilter||"",o=String.fromCharCode(e.keyCode),a=!1,clearTimeout(this.filterTimer),o===n?a=!0:o=n+o,i=this._filterMenuItems(o),(i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(o=String.fromCharCode(e.keyCode),i=this._filterMenuItems(o)),i.length?(this.focus(e,i),this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}r&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(t):this.select(t))},refresh:function(){var e,i=this,n=this.options.icons.submenu,o=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),o.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),i=e.parent(),o=t("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(o),e.attr("aria-labelledby",i.attr("id"))}),(e=o.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var e=t(this);i._isDivider(e)&&e.addClass("ui-widget-content ui-menu-divider")}),e.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),e.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this._super(t,e)},focus:function(t,e){var i,n;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),n=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(i=e.children(".ui-menu")).length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,n,o,a,r,s;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,o=e.offset().top-this.activeMenu.offset().top-i-n,a=this.activeMenu.scrollTop(),r=this.activeMenu.height(),s=e.outerHeight(),o<0?this.activeMenu.scrollTop(a+o):o+s>r&&this.activeMenu.scrollTop(a+o-r+s))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(e),this.activeMenu=n},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var n;this.active&&(n="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.find(this.options.items)[e]()),this.focus(i,n)},nextPage:function(e){var i,n,o;this.active?this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(i=t(this)).offset().top-n-o<0}),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(e)},previousPage:function(e){var i,n,o;this.active?this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return(i=t(this)).offset().top-n+o>0}),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items).first())):this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)},_filterMenuItems:function(e){var i=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=new RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return n.test(t.trim(t(this).text()))})}})}),
/*!
 * jQuery UI Autocomplete 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/autocomplete/
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./position","./menu"],t):t(jQuery)}(function(t){return t.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,i,n,o=this.element[0].nodeName.toLowerCase(),a="textarea"===o,r="input"===o;this.isMultiLine=!!a||!r&&this.element.prop("isContentEditable"),this.valueMethod=this.element[a||r?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return e=!0,n=!0,void(i=!0);e=!1,n=!1,i=!1;var a=t.ui.keyCode;switch(o.keyCode){case a.PAGE_UP:e=!0,this._move("previousPage",o);break;case a.PAGE_DOWN:e=!0,this._move("nextPage",o);break;case a.UP:e=!0,this._keyEvent("previous",o);break;case a.DOWN:e=!0,this._keyEvent("next",o);break;case a.ENTER:this.menu.active&&(e=!0,o.preventDefault(),this.menu.select(o));break;case a.TAB:this.menu.active&&this.menu.select(o);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(o),o.preventDefault());break;default:i=!0,this._searchTimeout(o)}},keypress:function(n){if(e)return e=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||n.preventDefault());if(!i){var o=t.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:this._move("previousPage",n);break;case o.PAGE_DOWN:this._move("nextPage",n);break;case o.UP:this._keyEvent("previous",n);break;case o.DOWN:this._keyEvent("next",n)}}},input:function(t){if(n)return n=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),this._change(t))}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(n){n.target===e.element[0]||n.target===i||t.contains(i,n.target)||e.close()})})},menufocus:function(e,i){var n,o;if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)});o=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:o})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(o.value),(n=i.item.attr("aria-label")||o.value)&&t.trim(n).length&&(this.liveRegion.children().hide(),t("<div>").text(n).appendTo(this.liveRegion))},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=t("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,n=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,n){n(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,o){n.xhr&&n.xhr.abort(),n.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){o(t)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){var e=this.term===this._value(),i=this.menu.element.is(":visible"),n=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;e&&(!e||i||n)||(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var n=this;t.each(i,function(t,i){n._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").text(i.label).appendTo(e)},_move:function(t,e){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e);this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var n=new RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return n.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t("<div>").text(i).appendTo(this.liveRegion))}}),t.ui.autocomplete}),
/*!
 * jQuery UI Effects 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/effects-core/
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){var e,i="ui-effects-",n=t;return t.effects={effect:{}},
/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
function(t,e){function i(t,e,i){var n=d[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:0>t?0:n.max<t?n.max:t)}function n(e){var i=c(),n=i._rgba=[];return e=e.toLowerCase(),f(l,function(t,o){var a,r=o.re.exec(e),s=r&&o.parse(r),l=o.space||"rgba";if(s)return a=i[l](s),i[u[l].cache]=a[u[l].cache],n=i._rgba=a._rgba,!1}),n.length?("0,0,0,0"===n.join()&&t.extend(n,a.transparent),i):a[e]}function o(t,e,i){return 6*(i=(i+1)%1)<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}var a,r="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",s=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],c=t.Color=function(e,i,n,o){return new t.Color.fn.parse(e,i,n,o)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},p=c.support={},h=t("<p>")[0],f=t.each;h.style.cssText="background-color:rgba(1,1,1,.5)",p.rgba=h.style.backgroundColor.indexOf("rgba")>-1,f(u,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),c.fn=t.extend(c.prototype,{parse:function(o,r,s,l){if(o===e)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=t(o).css(r),r=e);var d=this,p=t.type(o),h=this._rgba=[];return r!==e&&(o=[o,r,s,l],p="array"),"string"===p?this.parse(n(o)||a._default):"array"===p?(f(u.rgba.props,function(t,e){h[e.idx]=i(o[e.idx],e)}),this):"object"===p?(f(u,o instanceof c?function(t,e){o[e.cache]&&(d[e.cache]=o[e.cache].slice())}:function(e,n){var a=n.cache;f(n.props,function(t,e){if(!d[a]&&n.to){if("alpha"===t||null==o[t])return;d[a]=n.to(d._rgba)}d[a][e.idx]=i(o[t],e,!0)}),d[a]&&t.inArray(null,d[a].slice(0,3))<0&&(d[a][3]=1,n.from&&(d._rgba=n.from(d[a])))}),this):void 0},is:function(t){var e=c(t),i=!0,n=this;return f(u,function(t,o){var a,r=e[o.cache];return r&&(a=n[o.cache]||o.to&&o.to(n._rgba)||[],f(o.props,function(t,e){if(null!=r[e.idx])return i=r[e.idx]===a[e.idx]})),i}),i},_space:function(){var t=[],e=this;return f(u,function(i,n){e[n.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var n=c(t),o=n._space(),a=u[o],r=0===this.alpha()?c("transparent"):this,s=r[a.cache]||a.to(r._rgba),l=s.slice();return n=n[a.cache],f(a.props,function(t,o){var a=o.idx,r=s[a],c=n[a],u=d[o.type]||{};null!==c&&(null===r?l[a]=c:(u.mod&&(c-r>u.mod/2?r+=u.mod:r-c>u.mod/2&&(r-=u.mod)),l[a]=i((c-r)*e+r,o)))}),this[o](l)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),o=c(e)._rgba;return c(t.map(i,function(t,e){return(1-n)*o[e]+n*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),n=i.pop();return e&&i.push(~~(255*n)),"#"+t.map(i,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,u.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,n=t[0]/255,o=t[1]/255,a=t[2]/255,r=t[3],s=Math.max(n,o,a),l=Math.min(n,o,a),c=s-l,u=s+l,d=.5*u;return e=l===s?0:n===s?60*(o-a)/c+360:o===s?60*(a-n)/c+120:60*(n-o)/c+240,i=0===c?0:d<=.5?c/u:c/(2-u),[Math.round(e)%360,i,d,null==r?1:r]},u.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],a=t[3],r=n<=.5?n*(1+i):n+i-n*i,s=2*n-r;return[Math.round(255*o(s,r,e+1/3)),Math.round(255*o(s,r,e)),Math.round(255*o(s,r,e-1/3)),a]},f(u,function(n,o){var a=o.props,r=o.cache,l=o.to,u=o.from;c.fn[n]=function(n){if(l&&!this[r]&&(this[r]=l(this._rgba)),n===e)return this[r].slice();var o,s=t.type(n),d="array"===s||"object"===s?n:arguments,p=this[r].slice();return f(a,function(t,e){var n=d["object"===s?t:e.idx];null==n&&(n=p[e.idx]),p[e.idx]=i(n,e)}),u?((o=c(u(p)))[r]=p,o):c(p)},f(a,function(e,i){c.fn[e]||(c.fn[e]=function(o){var a,r=t.type(o),l="alpha"===e?this._hsla?"hsla":"rgba":n,c=this[l](),u=c[i.idx];return"undefined"===r?u:("function"===r&&(o=o.call(this,u),r=t.type(o)),null==o&&i.empty?this:("string"===r&&(a=s.exec(o))&&(o=u+parseFloat(a[2])*("+"===a[1]?1:-1)),c[i.idx]=o,this[l](c)))})})}),c.hook=function(e){var i=e.split(" ");f(i,function(e,i){t.cssHooks[i]={set:function(e,o){var a,r,s="";if("transparent"!==o&&("string"!==t.type(o)||(a=n(o)))){if(o=c(a||o),!p.rgba&&1!==o._rgba[3]){for(r="backgroundColor"===i?e.parentNode:e;(""===s||"transparent"===s)&&r&&r.style;)try{s=t.css(r,"backgroundColor"),r=r.parentNode}catch(l){}o=o.blend(s&&"transparent"!==s?s:"_default")}o=o.toRgbaString()}try{e.style[i]=o}catch(l){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=c(e.elem,i),e.end=c(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},c.hook(r),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(i,n){e["border"+n+"Color"]=t}),e}},a=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(n),function(){function e(e){var i,n,o=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,a={};if(o&&o.length&&o[0]&&o[o[0]])for(n=o.length;n--;)"string"==typeof o[i=o[n]]&&(a[t.camelCase(i)]=o[i]);else for(i in o)"string"==typeof o[i]&&(a[i]=o[i]);return a}function i(e,i){var n,o,a={};for(n in i)o=i[n],e[n]!==o&&(r[n]||!t.fx.step[n]&&isNaN(parseFloat(o))||(a[n]=o));return a}var o,a=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(n.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(n,o,r,s){var l=t.speed(o,r,s);return this.queue(function(){var o,r=t(this),s=r.attr("class")||"",c=l.children?r.find("*").addBack():r;c=c.map(function(){return{el:t(this),start:e(this)}}),(o=function(){t.each(a,function(t,e){n[e]&&r[e+"Class"](n[e])})})(),c=c.map(function(){return this.end=e(this.el[0]),this.diff=i(this.start,this.end),this}),r.attr("class",s),c=c.map(function(){var e=this,i=t.Deferred(),n=t.extend({},l,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,n),i.promise()}),t.when.apply(t,c.get()).done(function(){o(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(r[0])})})},t.fn.extend({addClass:(o=t.fn.addClass,function(e,i,n,a){return i?t.effects.animateClass.call(this,{add:e},i,n,a):o.apply(this,arguments)}),removeClass:function(e){return function(i,n,o,a){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},n,o,a):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(i,n,o,a,r){return"boolean"==typeof n||n===undefined?o?t.effects.animateClass.call(this,n?{add:i}:{remove:i},o,a,r):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:i},n,o,a)}}(t.fn.toggleClass),switchClass:function(e,i,n,o,a){return t.effects.animateClass.call(this,{add:i,remove:e},n,o,a)}})}(),function(){function e(e,i,n,o){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(o=i,n=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(o=n,n=i,i={}),t.isFunction(n)&&(o=n,n=null),i&&t.extend(e,i),n=n||i.duration,e.duration=t.fx.off?0:"number"==typeof n?n:n in t.fx.speeds?t.fx.speeds[n]:t.fx.speeds._default,e.complete=o||i.complete,e}function n(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||("string"==typeof e&&!t.effects.effect[e]||(!!t.isFunction(e)||"object"==typeof e&&!e.effect))}var o;t.extend(t.effects,{version:"1.11.4",save:function(t,e){for(var n=0;n<e.length;n++)null!==e[n]&&t.data(i+e[n],t[0].style[e[n]])},restore:function(t,e){var n,o;for(o=0;o<e.length;o++)null!==e[o]&&((n=t.data(i+e[o]))===undefined&&(n=""),t.css(e[o],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},n=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:e.width(),height:e.height()},a=document.activeElement;try{a.id}catch(r){a=document.body}return e.wrap(n),(e[0]===a||t.contains(e[0],a))&&t(a).focus(),n=e.parent(),"static"===e.css("position")?(n.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,n){i[n]=e.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(o),n.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,n,o){return o=o||{},t.each(i,function(t,i){var a=e.cssUnit(i);a[0]>0&&(o[i]=a[0]*n+a[1])}),o}}),t.fn.extend({effect:function(){function i(e){function i(){t.isFunction(a)&&a.call(o[0]),t.isFunction(e)&&e()}var o=t(this),a=n.complete,s=n.mode;(o.is(":hidden")?"hide"===s:"show"===s)?(o[s](),i()):r.call(o[0],n,i)}var n=e.apply(this,arguments),o=n.mode,a=n.queue,r=t.effects.effect[n.effect];return t.fx.off||!r?o?this[o](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):!1===a?this.each(i):this.queue(a||"fx",i)},show:(o=t.fn.show,function(t){if(n(t))return o.apply(this,arguments);var i=e.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}),hide:function(t){return function(i){if(n(i))return t.apply(this,arguments);var o=e.apply(this,arguments);return o.mode="hide",this.effect.call(this,o)}}(t.fn.hide),toggle:function(t){return function(i){if(n(i)||"boolean"==typeof i)return t.apply(this,arguments);var o=e.apply(this,arguments);return o.mode="toggle",this.effect.call(this,o)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),n=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(n=[parseFloat(i),e])}),n}})}(),e={},t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?i(2*t)/2:1-i(-2*t+2)/2}}),t.effects}),
/*!
 * jQuery UI Effects Highlight 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/highlight-effect/
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","./effect"],t):t(jQuery)}(function(t){return t.effects.effect.highlight=function(e,i){var n=t(this),o=["backgroundImage","backgroundColor","opacity"],a=t.effects.setMode(n,e.mode||"show"),r={backgroundColor:n.css("backgroundColor")};"hide"===a&&(r.opacity=0),t.effects.save(n,o),n.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(r,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===a&&n.hide(),t.effects.restore(n,o),i()}})}}),
/*!
 * jQuery UI Effects Blind 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/blind-effect/
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","./effect"],t):t(jQuery)}(function(t){return t.effects.effect.blind=function(e,i){var n,o,a,r=t(this),s=/up|down|vertical/,l=/up|left|vertical|horizontal/,c=["position","top","bottom","left","right","height","width"],u=t.effects.setMode(r,e.mode||"hide"),d=e.direction||"up",p=s.test(d),h=p?"height":"width",f=p?"top":"left",m=l.test(d),g={},v="show"===u;r.parent().is(".ui-effects-wrapper")?t.effects.save(r.parent(),c):t.effects.save(r,c),r.show(),o=(n=t.effects.createWrapper(r).css({overflow:"hidden"}))[h](),a=parseFloat(n.css(f))||0,g[h]=v?o:0,m||(r.css(p?"bottom":"right",0).css(p?"top":"left","auto").css({position:"absolute"}),g[f]=v?a:o+a),v&&(n.css(h,0),m||n.css(f,a+o)),n.animate(g,{duration:e.duration,easing:e.easing,queue:!1,complete:function(){"hide"===u&&r.hide(),t.effects.restore(r,c),t.effects.removeWrapper(r),i()}})}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self,function(){var i=t.Cookies,n=t.Cookies=e();n.noConflict=function(){return t.Cookies=i,n}}())}(this,function(){"use strict";function t(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)t[n]=i[n]}return t}function e(i,n){function o(e,o,a){if("undefined"!=typeof document){"number"==typeof(a=t({},n,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var s in a)a[s]&&(r+="; "+s,!0!==a[s]&&(r+="="+a[s].split(";")[0]));return document.cookie=e+"="+i.write(o,e)+r}}function a(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var e=document.cookie?document.cookie.split("; "):[],n={},o=0;o<e.length;o++){var a=e[o].split("="),r=a.slice(1).join("=");try{var s=decodeURIComponent(a[0]);if(n[s]=i.read(r,s),t===s)break}catch(l){}}return t?n[t]:n}}return Object.create({set:o,get:a,remove:function(e,i){o(e,"",t({},i,{expires:-1}))},withAttributes:function(i){return e(this.converter,t({},this.attributes,i))},withConverter:function(i){return e(t({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(i)}})}return e({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}),
/*
 * jQuery Plugin: Tokenizing Autocomplete Text Entry
 * Version 1.6.0
 *
 * Copyright (c) 2009 James Smith (http://loopj.com)
 * Licensed jointly under the GPL and MIT licenses,
 * choose which one suits your project best!
 *
 */
function(t){var e={method:"GET",contentType:"json",queryParam:"q",searchDelay:300,minChars:1,propertyToSearch:"nome",jsonContainer:null,hintText:"Pesquise por nome",noResultsText:"N\xe3o encontrado",searchingText:"Procurando...",deleteText:"&times;",animateDropdown:!0,tokenLimit:null,tokenDelimiter:",",preventDuplicates:!1,tokenValue:"id",prePopulate:null,processPrePopulate:!1,idPrefix:"token-input-",resultsFormatter:function(t){return"<li>"+t[this.propertyToSearch]+"</li>"},tokenFormatter:function(t){return"<li><p>"+t[this.propertyToSearch]+"</p></li>"},onResult:null,onAdd:null,onDelete:null,onReady:null},i={tokenList:"token-input-list",token:"token-input-token",tokenDelete:"token-input-delete-token",selectedToken:"token-input-selected-token",highlightedToken:"token-input-highlighted-token",dropdown:"token-input-dropdown",dropdownItem:"token-input-dropdown-item",dropdownItem2:"token-input-dropdown-item2",selectedDropdownItem:"token-input-selected-dropdown-item",inputToken:"token-input-input-token"},n={BEFORE:0,AFTER:1,END:2},o={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUMPAD_ENTER:108,COMMA:188},a={init:function(i,n){var o=t.extend({},e,n||{});return this.each(function(){t(this).data("tokenInputObject",new t.TokenList(this,i,o))})},clear:function(){return this.data("tokenInputObject").clear(),this},add:function(t){return this.data("tokenInputObject").add(t),this},remove:function(t){return this.data("tokenInputObject").remove(t),this},get:function(){return this.data("tokenInputObject").getTokens()}};t.fn.tokenInput=function(t){return a[t]?a[t].apply(this,Array.prototype.slice.call(arguments,1)):a.init.apply(this,arguments)},t.TokenList=function(e,a,r){function s(){if(null!==r.tokenLimit&&O>=r.tokenLimit)return P.hide(),void g()}function l(){if(E!==(E=P.val())){var t=E.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");z.html(t),P.width(z.width()+30)}}function c(e){var i=r.tokenFormatter(e);i=t(i).addClass(r.classes.token).insertBefore(B),t("<span>"+r.deleteText+"</span>").addClass(r.classes.tokenDelete).appendTo(i).click(function(){return f(t(this).parent()),N.change(),!1});var n={id:e.id};return n[r.propertyToSearch]=e[r.propertyToSearch],t.data(i.get(0),"tokeninput",e),M=M.slice(0,R).concat([n]).concat(M.slice(R)),R++,m(M,N),O+=1,null!==r.tokenLimit&&O>=r.tokenLimit&&(P.hide(),g()),i}function u(e){var i=r.onAdd;if(O>0&&r.preventDuplicates){var n=null;if(j.children().each(function(){var i=t(this),o=t.data(i.get(0),"tokeninput");if(o&&o.id===e.id)return n=i,!1}),n)return d(n),B.insertAfter(n),void P.focus()}(null==r.tokenLimit||O<r.tokenLimit)&&(c(e),s()),P.val(""),g(),t.isFunction(i)&&i.call(N,e)}function d(t){t.addClass(r.classes.selectedToken),L=t.get(0),P.val(""),g()}function p(t,e){t.removeClass(r.classes.selectedToken),L=null,e===n.BEFORE?(B.insertBefore(t),R--):e===n.AFTER?(B.insertAfter(t),R++):(B.appendTo(j),R=O),P.focus()}function h(e){var i=L;L&&p(t(L),n.END),i===e.get(0)?p(e,n.END):d(e)}function f(e){var i=t.data(e.get(0),"tokeninput"),n=r.onDelete,o=e.prevAll().length;o>R&&o--,e.remove(),L=null,P.focus(),M=M.slice(0,o).concat(M.slice(o+1)),o<R&&R--,m(M,N),O-=1,null!==r.tokenLimit&&P.show().val("").focus(),t.isFunction(n)&&n.call(N,i)}function m(e,i){var n=t.map(e,function(t){return t[r.tokenValue]});i.val(n.join(r.tokenDelimiter))}function g(){q.hide().empty(),F=null}function v(){q.css({position:"absolute",top:t(j).offset().top+t(j).outerHeight(),left:t(j).offset().left,zindex:999}).show()}function _(){r.searchingText&&(q.html("<p>"+r.searchingText+"</p>"),v())}function b(){r.hintText&&(q.html("<p>"+r.hintText+"</p>"),v())}function y(t,e){return t.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+e+")(?![^<>]*>)(?![^&;]+;)","gi"),"<b>$1</b>")}function w(t,e,i){return t.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+e+")(?![^<>]*>)(?![^&;]+;)","g"),y(e,i))}function $(e,i){if(i&&i.length){q.empty();var n=t("<ul>").appendTo(q).mouseover(function(e){x(t(e.target).closest("li"))}).mousedown(function(e){return u(t(e.target).closest("li").data("tokeninput")),N.change(),!1}).hide();t.each(i,function(i,o){var a=r.resultsFormatter(o);a=w(a,o[r.propertyToSearch],e),a=t(a).appendTo(n),i%2?a.addClass(r.classes.dropdownItem):a.addClass(r.classes.dropdownItem2),0===i&&x(a),t.data(a.get(0),"tokeninput",o)}),v(),r.animateDropdown?n.slideDown("fast"):n.show()}else r.noResultsText&&(q.html("<p>"+r.noResultsText+"</p>"),v())}function x(e){e&&(F&&k(t(F)),e.addClass(r.classes.selectedDropdownItem),F=e.get(0))}function k(t){t.removeClass(r.classes.selectedDropdownItem),F=null}function C(){var e=P.val().toLowerCase();e&&e.length&&(L&&p(t(L),n.AFTER),e.length>=r.minChars?(_(),clearTimeout(A),A=setTimeout(function(){D(e)},r.searchDelay)):g())}function D(e){var i=e+S(),n=I.get(i);if(n)$(e,n);else if(r.url){var o=S(),a={data:{}};if(o.indexOf("?")>-1){var s=o.split("?");a.url=s[0];var l=s[1].split("&");t.each(l,function(t,e){var i=e.split("=");a.data[i[0]]=i[1]})}else a.url=o;a.data[r.queryParam]=e,a.type=r.method,a.dataType=r.contentType,r.crossDomain&&(a.dataType="jsonp"),a.success=function(n){t.isFunction(r.onResult)&&(n=r.onResult.call(N,n)),I.add(i,r.jsonContainer?n[r.jsonContainer]:n),P.val().toLowerCase()===e&&$(e,r.jsonContainer?n[r.jsonContainer]:n)},t.ajax(a)}else if(r.local_data){var c=t.grep(r.local_data,function(t){return t[r.propertyToSearch].toLowerCase().indexOf(e.toLowerCase())>-1});t.isFunction(r.onResult)&&(c=r.onResult.call(N,c)),I.add(i,c),$(e,c)}}function S(){var t=r.url;return"function"==typeof r.url&&(t=r.url.call()),t}if("string"===t.type(a)||"function"===t.type(a)){r.url=a;var T=S();r.crossDomain===undefined&&(-1===T.indexOf("://")?r.crossDomain=!1:r.crossDomain=location.href.split(/\/+/g)[1]!==T.split(/\/+/g)[1])}else"object"==typeof a&&(r.local_data=a);r.classes?r.classes=t.extend({},i,r.classes):r.theme?(r.classes={},t.each(i,function(t,e){r.classes[t]=e+"-"+r.theme})):r.classes=i;var A,E,M=[],O=0,I=new t.TokenList.Cache,P=t('<input type="text"  autocomplete="off">').css({outline:"none"}).attr("id",r.idPrefix+e.id).focus(function(){null!==r.tokenLimit&&r.tokenLimit===O||b()}).blur(function(){g(),t(this).val("")}).bind("keyup keydown blur update",l).keydown(function(e){var i,a;switch(e.keyCode){case o.LEFT:case o.RIGHT:case o.UP:case o.DOWN:if(t(this).val()){var r=null;return(r=e.keyCode===o.DOWN||e.keyCode===o.RIGHT?t(F).next():t(F).prev()).length&&x(r),!1}i=B.prev(),a=B.next(),i.length&&i.get(0)===L||a.length&&a.get(0)===L?e.keyCode===o.LEFT||e.keyCode===o.UP?p(t(L),n.BEFORE):p(t(L),n.AFTER):e.keyCode!==o.LEFT&&e.keyCode!==o.UP||!i.length?e.keyCode!==o.RIGHT&&e.keyCode!==o.DOWN||!a.length||d(t(a.get(0))):d(t(i.get(0)));break;case o.BACKSPACE:if(i=B.prev(),!t(this).val().length)return L?(f(t(L)),N.change()):i.length&&d(t(i.get(0))),!1;1===t(this).val().length?g():setTimeout(function(){C()},5);break;case o.TAB:case o.ENTER:case o.NUMPAD_ENTER:case o.COMMA:if(F)return u(t(F).data("tokeninput")),N.change(),!1;break;case o.ESCAPE:return g(),!0;default:String.fromCharCode(e.which)&&setTimeout(function(){C()},5)}}),N=t(e).hide().val("").focus(function(){P.focus()}).blur(function(){P.blur()}),L=null,R=0,F=null,j=t("<ul />").addClass(r.classes.tokenList).click(function(e){var i=t(e.target).closest("li");i&&i.get(0)&&t.data(i.get(0),"tokeninput")?h(i):(L&&p(t(L),n.END),P.focus())}).mouseover(function(e){var i=t(e.target).closest("li");i&&L!==this&&i.addClass(r.classes.highlightedToken)}).mouseout(function(e){var i=t(e.target).closest("li");i&&L!==this&&i.removeClass(r.classes.highlightedToken)}).insertBefore(N),B=t("<li />").addClass(r.classes.inputToken).appendTo(j).append(P),q=t("<div>").addClass(r.classes.dropdown).appendTo("body").hide(),z=t("<tester/>").insertAfter(P).css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:P.css("fontSize"),fontFamily:P.css("fontFamily"),fontWeight:P.css("fontWeight"),letterSpacing:P.css("letterSpacing"),whiteSpace:"nowrap"});N.val("");var H=r.prePopulate||N.data("pre");r.processPrePopulate&&t.isFunction(r.onResult)&&(H=r.onResult.call(N,H)),H&&H.length&&t.each(H,function(t,e){c(e),s()}),t.isFunction(r.onReady)&&r.onReady.call(),this.clear=function(){j.children("li").each(function(){0===t(this).children("input").length&&f(t(this))})},this.add=function(t){u(t)},this.remove=function(e){j.children("li").each(function(){if(0===t(this).children("input").length){var i=t(this).data("tokeninput"),n=!0;for(var o in e)if(e[o]!==i[o]){n=!1;break}n&&f(t(this))}})},this.getTokens=function(){return M}},t.TokenList.Cache=function(e){var i=t.extend({max_size:500},e),n={},o=0,a=function(){n={},o=0};this.add=function(t,e){o>i.max_size&&a(),n[t]||(o+=1),n[t]=e},this.get=function(t){return n[t]}}}(jQuery),$.fn.hoverDelay=function(t){var e={delayIn:300,delayOut:300,handlerIn:function(){},handlerOut:function(){}};return t=$.extend(e,t),this.each(function(){var e,i,n=$(this);n.hover(function(){i&&clearTimeout(i),e=setTimeout(function(){t.handlerIn(n)},t.delayIn)},function(){e&&clearTimeout(e),i=setTimeout(function(){t.handlerOut(n)},t.delayOut)})})
/*! jQuery Timepicker Addon - v1.4 - 2013-08-11
* http://trentrichardson.com/examples/timepicker
* Copyright (c) 2013 Trent Richardson; Licensed MIT */},
/*! jQuery Timepicker Addon - v1.4 - 2013-08-11
* http://trentrichardson.com/examples/timepicker
* Copyright (c) 2013 Trent Richardson; Licensed MIT */
function($){if($.ui.timepicker=$.ui.timepicker||{},!$.ui.timepicker.version){$.extend($.ui,{timepicker:{version:"1.4"}});var Timepicker=function(){this.regional=[],this.regional[""]={currentText:"Agora",closeText:"Fechar",amNames:["a.m","AM","A"],pmNames:["p.m","PM","P"],timeFormat:"HH:mm:ss",timeSuffix:"",timeOnlyTitle:"Escolha o hor\xe1rio",timeText:"Hor\xe1rio",hourText:"Hora",minuteText:"Minuto",secondText:"Segundo",millisecText:"Milissegundos",microsecText:"Microssegundos",timezoneText:"Fuso hor\xe1rio",showSecond:!1,isRTL:!1},this._defaults={showButtonPanel:!0,timeOnly:!1,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:"slider",defaultValue:null,parse:"strict"},$.extend(this._defaults,this.regional[""])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,microsec_slider:null,timezone_select:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec","microsec"],support:{},control:null,setDefaults:function(t){return extendRemove(this._defaults,t||{}),this},_newInst:function($input,opts){var tp_inst=new Timepicker,inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults)if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue)try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}for(i in overrides={beforeShow:function(t,e){if($.isFunction(tp_inst._defaults.evnts.beforeShow))return tp_inst._defaults.evnts.beforeShow.call($input[0],t,e,tp_inst)},onChangeMonthYear:function(t,e,i){tp_inst._updateDateTime(i),$.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)&&tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],t,e,i,tp_inst)},onClose:function(t,e){!0===tp_inst.timeDefined&&""!==$input.val()&&tp_inst._updateDateTime(e),$.isFunction(tp_inst._defaults.evnts.onClose)&&tp_inst._defaults.evnts.onClose.call($input[0],t,e,tp_inst)}},overrides)overrides.hasOwnProperty(i)&&(fns[i]=opts[i]||null);tp_inst._defaults=$.extend({},this._defaults,inlineSettings,opts,overrides,{evnts:fns,timepicker:tp_inst}),tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(t){return t.toUpperCase()}),tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(t){return t.toUpperCase()}),tp_inst.support=detectSupport(tp_inst._defaults.timeFormat+(tp_inst._defaults.pickerTimeFormat?tp_inst._defaults.pickerTimeFormat:"")+(tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:"")),"string"==typeof tp_inst._defaults.controlType?("slider"===tp_inst._defaults.controlType&&"undefined"==typeof $.ui.slider&&(tp_inst._defaults.controlType="select"),tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]):tp_inst.control=tp_inst._defaults.controlType;var timezoneList=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840];null!==tp_inst._defaults.timezoneList&&(timezoneList=tp_inst._defaults.timezoneList);var tzl=timezoneList.length,tzi=0,tzv=null;if(tzl>0&&"object"!=typeof timezoneList[0])for(;tzi<tzl;tzi++)tzv=timezoneList[tzi],timezoneList[tzi]={value:tzv,label:$.timepicker.timezoneOffsetString(tzv,tp_inst.support.iso8601)};return tp_inst._defaults.timezoneList=timezoneList,tp_inst.timezone=null!==tp_inst._defaults.timezone?$.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone):-1*(new Date).getTimezoneOffset(),tp_inst.hour=tp_inst._defaults.hour<tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour,tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute,tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?tp_inst._defaults.secondMax:tp_inst._defaults.second,tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec,tp_inst.microsec=tp_inst._defaults.microsec<tp_inst._defaults.microsecMin?tp_inst._defaults.microsecMin:tp_inst._defaults.microsec>tp_inst._defaults.microsecMax?tp_inst._defaults.microsecMax:tp_inst._defaults.microsec,tp_inst.ampm="",tp_inst.$input=$input,tp_inst._defaults.altField&&(tp_inst.$altInput=$(tp_inst._defaults.altField).css({cursor:"pointer"}).focus(function(){$input.trigger("focus")})),0!==tp_inst._defaults.minDate&&0!==tp_inst._defaults.minDateTime||(tp_inst._defaults.minDate=new Date),0!==tp_inst._defaults.maxDate&&0!==tp_inst._defaults.maxDateTime||(tp_inst._defaults.maxDate=new Date),tp_inst._defaults.minDate!==undefined&&tp_inst._defaults.minDate instanceof Date&&(tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())),tp_inst._defaults.minDateTime!==undefined&&tp_inst._defaults.minDateTime instanceof Date&&(tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())),tp_inst._defaults.maxDate!==undefined&&tp_inst._defaults.maxDate instanceof Date&&(tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())),tp_inst._defaults.maxDateTime!==undefined&&tp_inst._defaults.maxDateTime instanceof Date&&(tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())),tp_inst.$input.bind("focus",function(){tp_inst._onFocus()}),tp_inst},_addTimePicker:function(t){var e=this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=this._parseTime(e),this._limitMinMaxDateTime(t,!1),this._injectTimePicker()},_parseTime:function(t,e){if(this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),e||!this._defaults.timeOnly){var i=$.datepicker._get(this.inst,"dateFormat");try{var n=parseDateTimeInternal(i,this._defaults.timeFormat,t,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!n.timeObj)return!1;$.extend(this,n.timeObj)}catch(a){return $.timepicker.log("Error parsing the date/time string: "+a+"\ndate/time string = "+t+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+i),!1}return!0}var o=$.datepicker.parseTime(this._defaults.timeFormat,t,this._defaults);return!!o&&($.extend(this,o),!0)},_injectTimePicker:function(){var t=this.inst.dpDiv,e=this.inst.settings,i=this,n="",o="",a=null,r={},s={},l=null,c=0,u=0;if(0===t.find("div.ui-timepicker-div").length&&e.showTimepicker){var d=' style="display:none;"',p='<div class="ui-timepicker-div'+(e.isRTL?" ui-timepicker-rtl":"")+'"><dl><dt class="ui_tpicker_time_label"'+(e.showTime?"":d)+">"+e.timeText+'</dt><dd class="ui_tpicker_time"'+(e.showTime?"":d)+"></dd>";for(c=0,u=this.units.length;c<u;c++){if(a=null!==e["show"+(o=(n=this.units[c]).substr(0,1).toUpperCase()+n.substr(1))]?e["show"+o]:this.support[n],r[n]=parseInt(e[n+"Max"]-(e[n+"Max"]-e[n+"Min"])%e["step"+o],10),s[n]=0,p+='<dt class="ui_tpicker_'+n+'_label"'+(a?"":d)+">"+e[n+"Text"]+'</dt><dd class="ui_tpicker_'+n+'"><div class="ui_tpicker_'+n+'_slider"'+(a?"":d)+"></div>",a&&e[n+"Grid"]>0){if(p+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>',"hour"===n)for(var h=e[n+"Min"];h<=r[n];h+=parseInt(e[n+"Grid"],10)){s[n]++;var f=$.datepicker.formatTime(this.support.ampm?"hht":"HH",{hour:h},e);p+='<td data-for="'+n+'">'+f+"</td>"}else for(var m=e[n+"Min"];m<=r[n];m+=parseInt(e[n+"Grid"],10))s[n]++,p+='<td data-for="'+n+'">'+(m<10?"0":"")+m+"</td>";p+="</tr></table></div>"}p+="</dd>"}var g=null!==e.showTimezone?e.showTimezone:this.support.timezone;p+='<dt class="ui_tpicker_timezone_label"'+(g?"":d)+">"+e.timezoneText+"</dt>",p+='<dd class="ui_tpicker_timezone" '+(g?"":d)+"></dd>";var v=$(p+="</dl></div>");for(!0===e.timeOnly&&(v.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+e.timeOnlyTitle+"</div></div>"),t.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()),c=0,u=i.units.length;c<u;c++)a=null!==e["show"+(o=(n=i.units[c]).substr(0,1).toUpperCase()+n.substr(1))]?e["show"+o]:this.support[n],i[n+"_slider"]=i.control.create(i,v.find(".ui_tpicker_"+n+"_slider"),n,i[n],e[n+"Min"],r[n],e["step"+o]),a&&e[n+"Grid"]>0&&(l=100*s[n]*e[n+"Grid"]/(r[n]-e[n+"Min"]),v.find(".ui_tpicker_"+n+" table").css({width:l+"%",marginLeft:e.isRTL?"0":l/(-2*s[n])+"%",marginRight:e.isRTL?l/(-2*s[n])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(){var t=$(this),e=t.html(),o=parseInt(e.replace(/[^0-9]/g),10),a=e.replace(/[^apm]/gi),r=t.data("for");"hour"===r&&(-1!==a.indexOf("p")&&o<12?o+=12:-1!==a.indexOf("a")&&12===o&&(o=0)),i.control.value(i,i[r+"_slider"],n,o),i._onTimeChange(),i._onSelectHandler()}).css({cursor:"pointer",width:100/s[n]+"%",textAlign:"center",overflow:"hidden"}));if(this.timezone_select=v.find(".ui_tpicker_timezone").append("<select></select>").find("select"),$.fn.append.apply(this.timezone_select,$.map(e.timezoneList,function(t){return $("<option />").val("object"==typeof t?t.value:t).text("object"==typeof t?t.label:t)})),"undefined"!=typeof this.timezone&&null!==this.timezone&&""!==this.timezone)-1*new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12).getTimezoneOffset()===this.timezone?selectLocalTimezone(i):this.timezone_select.val(this.timezone);else"undefined"!=typeof this.hour&&null!==this.hour&&""!==this.hour?this.timezone_select.val(e.timezone):selectLocalTimezone(i);this.timezone_select.change(function(){i._onTimeChange(),i._onSelectHandler()});var _=t.find(".ui-datepicker-buttonpane");if(_.length?_.before(v):t.append(v),this.$timeObj=v.find(".ui_tpicker_time"),null!==this.inst){var b=this.timeDefined;this._onTimeChange(),this.timeDefined=b}if(this._defaults.addSliderAccess){var y=this._defaults.sliderAccessArgs,w=this._defaults.isRTL;y.isRTL=w,setTimeout(function(){if(0===v.find(".ui-slider-access").length){v.find(".ui-slider:visible").sliderAccess(y);var t=v.find(".ui-slider-access:eq(0)").outerWidth(!0);t&&v.find("table:visible").each(function(){var e=$(this),i=e.outerWidth(),n=e.css(w?"marginRight":"marginLeft").toString().replace("%",""),o=i-t,a=n*o/i+"%",r={width:o,marginRight:0,marginLeft:0};r[w?"marginRight":"marginLeft"]=a,e.css(r)})}},10)}i._limitMinMaxDateTime(this.inst,!0)}},_limitMinMaxDateTime:function(t,e){var i=this._defaults,n=new Date(t.selectedYear,t.selectedMonth,t.selectedDay);if(this._defaults.showTimepicker){if(null!==$.datepicker._get(t,"minDateTime")&&$.datepicker._get(t,"minDateTime")!==undefined&&n){var o=$.datepicker._get(t,"minDateTime"),a=new Date(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0,0);null!==this.hourMinOriginal&&null!==this.minuteMinOriginal&&null!==this.secondMinOriginal&&null!==this.millisecMinOriginal&&null!==this.microsecMinOriginal||(this.hourMinOriginal=i.hourMin,this.minuteMinOriginal=i.minuteMin,this.secondMinOriginal=i.secondMin,this.millisecMinOriginal=i.millisecMin,this.microsecMinOriginal=i.microsecMin),t.settings.timeOnly||a.getTime()===n.getTime()?(this._defaults.hourMin=o.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=o.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=o.getSeconds(),this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=o.getMilliseconds(),this.millisec<=this._defaults.millisecMin?(this.millisec=this._defaults.millisecMin,this._defaults.microsecMin=o.getMicroseconds()):(this.microsec<this._defaults.microsecMin&&(this.microsec=this._defaults.microsecMin),this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)}if(null!==$.datepicker._get(t,"maxDateTime")&&$.datepicker._get(t,"maxDateTime")!==undefined&&n){var r=$.datepicker._get(t,"maxDateTime"),s=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0);null!==this.hourMaxOriginal&&null!==this.minuteMaxOriginal&&null!==this.secondMaxOriginal&&null!==this.millisecMaxOriginal||(this.hourMaxOriginal=i.hourMax,this.minuteMaxOriginal=i.minuteMax,this.secondMaxOriginal=i.secondMax,this.millisecMaxOriginal=i.millisecMax,this.microsecMaxOriginal=i.microsecMax),t.settings.timeOnly||s.getTime()===n.getTime()?(this._defaults.hourMax=r.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=r.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=r.getSeconds(),this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=r.getMilliseconds(),this.millisec>=this._defaults.millisecMax?(this.millisec=this._defaults.millisecMax,this._defaults.microsecMax=r.getMicroseconds()):(this.microsec>this._defaults.microsecMax&&(this.microsec=this._defaults.microsecMax),this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)}if(e!==undefined&&!0===e){var l=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),c=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),u=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),d=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10),p=parseInt(this._defaults.microsecMax-(this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec,10);this.hour_slider&&(this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:l}),this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)),this.minute_slider&&(this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:c}),this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)),this.second_slider&&(this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,max:u}),this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:d}),this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec)),this.microsec_slider&&(this.control.options(this,this.microsec_slider,"microsec",{min:this._defaults.microsecMin,max:p}),this.control.value(this,this.microsec_slider,"microsec",this.microsec-this.microsec%this._defaults.stepMicrosec))}}},_onTimeChange:function(){if(this._defaults.showTimepicker){var t=!!this.hour_slider&&this.control.value(this,this.hour_slider,"hour"),e=!!this.minute_slider&&this.control.value(this,this.minute_slider,"minute"),i=!!this.second_slider&&this.control.value(this,this.second_slider,"second"),n=!!this.millisec_slider&&this.control.value(this,this.millisec_slider,"millisec"),o=!!this.microsec_slider&&this.control.value(this,this.microsec_slider,"microsec"),a=!!this.timezone_select&&this.timezone_select.val(),r=this._defaults,s=r.pickerTimeFormat||r.timeFormat,l=r.pickerTimeSuffix||r.timeSuffix;"object"==typeof t&&(t=!1),"object"==typeof e&&(e=!1),"object"==typeof i&&(i=!1),"object"==typeof n&&(n=!1),"object"==typeof o&&(o=!1),"object"==typeof a&&(a=!1),!1!==t&&(t=parseInt(t,10)),!1!==e&&(e=parseInt(e,10)),!1!==i&&(i=parseInt(i,10)),!1!==n&&(n=parseInt(n,10)),!1!==o&&(o=parseInt(o,10));var c=r[t<12?"amNames":"pmNames"][0],u=t!==this.hour||e!==this.minute||i!==this.second||n!==this.millisec||o!==this.microsec||this.ampm.length>0&&t<12!=(-1!==$.inArray(this.ampm.toUpperCase(),this.amNames))||null!==this.timezone&&a!==this.timezone;u&&(!1!==t&&(this.hour=t),!1!==e&&(this.minute=e),!1!==i&&(this.second=i),!1!==n&&(this.millisec=n),!1!==o&&(this.microsec=o),!1!==a&&(this.timezone=a),this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0)),this.support.ampm&&(this.ampm=c),this.formattedTime=$.datepicker.formatTime(r.timeFormat,this,r),this.$timeObj&&(s===r.timeFormat?this.$timeObj.text(this.formattedTime+l):this.$timeObj.text($.datepicker.formatTime(s,this,r)+l)),this.timeDefined=!0,u&&this._updateDateTime()}},_onSelectHandler:function(){var t=this._defaults.onSelect||this.inst.settings.onSelect,e=this.$input?this.$input[0]:null;t&&e&&t.apply(e,[this.formattedDateTime,this])},_updateDateTime:function(t){var e=(t=this.inst||t).currentYear>0?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(t.selectedYear,t.selectedMonth,t.selectedDay),i=$.datepicker._daylightSavingAdjust(e),n=$.datepicker._get(t,"dateFormat"),o=$.datepicker._getFormatConfig(t),a=null!==i&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(n,null===i?new Date:i,o);var r=this.formattedDate;if(""===t.lastVa&&(t.currentYear=t.selectedYear,t.currentMonth=t.selectedMonth,t.currentDay=t.selectedDay),!0===this._defaults.timeOnly?r=this.formattedTime:!0!==this._defaults.timeOnly&&(this._defaults.alwaysSetTime||a)&&(r+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix),this.formattedDateTime=r,this._defaults.showTimepicker)if(this.$altInput&&!1===this._defaults.timeOnly&&!0===this._defaults.altFieldTimeOnly)this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate);else if(this.$altInput){this.$input.val(r);var s="",l=this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,c=this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix;this._defaults.timeOnly||(s=this._defaults.altFormat?$.datepicker.formatDate(this._defaults.altFormat,null===i?new Date:i,o):this.formattedDate)&&(s+=l),this._defaults.altTimeFormat?s+=$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+c:s+=this.formattedTime+c,this.$altInput.val(s)}else this.$input.val(r);else this.$input.val(this.formattedDate);this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var t=$.datepicker._getInst(this.$input.get(0)),e=$.datepicker._get(t,"timepicker");if(e&&e._defaults.timeOnly&&t.input.val()!==t.lastVal)try{$.datepicker._updateDatepicker(t)}catch(i){$.timepicker.log(i)}}},_controls:{slider:{create:function(t,e,i,n,o,a,r){var s=t._defaults.isRTL;return e.prop("slide",null).slider({orientation:"horizontal",value:s?-1*n:n,min:s?-1*a:o,max:s?-1*o:a,step:r,slide:function(e,n){t.control.value(t,$(this),i,s?-1*n.value:n.value),t._onTimeChange()},stop:function(){t._onSelectHandler()}})},options:function(t,e,i,n,o){if(t._defaults.isRTL){if("string"==typeof n)return"min"===n||"max"===n?o!==undefined?e.slider(n,-1*o):Math.abs(e.slider(n)):e.slider(n);var a=n.min,r=n.max;return n.min=n.max=null,a!==undefined&&(n.max=-1*a),r!==undefined&&(n.min=-1*r),e.slider(n)}return"string"==typeof n&&o!==undefined?e.slider(n,o):e.slider(n)},value:function(t,e,i,n){return t._defaults.isRTL?n!==undefined?e.slider("value",-1*n):Math.abs(e.slider("value")):n!==undefined?e.slider("value",n):e.slider("value")}},select:{create:function(t,e,i,n,o,a,r){for(var s='<select class="ui-timepicker-select" data-unit="'+i+'" data-min="'+o+'" data-max="'+a+'" data-step="'+r+'">',l=t._defaults.pickerTimeFormat||t._defaults.timeFormat,c=o;c<=a;c+=r)s+='<option value="'+c+'"'+(c===n?" selected":"")+">",s+="hour"===i?$.datepicker.formatTime($.trim(l.replace(/[^ht ]/gi,"")),{hour:c},t._defaults):"millisec"===i||"microsec"===i||c>=10?c:"0"+c.toString(),s+="</option>";return s+="</select>",e.children("select").remove(),$(s).appendTo(e).change(function(){t._onTimeChange(),t._onSelectHandler()}),e},options:function(t,e,i,n,o){var a={},r=e.children("select");if("string"==typeof n){if(o===undefined)return r.data(n);a[n]=o}else a=n;return t.control.create(t,e,r.data("unit"),r.val(),a.min||r.data("min"),a.max||r.data("max"),a.step||r.data("step"))},value:function(t,e,i,n){var o=e.children("select");return n!==undefined?o.val(n):o.val()}}}}),$.fn.extend({timepicker:function(t){t=t||{};var e=Array.prototype.slice.call(arguments);return"object"==typeof t&&(e[0]=$.extend(t,{timeOnly:!0})),$(this).each(function(){$.fn.datetimepicker.apply($(this),e)})},datetimepicker:function(t){var e=arguments;return"string"==typeof(t=t||{})?"getDate"===t?$.fn.datepicker.apply($(this[0]),e):this.each(function(){var t=$(this);t.datepicker.apply(t,e)}):this.each(function(){var e=$(this);e.datepicker($.timepicker._newInst(e,t)._defaults)})}}),$.datepicker.parseDateTime=function(t,e,i,n,o){var a=parseDateTimeInternal(t,e,i,n,o);if(a.timeObj){var r=a.timeObj;a.date.setHours(r.hour,r.minute,r.second,r.millisec),a.date.setMicroseconds(r.microsec)}return a.date},$.datepicker.parseTime=function(t,e,i){var n=extendRemove(extendRemove({},$.timepicker._defaults),i||{}),o=(t.replace(/\'.*?\'/g,"").indexOf("Z"),function(t,e,i){var n,o=function(t,e){var i=[];return t&&$.merge(i,t),e&&$.merge(i,e),"("+(i=$.map(i,function(t){return t.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")})).join("|")+")?"},a=function(t){var e=t.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),i={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(e)for(var n=0;n<e.length;n++)-1===i[e[n].toString().charAt(0)]&&(i[e[n].toString().charAt(0)]=n+1);return i},r="^"+t.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(t){var e=t.length;switch(t.charAt(0).toLowerCase()){case"h":case"m":case"s":return 1===e?"(\\d?\\d)":"(\\d{"+e+"})";case"l":case"c":return"(\\d?\\d?\\d)";case"z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case"t":return o(i.amNames,i.pmNames);default:return"("+t.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(t){return"\\"+t})+")?"}}).replace(/\s/g,"\\s?")+i.timeSuffix+"$",s=a(t),l="",c={hour:0,minute:0,second:0,millisec:0,microsec:0};return!!(n=e.match(new RegExp(r,"i")))&&(-1!==s.t&&(n[s.t]===undefined||0===n[s.t].length?(l="",c.ampm=""):(l=-1!==$.inArray(n[s.t].toUpperCase(),i.amNames)?"AM":"PM",c.ampm=i["AM"===l?"amNames":"pmNames"][0])),-1!==s.h&&("AM"===l&&"12"===n[s.h]?c.hour=0:"PM"===l&&"12"!==n[s.h]?c.hour=parseInt(n[s.h],10)+12:c.hour=Number(n[s.h])),-1!==s.m&&(c.minute=Number(n[s.m])),-1!==s.s&&(c.second=Number(n[s.s])),-1!==s.l&&(c.millisec=Number(n[s.l])),-1!==s.c&&(c.microsec=Number(n[s.c])),-1!==s.z&&n[s.z]!==undefined&&(c.timezone=$.timepicker.timezoneOffsetNumber(n[s.z])),c)}),a=function(t,e,i){try{var n=new Date("2012-01-01 "+e);if(isNaN(n.getTime())&&(n=new Date("2012-01-01T"+e),isNaN(n.getTime())&&(n=new Date("01/01/2012 "+e),isNaN(n.getTime()))))throw"Unable to parse time with native Date: "+e;return{hour:n.getHours(),minute:n.getMinutes(),second:n.getSeconds(),millisec:n.getMilliseconds(),microsec:n.getMicroseconds(),timezone:-1*n.getTimezoneOffset()}}catch(a){try{return o(t,e,i)}catch(r){$.timepicker.log("Unable to parse \ntimeString: "+e+"\ntimeFormat: "+t)}}return!1};return"function"==typeof n.parse?n.parse(t,e,n):"loose"===n.parse?a(t,e,n):o(t,e,n)},$.datepicker.formatTime=function(t,e,i){i=i||{},i=$.extend({},$.timepicker._defaults,i),e=$.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},e);var n=t,o=i.amNames[0],a=parseInt(e.hour,10);return a>11&&(o=i.pmNames[0]),n=n.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(t){switch(t){case"HH":return("0"+a).slice(-2);case"H":return a;case"hh":return("0"+convert24to12(a)).slice(-2);case"h":return convert24to12(a);case"mm":return("0"+e.minute).slice(-2);case"m":return e.minute;case"ss":return("0"+e.second).slice(-2);case"s":return e.second;case"l":return("00"+e.millisec).slice(-3);case"c":return("00"+e.microsec).slice(-3);case"z":return $.timepicker.timezoneOffsetString(null===e.timezone?i.timezone:e.timezone,!1);case"Z":return $.timepicker.timezoneOffsetString(null===e.timezone?i.timezone:e.timezone,!0);case"T":return o.charAt(0).toUpperCase();case"TT":return o.toUpperCase();case"t":return o.charAt(0).toLowerCase();case"tt":return o.toLowerCase();default:return t.replace(/'/g,"")}})},$.datepicker._base_selectDate=$.datepicker._selectDate,$.datepicker._selectDate=function(t,e){var i=this._getInst($(t)[0]),n=this._get(i,"timepicker");n?(n._limitMinMaxDateTime(i,!0),i.inline=i.stay_open=!0,this._base_selectDate(t,e),i.inline=i.stay_open=!1,this._notifyChange(i),this._updateDatepicker(i)):this._base_selectDate(t,e)},$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker,$.datepicker._updateDatepicker=function(t){var e=t.input[0];if(!($.datepicker._curInst&&$.datepicker._curInst!==t&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!==e||"boolean"==typeof t.stay_open&&!1!==t.stay_open)){this._base_updateDatepicker(t);var i=this._get(t,"timepicker");i&&i._addTimePicker(t)}},$.datepicker._base_doKeyPress=$.datepicker._doKeyPress,$.datepicker._doKeyPress=function(t){var e=$.datepicker._getInst(t.target),i=$.datepicker._get(e,"timepicker");if(i&&$.datepicker._get(e,"constrainInput")){var n=i.support.ampm,o=null!==i._defaults.showTimezone?i._defaults.showTimezone:i.support.timezone,a=$.datepicker._possibleChars($.datepicker._get(e,"dateFormat")),r=i._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,n?"APM":"").replace(/Tt/g,n?"AaPpMm":"").replace(/tT/g,n?"AaPpMm":"").replace(/T/g,n?"AP":"").replace(/tt/g,n?"apm":"").replace(/t/g,n?"ap":"")+" "+i._defaults.separator+i._defaults.timeSuffix+(o?i._defaults.timezoneList.join(""):"")+i._defaults.amNames.join("")+i._defaults.pmNames.join("")+a,s=String.fromCharCode(t.charCode===undefined?t.keyCode:t.charCode);return t.ctrlKey||s<" "||!a||r.indexOf(s)>-1}return $.datepicker._base_doKeyPress(t)},$.datepicker._base_updateAlternate=$.datepicker._updateAlternate,$.datepicker._updateAlternate=function(t){var e=this._get(t,"timepicker");if(e){var i=e._defaults.altField;if(i){e._defaults.altFormat||e._defaults.dateFormat;var n=this._getDate(t),o=$.datepicker._getFormatConfig(t),a="",r=e._defaults.altSeparator?e._defaults.altSeparator:e._defaults.separator,s=e._defaults.altTimeSuffix?e._defaults.altTimeSuffix:e._defaults.timeSuffix,l=null!==e._defaults.altTimeFormat?e._defaults.altTimeFormat:e._defaults.timeFormat;a+=$.datepicker.formatTime(l,e,e._defaults)+s,e._defaults.timeOnly||e._defaults.altFieldTimeOnly||null===n||(a=e._defaults.altFormat?$.datepicker.formatDate(e._defaults.altFormat,n,o)+r+a:e.formattedDate+r+a),$(i).val(a)}}else $.datepicker._base_updateAlternate(t)},$.datepicker._base_doKeyUp=$.datepicker._doKeyUp,$.datepicker._doKeyUp=function(t){var e=$.datepicker._getInst(t.target),i=$.datepicker._get(e,"timepicker");if(i&&i._defaults.timeOnly&&e.input.val()!==e.lastVal)try{$.datepicker._updateDatepicker(e)}catch(n){$.timepicker.log(n)}return $.datepicker._base_doKeyUp(t)},$.datepicker._base_gotoToday=$.datepicker._gotoToday,$.datepicker._gotoToday=function(t){var e=this._getInst($(t)[0]),i=e.dpDiv;this._base_gotoToday(t);var n=this._get(e,"timepicker");selectLocalTimezone(n);var o=new Date;this._setTime(e,o),$(".ui-datepicker-today",i).click()},$.datepicker._disableTimepickerDatepicker=function(t){var e=this._getInst(t);if(e){var i=this._get(e,"timepicker");$(t).datepicker("getDate"),i&&(e.settings.showTimepicker=!1,i._defaults.showTimepicker=!1,i._updateDateTime(e))}},$.datepicker._enableTimepickerDatepicker=function(t){var e=this._getInst(t);if(e){var i=this._get(e,"timepicker");$(t).datepicker("getDate"),i&&(e.settings.showTimepicker=!0,i._defaults.showTimepicker=!0,i._addTimePicker(e),i._updateDateTime(e))}},$.datepicker._setTime=function(t,e){var i=this._get(t,"timepicker");if(i){var n=i._defaults;i.hour=e?e.getHours():n.hour,i.minute=e?e.getMinutes():n.minute,i.second=e?e.getSeconds():n.second,i.millisec=e?e.getMilliseconds():n.millisec,i.microsec=e?e.getMicroseconds():n.microsec,i._limitMinMaxDateTime(t,!0),i._onTimeChange(),i._updateDateTime(t)}},$.datepicker._setTimeDatepicker=function(t,e,i){var n=this._getInst(t);if(n){var o,a=this._get(n,"timepicker");if(a)this._setDateFromField(n),e&&("string"==typeof e?(a._parseTime(e,i),(o=new Date).setHours(a.hour,a.minute,a.second,a.millisec),o.setMicroseconds(a.microsec)):(o=new Date(e.getTime())).setMicroseconds(e.getMicroseconds()),"Invalid Date"===o.toString()&&(o=undefined),this._setTime(n,o))}},$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker,$.datepicker._setDateDatepicker=function(t,e){var i=this._getInst(t);if(i){"string"==typeof e&&((e=new Date(e)).getTime()||$.timepicker.log("Error creating Date object from string."));var n,o=this._get(i,"timepicker");e instanceof Date?(n=new Date(e.getTime())).setMicroseconds(e.getMicroseconds()):n=e,o&&(o.support.timezone||null!==o._defaults.timezone||(o.timezone=-1*n.getTimezoneOffset()),e=$.timepicker.timezoneAdjust(e,o.timezone),n=$.timepicker.timezoneAdjust(n,o.timezone)),this._updateDatepicker(i),this._base_setDateDatepicker.apply(this,arguments),this._setTimeDatepicker(t,n,!0)}},$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker,$.datepicker._getDateDatepicker=function(t,e){var i=this._getInst(t);if(i){var n=this._get(i,"timepicker");if(n){i.lastVal===undefined&&this._setDateFromField(i,e);var o=this._getDate(i);return o&&n._parseTime($(t).val(),n.timeOnly)&&(o.setHours(n.hour,n.minute,n.second,n.millisec),o.setMicroseconds(n.microsec),null!=n.timezone&&(n.support.timezone||null!==n._defaults.timezone||(n.timezone=-1*o.getTimezoneOffset()),o=$.timepicker.timezoneAdjust(o,n.timezone))),o}return this._base_getDateDatepicker(t,e)}},$.datepicker._base_parseDate=$.datepicker.parseDate,$.datepicker.parseDate=function(t,e,i){var n;try{n=this._base_parseDate(t,e,i)}catch(o){if(!(o.indexOf(":")>=0))throw o;n=this._base_parseDate(t,e.substring(0,e.length-(o.length-o.indexOf(":")-2)),i),$.timepicker.log("Error parsing the date string: "+o+"\ndate string = "+e+"\ndate format = "+t)}return n},$.datepicker._base_formatDate=$.datepicker._formatDate,$.datepicker._formatDate=function(t){var e=this._get(t,"timepicker");return e?(e._updateDateTime(t),e.$input.val()):this._base_formatDate(t)
},$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker,$.datepicker._optionDatepicker=function(t,e,i){var n,o=this._getInst(t);if(!o)return null;var a=this._get(o,"timepicker");if(a){var r,s=null,l=null,c=null,u=a._defaults.evnts,d={};if("string"==typeof e){if("minDate"===e||"minDateTime"===e)s=i;else if("maxDate"===e||"maxDateTime"===e)l=i;else if("onSelect"===e)c=i;else if(u.hasOwnProperty(e)){if(void 0===i)return u[e];d[e]=i,n={}}}else if("object"==typeof e)for(r in e.minDate?s=e.minDate:e.minDateTime?s=e.minDateTime:e.maxDate?l=e.maxDate:e.maxDateTime&&(l=e.maxDateTime),u)u.hasOwnProperty(r)&&e[r]&&(d[r]=e[r]);for(r in d)d.hasOwnProperty(r)&&(u[r]=d[r],n||(n=$.extend({},e)),delete n[r]);if(n&&isEmptyObject(n))return;s?(s=0===s?new Date:new Date(s),a._defaults.minDate=s,a._defaults.minDateTime=s):l?(l=0===l?new Date:new Date(l),a._defaults.maxDate=l,a._defaults.maxDateTime=l):c&&(a._defaults.onSelect=c)}return i===undefined?this._base_optionDatepicker.call($.datepicker,t,e):this._base_optionDatepicker.call($.datepicker,t,n||e,i)};var isEmptyObject=function(t){var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0},extendRemove=function(t,e){for(var i in $.extend(t,e),e)null!==e[i]&&e[i]!==undefined||(t[i]=e[i]);return t},detectSupport=function(t){var e=t.replace(/'.*?'/g,"").toLowerCase(),i=function(t,e){return-1!==t.indexOf(e)};return{hour:i(e,"h"),minute:i(e,"m"),second:i(e,"s"),millisec:i(e,"l"),microsec:i(e,"c"),timezone:i(e,"z"),ampm:i(e,"t")&&i(t,"h"),iso8601:i(t,"Z")}},convert24to12=function(t){return 0===(t%=12)&&(t=12),String(t)},computeEffectiveSetting=function(t,e){return t&&t[e]?t[e]:$.timepicker._defaults[e]},splitDateTime=function(t,e){var i=computeEffectiveSetting(e,"separator"),n=computeEffectiveSetting(e,"timeFormat").split(i).length,o=t.split(i),a=o.length;return a>1?{dateString:o.splice(0,a-n).join(i),timeString:o.splice(0,n).join(i)}:{dateString:t,timeString:""}},parseDateTimeInternal=function(t,e,i,n,o){var a,r,s;if(r=splitDateTime(i,o),a=$.datepicker._base_parseDate(t,r.dateString,n),""===r.timeString)return{date:a};if(!(s=$.datepicker.parseTime(e,r.timeString,o)))throw"Wrong time format";return{date:a,timeObj:s}},selectLocalTimezone=function(t,e){if(t&&t.timezone_select){var i=e||new Date;t.timezone_select.val(-i.getTimezoneOffset())}};$.timepicker=new Timepicker,$.timepicker.timezoneOffsetString=function(t,e){if(isNaN(t)||t>840||t<-720)return t;var i=t%60,n=(t-i)/60,o=e?":":"",a=(t>=0?"+":"-")+("0"+Math.abs(n)).slice(-2)+o+("0"+Math.abs(i)).slice(-2);return"+00:00"===a?"Z":a},$.timepicker.timezoneOffsetNumber=function(t){var e=t.toString().replace(":","");return"Z"===e.toUpperCase()?0:/^(\-|\+)\d{4}$/.test(e)?("-"===e.substr(0,1)?-1:1)*(60*parseInt(e.substr(1,2),10)+parseInt(e.substr(3,2),10)):t},$.timepicker.timezoneAdjust=function(t,e){var i=$.timepicker.timezoneOffsetNumber(e);return isNaN(i)||t.setMinutes(t.getMinutes()+-t.getTimezoneOffset()-i),t},$.timepicker.timeRange=function(t,e,i){return $.timepicker.handleRange("timepicker",t,e,i)},$.timepicker.datetimeRange=function(t,e,i){$.timepicker.handleRange("datetimepicker",t,e,i)},$.timepicker.dateRange=function(t,e,i){$.timepicker.handleRange("datepicker",t,e,i)},$.timepicker.handleRange=function(t,e,i,n){function o(o,a){var r=e[t]("getDate"),s=i[t]("getDate"),l=o[t]("getDate");if(null!==r){var c=new Date(r.getTime()),u=new Date(r.getTime());c.setMilliseconds(c.getMilliseconds()+n.minInterval),u.setMilliseconds(u.getMilliseconds()+n.maxInterval),n.minInterval>0&&c>s?i[t]("setDate",c):n.maxInterval>0&&u<s?i[t]("setDate",u):r>s&&a[t]("setDate",l)}}function a(e,i,o){if(e.val()){var a=e[t].call(e,"getDate");null!==a&&n.minInterval>0&&("minDate"===o&&a.setMilliseconds(a.getMilliseconds()+n.minInterval),"maxDate"===o&&a.setMilliseconds(a.getMilliseconds()-n.minInterval)),a.getTime&&i[t].call(i,"option",o,a)}}return n=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},n),$.fn[t].call(e,$.extend({onClose:function(){o($(this),i)},onSelect:function(){a($(this),i,"minDate")}},n,n.start)),$.fn[t].call(i,$.extend({onClose:function(){o($(this),e)},onSelect:function(){a($(this),e,"maxDate")}},n,n.end)),o(e,i),a(e,i,"minDate"),a(i,e,"maxDate"),$([e.get(0),i.get(0)])},$.timepicker.log=function(t){window.console&&window.console.log(t)},$.timepicker._util={_extendRemove:extendRemove,_isEmptyObject:isEmptyObject,_convert24to12:convert24to12,_detectSupport:detectSupport,_selectLocalTimezone:selectLocalTimezone,_computeEffectiveSetting:computeEffectiveSetting,_splitDateTime:splitDateTime,_parseDateTimeInternal:parseDateTimeInternal},Date.prototype.getMicroseconds||(Date.prototype.microseconds=0,Date.prototype.getMicroseconds=function(){return this.microseconds},Date.prototype.setMicroseconds=function(t){return this.setMilliseconds(this.getMilliseconds()+Math.floor(t/1e3)),this.microseconds=t%1e3,this}),$.timepicker.version="1.4"}}(jQuery),$(function(t){t.datepicker.regional["pt-BR"]={closeText:"Fechar",prevText:"&#x3c;Anterior",nextText:"Pr&oacute;ximo&#x3e;",currentText:"Hoje",monthNames:["Janeiro","Fevereiro","Mar&ccedil;o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-feira","Ter&ccedil;a-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sabado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional["pt-BR"])}),$(function(t){t.timepicker.regional["pt-BR"]={timeOnlyTitle:"Escolha o hor\xe1rio",timeText:"Hor\xe1rio",hourText:"Hora",minuteText:"Minutos",secondText:"Segundos",millisecText:"Milissegundos",microsecText:"Microssegundos",timezoneText:"Fuso hor\xe1rio",currentText:"Agora",closeText:"Fechar",timeFormat:"HH:mm",amNames:["a.m.","AM","A"],pmNames:["p.m.","PM","P"],isRTL:!1},t.timepicker.setDefaults(t.timepicker.regional["pt-BR"])}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";function t(){return Sn.apply(null,arguments)}function e(t){Sn=t}function i(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function n(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function o(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function a(t){return void 0===t}function r(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function s(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function l(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function c(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function u(t,e){for(var i in e)c(e,i)&&(t[i]=e[i]);return c(e,"toString")&&(t.toString=e.toString),c(e,"valueOf")&&(t.valueOf=e.valueOf),t}function d(t,e,i,n){return ke(t,e,i,n,!0).utc()}function p(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function h(t){return null==t._pf&&(t._pf=p()),t._pf}function f(t){if(null==t._isValid){var e=h(t),i=Tn.call(e.parsedDateParts,function(t){return null!=t}),n=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i);if(t._strict&&(n=n&&0===e.charsLeftOver&&0===e.unusedTokens.length&&e.bigHour===undefined),null!=Object.isFrozen&&Object.isFrozen(t))return n;t._isValid=n}return t._isValid}function m(t){var e=d(NaN);return null!=t?u(h(e),t):h(e).userInvalidated=!0,e}function g(t,e){var i,n,o;if(a(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),a(e._i)||(t._i=e._i),a(e._f)||(t._f=e._f),a(e._l)||(t._l=e._l),a(e._strict)||(t._strict=e._strict),a(e._tzm)||(t._tzm=e._tzm),a(e._isUTC)||(t._isUTC=e._isUTC),a(e._offset)||(t._offset=e._offset),a(e._pf)||(t._pf=h(e)),a(e._locale)||(t._locale=e._locale),En.length>0)for(i=0;i<En.length;i++)a(o=e[n=En[i]])||(t[n]=o);return t}function v(e){g(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===Mn&&(Mn=!0,t.updateOffset(this),Mn=!1)}function _(t){return t instanceof v||null!=t&&null!=t._isAMomentObject}function b(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function y(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=b(e)),i}function w(t,e,i){var n,o=Math.min(t.length,e.length),a=Math.abs(t.length-e.length),r=0;for(n=0;n<o;n++)(i&&t[n]!==e[n]||!i&&y(t[n])!==y(e[n]))&&r++;return r+a}function $(e){!1===t.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function x(e,i){var n=!0;return u(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),n){for(var o,a=[],r=0;r<arguments.length;r++){if(o="","object"==typeof arguments[r]){for(var s in o+="\n["+r+"] ",arguments[0])o+=s+": "+arguments[0][s]+", ";o=o.slice(0,-2)}else o=arguments[r];a.push(o)}$(e+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),n=!1}return i.apply(this,arguments)},i)}function k(e,i){null!=t.deprecationHandler&&t.deprecationHandler(e,i),On[e]||($(i),On[e]=!0)}function C(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function D(t){var e,i;for(i in t)C(e=t[i])?this[i]=e:this["_"+i]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function S(t,e){var i,o=u({},t);for(i in e)c(e,i)&&(n(t[i])&&n(e[i])?(o[i]={},u(o[i],t[i]),u(o[i],e[i])):null!=e[i]?o[i]=e[i]:delete o[i]);for(i in t)c(t,i)&&!c(e,i)&&n(t[i])&&(o[i]=u({},o[i]));return o}function T(t){null!=t&&this.set(t)}function A(t,e,i){var n=this._calendar[t]||this._calendar.sameElse;return C(n)?n.call(e,i):n}function E(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function M(){return this._invalidDate}function O(t){return this._ordinal.replace("%d",t)}function I(t,e,i,n){var o=this._relativeTime[i];return C(o)?o(t,e,i,n):o.replace(/%d/i,t)}function P(t,e){var i=this._relativeTime[t>0?"future":"past"];return C(i)?i(e):i.replace(/%s/i,e)}function N(t,e){var i=t.toLowerCase();jn[i]=jn[i+"s"]=jn[e]=t}function L(t){return"string"==typeof t?jn[t]||jn[t.toLowerCase()]:undefined}function R(t){var e,i,n={};for(i in t)c(t,i)&&(e=L(i))&&(n[e]=t[i]);return n}function F(t,e){Bn[t]=e}function j(t){var e=[];for(var i in t)e.push({unit:i,priority:Bn[i]});return e.sort(function(t,e){return t.priority-e.priority}),e}function B(t,e,i){var n=""+Math.abs(t),o=e-n.length;return(t>=0?i?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+n}function q(t,e,i,n){var o=n;"string"==typeof n&&(o=function(){return this[n]()}),t&&(Wn[t]=o),e&&(Wn[e[0]]=function(){return B(o.apply(this,arguments),e[1],e[2])}),i&&(Wn[i]=function(){return this.localeData().ordinal(o.apply(this,arguments),t)})}function z(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function H(t){var e,i,n=t.match(qn);for(e=0,i=n.length;e<i;e++)Wn[n[e]]?n[e]=Wn[n[e]]:n[e]=z(n[e]);return function(e){var o,a="";for(o=0;o<i;o++)a+=C(n[o])?n[o].call(e,t):n[o];return a}}function W(t,e){return t.isValid()?(e=Y(e,t.localeData()),Hn[e]=Hn[e]||H(e),Hn[e](t)):t.localeData().invalidDate()}function Y(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(zn.lastIndex=0;n>=0&&zn.test(t);)t=t.replace(zn,i),zn.lastIndex=0,n-=1;return t}function V(t,e,i){lo[t]=C(e)?e:function(t){return t&&i?i:e}}function U(t,e){return c(lo,t)?lo[t](e._strict,e._locale):new RegExp(G(t))}function G(t){return K(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,o){return e||i||n||o}))}function K(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function J(t,e){var i,n=e;for("string"==typeof t&&(t=[t]),r(e)&&(n=function(t,i){i[e]=y(t)}),i=0;i<t.length;i++)co[t[i]]=n}function Q(t,e){J(t,function(t,i,n,o){n._w=n._w||{},e(t,n._w,n,o)})}function X(t,e,i){null!=e&&c(co,t)&&co[t](e,i._a,i,t)}function Z(t){return tt(t)?366:365}function tt(t){return t%4==0&&t%100!=0||t%400==0}function et(){return tt(this.year())}function it(e,i){return function(n){return null!=n?(ot(this,e,n),t.updateOffset(this,i),this):nt(this,e)}}function nt(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function ot(t,e,i){t.isValid()&&!isNaN(i)&&("FullYear"===e&&tt(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),lt(i,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](i))}function at(t){return C(this[t=L(t)])?this[t]():this}function rt(t,e){if("object"==typeof t)for(var i=j(t=R(t)),n=0;n<i.length;n++)this[i[n].unit](t[i[n].unit]);else if(C(this[t=L(t)]))return this[t](e);return this}function st(t,e){return(t%e+e)%e}function lt(t,e){if(isNaN(t)||isNaN(e))return NaN;var i=st(e,12);return t+=(e-i)/12,1===i?tt(t)?29:28:31-i%7%2}function ct(t,e){return t?i(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||$o).test(e)?"format":"standalone"][t.month()]:i(this._months)?this._months:this._months.standalone}function ut(t,e){return t?i(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[$o.test(e)?"format":"standalone"][t.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function dt(t,e,i){var n,o,a,r=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)a=d([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(a,"").toLocaleLowerCase();return i?"MMM"===e?-1!==(o=yo.call(this._shortMonthsParse,r))?o:null:-1!==(o=yo.call(this._longMonthsParse,r))?o:null:"MMM"===e?-1!==(o=yo.call(this._shortMonthsParse,r))?o:-1!==(o=yo.call(this._longMonthsParse,r))?o:null:-1!==(o=yo.call(this._longMonthsParse,r))?o:-1!==(o=yo.call(this._shortMonthsParse,r))?o:null}function pt(t,e,i){var n,o,a;if(this._monthsParseExact)return dt.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(o=d([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(a="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(a.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}}function ht(t,e){var i;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=y(e);else if(!r(e=t.localeData().monthsParse(e)))return t;return i=Math.min(t.date(),lt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function ft(e){return null!=e?(ht(this,e),t.updateOffset(this,!0),this):nt(this,"Month")}function mt(){return lt(this.year(),this.month())}function gt(t){return this._monthsParseExact?(c(this,"_monthsRegex")||_t.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=Co),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function vt(t){return this._monthsParseExact?(c(this,"_monthsRegex")||_t.call(this),t?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=Do),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function _t(){function t(t,e){return e.length-t.length}var e,i,n=[],o=[],a=[];for(e=0;e<12;e++)i=d([2e3,e]),n.push(this.monthsShort(i,"")),o.push(this.months(i,"")),a.push(this.months(i,"")),a.push(this.monthsShort(i,""));for(n.sort(t),o.sort(t),a.sort(t),e=0;e<12;e++)n[e]=K(n[e]),o[e]=K(o[e]);for(e=0;e<24;e++)a[e]=K(a[e]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function bt(t,e,i,n,o,a,r){var s=new Date(t,e,i,n,o,a,r);return t<100&&t>=0&&isFinite(s.getFullYear())&&s.setFullYear(t),s}function yt(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function wt(t,e,i){var n=7+e-i;return-((7+yt(t,0,n).getUTCDay()-e)%7)+n-1}function $t(t,e,i,n,o){var a,r,s=1+7*(e-1)+(7+i-n)%7+wt(t,n,o);return s<=0?r=Z(a=t-1)+s:s>Z(t)?(a=t+1,r=s-Z(t)):(a=t,r=s),{year:a,dayOfYear:r}}function xt(t,e,i){var n,o,a=wt(t.year(),e,i),r=Math.floor((t.dayOfYear()-a-1)/7)+1;return r<1?n=r+kt(o=t.year()-1,e,i):r>kt(t.year(),e,i)?(n=r-kt(t.year(),e,i),o=t.year()+1):(o=t.year(),n=r),{week:n,year:o}}function kt(t,e,i){var n=wt(t,e,i),o=wt(t+1,e,i);return(Z(t)-n+o)/7}function Ct(t){return xt(t,this._week.dow,this._week.doy).week}function Dt(){return this._week.dow}function St(){return this._week.doy}function Tt(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function At(t){var e=xt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function Et(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}function Mt(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Ot(t,e){return t?i(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:i(this._weekdays)?this._weekdays:this._weekdays.standalone}function It(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Pt(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Nt(t,e,i){var n,o,a,r=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)a=d([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(a,"").toLocaleLowerCase();return i?"dddd"===e?-1!==(o=yo.call(this._weekdaysParse,r))?o:null:"ddd"===e?-1!==(o=yo.call(this._shortWeekdaysParse,r))?o:null:-1!==(o=yo.call(this._minWeekdaysParse,r))?o:null:"dddd"===e?-1!==(o=yo.call(this._weekdaysParse,r))?o:-1!==(o=yo.call(this._shortWeekdaysParse,r))?o:-1!==(o=yo.call(this._minWeekdaysParse,r))?o:null:"ddd"===e?-1!==(o=yo.call(this._shortWeekdaysParse,r))?o:-1!==(o=yo.call(this._weekdaysParse,r))?o:-1!==(o=yo.call(this._minWeekdaysParse,r))?o:null:-1!==(o=yo.call(this._minWeekdaysParse,r))?o:-1!==(o=yo.call(this._weekdaysParse,r))?o:-1!==(o=yo.call(this._shortWeekdaysParse,r))?o:null}function Lt(t,e,i){var n,o,a;if(this._weekdaysParseExact)return Nt.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(o=d([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(o,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(o,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(o,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(a="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[n]=new RegExp(a.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[n].test(t))return n;if(i&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(i&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!i&&this._weekdaysParse[n].test(t))return n}}function Rt(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Et(t,this.localeData()),this.add(t-e,"d")):e}function Ft(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function jt(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=Mt(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function Bt(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ht.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=Mo),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function qt(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ht.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Oo),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function zt(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ht.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Io),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ht(){function t(t,e){return e.length-t.length}var e,i,n,o,a,r=[],s=[],l=[],c=[];for(e=0;e<7;e++)i=d([2e3,1]).day(e),n=this.weekdaysMin(i,""),o=this.weekdaysShort(i,""),a=this.weekdays(i,""),r.push(n),s.push(o),l.push(a),c.push(n),c.push(o),c.push(a);for(r.sort(t),s.sort(t),l.sort(t),c.sort(t),e=0;e<7;e++)s[e]=K(s[e]),l[e]=K(l[e]),c[e]=K(c[e]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Wt(){return this.hours()%12||12}function Yt(){return this.hours()||24}function Vt(t,e){q(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Ut(t,e){return e._meridiemParse}function Gt(t){return"p"===(t+"").toLowerCase().charAt(0)}function Kt(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"}function Jt(t){return t?t.toLowerCase().replace("_","-"):t}function Qt(t){for(var e,i,n,o,a=0;a<t.length;){for(e=(o=Jt(t[a]).split("-")).length,i=(i=Jt(t[a+1]))?i.split("-"):null;e>0;){if(n=Xt(o.slice(0,e).join("-")))return n;if(i&&i.length>=e&&w(o,i,!0)>=e-1)break;e--}a++}return null}function Xt(t){var e=null;if(!Fo[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=Po._abbr,require("./locale/"+t),Zt(e)}catch(i){}return Fo[t]}function Zt(t,e){var i;return t&&(i=a(e)?ie(t):te(t,e))&&(Po=i),Po._abbr}function te(t,e){if(null!==e){var i=Ro;if(e.abbr=t,null!=Fo[t])k("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Fo[t]._config;else if(null!=e.parentLocale){if(null==Fo[e.parentLocale])return jo[e.parentLocale]||(jo[e.parentLocale]=[]),jo[e.parentLocale].push({name:t,config:e}),null;i=Fo[e.parentLocale]._config}return Fo[t]=new T(S(i,e)),jo[t]&&jo[t].forEach(function(t){te(t.name,t.config)}),Zt(t),Fo[t]}return delete Fo[t],null}function ee(t,e){if(null!=e){var i,n,o=Ro;null!=(n=Xt(t))&&(o=n._config),(i=new T(e=S(o,e))).parentLocale=Fo[t],Fo[t]=i,Zt(t)}else null!=Fo[t]&&(null!=Fo[t].parentLocale?Fo[t]=Fo[t].parentLocale:null!=Fo[t]&&delete Fo[t]);return Fo[t]}function ie(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Po;if(!i(t)){if(e=Xt(t))return e;t=[t]}return Qt(t)}function ne(){return An(Fo)}function oe(t){var e,i=t._a;return i&&-2===h(t).overflow&&(e=i[po]<0||i[po]>11?po:i[ho]<1||i[ho]>lt(i[uo],i[po])?ho:i[fo]<0||i[fo]>24||24===i[fo]&&(0!==i[mo]||0!==i[go]||0!==i[vo])?fo:i[mo]<0||i[mo]>59?mo:i[go]<0||i[go]>59?go:i[vo]<0||i[vo]>999?vo:-1,h(t)._overflowDayOfYear&&(e<uo||e>ho)&&(e=ho),h(t)._overflowWeeks&&-1===e&&(e=_o),h(t)._overflowWeekday&&-1===e&&(e=bo),h(t).overflow=e),t}function ae(t,e,i){return null!=t?t:null!=e?e:i}function re(e){var i=new Date(t.now());return e._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}function se(t){var e,i,n,o,a,r=[];if(!t._d){for(n=re(t),t._w&&null==t._a[ho]&&null==t._a[po]&&le(t),null!=t._dayOfYear&&(a=ae(t._a[uo],n[uo]),(t._dayOfYear>Z(a)||0===t._dayOfYear)&&(h(t)._overflowDayOfYear=!0),i=yt(a,0,t._dayOfYear),t._a[po]=i.getUTCMonth(),t._a[ho]=i.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=r[e]=n[e];for(;e<7;e++)t._a[e]=r[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[fo]&&0===t._a[mo]&&0===t._a[go]&&0===t._a[vo]&&(t._nextDay=!0,t._a[fo]=0),t._d=(t._useUTC?yt:bt).apply(null,r),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[fo]=24),t._w&&"undefined"!=typeof t._w.d&&t._w.d!==o&&(h(t).weekdayMismatch=!0)}}function le(t){var e,i,n,o,a,r,s,l;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)a=1,r=4,i=ae(e.GG,t._a[uo],xt(Ce(),1,4).year),n=ae(e.W,1),((o=ae(e.E,1))<1||o>7)&&(l=!0);else{a=t._locale._week.dow,r=t._locale._week.doy;var c=xt(Ce(),a,r);i=ae(e.gg,t._a[uo],c.year),n=ae(e.w,c.week),null!=e.d?((o=e.d)<0||o>6)&&(l=!0):null!=e.e?(o=e.e+a,(e.e<0||e.e>6)&&(l=!0)):o=a}n<1||n>kt(i,a,r)?h(t)._overflowWeeks=!0:null!=l?h(t)._overflowWeekday=!0:(s=$t(i,n,o,a,r),t._a[uo]=s.year,t._dayOfYear=s.dayOfYear)}function ce(t){var e,i,n,o,a,r,s=t._i,l=Bo.exec(s)||qo.exec(s);if(l){for(h(t).iso=!0,e=0,i=Ho.length;e<i;e++)if(Ho[e][1].exec(l[1])){o=Ho[e][0],n=!1!==Ho[e][2];break}if(null==o)return void(t._isValid=!1);if(l[3]){for(e=0,i=Wo.length;e<i;e++)if(Wo[e][1].exec(l[3])){a=(l[2]||" ")+Wo[e][0];break}if(null==a)return void(t._isValid=!1)}if(!n&&null!=a)return void(t._isValid=!1);if(l[4]){if(!zo.exec(l[4]))return void(t._isValid=!1);r="Z"}t._f=o+(a||"")+(r||""),ve(t)}else t._isValid=!1}function ue(t,e,i,n,o,a){var r=[de(t),ko.indexOf(e),parseInt(i,10),parseInt(n,10),parseInt(o,10)];return a&&r.push(parseInt(a,10)),r}function de(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function pe(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}function he(t,e,i){if(t&&Ao.indexOf(t)!==new Date(e[0],e[1],e[2]).getDay())return h(i).weekdayMismatch=!0,i._isValid=!1,!1;return!0}function fe(t,e,i){if(t)return Uo[t];if(e)return 0;var n=parseInt(i,10),o=n%100;return 60*((n-o)/100)+o}function me(t){var e=Vo.exec(pe(t._i));if(e){var i=ue(e[4],e[3],e[2],e[5],e[6],e[7]);if(!he(e[1],i,t))return;t._a=i,t._tzm=fe(e[8],e[9],e[10]),t._d=yt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),h(t).rfc2822=!0}else t._isValid=!1}function ge(e){var i=Yo.exec(e._i);null===i?(ce(e),!1===e._isValid&&(delete e._isValid,me(e),!1===e._isValid&&(delete e._isValid,t.createFromInputFallback(e)))):e._d=new Date(+i[1])}function ve(e){if(e._f!==t.ISO_8601)if(e._f!==t.RFC_2822){e._a=[],h(e).empty=!0;var i,n,o,a,r,s=""+e._i,l=s.length,c=0;for(o=Y(e._f,e._locale).match(qn)||[],i=0;i<o.length;i++)a=o[i],(n=(s.match(U(a,e))||[])[0])&&((r=s.substr(0,s.indexOf(n))).length>0&&h(e).unusedInput.push(r),s=s.slice(s.indexOf(n)+n.length),c+=n.length),Wn[a]?(n?h(e).empty=!1:h(e).unusedTokens.push(a),X(a,n,e)):e._strict&&!n&&h(e).unusedTokens.push(a);h(e).charsLeftOver=l-c,s.length>0&&h(e).unusedInput.push(s),e._a[fo]<=12&&!0===h(e).bigHour&&e._a[fo]>0&&(h(e).bigHour=undefined),h(e).parsedDateParts=e._a.slice(0),h(e).meridiem=e._meridiem,e._a[fo]=_e(e._locale,e._a[fo],e._meridiem),se(e),oe(e)}else me(e);else ce(e)}function _e(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?((n=t.isPM(i))&&e<12&&(e+=12),n||12!==e||(e=0),e):e}function be(t){var e,i,n,o,a;if(0===t._f.length)return h(t).invalidFormat=!0,void(t._d=new Date(NaN));for(o=0;o<t._f.length;o++)a=0,e=g({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[o],ve(e),f(e)&&(a+=h(e).charsLeftOver,a+=10*h(e).unusedTokens.length,h(e).score=a,(null==n||a<n)&&(n=a,i=e));u(t,i||e)}function ye(t){if(!t._d){var e=R(t._i);t._a=l([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),se(t)}}function we(t){var e=new v(oe($e(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=undefined),e}function $e(t){var e=t._i,n=t._f;return t._locale=t._locale||ie(t._l),null===e||n===undefined&&""===e?m({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),_(e)?new v(oe(e)):(s(e)?t._d=e:i(n)?be(t):n?ve(t):xe(t),f(t)||(t._d=null),t))}function xe(e){var o=e._i;a(o)?e._d=new Date(t.now()):s(o)?e._d=new Date(o.valueOf()):"string"==typeof o?ge(e):i(o)?(e._a=l(o.slice(0),function(t){return parseInt(t,10)}),se(e)):n(o)?ye(e):r(o)?e._d=new Date(o):t.createFromInputFallback(e)}function ke(t,e,a,r,s){var l={};return!0!==a&&!1!==a||(r=a,a=undefined),(n(t)&&o(t)||i(t)&&0===t.length)&&(t=undefined),l._isAMomentObject=!0,l._useUTC=l._isUTC=s,l._l=a,l._i=t,l._f=e,l._strict=r,we(l)}function Ce(t,e,i,n){return ke(t,e,i,n,!1)}function De(t,e){var n,o;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return Ce();for(n=e[0],o=1;o<e.length;++o)e[o].isValid()&&!e[o][t](n)||(n=e[o]);return n}function Se(){return De("isBefore",[].slice.call(arguments,0))}function Te(){return De("isAfter",[].slice.call(arguments,0))}function Ae(t){for(var e in t)if(-1===yo.call(Qo,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var i=!1,n=0;n<Qo.length;++n)if(t[Qo[n]]){if(i)return!1;parseFloat(t[Qo[n]])!==y(t[Qo[n]])&&(i=!0)}return!0}function Ee(){return this._isValid}function Me(){return Je(NaN)}function Oe(t){var e=R(t),i=e.year||0,n=e.quarter||0,o=e.month||0,a=e.week||0,r=e.day||0,s=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=Ae(e),this._milliseconds=+u+1e3*c+6e4*l+1e3*s*60*60,this._days=+r+7*a,this._months=+o+3*n+12*i,this._data={},this._locale=ie(),this._bubble()}function Ie(t){return t instanceof Oe}function Pe(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Ne(t,e){q(t,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+B(~~(t/60),2)+e+B(~~t%60,2)})}function Le(t,e){var i=(e||"").match(t);if(null===i)return null;var n=((i[i.length-1]||[])+"").match(Xo)||["-",0,0],o=60*n[1]+y(n[2]);return 0===o?0:"+"===n[0]?o:-o}function Re(e,i){var n,o;return i._isUTC?(n=i.clone(),o=(_(e)||s(e)?e.valueOf():Ce(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+o),t.updateOffset(n,!1),n):Ce(e).local()}function Fe(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function je(e,i,n){var o,a=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Le(ao,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&i&&(o=Fe(this)),this._offset=e,this._isUTC=!0,null!=o&&this.add(o,"m"),a!==e&&(!i||this._changeInProgress?ei(this,Je(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:Fe(this)}function Be(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function qe(t){return this.utcOffset(0,t)}function ze(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Fe(this),"m")),this}function He(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Le(oo,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function We(t){return!!this.isValid()&&(t=t?Ce(t).utcOffset():0,(this.utcOffset()-t)%60==0)}function Ye(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ve(){if(!a(this._isDSTShifted))return this._isDSTShifted;var t={};if(g(t,this),(t=$e(t))._a){var e=t._isUTC?d(t._a):Ce(t._a);this._isDSTShifted=this.isValid()&&w(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ue(){return!!this.isValid()&&!this._isUTC}function Ge(){return!!this.isValid()&&this._isUTC}function Ke(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Je(t,e){var i,n,o,a=t,s=null;return Ie(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:r(t)?(a={},e?a[e]=t:a.milliseconds=t):(s=Zo.exec(t))?(i="-"===s[1]?-1:1,a={y:0,d:y(s[ho])*i,h:y(s[fo])*i,m:y(s[mo])*i,
s:y(s[go])*i,ms:y(Pe(1e3*s[vo]))*i}):(s=ta.exec(t))?(i="-"===s[1]?-1:(s[1],1),a={y:Qe(s[2],i),M:Qe(s[3],i),w:Qe(s[4],i),d:Qe(s[5],i),h:Qe(s[6],i),m:Qe(s[7],i),s:Qe(s[8],i)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(o=Ze(Ce(a.from),Ce(a.to)),(a={}).ms=o.milliseconds,a.M=o.months),n=new Oe(a),Ie(t)&&c(t,"_locale")&&(n._locale=t._locale),n}function Qe(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function Xe(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function Ze(t,e){var i;return t.isValid()&&e.isValid()?(e=Re(e,t),t.isBefore(e)?i=Xe(t,e):((i=Xe(e,t)).milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function ti(t,e){return function(i,n){var o;return null===n||isNaN(+n)||(k(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=i,i=n,n=o),ei(this,Je(i="string"==typeof i?+i:i,n),t),this}}function ei(e,i,n,o){var a=i._milliseconds,r=Pe(i._days),s=Pe(i._months);e.isValid()&&(o=null==o||o,s&&ht(e,nt(e,"Month")+s*n),r&&ot(e,"Date",nt(e,"Date")+r*n),a&&e._d.setTime(e._d.valueOf()+a*n),o&&t.updateOffset(e,r||s))}function ii(t,e){var i=t.diff(e,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function ni(e,i){var n=e||Ce(),o=Re(n,this).startOf("day"),a=t.calendarFormat(this,o)||"sameElse",r=i&&(C(i[a])?i[a].call(this,n):i[a]);return this.format(r||this.localeData().calendar(a,this,Ce(n)))}function oi(){return new v(this)}function ai(t,e){var i=_(t)?t:Ce(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=L(a(e)?"millisecond":e))?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())}function ri(t,e){var i=_(t)?t:Ce(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=L(a(e)?"millisecond":e))?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())}function si(t,e,i,n){return("("===(n=n||"()")[0]?this.isAfter(t,i):!this.isBefore(t,i))&&(")"===n[1]?this.isBefore(e,i):!this.isAfter(e,i))}function li(t,e){var i,n=_(t)?t:Ce(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=L(e||"millisecond"))?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))}function ci(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function ui(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function di(t,e,i){var n,o,a;if(!this.isValid())return NaN;if(!(n=Re(t,this)).isValid())return NaN;switch(o=6e4*(n.utcOffset()-this.utcOffset()),e=L(e)){case"year":a=pi(this,n)/12;break;case"month":a=pi(this,n);break;case"quarter":a=pi(this,n)/3;break;case"second":a=(this-n)/1e3;break;case"minute":a=(this-n)/6e4;break;case"hour":a=(this-n)/36e5;break;case"day":a=(this-n-o)/864e5;break;case"week":a=(this-n-o)/6048e5;break;default:a=this-n}return i?a:b(a)}function pi(t,e){var i=12*(e.year()-t.year())+(e.month()-t.month()),n=t.clone().add(i,"months");return-(i+(e-n<0?(e-n)/(n-t.clone().add(i-1,"months")):(e-n)/(t.clone().add(i+1,"months")-n)))||0}function hi(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function fi(t){if(!this.isValid())return null;var e=!0!==t,i=e?this.clone().utc():this;return i.year()<0||i.year()>9999?W(i,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):C(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this._d.valueOf()).toISOString().replace("Z",W(i,"Z")):W(i,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function mi(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var i="["+t+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",o="-MM-DD[T]HH:mm:ss.SSS",a=e+'[")]';return this.format(i+n+o+a)}function gi(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var i=W(this,e);return this.localeData().postformat(i)}function vi(t,e){return this.isValid()&&(_(t)&&t.isValid()||Ce(t).isValid())?Je({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function _i(t){return this.from(Ce(),t)}function bi(t,e){return this.isValid()&&(_(t)&&t.isValid()||Ce(t).isValid())?Je({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function yi(t){return this.to(Ce(),t)}function wi(t){var e;return t===undefined?this._locale._abbr:(null!=(e=ie(t))&&(this._locale=e),this)}function $i(){return this._locale}function xi(t){switch(t=L(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function ki(t){return(t=L(t))===undefined||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))}function Ci(){return this._d.valueOf()-6e4*(this._offset||0)}function Di(){return Math.floor(this.valueOf()/1e3)}function Si(){return new Date(this.valueOf())}function Ti(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Ai(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Ei(){return this.isValid()?this.toISOString():null}function Mi(){return f(this)}function Oi(){return u({},h(this))}function Ii(){return h(this).overflow}function Pi(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ni(t,e){q(0,[t,t.length],0,e)}function Li(t){return Bi.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Ri(t){return Bi.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Fi(){return kt(this.year(),1,4)}function ji(){var t=this.localeData()._week;return kt(this.year(),t.dow,t.doy)}function Bi(t,e,i,n,o){var a;return null==t?xt(this,n,o).year:(e>(a=kt(t,n,o))&&(e=a),qi.call(this,t,e,i,n,o))}function qi(t,e,i,n,o){var a=$t(t,e,i,n,o),r=yt(a.year,0,a.dayOfYear);return this.year(r.getUTCFullYear()),this.month(r.getUTCMonth()),this.date(r.getUTCDate()),this}function zi(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Hi(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function Wi(t,e){e[vo]=y(1e3*("0."+t))}function Yi(){return this._isUTC?"UTC":""}function Vi(){return this._isUTC?"Coordinated Universal Time":""}function Ui(t){return Ce(1e3*t)}function Gi(){return Ce.apply(null,arguments).parseZone()}function Ki(t){return t}function Ji(t,e,i,n){var o=ie(),a=d().set(n,e);return o[i](a,t)}function Qi(t,e,i){if(r(t)&&(e=t,t=undefined),t=t||"",null!=e)return Ji(t,e,i,"month");var n,o=[];for(n=0;n<12;n++)o[n]=Ji(t,n,i,"month");return o}function Xi(t,e,i,n){"boolean"==typeof t?(r(e)&&(i=e,e=undefined),e=e||""):(i=e=t,t=!1,r(e)&&(i=e,e=undefined),e=e||"");var o,a=ie(),s=t?a._week.dow:0;if(null!=i)return Ji(e,(i+s)%7,n,"day");var l=[];for(o=0;o<7;o++)l[o]=Ji(e,(o+s)%7,n,"day");return l}function Zi(t,e){return Qi(t,e,"months")}function tn(t,e){return Qi(t,e,"monthsShort")}function en(t,e,i){return Xi(t,e,i,"weekdays")}function nn(t,e,i){return Xi(t,e,i,"weekdaysShort")}function on(t,e,i){return Xi(t,e,i,"weekdaysMin")}function an(){var t=this._data;return this._milliseconds=da(this._milliseconds),this._days=da(this._days),this._months=da(this._months),t.milliseconds=da(t.milliseconds),t.seconds=da(t.seconds),t.minutes=da(t.minutes),t.hours=da(t.hours),t.months=da(t.months),t.years=da(t.years),this}function rn(t,e,i,n){var o=Je(e,i);return t._milliseconds+=n*o._milliseconds,t._days+=n*o._days,t._months+=n*o._months,t._bubble()}function sn(t,e){return rn(this,t,e,1)}function ln(t,e){return rn(this,t,e,-1)}function cn(t){return t<0?Math.floor(t):Math.ceil(t)}function un(){var t,e,i,n,o,a=this._milliseconds,r=this._days,s=this._months,l=this._data;return a>=0&&r>=0&&s>=0||a<=0&&r<=0&&s<=0||(a+=864e5*cn(pn(s)+r),r=0,s=0),l.milliseconds=a%1e3,t=b(a/1e3),l.seconds=t%60,e=b(t/60),l.minutes=e%60,i=b(e/60),l.hours=i%24,s+=o=b(dn(r+=b(i/24))),r-=cn(pn(o)),n=b(s/12),s%=12,l.days=r,l.months=s,l.years=n,this}function dn(t){return 4800*t/146097}function pn(t){return 146097*t/4800}function hn(t){if(!this.isValid())return NaN;var e,i,n=this._milliseconds;if("month"===(t=L(t))||"year"===t)return e=this._days+n/864e5,i=this._months+dn(e),"month"===t?i:i/12;switch(e=this._days+Math.round(pn(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}}function fn(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*y(this._months/12):NaN}function mn(t){return function(){return this.as(t)}}function gn(){return Je(this)}function vn(t){return t=L(t),this.isValid()?this[t+"s"]():NaN}function _n(t){return function(){return this.isValid()?this._data[t]:NaN}}function bn(){return b(this.days()/7)}function yn(t,e,i,n,o){return o.relativeTime(e||1,!!i,t,n)}function wn(t,e,i){var n=Je(t).abs(),o=Sa(n.as("s")),a=Sa(n.as("m")),r=Sa(n.as("h")),s=Sa(n.as("d")),l=Sa(n.as("M")),c=Sa(n.as("y")),u=o<=Ta.ss&&["s",o]||o<Ta.s&&["ss",o]||a<=1&&["m"]||a<Ta.m&&["mm",a]||r<=1&&["h"]||r<Ta.h&&["hh",r]||s<=1&&["d"]||s<Ta.d&&["dd",s]||l<=1&&["M"]||l<Ta.M&&["MM",l]||c<=1&&["y"]||["yy",c];return u[2]=e,u[3]=+t>0,u[4]=i,yn.apply(null,u)}function $n(t){return t===undefined?Sa:"function"==typeof t&&(Sa=t,!0)}function xn(t,e){return Ta[t]!==undefined&&(e===undefined?Ta[t]:(Ta[t]=e,"s"===t&&(Ta.ss=e-1),!0))}function kn(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),i=wn(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)}function Cn(t){return(t>0)-(t<0)||+t}function Dn(){if(!this.isValid())return this.localeData().invalidDate();var t,e,i=Aa(this._milliseconds)/1e3,n=Aa(this._days),o=Aa(this._months);e=b((t=b(i/60))/60),i%=60,t%=60;var a=b(o/12),r=o%=12,s=n,l=e,c=t,u=i?i.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var p=d<0?"-":"",h=Cn(this._months)!==Cn(d)?"-":"",f=Cn(this._days)!==Cn(d)?"-":"",m=Cn(this._milliseconds)!==Cn(d)?"-":"";return p+"P"+(a?h+a+"Y":"")+(r?h+r+"M":"")+(s?f+s+"D":"")+(l||c||u?"T":"")+(l?m+l+"H":"")+(c?m+c+"M":"")+(u?m+u+"S":"")}var Sn,Tn;Tn=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,n=0;n<i;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1};var An,En=t.momentProperties=[],Mn=!1,On={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null,An=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)c(t,e)&&i.push(e);return i};var In={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Pn={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Nn="Invalid date",Ln="%d",Rn=/\d{1,2}/,Fn={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},jn={},Bn={},qn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,zn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Hn={},Wn={},Yn=/\d/,Vn=/\d\d/,Un=/\d{3}/,Gn=/\d{4}/,Kn=/[+-]?\d{6}/,Jn=/\d\d?/,Qn=/\d\d\d\d?/,Xn=/\d\d\d\d\d\d?/,Zn=/\d{1,3}/,to=/\d{1,4}/,eo=/[+-]?\d{1,6}/,io=/\d+/,no=/[+-]?\d+/,oo=/Z|[+-]\d\d:?\d\d/gi,ao=/Z|[+-]\d\d(?::?\d\d)?/gi,ro=/[+-]?\d+(\.\d{1,3})?/,so=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,lo={},co={},uo=0,po=1,ho=2,fo=3,mo=4,go=5,vo=6,_o=7,bo=8;q("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),q(0,["YY",2],0,function(){return this.year()%100}),q(0,["YYYY",4],0,"year"),q(0,["YYYYY",5],0,"year"),q(0,["YYYYYY",6,!0],0,"year"),N("year","y"),F("year",1),V("Y",no),V("YY",Jn,Vn),V("YYYY",to,Gn),V("YYYYY",eo,Kn),V("YYYYYY",eo,Kn),J(["YYYYY","YYYYYY"],uo),J("YYYY",function(e,i){i[uo]=2===e.length?t.parseTwoDigitYear(e):y(e)}),J("YY",function(e,i){i[uo]=t.parseTwoDigitYear(e)}),J("Y",function(t,e){e[uo]=parseInt(t,10)}),t.parseTwoDigitYear=function(t){return y(t)+(y(t)>68?1900:2e3)};var yo,wo=it("FullYear",!0);yo=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},q("M",["MM",2],"Mo",function(){return this.month()+1}),q("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),q("MMMM",0,0,function(t){return this.localeData().months(this,t)}),N("month","M"),F("month",8),V("M",Jn),V("MM",Jn,Vn),V("MMM",function(t,e){return e.monthsShortRegex(t)}),V("MMMM",function(t,e){return e.monthsRegex(t)}),J(["M","MM"],function(t,e){e[po]=y(t)-1}),J(["MMM","MMMM"],function(t,e,i,n){var o=i._locale.monthsParse(t,n,i._strict);null!=o?e[po]=o:h(i).invalidMonth=t});var $o=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,xo="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ko="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Co=so,Do=so;q("w",["ww",2],"wo","week"),q("W",["WW",2],"Wo","isoWeek"),N("week","w"),N("isoWeek","W"),F("week",5),F("isoWeek",5),V("w",Jn),V("ww",Jn,Vn),V("W",Jn),V("WW",Jn,Vn),Q(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=y(t)});var So={dow:0,doy:6};q("d",0,"do","day"),q("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),q("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),q("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),q("e",0,0,"weekday"),q("E",0,0,"isoWeekday"),N("day","d"),N("weekday","e"),N("isoWeekday","E"),F("day",11),F("weekday",11),F("isoWeekday",11),V("d",Jn),V("e",Jn),V("E",Jn),V("dd",function(t,e){return e.weekdaysMinRegex(t)}),V("ddd",function(t,e){return e.weekdaysShortRegex(t)}),V("dddd",function(t,e){return e.weekdaysRegex(t)}),Q(["dd","ddd","dddd"],function(t,e,i,n){var o=i._locale.weekdaysParse(t,n,i._strict);null!=o?e.d=o:h(i).invalidWeekday=t}),Q(["d","e","E"],function(t,e,i,n){e[n]=y(t)});var To="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ao="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Eo="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Mo=so,Oo=so,Io=so;q("H",["HH",2],0,"hour"),q("h",["hh",2],0,Wt),q("k",["kk",2],0,Yt),q("hmm",0,0,function(){return""+Wt.apply(this)+B(this.minutes(),2)}),q("hmmss",0,0,function(){return""+Wt.apply(this)+B(this.minutes(),2)+B(this.seconds(),2)}),q("Hmm",0,0,function(){return""+this.hours()+B(this.minutes(),2)}),q("Hmmss",0,0,function(){return""+this.hours()+B(this.minutes(),2)+B(this.seconds(),2)}),Vt("a",!0),Vt("A",!1),N("hour","h"),F("hour",13),V("a",Ut),V("A",Ut),V("H",Jn),V("h",Jn),V("k",Jn),V("HH",Jn,Vn),V("hh",Jn,Vn),V("kk",Jn,Vn),V("hmm",Qn),V("hmmss",Xn),V("Hmm",Qn),V("Hmmss",Xn),J(["H","HH"],fo),J(["k","kk"],function(t,e){var i=y(t);e[fo]=24===i?0:i}),J(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),J(["h","hh"],function(t,e,i){e[fo]=y(t),h(i).bigHour=!0}),J("hmm",function(t,e,i){var n=t.length-2;e[fo]=y(t.substr(0,n)),e[mo]=y(t.substr(n)),h(i).bigHour=!0}),J("hmmss",function(t,e,i){var n=t.length-4,o=t.length-2;e[fo]=y(t.substr(0,n)),e[mo]=y(t.substr(n,2)),e[go]=y(t.substr(o)),h(i).bigHour=!0}),J("Hmm",function(t,e){var i=t.length-2;e[fo]=y(t.substr(0,i)),e[mo]=y(t.substr(i))}),J("Hmmss",function(t,e){var i=t.length-4,n=t.length-2;e[fo]=y(t.substr(0,i)),e[mo]=y(t.substr(i,2)),e[go]=y(t.substr(n))});var Po,No=/[ap]\.?m?\.?/i,Lo=it("Hours",!0),Ro={calendar:In,longDateFormat:Pn,invalidDate:Nn,ordinal:Ln,dayOfMonthOrdinalParse:Rn,relativeTime:Fn,months:xo,monthsShort:ko,week:So,weekdays:To,weekdaysMin:Eo,weekdaysShort:Ao,meridiemParse:No},Fo={},jo={},Bo=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,qo=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,zo=/Z|[+-]\d\d(?::?\d\d)?/,Ho=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Wo=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Yo=/^\/?Date\((\-?\d+)/i,Vo=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Uo={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};t.createFromInputFallback=x("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),t.ISO_8601=function(){},t.RFC_2822=function(){};var Go=x("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Ce.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:m()}),Ko=x("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Ce.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:m()}),Jo=function(){return Date.now?Date.now():+new Date},Qo=["year","quarter","month","week","day","hour","minute","second","millisecond"];Ne("Z",":"),Ne("ZZ",""),V("Z",ao),V("ZZ",ao),J(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=Le(ao,t)});var Xo=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var Zo=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,ta=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Je.fn=Oe.prototype,Je.invalid=Me;var ea=ti(1,"add"),ia=ti(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var na=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===undefined?this.localeData():this.locale(t)});q(0,["gg",2],0,function(){return this.weekYear()%100}),q(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ni("gggg","weekYear"),Ni("ggggg","weekYear"),Ni("GGGG","isoWeekYear"),Ni("GGGGG","isoWeekYear"),N("weekYear","gg"),N("isoWeekYear","GG"),F("weekYear",1),F("isoWeekYear",1),V("G",no),V("g",no),V("GG",Jn,Vn),V("gg",Jn,Vn),V("GGGG",to,Gn),V("gggg",to,Gn),V("GGGGG",eo,Kn),V("ggggg",eo,Kn),Q(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=y(t)}),Q(["gg","GG"],function(e,i,n,o){i[o]=t.parseTwoDigitYear(e)}),q("Q",0,"Qo","quarter"),N("quarter","Q"),F("quarter",7),V("Q",Yn),J("Q",function(t,e){e[po]=3*(y(t)-1)}),q("D",["DD",2],"Do","date"),N("date","D"),F("date",9),V("D",Jn),V("DD",Jn,Vn),V("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),J(["D","DD"],ho),J("Do",function(t,e){e[ho]=y(t.match(Jn)[0])});var oa=it("Date",!0);q("DDD",["DDDD",3],"DDDo","dayOfYear"),N("dayOfYear","DDD"),F("dayOfYear",4),V("DDD",Zn),V("DDDD",Un),J(["DDD","DDDD"],function(t,e,i){i._dayOfYear=y(t)}),q("m",["mm",2],0,"minute"),N("minute","m"),F("minute",14),V("m",Jn),V("mm",Jn,Vn),J(["m","mm"],mo);var aa=it("Minutes",!1);q("s",["ss",2],0,"second"),N("second","s"),F("second",15),V("s",Jn),V("ss",Jn,Vn),J(["s","ss"],go);var ra,sa=it("Seconds",!1);for(q("S",0,0,function(){return~~(this.millisecond()/100)}),q(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),q(0,["SSS",3],0,"millisecond"),q(0,["SSSS",4],0,function(){return 10*this.millisecond()}),q(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),q(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),q(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),q(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),q(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),N("millisecond","ms"),F("millisecond",16),V("S",Zn,Yn),V("SS",Zn,Vn),V("SSS",Zn,Un),ra="SSSS";ra.length<=9;ra+="S")V(ra,io);for(ra="S";ra.length<=9;ra+="S")J(ra,Wi);var la=it("Milliseconds",!1);q("z",0,0,"zoneAbbr"),q("zz",0,0,"zoneName");var ca=v.prototype;ca.add=ea,ca.calendar=ni,ca.clone=oi,ca.diff=di,ca.endOf=ki,ca.format=gi,ca.from=vi,ca.fromNow=_i,ca.to=bi,ca.toNow=yi,ca.get=at,ca.invalidAt=Ii,ca.isAfter=ai,ca.isBefore=ri,ca.isBetween=si,ca.isSame=li,ca.isSameOrAfter=ci,ca.isSameOrBefore=ui,ca.isValid=Mi,ca.lang=na,ca.locale=wi,ca.localeData=$i,ca.max=Ko,ca.min=Go,ca.parsingFlags=Oi,ca.set=rt,ca.startOf=xi,ca.subtract=ia,ca.toArray=Ti,ca.toObject=Ai,ca.toDate=Si,ca.toISOString=fi,ca.inspect=mi,ca.toJSON=Ei,ca.toString=hi,ca.unix=Di,ca.valueOf=Ci,ca.creationData=Pi,ca.year=wo,ca.isLeapYear=et,ca.weekYear=Li,ca.isoWeekYear=Ri,ca.quarter=ca.quarters=zi,ca.month=ft,ca.daysInMonth=mt,ca.week=ca.weeks=Tt,ca.isoWeek=ca.isoWeeks=At,ca.weeksInYear=ji,ca.isoWeeksInYear=Fi,ca.date=oa,ca.day=ca.days=Rt,ca.weekday=Ft,ca.isoWeekday=jt,ca.dayOfYear=Hi,ca.hour=ca.hours=Lo,ca.minute=ca.minutes=aa,ca.second=ca.seconds=sa,ca.millisecond=ca.milliseconds=la,ca.utcOffset=je,ca.utc=qe,ca.local=ze,ca.parseZone=He,ca.hasAlignedHourOffset=We,ca.isDST=Ye,ca.isLocal=Ue,ca.isUtcOffset=Ge,ca.isUtc=Ke,ca.isUTC=Ke,ca.zoneAbbr=Yi,ca.zoneName=Vi,ca.dates=x("dates accessor is deprecated. Use date instead.",oa),ca.months=x("months accessor is deprecated. Use month instead",ft),ca.years=x("years accessor is deprecated. Use year instead",wo),ca.zone=x("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Be),ca.isDSTShifted=x("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ve);var ua=T.prototype;ua.calendar=A,ua.longDateFormat=E,ua.invalidDate=M,ua.ordinal=O,ua.preparse=Ki,ua.postformat=Ki,ua.relativeTime=I,ua.pastFuture=P,ua.set=D,ua.months=ct,ua.monthsShort=ut,ua.monthsParse=pt,ua.monthsRegex=vt,ua.monthsShortRegex=gt,ua.week=Ct,ua.firstDayOfYear=St,ua.firstDayOfWeek=Dt,ua.weekdays=Ot,ua.weekdaysMin=Pt,ua.weekdaysShort=It,ua.weekdaysParse=Lt,ua.weekdaysRegex=Bt,ua.weekdaysShortRegex=qt,ua.weekdaysMinRegex=zt,ua.isPM=Gt,ua.meridiem=Kt,Zt("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===y(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),t.lang=x("moment.lang is deprecated. Use moment.locale instead.",Zt),t.langData=x("moment.langData is deprecated. Use moment.localeData instead.",ie);var da=Math.abs,pa=mn("ms"),ha=mn("s"),fa=mn("m"),ma=mn("h"),ga=mn("d"),va=mn("w"),_a=mn("M"),ba=mn("y"),ya=_n("milliseconds"),wa=_n("seconds"),$a=_n("minutes"),xa=_n("hours"),ka=_n("days"),Ca=_n("months"),Da=_n("years"),Sa=Math.round,Ta={ss:44,s:45,m:45,h:22,d:26,M:11},Aa=Math.abs,Ea=Oe.prototype;return Ea.isValid=Ee,Ea.abs=an,Ea.add=sn,Ea.subtract=ln,Ea.as=hn,Ea.asMilliseconds=pa,Ea.asSeconds=ha,Ea.asMinutes=fa,Ea.asHours=ma,Ea.asDays=ga,Ea.asWeeks=va,Ea.asMonths=_a,Ea.asYears=ba,Ea.valueOf=fn,Ea._bubble=un,Ea.clone=gn,Ea.get=vn,Ea.milliseconds=ya,Ea.seconds=wa,Ea.minutes=$a,Ea.hours=xa,Ea.days=ka,Ea.weeks=bn,Ea.months=Ca,Ea.years=Da,Ea.humanize=kn,Ea.toISOString=Dn,Ea.toString=Dn,Ea.toJSON=Dn,Ea.locale=wi,Ea.localeData=$i,Ea.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Dn),Ea.lang=na,q("X",0,0,"unix"),q("x",0,0,"valueOf"),V("x",no),V("X",ro),J("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),J("x",function(t,e,i){i._d=new Date(y(t))}),t.version="2.20.1",e(Ce),t.fn=ca,t.min=Se,t.max=Te,t.now=Jo,t.utc=d,t.unix=Ui,t.months=Zi,t.isDate=s,t.locale=Zt,t.invalid=m,t.duration=Je,t.isMoment=_,t.weekdays=en,t.parseZone=Gi,t.localeData=ie,t.isDuration=Ie,t.monthsShort=tn,t.weekdaysMin=on,t.defineLocale=te,t.updateLocale=ee,t.locales=ne,t.weekdaysShort=nn,t.normalizeUnits=L,t.relativeTimeRounding=$n,t.relativeTimeThreshold=xn,t.calendarFormat=ii,t.prototype=ca,t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},t}),function(t){"function"==typeof define&&define.amd?define(["moment"],t):"object"==typeof exports?module.exports=t(require("../moment")):t(window.moment)}(function(t){return t.defineLocale("pt-br",{months:"janeiro_fevereiro_mar\xe7o_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_ter\xe7a-feira_quarta-feira_quinta-feira_sexta-feira_s\xe1bado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_s\xe1b".split("_"),weekdaysMin:"dom_seg_ter_qua_qui_sex_s\xe1b".split("_"),longDateFormat:{LT:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [\xe0s] LT",LLLL:"dddd, D [de] MMMM [de] YYYY [\xe0s] LT"},calendar:{sameDay:"[Hoje \xe0s] LT",nextDay:"[Amanh\xe3 \xe0s] LT",nextWeek:"dddd [\xe0s] LT",lastDay:"[Ontem \xe0s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[\xdaltimo] dddd [\xe0s] LT":"[\xdaltima] dddd [\xe0s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atr\xe1s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um m\xeas",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinal:"%d\xba"})}),
/*! version : 4.15.35
 =========================================================
 bootstrap-datetimejs
 https://github.com/Eonasdan/bootstrap-datetimepicker
 Copyright (c) 2015 Jonathan Peterson
 =========================================================
 */
/*
 The MIT License (MIT)

 Copyright (c) 2015 Jonathan Peterson

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 */
function(t){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],t);else if("object"==typeof exports)t(require("jquery"),require("moment"));else{if("undefined"==typeof jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if("undefined"==typeof moment)throw"bootstrap-datetimepicker requires Moment.js to be loaded first";t(jQuery,moment)}}(function(t,e){"use strict";if(!e)throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");var i=function(i,n){var o,a,r,s,l,c={},u=e().startOf("d"),d=u.clone(),p=!0,h=!1,f=!1,m=0,g=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10},{clsName:"decades",navFnc:"y",navStep:100}],v=["days","months","years","decades"],_=["top","bottom","auto"],b=["left","right","auto"],y=["default","top","bottom"],w={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t","delete":46,46:"delete"},$={},x=function(t){if("string"!=typeof t||t.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(t){case"y":return-1!==r.indexOf("Y");case"M":return-1!==r.indexOf("M");case"d":return-1!==r.toLowerCase().indexOf("d");case"h":case"H":return-1!==r.toLowerCase().indexOf("h");case"m":return-1!==r.indexOf("m");case"s":return-1!==r.indexOf("s");default:return!1}},k=function(){return x("h")||x("m")||x("s")},C=function(){return x("y")||x("M")||x("d")},D=function(){var e=t("<thead>").append(t("<tr>").append(t("<th>").addClass("prev").attr("data-action","previous").append(t("<span>").addClass(n.icons.previous))).append(t("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",n.calendarWeeks?"6":"5")).append(t("<th>").addClass("next").attr("data-action","next").append(t("<span>").addClass(n.icons.next)))),i=t("<tbody>").append(t("<tr>").append(t("<td>").attr("colspan",n.calendarWeeks?"8":"7")));return[t("<div>").addClass("datepicker-days").append(t("<table>").addClass("table-condensed").append(e).append(t("<tbody>"))),t("<div>").addClass("datepicker-months").append(t("<table>").addClass("table-condensed").append(e.clone()).append(i.clone())),t("<div>").addClass("datepicker-years").append(t("<table>").addClass("table-condensed").append(e.clone()).append(i.clone())),t("<div>").addClass("datepicker-decades").append(t("<table>").addClass("table-condensed").append(e.clone()).append(i.clone()))]},S=function(){var e=t("<tr>"),i=t("<tr>"),o=t("<tr>");return x("h")&&(e.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:"Increment Hour"}).addClass("btn").attr("data-action","incrementHours").append(t("<span>").addClass(n.icons.up)))),i.append(t("<td>").append(t("<span>").addClass("timepicker-hour").attr({"data-time-component":"hours",title:"Pick Hour"}).attr("data-action","showHours"))),o.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:"Decrement Hour"}).addClass("btn").attr("data-action","decrementHours").append(t("<span>").addClass(n.icons.down))))),x("m")&&(x("h")&&(e.append(t("<td>").addClass("separator")),i.append(t("<td>").addClass("separator").html(":")),o.append(t("<td>").addClass("separator"))),e.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:"Increment Minute"}).addClass("btn").attr("data-action","incrementMinutes").append(t("<span>").addClass(n.icons.up)))),i.append(t("<td>").append(t("<span>").addClass("timepicker-minute").attr({"data-time-component":"minutes",title:"Pick Minute"}).attr("data-action","showMinutes"))),o.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:"Decrement Minute"}).addClass("btn").attr("data-action","decrementMinutes").append(t("<span>").addClass(n.icons.down))))),x("s")&&(x("m")&&(e.append(t("<td>").addClass("separator")),i.append(t("<td>").addClass("separator").html(":")),o.append(t("<td>").addClass("separator"))),e.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:"Increment Second"}).addClass("btn").attr("data-action","incrementSeconds").append(t("<span>").addClass(n.icons.up)))),i.append(t("<td>").append(t("<span>").addClass("timepicker-second").attr({"data-time-component":"seconds",title:"Pick Second"}).attr("data-action","showSeconds"))),o.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:"Decrement Second"}).addClass("btn").attr("data-action","decrementSeconds").append(t("<span>").addClass(n.icons.down))))),a||(e.append(t("<td>").addClass("separator")),i.append(t("<td>").append(t("<button>").addClass("btn btn-primary").attr({"data-action":"togglePeriod",tabindex:"-1",title:"Toggle Period"}))),o.append(t("<td>").addClass("separator"))),t("<div>").addClass("timepicker-picker").append(t("<table>").addClass("table-condensed").append([e,i,o]))},T=function(){var e=t("<div>").addClass("timepicker-hours").append(t("<table>").addClass("table-condensed")),i=t("<div>").addClass("timepicker-minutes").append(t("<table>").addClass("table-condensed")),n=t("<div>").addClass("timepicker-seconds").append(t("<table>").addClass("table-condensed")),o=[S()];return x("h")&&o.push(e),x("m")&&o.push(i),x("s")&&o.push(n),o},A=function(){var e=[];return n.showTodayButton&&e.push(t("<td>").append(t("<a>").attr({"data-action":"today",title:n.tooltips.today}).append(t("<span>").addClass(n.icons.today)))),!n.sideBySide&&C()&&k()&&e.push(t("<td>").append(t("<a>").attr({"data-action":"togglePicker",title:"Select Time"}).append(t("<span>").addClass(n.icons.time)))),n.showClear&&e.push(t("<td>").append(t("<a>").attr({"data-action":"clear",title:n.tooltips.clear}).append(t("<span>").addClass(n.icons.clear)))),n.showClose&&e.push(t("<td>").append(t("<a>").attr({"data-action":"close",title:n.tooltips.close}).append(t("<span>").addClass(n.icons.close)))),t("<table>").addClass("table-condensed").append(t("<tbody>").append(t("<tr>").append(e)))},E=function(){var e=t("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),i=t("<div>").addClass("datepicker").append(D()),o=t("<div>").addClass("timepicker").append(T()),r=t("<ul>").addClass("list-unstyled"),s=t("<li>").addClass("picker-switch"+(n.collapse?" accordion-toggle":"")).append(A());return n.inline&&e.removeClass("dropdown-menu"),a&&e.addClass("usetwentyfour"),x("s")&&!a&&e.addClass("wider"),n.sideBySide&&C()&&k()?(e.addClass("timepicker-sbs"),"top"===n.toolbarPlacement&&e.append(s),e.append(t("<div>").addClass("row").append(i.addClass("col-md-6")).append(o.addClass("col-md-6"))),"bottom"===n.toolbarPlacement&&e.append(s),e):("top"===n.toolbarPlacement&&r.append(s),C()&&r.append(t("<li>").addClass(n.collapse&&k()?"collapse in":"").append(i)),"default"===n.toolbarPlacement&&r.append(s),k()&&r.append(t("<li>").addClass(n.collapse&&C()?"collapse":"").append(o)),"bottom"===n.toolbarPlacement&&r.append(s),e.append(r))},M=function(){var e,o={};return(e=i.is("input")||n.inline?i.data():i.find("input").data()).dateOptions&&e.dateOptions instanceof Object&&(o=t.extend(!0,o,e.dateOptions)),t.each(n,function(t){var i="date"+t.charAt(0).toUpperCase()+t.slice(1);e[i]!==undefined&&(o[t]=e[i])}),o},O=function(){var e,o=(h||i).position(),a=(h||i).offset(),r=n.widgetPositioning.vertical,s=n.widgetPositioning.horizontal;if(n.widgetParent)e=n.widgetParent.append(f);else if(i.is("input"))e=i.after(f).parent();else{if(n.inline)return void(e=i.append(f));e=i,i.children().first().after(f)}if("auto"===r&&(r=a.top+1.5*f.height()>=t(window).height()+t(window).scrollTop()&&f.height()+i.outerHeight()<a.top?"top":"bottom"),"auto"===s&&(s=e.width()<a.left+f.outerWidth()/2&&a.left+f.outerWidth()>t(window).width()?"right":"left"),"top"===r?f.addClass("top").removeClass("bottom"):f.addClass("bottom").removeClass("top"),"right"===s?f.addClass("pull-right"):f.removeClass("pull-right"),"relative"!==e.css("position")&&(e=e.parents().filter(function(){return"relative"===t(this).css("position")}).first()),0===e.length)throw new Error("datetimepicker component should be placed within a relative positioned container");f.css({top:"top"===r?"auto":o.top+i.outerHeight(),bottom:"top"===r?o.top+i.outerHeight():"auto",left:"left"===s?e===i?0:o.left:"auto",right:"left"===s?"auto":e.outerWidth()-i.outerWidth()-(e===i?0:o.left)})},I=function(t){"dp.change"===t.type&&(t.date&&t.date.isSame(t.oldDate)||!t.date&&!t.oldDate)||i.trigger(t)},P=function(t){"y"===t&&(t="YYYY"),I({type:"dp.update",change:t,viewDate:d.clone()})},N=function(t){f&&(t&&(l=Math.max(m,Math.min(3,l+t))),f.find(".datepicker > div").hide().filter(".datepicker-"+g[l].clsName).show())},L=function(){var e=t("<tr>"),i=d.clone().startOf("w").startOf("d");for(!0===n.calendarWeeks&&e.append(t("<th>").addClass("cw").text("#"));i.isBefore(d.clone().endOf("w"));)e.append(t("<th>").addClass("dow").text(i.format("dd"))),i.add(1,"d");f.find(".datepicker-days thead").append(e)},R=function(t){return!0===n.disabledDates[t.format("YYYY-MM-DD")]},F=function(t){return!0===n.enabledDates[t.format("YYYY-MM-DD")]},j=function(t){return!0===n.disabledHours[t.format("H")]},B=function(t){return!0===n.enabledHours[t.format("H")]},q=function(e,i){if(!e.isValid())return!1;if(n.disabledDates&&"d"===i&&R(e))return!1;if(n.enabledDates&&"d"===i&&!F(e))return!1;if(n.minDate&&e.isBefore(n.minDate,i))return!1;if(n.maxDate&&e.isAfter(n.maxDate,i))return!1;if(n.daysOfWeekDisabled&&"d"===i&&-1!==n.daysOfWeekDisabled.indexOf(e.day()))return!1;if(n.disabledHours&&("h"===i||"m"===i||"s"===i)&&j(e))return!1;if(n.enabledHours&&("h"===i||"m"===i||"s"===i)&&!B(e))return!1;if(n.disabledTimeIntervals&&("h"===i||"m"===i||"s"===i)){var o=!1;if(t.each(n.disabledTimeIntervals,function(){if(e.isBetween(this[0],this[1]))return o=!0,!1}),o)return!1}return!0},z=function(){for(var e=[],i=d.clone().startOf("y").startOf("d");i.isSame(d,"y");)e.push(t("<span>").attr("data-action","selectMonth").addClass("month").text(i.format("MMM"))),i.add(1,"M");f.find(".datepicker-months td").empty().append(e)},H=function(){var e=f.find(".datepicker-months"),i=e.find("th"),o=e.find("tbody").find("span");i.eq(0).find("span").attr("title",n.tooltips.prevYear),i.eq(1).attr("title",n.tooltips.selectYear),i.eq(2).find("span").attr("title",n.tooltips.nextYear),e.find(".disabled").removeClass("disabled"),q(d.clone().subtract(1,"y"),"y")||i.eq(0).addClass("disabled"),i.eq(1).text(d.year()),q(d.clone().add(1,"y"),"y")||i.eq(2).addClass("disabled"),o.removeClass("active"),u.isSame(d,"y")&&!p&&o.eq(u.month()).addClass("active"),o.each(function(e){q(d.clone().month(e),"M")||t(this).addClass("disabled")})},W=function(){var t=f.find(".datepicker-years"),e=t.find("th"),i=d.clone().subtract(5,"y"),o=d.clone().add(6,"y"),a="";for(e.eq(0).find("span").attr("title",n.tooltips.nextDecade),e.eq(1).attr("title",n.tooltips.selectDecade),e.eq(2).find("span").attr("title",n.tooltips.prevDecade),t.find(".disabled").removeClass("disabled"),n.minDate&&n.minDate.isAfter(i,"y")&&e.eq(0).addClass("disabled"),e.eq(1).text(i.year()+"-"+o.year()),n.maxDate&&n.maxDate.isBefore(o,"y")&&e.eq(2).addClass("disabled");!i.isAfter(o,"y");)a+='<span data-action="selectYear" class="year'+(i.isSame(u,"y")&&!p?" active":"")+(q(i,"y")?"":" disabled")+'">'+i.year()+"</span>",i.add(1,"y");t.find("td").html(a)},Y=function(){var t=f.find(".datepicker-decades"),i=t.find("th"),o=d.isBefore(e({y:1999}))?e({y:1899}):e({y:1999}),a=o.clone().add(100,"y"),r="";for(i.eq(0).find("span").attr("title",n.tooltips.prevCentury),i.eq(2).find("span").attr("title",n.tooltips.nextCentury),t.find(".disabled").removeClass("disabled"),(o.isSame(e({y:1900}))||n.minDate&&n.minDate.isAfter(o,"y"))&&i.eq(0).addClass("disabled"),i.eq(1).text(o.year()+"-"+a.year()),(o.isSame(e({y:2e3}))||n.maxDate&&n.maxDate.isBefore(a,"y"))&&i.eq(2).addClass("disabled");!o.isAfter(a,"y");)r+='<span data-action="selectDecade" class="decade'+(o.isSame(u,"y")?" active":"")+(q(o,"y")?"":" disabled")+'" data-selection="'+(o.year()+6)+'">'+(o.year()+1)+" - "+(o.year()+12)+"</span>",o.add(12,"y");r+="<span></span><span></span><span></span>",t.find("td").html(r)},V=function(){var i,o,a,r,s=f.find(".datepicker-days"),l=s.find("th"),c=[];if(C()){for(l.eq(0).find("span").attr("title",n.tooltips.prevMonth),l.eq(1).attr("title",n.tooltips.selectMonth),l.eq(2).find("span").attr("title",n.tooltips.nextMonth),s.find(".disabled").removeClass("disabled"),l.eq(1).text(d.format(n.dayViewHeaderFormat)),q(d.clone().subtract(1,"M"),"M")||l.eq(0).addClass("disabled"),q(d.clone().add(1,"M"),"M")||l.eq(2).addClass("disabled"),i=d.clone().startOf("M").startOf("w").startOf("d"),r=0;r<42;r++)0===i.weekday()&&(o=t("<tr>"),n.calendarWeeks&&o.append('<td class="cw">'+i.week()+"</td>"),c.push(o)),a="",i.isBefore(d,"M")&&(a+=" old"),i.isAfter(d,"M")&&(a+=" new"),i.isSame(u,"d")&&!p&&(a+=" active"),q(i,"d")||(a+=" disabled"),i.isSame(e(),"d")&&(a+=" today"),0!==i.day()&&6!==i.day()||(a+=" weekend"),o.append('<td data-action="selectDay" data-day="'+i.format("L")+'" class="day'+a+'">'+i.date()+"</td>"),i.add(1,"d");s.find("tbody").empty().append(c),H(),W(),Y()}},U=function(){var e=f.find(".timepicker-hours table"),i=d.clone().startOf("d"),n=[],o=t("<tr>");for(d.hour()>11&&!a&&i.hour(12);i.isSame(d,"d")&&(a||d.hour()<12&&i.hour()<12||d.hour()>11);)i.hour()%4==0&&(o=t("<tr>"),n.push(o)),o.append('<td data-action="selectHour" class="hour'+(q(i,"h")?"":" disabled")+'">'+i.format(a?"HH":"hh")+"</td>"),i.add(1,"h");e.empty().append(n)},G=function(){for(var e=f.find(".timepicker-minutes table"),i=d.clone().startOf("h"),o=[],a=t("<tr>"),r=1===n.stepping?5:n.stepping;d.isSame(i,"h");)i.minute()%(4*r)==0&&(a=t("<tr>"),o.push(a)),a.append('<td data-action="selectMinute" class="minute'+(q(i,"m")?"":" disabled")+'">'+i.format("mm")+"</td>"),i.add(r,"m");e.empty().append(o)},K=function(){for(var e=f.find(".timepicker-seconds table"),i=d.clone().startOf("m"),n=[],o=t("<tr>");d.isSame(i,"m");)i.second()%20==0&&(o=t("<tr>"),n.push(o)),o.append('<td data-action="selectSecond" class="second'+(q(i,"s")?"":" disabled")+'">'+i.format("ss")+"</td>"),i.add(5,"s");e.empty().append(n)},J=function(){var t,e,i=f.find(".timepicker span[data-time-component]");a||(t=f.find(".timepicker [data-action=togglePeriod]"),e=u.clone().add(u.hours()>=12?-12:12,"h"),t.text(u.format("A")),q(e,"h")?t.removeClass("disabled"):t.addClass("disabled")),i.filter("[data-time-component=hours]").text(u.format(a?"HH":"hh")),i.filter("[data-time-component=minutes]").text(u.format("mm")),i.filter("[data-time-component=seconds]").text(u.format("ss")),U(),G(),K()},Q=function(){f&&(V(),J())},X=function(t){var e=p?null:u;if(!t)return p=!0,o.val(""),i.data("date",""),I({type:"dp.change",date:!1,oldDate:e}),void Q();t=t.clone().locale(n.locale),1!==n.stepping&&t.minutes(Math.round(t.minutes()/n.stepping)*n.stepping%60).seconds(0),q(t)?(d=(u=t).clone(),o.val(u.format(r)),i.data("date",u.format(r)),p=!1,Q(),I({type:"dp.change",date:u.clone(),oldDate:e})):(n.keepInvalid||o.val(p?"":u.format(r)),I({type:"dp.error",date:t}))},Z=function(){var e=!1;return f?(f.find(".collapse").each(function(){var i=t(this).data("collapse");return!i||!i.transitioning||(e=!0,!1)}),e?c:(h&&h.hasClass("btn")&&h.toggleClass("active"),f.hide(),t(window).off("resize",O),f.off("click","[data-action]"),f.off("mousedown",!1),f.remove(),f=!1,I({type:"dp.hide",date:u.clone()}),o.blur(),c)):c},tt=function(){X(null)},et={next:function(){var t=g[l].navFnc;d.add(g[l].navStep,t),V(),P(t)},previous:function(){var t=g[l].navFnc;d.subtract(g[l].navStep,t),V(),P(t)},pickerSwitch:function(){N(1)},selectMonth:function(e){var i=t(e.target).closest("tbody").find("span").index(t(e.target));d.month(i),l===m?(X(u.clone().year(d.year()).month(d.month())),n.inline||Z()):(N(-1),V()),P("M")},selectYear:function(e){var i=parseInt(t(e.target).text(),10)||0;d.year(i),l===m?(X(u.clone().year(d.year())),n.inline||Z()):(N(-1),V()),P("YYYY")},selectDecade:function(e){var i=parseInt(t(e.target).data("selection"),10)||0;d.year(i),l===m?(X(u.clone().year(d.year())),n.inline||Z()):(N(-1),V()),P("YYYY")},selectDay:function(e){var i=d.clone();t(e.target).is(".old")&&i.subtract(1,"M"),t(e.target).is(".new")&&i.add(1,"M"),X(i.date(parseInt(t(e.target).text(),10))),k()||n.keepOpen||n.inline||Z()},incrementHours:function(){var t=u.clone().add(1,"h");q(t,"h")&&X(t)},incrementMinutes:function(){var t=u.clone().add(n.stepping,"m");q(t,"m")&&X(t)},incrementSeconds:function(){var t=u.clone().add(1,"s");q(t,"s")&&X(t)},decrementHours:function(){var t=u.clone().subtract(1,"h");q(t,"h")&&X(t)},decrementMinutes:function(){var t=u.clone().subtract(n.stepping,"m");q(t,"m")&&X(t)},decrementSeconds:function(){var t=u.clone().subtract(1,"s");q(t,"s")&&X(t)},togglePeriod:function(){X(u.clone().add(u.hours()>=12?-12:12,"h"))},togglePicker:function(e){var i,o=t(e.target),a=o.closest("ul"),r=a.find(".in"),s=a.find(".collapse:not(.in)");if(r&&r.length){if((i=r.data("collapse"))&&i.transitioning)return;r.collapse?(r.collapse("hide"),s.collapse("show")):(r.removeClass("in"),s.addClass("in")),o.is("span")?o.toggleClass(n.icons.time+" "+n.icons.date):o.find("span").toggleClass(n.icons.time+" "+n.icons.date)}},showPicker:function(){f.find(".timepicker > div:not(.timepicker-picker)").hide(),f.find(".timepicker .timepicker-picker").show()},showHours:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-hours").show()},showMinutes:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-seconds").show()},selectHour:function(e){var i=parseInt(t(e.target).text(),10);a||(u.hours()>=12?12!==i&&(i+=12):12===i&&(i=0)),X(u.clone().hours(i)),et.showPicker.call(c)},selectMinute:function(e){X(u.clone().minutes(parseInt(t(e.target).text(),10))),et.showPicker.call(c)},selectSecond:function(e){X(u.clone().seconds(parseInt(t(e.target).text(),10))),et.showPicker.call(c)},clear:tt,today:function(){q(e(),"d")&&X(e())},close:Z},it=function(e){return!t(e.currentTarget).is(".disabled")&&(et[t(e.currentTarget).data("action")].apply(c,arguments),!1)},nt=function(){var i,a={year:function(t){return t.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(t){return t.date(1).hours(0).seconds(0).minutes(0)},day:function(t){return t.hours(0).seconds(0).minutes(0)},hour:function(t){return t.seconds(0).minutes(0)},minute:function(t){return t.seconds(0)}};return o.prop("disabled")||!n.ignoreReadonly&&o.prop("readonly")||f?c:(o.val()!==undefined&&0!==o.val().trim().length?X(at(o.val().trim())):n.useCurrent&&p&&(o.is("input")&&0===o.val().trim().length||n.inline)&&(i=e(),"string"==typeof n.useCurrent&&(i=a[n.useCurrent](i)),X(i)),f=E(),L(),z(),f.find(".timepicker-hours").hide(),f.find(".timepicker-minutes").hide(),f.find(".timepicker-seconds").hide(),Q(),N(),t(window).on("resize",O),f.on("click","[data-action]",it),f.on("mousedown",!1),h&&h.hasClass("btn")&&h.toggleClass("active"),f.show(),O(),n.focusOnShow&&!o.is(":focus")&&o.focus(),I({type:"dp.show"}),c)},ot=function(){return f?Z():nt()},at=function(t){return(t=n.parseInputDate===undefined?e.isMoment(t)||t instanceof Date?e(t):e(t,s,n.useStrict):n.parseInputDate(t)).locale(n.locale),t},rt=function(t){var e,i,o,a,r=null,s=[],l={},u=t.which,d="p";for(e in $[u]=d,$)$.hasOwnProperty(e)&&$[e]===d&&(s.push(e),parseInt(e,10)!==u&&(l[e]=!0));for(e in n.keyBinds)if(n.keyBinds.hasOwnProperty(e)&&"function"==typeof n.keyBinds[e]&&(o=e.split(" ")).length===s.length&&w[u]===o[o.length-1]){for(a=!0,i=o.length-2;i>=0;i--)if(!(w[o[i]]in l)){a=!1;break}if(a){r=n.keyBinds[e];break}}r&&(r.call(c,f),t.stopPropagation(),t.preventDefault())},st=function(t){$[t.which]="r",t.stopPropagation(),t.preventDefault()},lt=function(e){var i=t(e.target).val().trim(),n=i?at(i):null;return X(n),e.stopImmediatePropagation(),!1},ct=function(){o.on({change:lt,blur:n.debug?"":Z,keydown:rt,keyup:st,focus:n.allowInputToggle?nt:""}),i.is("input")?o.on({focus:nt}):h&&(h.on("click",ot),h.on("mousedown",!1))},ut=function(){o.off({change:lt,blur:blur,keydown:rt,keyup:st,focus:n.allowInputToggle?Z:""}),i.is("input")?o.off({focus:nt}):h&&(h.off("click",ot),h.off("mousedown",!1))},dt=function(e){var i={};return t.each(e,function(){var t=at(this);t.isValid()&&(i[t.format("YYYY-MM-DD")]=!0)}),!!Object.keys(i).length&&i},pt=function(e){var i={};return t.each(e,function(){i[this]=!0}),!!Object.keys(i).length&&i},ht=function(){var t=n.format||"L LT";r=t.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(t){return(u.localeData().longDateFormat(t)||t).replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(t){return u.localeData().longDateFormat(t)||t})}),(s=n.extraFormats?n.extraFormats.slice():[]).indexOf(t)<0&&s.indexOf(r)<0&&s.push(r),a=r.toLowerCase().indexOf("a")<1&&r.replace(/\[.*?\]/g,"").indexOf("h")<1,x("y")&&(m=2),x("M")&&(m=1),x("d")&&(m=0),l=Math.max(m,l),p||X(u)};if(c.destroy=function(){Z(),ut(),i.removeData("DateTimePicker"),i.removeData("date")},c.toggle=ot,c.show=nt,c.hide=Z,c.disable=function(){return Z(),h&&h.hasClass("btn")&&h.addClass("disabled"),o.prop("disabled",!0),c},c.enable=function(){return h&&h.hasClass("btn")&&h.removeClass("disabled"),o.prop("disabled",!1),c},c.ignoreReadonly=function(t){if(0===arguments.length)return n.ignoreReadonly;if("boolean"!=typeof t)throw new TypeError("ignoreReadonly () expects a boolean parameter");return n.ignoreReadonly=t,c},c.options=function(e){if(0===arguments.length)return t.extend(!0,{},n);if(!(e instanceof Object))throw new TypeError("options() options parameter should be an object");return t.extend(!0,n,e),t.each(n,function(t,e){if(c[t]===undefined)throw new TypeError("option "+t+" is not recognized!");c[t](e)}),c},c.date=function(t){if(0===arguments.length)return p?null:u.clone();if(!(null===t||"string"==typeof t||e.isMoment(t)||t instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return X(null===t?null:at(t)),c},c.format=function(t){if(0===arguments.length)return n.format;if("string"!=typeof t&&("boolean"!=typeof t||!1!==t))throw new TypeError("format() expects a sting or boolean:false parameter "+t);return n.format=t,r&&ht(),c},c.dayViewHeaderFormat=function(t){if(0===arguments.length)return n.dayViewHeaderFormat;if("string"!=typeof t)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return n.dayViewHeaderFormat=t,c},c.extraFormats=function(t){if(0===arguments.length)return n.extraFormats;if(!1!==t&&!(t instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return n.extraFormats=t,s&&ht(),c},c.disabledDates=function(e){if(0===arguments.length)return n.disabledDates?t.extend({},n.disabledDates):n.disabledDates;if(!e)return n.disabledDates=!1,Q(),c;if(!(e instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return n.disabledDates=dt(e),n.enabledDates=!1,Q(),c},c.enabledDates=function(e){if(0===arguments.length)return n.enabledDates?t.extend({},n.enabledDates):n.enabledDates;if(!e)return n.enabledDates=!1,Q(),c;if(!(e instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return n.enabledDates=dt(e),n.disabledDates=!1,Q(),c},c.daysOfWeekDisabled=function(t){if(0===arguments.length)return n.daysOfWeekDisabled.splice(0);if("boolean"==typeof t&&!t)return n.daysOfWeekDisabled=!1,Q(),c;if(!(t instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");if(n.daysOfWeekDisabled=t.reduce(function(t,e){return(e=parseInt(e,10))>6||e<0||isNaN(e)?t:(-1===t.indexOf(e)&&t.push(e),t)},[]).sort(),n.useCurrent&&!n.keepInvalid){for(var e=0;!q(u,"d");){if(u.add(1,"d"),7===e)throw"Tried 7 times to find a valid date";e++}X(u)}return Q(),c},c.maxDate=function(t){if(0===arguments.length)return n.maxDate?n.maxDate.clone():n.maxDate;if("boolean"==typeof t&&!1===t)return n.maxDate=!1,Q(),c;"string"==typeof t&&("now"!==t&&"moment"!==t||(t=e()));var i=at(t);if(!i.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+t);if(n.minDate&&i.isBefore(n.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+i.format(r));return n.maxDate=i,n.useCurrent&&!n.keepInvalid&&u.isAfter(t)&&X(n.maxDate),d.isAfter(i)&&(d=i.clone().subtract(n.stepping,"m")),Q(),c},c.minDate=function(t){if(0===arguments.length)return n.minDate?n.minDate.clone():n.minDate;if("boolean"==typeof t&&!1===t)return n.minDate=!1,Q(),c;"string"==typeof t&&("now"!==t&&"moment"!==t||(t=e()));var i=at(t);if(!i.isValid())throw new TypeError("minDate() Could not parse date parameter: "+t);if(n.maxDate&&i.isAfter(n.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+i.format(r));return n.minDate=i,n.useCurrent&&!n.keepInvalid&&u.isBefore(t)&&X(n.minDate),d.isBefore(i)&&(d=i.clone().add(n.stepping,"m")),Q(),c},c.defaultDate=function(t){if(0===arguments.length)return n.defaultDate?n.defaultDate.clone():n.defaultDate;if(!t)return n.defaultDate=!1,c;"string"==typeof t&&("now"!==t&&"moment"!==t||(t=e()));var i=at(t);if(!i.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+t);if(!q(i))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return n.defaultDate=i,(n.defaultDate&&n.inline||""===o.val().trim()&&o.attr("placeholder")===undefined)&&X(n.defaultDate),c},c.locale=function(t){if(0===arguments.length)return n.locale;if(!e.localeData(t))throw new TypeError("locale() locale "+t+" is not loaded from moment locales!");return n.locale=t,u.locale(n.locale),d.locale(n.locale),r&&ht(),f&&(Z(),nt()),c},c.stepping=function(t){return 0===arguments.length?n.stepping:(t=parseInt(t,10),(isNaN(t)||t<1)&&(t=1),n.stepping=t,c)},c.useCurrent=function(t){var e=["year","month","day","hour","minute"];if(0===arguments.length)return n.useCurrent;if("boolean"!=typeof t&&"string"!=typeof t)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof t&&-1===e.indexOf(t.toLowerCase()))throw new TypeError("useCurrent() expects a string parameter of "+e.join(", "));return n.useCurrent=t,c},c.collapse=function(t){if(0===arguments.length)return n.collapse;if("boolean"!=typeof t)throw new TypeError("collapse() expects a boolean parameter");return n.collapse===t?c:(n.collapse=t,f&&(Z(),nt()),c)},c.icons=function(e){if(0===arguments.length)return t.extend({},n.icons);if(!(e instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return t.extend(n.icons,e),f&&(Z(),nt()),c},c.tooltips=function(e){if(0===arguments.length)return t.extend({},n.tooltips);if(!(e instanceof Object))throw new TypeError("tooltips() expects parameter to be an Object");return t.extend(n.tooltips,e),f&&(Z(),nt()),c},c.useStrict=function(t){if(0===arguments.length)return n.useStrict;if("boolean"!=typeof t)throw new TypeError("useStrict() expects a boolean parameter");return n.useStrict=t,c},c.sideBySide=function(t){if(0===arguments.length)return n.sideBySide;if("boolean"!=typeof t)throw new TypeError("sideBySide() expects a boolean parameter");return n.sideBySide=t,f&&(Z(),nt()),c},c.viewMode=function(t){if(0===arguments.length)return n.viewMode;if("string"!=typeof t)throw new TypeError("viewMode() expects a string parameter");if(-1===v.indexOf(t))throw new TypeError("viewMode() parameter must be one of ("+v.join(", ")+") value");return n.viewMode=t,l=Math.max(v.indexOf(t),m),N(),c},c.toolbarPlacement=function(t){if(0===arguments.length)return n.toolbarPlacement;if("string"!=typeof t)throw new TypeError("toolbarPlacement() expects a string parameter");if(-1===y.indexOf(t))throw new TypeError("toolbarPlacement() parameter must be one of ("+y.join(", ")+") value");return n.toolbarPlacement=t,f&&(Z(),nt()),c},c.widgetPositioning=function(e){if(0===arguments.length)return t.extend({},n.widgetPositioning);if("[object Object]"!=={}.toString.call(e))throw new TypeError("widgetPositioning() expects an object variable");if(e.horizontal){if("string"!=typeof e.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(e.horizontal=e.horizontal.toLowerCase(),-1===b.indexOf(e.horizontal))throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+b.join(", ")+")");n.widgetPositioning.horizontal=e.horizontal}if(e.vertical){if("string"!=typeof e.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(e.vertical=e.vertical.toLowerCase(),-1===_.indexOf(e.vertical))throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+_.join(", ")+")");n.widgetPositioning.vertical=e.vertical}return Q(),c},c.calendarWeeks=function(t){if(0===arguments.length)return n.calendarWeeks;if("boolean"!=typeof t)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return n.calendarWeeks=t,Q(),c},c.showTodayButton=function(t){if(0===arguments.length)return n.showTodayButton;if("boolean"!=typeof t)throw new TypeError("showTodayButton() expects a boolean parameter");return n.showTodayButton=t,f&&(Z(),nt()),c},c.showClear=function(t){if(0===arguments.length)return n.showClear;if("boolean"!=typeof t)throw new TypeError("showClear() expects a boolean parameter");return n.showClear=t,f&&(Z(),nt()),c},c.widgetParent=function(e){if(0===arguments.length)return n.widgetParent;if("string"==typeof e&&(e=t(e)),null!==e&&"string"!=typeof e&&!(e instanceof t))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return n.widgetParent=e,f&&(Z(),nt()),c},c.keepOpen=function(t){if(0===arguments.length)return n.keepOpen;if("boolean"!=typeof t)throw new TypeError("keepOpen() expects a boolean parameter");return n.keepOpen=t,c},c.focusOnShow=function(t){if(0===arguments.length)return n.focusOnShow;if("boolean"!=typeof t)throw new TypeError("focusOnShow() expects a boolean parameter");return n.focusOnShow=t,c},c.inline=function(t){if(0===arguments.length)return n.inline;if("boolean"!=typeof t)throw new TypeError("inline() expects a boolean parameter");return n.inline=t,c},c.clear=function(){return tt(),c},c.keyBinds=function(t){return n.keyBinds=t,c},c.debug=function(t){if("boolean"!=typeof t)throw new TypeError("debug() expects a boolean parameter");return n.debug=t,c},c.allowInputToggle=function(t){if(0===arguments.length)return n.allowInputToggle;if("boolean"!=typeof t)throw new TypeError("allowInputToggle() expects a boolean parameter");return n.allowInputToggle=t,c},c.showClose=function(t){if(0===arguments.length)return n.showClose;if("boolean"!=typeof t)throw new TypeError("showClose() expects a boolean parameter");return n.showClose=t,c},c.keepInvalid=function(t){if(0===arguments.length)return n.keepInvalid;if("boolean"!=typeof t)throw new TypeError("keepInvalid() expects a boolean parameter");return n.keepInvalid=t,c},c.datepickerInput=function(t){if(0===arguments.length)return n.datepickerInput;if("string"!=typeof t)throw new TypeError("datepickerInput() expects a string parameter");return n.datepickerInput=t,c},c.parseInputDate=function(t){if(0===arguments.length)return n.parseInputDate;if("function"!=typeof t)throw new TypeError("parseInputDate() sholud be as function");return n.parseInputDate=t,c},c.disabledTimeIntervals=function(e){if(0===arguments.length)return n.disabledTimeIntervals?t.extend({},n.disabledTimeIntervals):n.disabledTimeIntervals;if(!e)return n.disabledTimeIntervals=!1,Q(),c;if(!(e instanceof Array))throw new TypeError("disabledTimeIntervals() expects an array parameter");return n.disabledTimeIntervals=e,Q(),c},c.disabledHours=function(e){if(0===arguments.length)return n.disabledHours?t.extend({},n.disabledHours):n.disabledHours;if(!e)return n.disabledHours=!1,Q(),c;if(!(e instanceof Array))throw new TypeError("disabledHours() expects an array parameter");if(n.disabledHours=pt(e),n.enabledHours=!1,n.useCurrent&&!n.keepInvalid){for(var i=0;!q(u,"h");){if(u.add(1,"h"),24===i)throw"Tried 24 times to find a valid date";i++}X(u)}return Q(),c},c.enabledHours=function(e){if(0===arguments.length)return n.enabledHours?t.extend({},n.enabledHours):n.enabledHours;if(!e)return n.enabledHours=!1,Q(),c;if(!(e instanceof Array))throw new TypeError("enabledHours() expects an array parameter");if(n.enabledHours=pt(e),n.disabledHours=!1,n.useCurrent&&!n.keepInvalid){for(var i=0;!q(u,"h");){if(u.add(1,"h"),24===i)throw"Tried 24 times to find a valid date";i++}X(u)}return Q(),c},c.viewDate=function(t){if(0===arguments.length)return d.clone();if(!t)return d=u.clone(),c
;if(!("string"==typeof t||e.isMoment(t)||t instanceof Date))throw new TypeError("viewDate() parameter must be one of [string, moment or Date]");return d=at(t),P(),c},i.is("input"))o=i;else if(0===(o=i.find(n.datepickerInput)).size())o=i.find("input");else if(!o.is("input"))throw new Error('CSS class "'+n.datepickerInput+'" cannot be applied to non input element');if(i.hasClass("input-group")&&(h=0===i.find(".datepickerbutton").size()?i.find(".input-group-addon"):i.find(".datepickerbutton")),!n.inline&&!o.is("input"))throw new Error("Could not initialize DateTimePicker without an input element");return t.extend(!0,n,M()),c.options(n),ht(),ct(),o.prop("disabled")&&c.disable(),o.is("input")&&0!==o.val().trim().length?X(at(o.val().trim())):n.defaultDate&&o.attr("placeholder")===undefined&&X(n.defaultDate),n.inline&&nt(),c};t.fn.datetimepicker=function(e){return this.each(function(){var n=t(this);n.data("DateTimePicker")||(e=t.extend(!0,{},t.fn.datetimepicker.defaults,e),n.data("DateTimePicker",i(n,e)))})},t.fn.datetimepicker.defaults={format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:e.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},tooltips:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",prevMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",prevYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevCentury:"Previous Century",nextCentury:"Next Century"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:!1,calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,showClose:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,focusOnShow:!0,inline:!1,keepInvalid:!1,datepickerInput:".datepickerinput",keyBinds:{up:function(t){if(t){var i=this.date()||e();t.find(".datepicker").is(":visible")?this.date(i.clone().subtract(7,"d")):this.date(i.clone().add(this.stepping(),"m"))}},down:function(t){if(t){var i=this.date()||e();t.find(".datepicker").is(":visible")?this.date(i.clone().add(7,"d")):this.date(i.clone().subtract(this.stepping(),"m"))}else this.show()},"control up":function(t){if(t){var i=this.date()||e();t.find(".datepicker").is(":visible")?this.date(i.clone().subtract(1,"y")):this.date(i.clone().add(1,"h"))}},"control down":function(t){if(t){var i=this.date()||e();t.find(".datepicker").is(":visible")?this.date(i.clone().add(1,"y")):this.date(i.clone().subtract(1,"h"))}},left:function(t){if(t){var i=this.date()||e();t.find(".datepicker").is(":visible")&&this.date(i.clone().subtract(1,"d"))}},right:function(t){if(t){var i=this.date()||e();t.find(".datepicker").is(":visible")&&this.date(i.clone().add(1,"d"))}},pageUp:function(t){if(t){var i=this.date()||e();t.find(".datepicker").is(":visible")&&this.date(i.clone().subtract(1,"M"))}},pageDown:function(t){if(t){var i=this.date()||e();t.find(".datepicker").is(":visible")&&this.date(i.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(t){t.find(".timepicker").is(":visible")&&t.find('.btn[data-action="togglePeriod"]').click()},t:function(){this.date(e())},"delete":function(){this.clear()}},debug:!1,allowInputToggle:!1,disabledTimeIntervals:!1,disabledHours:!1,enabledHours:!1,viewDate:!1}}),function(t,e){if("function"==typeof define&&define.amd)define(["moment","jquery"],function(t,i){return i.fn||(i.fn={}),"function"!=typeof t&&t["default"]&&(t=t["default"]),e(t,i)});else if("object"==typeof module&&module.exports){var i="undefined"!=typeof window?window.jQuery:void 0;i||(i=require("jquery")).fn||(i.fn={});var n="undefined"!=typeof window&&void 0!==window.moment?window.moment:require("moment");module.exports=e(n,i)}else t.daterangepicker=e(t.moment,t.jQuery)}(this,function(t,e){var i=function(i,n,o){if(this.parentEl="body",this.element=e(i),this.startDate=t().startOf("day"),this.endDate=t().endOf("day"),this.minDate=!1,this.maxDate=!1,this.maxSpan=!1,this.autoApply=!1,this.singleDatePicker=!1,this.showDropdowns=!1,this.minYear=t().subtract(100,"year").format("YYYY"),this.maxYear=t().add(100,"year").format("YYYY"),this.showWeekNumbers=!1,this.showISOWeekNumbers=!1,this.showCustomRangeLabel=!0,this.timePicker=!1,this.timePicker24Hour=!1,this.timePickerIncrement=1,this.timePickerSeconds=!1,this.linkedCalendars=!0,this.autoUpdateInput=!0,this.alwaysShowCalendars=!1,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses="btn btn-sm",this.applyButtonClasses="btn-primary",this.cancelButtonClasses="btn-default",this.locale={direction:"ltr",format:t.localeData().longDateFormat("L"),separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:t.weekdaysMin(),monthNames:t.monthsShort(),firstDay:t.localeData().firstDayOfWeek()},this.callback=function(){},this.isShowing=!1,this.leftCalendar={},this.rightCalendar={},"object"==typeof n&&null!==n||(n={}),"string"==typeof(n=e.extend(this.element.data(),n)).template||n.template instanceof e||(n.template='<div class="daterangepicker"><div class="ranges"></div><div class="drp-calendar left"><div class="calendar-table"></div><div class="calendar-time"></div></div><div class="drp-calendar right"><div class="calendar-table"></div><div class="calendar-time"></div></div><div class="drp-buttons"><span class="drp-selected"></span><button class="cancelBtn" type="button"></button><button class="applyBtn" disabled="disabled" type="button"></button> </div></div>'),this.parentEl=n.parentEl&&e(n.parentEl).length?e(n.parentEl):e(this.parentEl),this.container=e(n.template).appendTo(this.parentEl),"object"==typeof n.locale&&("string"==typeof n.locale.direction&&(this.locale.direction=n.locale.direction),"string"==typeof n.locale.format&&(this.locale.format=n.locale.format),"string"==typeof n.locale.separator&&(this.locale.separator=n.locale.separator),"object"==typeof n.locale.daysOfWeek&&(this.locale.daysOfWeek=n.locale.daysOfWeek.slice()),"object"==typeof n.locale.monthNames&&(this.locale.monthNames=n.locale.monthNames.slice()),"number"==typeof n.locale.firstDay&&(this.locale.firstDay=n.locale.firstDay),"string"==typeof n.locale.applyLabel&&(this.locale.applyLabel=n.locale.applyLabel),"string"==typeof n.locale.cancelLabel&&(this.locale.cancelLabel=n.locale.cancelLabel),"string"==typeof n.locale.weekLabel&&(this.locale.weekLabel=n.locale.weekLabel),"string"==typeof n.locale.customRangeLabel)){(p=document.createElement("textarea")).innerHTML=n.locale.customRangeLabel;var a=p.value;this.locale.customRangeLabel=a}if(this.container.addClass(this.locale.direction),"string"==typeof n.startDate&&(this.startDate=t(n.startDate,this.locale.format)),"string"==typeof n.endDate&&(this.endDate=t(n.endDate,this.locale.format)),"string"==typeof n.minDate&&(this.minDate=t(n.minDate,this.locale.format)),"string"==typeof n.maxDate&&(this.maxDate=t(n.maxDate,this.locale.format)),"object"==typeof n.startDate&&(this.startDate=t(n.startDate)),"object"==typeof n.endDate&&(this.endDate=t(n.endDate)),"object"==typeof n.minDate&&(this.minDate=t(n.minDate)),"object"==typeof n.maxDate&&(this.maxDate=t(n.maxDate)),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),"string"==typeof n.applyButtonClasses&&(this.applyButtonClasses=n.applyButtonClasses),"string"==typeof n.applyClass&&(this.applyButtonClasses=n.applyClass),"string"==typeof n.cancelButtonClasses&&(this.cancelButtonClasses=n.cancelButtonClasses),"string"==typeof n.cancelClass&&(this.cancelButtonClasses=n.cancelClass),"object"==typeof n.maxSpan&&(this.maxSpan=n.maxSpan),"object"==typeof n.dateLimit&&(this.maxSpan=n.dateLimit),"string"==typeof n.opens&&(this.opens=n.opens),"string"==typeof n.drops&&(this.drops=n.drops),"boolean"==typeof n.showWeekNumbers&&(this.showWeekNumbers=n.showWeekNumbers),"boolean"==typeof n.showISOWeekNumbers&&(this.showISOWeekNumbers=n.showISOWeekNumbers),"string"==typeof n.buttonClasses&&(this.buttonClasses=n.buttonClasses),"object"==typeof n.buttonClasses&&(this.buttonClasses=n.buttonClasses.join(" ")),"boolean"==typeof n.showDropdowns&&(this.showDropdowns=n.showDropdowns),"number"==typeof n.minYear&&(this.minYear=n.minYear),"number"==typeof n.maxYear&&(this.maxYear=n.maxYear),"boolean"==typeof n.showCustomRangeLabel&&(this.showCustomRangeLabel=n.showCustomRangeLabel),"boolean"==typeof n.singleDatePicker&&(this.singleDatePicker=n.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),"boolean"==typeof n.timePicker&&(this.timePicker=n.timePicker),"boolean"==typeof n.timePickerSeconds&&(this.timePickerSeconds=n.timePickerSeconds),"number"==typeof n.timePickerIncrement&&(this.timePickerIncrement=n.timePickerIncrement),"boolean"==typeof n.timePicker24Hour&&(this.timePicker24Hour=n.timePicker24Hour),"boolean"==typeof n.autoApply&&(this.autoApply=n.autoApply),"boolean"==typeof n.autoUpdateInput&&(this.autoUpdateInput=n.autoUpdateInput),"boolean"==typeof n.linkedCalendars&&(this.linkedCalendars=n.linkedCalendars),"function"==typeof n.isInvalidDate&&(this.isInvalidDate=n.isInvalidDate),"function"==typeof n.isCustomDate&&(this.isCustomDate=n.isCustomDate),"boolean"==typeof n.alwaysShowCalendars&&(this.alwaysShowCalendars=n.alwaysShowCalendars),0!=this.locale.firstDay)for(var r=this.locale.firstDay;r>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),r--;var s,l,c;if(void 0===n.startDate&&void 0===n.endDate&&e(this.element).is(":text")){var u=e(this.element).val(),d=u.split(this.locale.separator);s=l=null,2==d.length?(s=t(d[0],this.locale.format),l=t(d[1],this.locale.format)):this.singleDatePicker&&""!==u&&(s=t(u,this.locale.format),l=t(u,this.locale.format)),null!==s&&null!==l&&(this.setStartDate(s),this.setEndDate(l))}if("object"==typeof n.ranges){for(c in n.ranges){s="string"==typeof n.ranges[c][0]?t(n.ranges[c][0],this.locale.format):t(n.ranges[c][0]),l="string"==typeof n.ranges[c][1]?t(n.ranges[c][1],this.locale.format):t(n.ranges[c][1]),this.minDate&&s.isBefore(this.minDate)&&(s=this.minDate.clone());var p,h=this.maxDate;if(this.maxSpan&&h&&s.clone().add(this.maxSpan).isAfter(h)&&(h=s.clone().add(this.maxSpan)),h&&l.isAfter(h)&&(l=h.clone()),!(this.minDate&&l.isBefore(this.minDate,this.timepicker?"minute":"day")||h&&s.isAfter(h,this.timepicker?"minute":"day")))(p=document.createElement("textarea")).innerHTML=c,a=p.value,this.ranges[a]=[s,l]}var f="<ul>";for(c in this.ranges)f+='<li data-range-key="'+c+'">'+c+"</li>";this.showCustomRangeLabel&&(f+='<li data-range-key="'+this.locale.customRangeLabel+'">'+this.locale.customRangeLabel+"</li>"),f+="</ul>",this.container.find(".ranges").prepend(f)}"function"==typeof o&&(this.callback=o),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide()),this.timePicker&&this.autoApply&&(this.autoApply=!1),this.autoApply&&this.container.addClass("auto-apply"),"object"==typeof n.ranges&&this.container.addClass("show-ranges"),this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".drp-calendar.left").addClass("single"),this.container.find(".drp-calendar.left").show(),this.container.find(".drp-calendar.right").hide(),this.timePicker||this.container.addClass("auto-apply")),(void 0===n.ranges&&!this.singleDatePicker||this.alwaysShowCalendars)&&this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses),this.applyButtonClasses.length&&this.container.find(".applyBtn").addClass(this.applyButtonClasses),this.cancelButtonClasses.length&&this.container.find(".cancelBtn").addClass(this.cancelButtonClasses),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".drp-calendar").on("click.daterangepicker",".prev",e.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",e.proxy(this.clickNext,this)).on("mousedown.daterangepicker","td.available",e.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",e.proxy(this.hoverDate,this)).on("change.daterangepicker","select.yearselect",e.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",e.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",e.proxy(this.timeChanged,this)),this.container.find(".ranges").on("click.daterangepicker","li",e.proxy(this.clickRange,this)),this.container.find(".drp-buttons").on("click.daterangepicker","button.applyBtn",e.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",e.proxy(this.clickCancel,this)),this.element.is("input")||this.element.is("button")?this.element.on({"click.daterangepicker":e.proxy(this.show,this),"focus.daterangepicker":e.proxy(this.show,this),"keyup.daterangepicker":e.proxy(this.elementChanged,this),"keydown.daterangepicker":e.proxy(this.keydown,this)}):(this.element.on("click.daterangepicker",e.proxy(this.toggle,this)),this.element.on("keydown.daterangepicker",e.proxy(this.toggle,this))),this.updateElement()};return i.prototype={constructor:i,setStartDate:function(e){"string"==typeof e&&(this.startDate=t(e,this.locale.format)),"object"==typeof e&&(this.startDate=t(e)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.floor(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.isShowing||this.updateElement(),this.updateMonthsInView()},setEndDate:function(e){"string"==typeof e&&(this.endDate=t(e,this.locale.format)),"object"==typeof e&&(this.endDate=t(e)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.endDate.isBefore(this.startDate)&&(this.endDate=this.startDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),this.maxSpan&&this.startDate.clone().add(this.maxSpan).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.maxSpan)),this.previousRightTime=this.endDate.clone(),this.container.find(".drp-selected").html(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.isShowing||this.updateElement(),this.updateMonthsInView()},isInvalidDate:function(){return!1},isCustomDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").removeAttr("disabled").removeClass("disabled"):this.container.find(".right .calendar-time select").attr("disabled","disabled").addClass("disabled")),this.endDate&&this.container.find(".drp-selected").html(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.updateMonthsInView(),this.updateCalendars(),this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;this.leftCalendar.month=this.startDate.clone().date(2),this.linkedCalendars||this.endDate.month()==this.startDate.month()&&this.endDate.year()==this.startDate.year()?this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"):this.rightCalendar.month=this.endDate.clone().date(2)}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"));this.maxDate&&this.linkedCalendars&&!this.singleDatePicker&&this.rightCalendar.month>this.maxDate&&(this.rightCalendar.month=this.maxDate.clone().date(2),this.leftCalendar.month=this.maxDate.clone().date(2).subtract(1,"month"))},updateCalendars:function(){var t,e,i,n;this.timePicker&&(this.endDate?(t=parseInt(this.container.find(".left .hourselect").val(),10),e=parseInt(this.container.find(".left .minuteselect").val(),10),isNaN(e)&&(e=parseInt(this.container.find(".left .minuteselect option:last").val(),10)),i=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,this.timePicker24Hour||("PM"===(n=this.container.find(".left .ampmselect").val())&&t<12&&(t+=12),"AM"===n&&12===t&&(t=0))):(t=parseInt(this.container.find(".right .hourselect").val(),10),e=parseInt(this.container.find(".right .minuteselect").val(),10),isNaN(e)&&(e=parseInt(this.container.find(".right .minuteselect option:last").val(),10)),i=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,this.timePicker24Hour||("PM"===(n=this.container.find(".right .ampmselect").val())&&t<12&&(t+=12),"AM"===n&&12===t&&(t=0))),this.leftCalendar.month.hour(t).minute(e).second(i),this.rightCalendar.month.hour(t).minute(e).second(i));this.renderCalendar("left"),this.renderCalendar("right"),this.container.find(".ranges li").removeClass("active"),null!=this.endDate&&this.calculateChosenLabel()},renderCalendar:function(i){var n,o=(n="left"==i?this.leftCalendar:this.rightCalendar).month.month(),a=n.month.year(),r=n.month.hour(),s=n.month.minute(),l=n.month.second(),c=t([a,o]).daysInMonth(),u=t([a,o,1]),d=t([a,o,c]),p=t(u).subtract(1,"month").month(),h=t(u).subtract(1,"month").year(),f=t([h,p]).daysInMonth(),m=u.day();(n=[]).firstDay=u,n.lastDay=d;for(var g=0;g<6;g++)n[g]=[];var v=f-m+this.locale.firstDay+1;v>f&&(v-=7),m==this.locale.firstDay&&(v=f-6);for(var _=t([h,p,v,12,s,l]),b=(g=0,0),y=0;g<42;g++,b++,_=t(_).add(24,"hour"))g>0&&b%7==0&&(b=0,y++),n[y][b]=_.clone().hour(r).minute(s).second(l),_.hour(12),this.minDate&&n[y][b].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&n[y][b].isBefore(this.minDate)&&"left"==i&&(n[y][b]=this.minDate.clone()),this.maxDate&&n[y][b].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&n[y][b].isAfter(this.maxDate)&&"right"==i&&(n[y][b]=this.maxDate.clone());"left"==i?this.leftCalendar.calendar=n:this.rightCalendar.calendar=n;var w="left"==i?this.minDate:this.startDate,$=this.maxDate,x=("left"==i?this.startDate:this.endDate,this.locale.direction,'<table class="table-condensed">');x+="<thead>",x+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(x+="<th></th>"),w&&!w.isBefore(n.firstDay)||this.linkedCalendars&&"left"!=i?x+="<th></th>":x+='<th class="prev available"><span></span></th>';var k=this.locale.monthNames[n[1][1].month()]+n[1][1].format(" YYYY");if(this.showDropdowns){for(var C=n[1][1].month(),D=n[1][1].year(),S=$&&$.year()||this.maxYear,T=w&&w.year()||this.minYear,A=D==T,E=D==S,M='<select class="monthselect">',O=0;O<12;O++)(!A||w&&O>=w.month())&&(!E||$&&O<=$.month())?M+="<option value='"+O+"'"+(O===C?" selected='selected'":"")+">"+this.locale.monthNames[O]+"</option>":M+="<option value='"+O+"'"+(O===C?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[O]+"</option>";M+="</select>";for(var I='<select class="yearselect">',P=T;P<=S;P++)I+='<option value="'+P+'"'+(P===D?' selected="selected"':"")+">"+P+"</option>";k=M+(I+="</select>")}if(x+='<th colspan="5" class="month">'+k+"</th>",$&&!$.isAfter(n.lastDay)||this.linkedCalendars&&"right"!=i&&!this.singleDatePicker?x+="<th></th>":x+='<th class="next available"><span></span></th>',x+="</tr>",x+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(x+='<th class="week">'+this.locale.weekLabel+"</th>"),e.each(this.locale.daysOfWeek,function(t,e){x+="<th>"+e+"</th>"}),x+="</tr>",x+="</thead>",x+="<tbody>",null==this.endDate&&this.maxSpan){var N=this.startDate.clone().add(this.maxSpan).endOf("day");$&&!N.isBefore($)||($=N)}for(y=0;y<6;y++){for(x+="<tr>",this.showWeekNumbers?x+='<td class="week">'+n[y][0].week()+"</td>":this.showISOWeekNumbers&&(x+='<td class="week">'+n[y][0].isoWeek()+"</td>"),b=0;b<7;b++){var L=[];n[y][b].isSame(new Date,"day")&&L.push("today"),n[y][b].isoWeekday()>5&&L.push("weekend"),n[y][b].month()!=n[1][1].month()&&L.push("off","ends"),this.minDate&&n[y][b].isBefore(this.minDate,"day")&&L.push("off","disabled"),$&&n[y][b].isAfter($,"day")&&L.push("off","disabled"),this.isInvalidDate(n[y][b])&&L.push("off","disabled"),n[y][b].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&L.push("active","start-date"),null!=this.endDate&&n[y][b].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&L.push("active","end-date"),null!=this.endDate&&n[y][b]>this.startDate&&n[y][b]<this.endDate&&L.push("in-range");var R=this.isCustomDate(n[y][b]);!1!==R&&("string"==typeof R?L.push(R):Array.prototype.push.apply(L,R));var F="",j=!1;for(g=0;g<L.length;g++)F+=L[g]+" ","disabled"==L[g]&&(j=!0);j||(F+="available"),x+='<td class="'+F.replace(/^\s+|\s+$/g,"")+'" data-title="r'+y+"c"+b+'">'+n[y][b].date()+"</td>"}x+="</tr>"}x+="</tbody>",x+="</table>",this.container.find(".drp-calendar."+i+" .calendar-table").html(x)},renderTimePicker:function(t){if("right"!=t||this.endDate){var e,i,n,o=this.maxDate;if(!this.maxSpan||this.maxDate&&!this.startDate.clone().add(this.maxSpan).isBefore(this.maxDate)||(o=this.startDate.clone().add(this.maxSpan)),"left"==t)i=this.startDate.clone(),n=this.minDate;else if("right"==t){i=this.endDate.clone(),n=this.startDate;var a=this.container.find(".drp-calendar.right .calendar-time");if(""!=a.html()&&(i.hour(isNaN(i.hour())?a.find(".hourselect option:selected").val():i.hour()),i.minute(isNaN(i.minute())?a.find(".minuteselect option:selected").val():i.minute()),i.second(isNaN(i.second())?a.find(".secondselect option:selected").val():i.second()),!this.timePicker24Hour)){var r=a.find(".ampmselect option:selected").val();"PM"===r&&i.hour()<12&&i.hour(i.hour()+12),"AM"===r&&12===i.hour()&&i.hour(0)}i.isBefore(this.startDate)&&(i=this.startDate.clone()),o&&i.isAfter(o)&&(i=o.clone())}e='<select class="hourselect">';for(var s=this.timePicker24Hour?0:1,l=this.timePicker24Hour?23:12,c=s;c<=l;c++){var u=c;this.timePicker24Hour||(u=i.hour()>=12?12==c?12:c+12:12==c?0:c);var d=i.clone().hour(u),p=!1;n&&d.minute(59).isBefore(n)&&(p=!0),o&&d.minute(0).isAfter(o)&&(p=!0),u!=i.hour()||p?e+=p?'<option value="'+c+'" disabled="disabled" class="disabled">'+c+"</option>":'<option value="'+c+'">'+c+"</option>":e+='<option value="'+c+'" selected="selected">'+c+"</option>"}for(e+="</select> ",e+=': <select class="minuteselect">',c=0;c<60;c+=this.timePickerIncrement){var h=c<10?"0"+c:c;d=i.clone().minute(c),p=!1,n&&d.second(59).isBefore(n)&&(p=!0),o&&d.second(0).isAfter(o)&&(p=!0),i.minute()!=c||p?e+=p?'<option value="'+c+'" disabled="disabled" class="disabled">'+h+"</option>":'<option value="'+c+'">'+h+"</option>":e+='<option value="'+c+'" selected="selected">'+h+"</option>"}if(e+="</select> ",this.timePickerSeconds){for(e+=': <select class="secondselect">',c=0;c<60;c++)h=c<10?"0"+c:c,d=i.clone().second(c),p=!1,n&&d.isBefore(n)&&(p=!0),o&&d.isAfter(o)&&(p=!0),i.second()!=c||p?e+=p?'<option value="'+c+'" disabled="disabled" class="disabled">'+h+"</option>":'<option value="'+c+'">'+h+"</option>":e+='<option value="'+c+'" selected="selected">'+h+"</option>";e+="</select> "}if(!this.timePicker24Hour){e+='<select class="ampmselect">';var f="",m="";n&&i.clone().hour(12).minute(0).second(0).isBefore(n)&&(f=' disabled="disabled" class="disabled"'),o&&i.clone().hour(0).minute(0).second(0).isAfter(o)&&(m=' disabled="disabled" class="disabled"'),i.hour()>=12?e+='<option value="AM"'+f+'>AM</option><option value="PM" selected="selected"'+m+">PM</option>":e+='<option value="AM" selected="selected"'+f+'>AM</option><option value="PM"'+m+">PM</option>",e+="</select>"}this.container.find(".drp-calendar."+t+" .calendar-time").html(e)}},updateFormInputs:function(){this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled")},move:function(){var t,i={top:0,left:0},n=e(window).width();this.parentEl.is("body")||(i={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},n=this.parentEl[0].clientWidth+this.parentEl.offset().left),t="up"==this.drops?this.element.offset().top-this.container.outerHeight()-i.top:this.element.offset().top+this.element.outerHeight()-i.top,this.container.css({top:0,left:0,right:"auto"});var o=this.container.outerWidth();if(this.container["up"==this.drops?"addClass":"removeClass"]("drop-up"),"left"==this.opens){var a=n-this.element.offset().left-this.element.outerWidth();o+a>e(window).width()?this.container.css({top:t,right:"auto",left:9}):this.container.css({top:t,right:a,left:"auto"})}else if("center"==this.opens)(r=this.element.offset().left-i.left+this.element.outerWidth()/2-o/2)<0?this.container.css({top:t,right:"auto",left:9}):r+o>e(window).width()?this.container.css({top:t,left:"auto",right:0}):this.container.css({top:t,left:r,right:"auto"});else{var r;(r=this.element.offset().left-i.left)+o>e(window).width()?this.container.css({top:t,left:"auto",right:0}):this.container.css({top:t,left:r,right:"auto"})}},show:function(){this.isShowing||(this._outsideClickProxy=e.proxy(function(t){this.outsideClick(t)},this),e(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),e(window).on("resize.daterangepicker",e.proxy(function(t){this.move(t)},this)),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.previousRightTime=this.endDate.clone(),this.updateView(),this.container.show(),this.move(),this.element.trigger("show.daterangepicker",this),this.isShowing=!0)},hide:function(){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate.clone(),this.endDate.clone(),this.chosenLabel),this.updateElement(),e(document).off(".daterangepicker"),e(window).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",this),this.isShowing=!1)},toggle:function(){this.isShowing?this.hide():this.show()},outsideClick:function(t){var i=e(t.target);"focusin"==t.type||i.closest(this.element).length||i.closest(this.container).length||i.closest(".calendar-table").length||(this.hide(),this.element.trigger("outsideClick.daterangepicker",this))},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},clickRange:function(t){var e=t.target.getAttribute("data-range-key");if(this.chosenLabel=e,e==this.locale.customRangeLabel)this.showCalendars();else{var i=this.ranges[e];this.startDate=i[0],this.endDate=i[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.alwaysShowCalendars||this.hideCalendars(),this.clickApply()}},clickPrev:function(t){e(t.target).parents(".drp-calendar").hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,"month")):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(t){e(t.target).parents(".drp-calendar").hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month")),this.updateCalendars()},hoverDate:function(t){if(e(t.target).hasClass("available")){var i=e(t.target).attr("data-title"),n=i.substr(1,1),o=i.substr(3,1),a=e(t.target).parents(".drp-calendar").hasClass("left")?this.leftCalendar.calendar[n][o]:this.rightCalendar.calendar[n][o],r=this.leftCalendar,s=this.rightCalendar,l=this.startDate;this.endDate||this.container.find(".drp-calendar tbody td").each(function(t,i){if(!e(i).hasClass("week")){var n=e(i).attr("data-title"),o=n.substr(1,1),c=n.substr(3,1),u=e(i).parents(".drp-calendar").hasClass("left")?r.calendar[o][c]:s.calendar[o][c];u.isAfter(l)&&u.isBefore(a)||u.isSame(a,"day")?e(i).addClass("in-range"):e(i).removeClass("in-range")}})}},clickDate:function(t){if(e(t.target).hasClass("available")){var i=e(t.target).attr("data-title"),n=i.substr(1,1),o=i.substr(3,1),a=e(t.target).parents(".drp-calendar").hasClass("left")?this.leftCalendar.calendar[n][o]:this.rightCalendar.calendar[n][o];if(this.endDate||a.isBefore(this.startDate,"day")){if(this.timePicker){var r=parseInt(this.container.find(".left .hourselect").val(),10);this.timePicker24Hour||("PM"===(c=this.container.find(".left .ampmselect").val())&&r<12&&(r+=12),"AM"===c&&12===r&&(r=0));var s=parseInt(this.container.find(".left .minuteselect").val(),10);isNaN(s)&&(s=parseInt(this.container.find(".left .minuteselect option:last").val(),10));var l=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0;a=a.clone().hour(r).minute(s).second(l)}this.endDate=null,this.setStartDate(a.clone())}else if(!this.endDate&&a.isBefore(this.startDate))this.setEndDate(this.startDate.clone());else{var c;if(this.timePicker)r=parseInt(this.container.find(".right .hourselect").val(),10),this.timePicker24Hour||("PM"===(c=this.container.find(".right .ampmselect").val())&&r<12&&(r+=12),"AM"===c&&12===r&&(r=0)),s=parseInt(this.container.find(".right .minuteselect").val(),10),isNaN(s)&&(s=parseInt(this.container.find(".right .minuteselect option:last").val(),10)),l=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,a=a.clone().hour(r).minute(s).second(l);this.setEndDate(a.clone()),this.autoApply&&(this.calculateChosenLabel(),this.clickApply())}this.singleDatePicker&&(this.setEndDate(this.startDate),this.timePicker||this.clickApply()),this.updateView(),t.stopPropagation()}},calculateChosenLabel:function(){var t=!0,e=0;for(var i in this.ranges){if(this.timePicker){var n=this.timePickerSeconds?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm";if(this.startDate.format(n)==this.ranges[i][0].format(n)&&this.endDate.format(n)==this.ranges[i][1].format(n)){t=!1,this.chosenLabel=this.container.find(".ranges li:eq("+e+")").addClass("active").attr("data-range-key");break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[i][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[i][1].format("YYYY-MM-DD")){t=!1,this.chosenLabel=this.container.find(".ranges li:eq("+e+")").addClass("active").attr("data-range-key");break}e++}t&&(this.showCustomRangeLabel?this.chosenLabel=this.container.find(".ranges li:last").addClass("active").attr("data-range-key"):this.chosenLabel=null,this.showCalendars())},clickApply:function(){this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.hide(),
this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(t){var i=e(t.target).closest(".drp-calendar").hasClass("left"),n=i?"left":"right",o=this.container.find(".drp-calendar."+n),a=parseInt(o.find(".monthselect").val(),10),r=o.find(".yearselect").val();i||(r<this.startDate.year()||r==this.startDate.year()&&a<this.startDate.month())&&(a=this.startDate.month(),r=this.startDate.year()),this.minDate&&(r<this.minDate.year()||r==this.minDate.year()&&a<this.minDate.month())&&(a=this.minDate.month(),r=this.minDate.year()),this.maxDate&&(r>this.maxDate.year()||r==this.maxDate.year()&&a>this.maxDate.month())&&(a=this.maxDate.month(),r=this.maxDate.year()),i?(this.leftCalendar.month.month(a).year(r),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(a).year(r),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month"))),this.updateCalendars()},timeChanged:function(t){var i=e(t.target).closest(".drp-calendar"),n=i.hasClass("left"),o=parseInt(i.find(".hourselect").val(),10),a=parseInt(i.find(".minuteselect").val(),10);isNaN(a)&&(a=parseInt(i.find(".minuteselect option:last").val(),10));var r=this.timePickerSeconds?parseInt(i.find(".secondselect").val(),10):0;if(!this.timePicker24Hour){var s=i.find(".ampmselect").val();"PM"===s&&o<12&&(o+=12),"AM"===s&&12===o&&(o=0)}if(n){var l=this.startDate.clone();l.hour(o),l.minute(a),l.second(r),this.setStartDate(l),this.singleDatePicker?this.endDate=this.startDate.clone():this.endDate&&this.endDate.format("YYYY-MM-DD")==l.format("YYYY-MM-DD")&&this.endDate.isBefore(l)&&this.setEndDate(l.clone())}else if(this.endDate){var c=this.endDate.clone();c.hour(o),c.minute(a),c.second(r),this.setEndDate(c)}this.updateCalendars(),this.updateFormInputs(),this.renderTimePicker("left"),this.renderTimePicker("right")},elementChanged:function(){if(this.element.is("input")&&this.element.val().length){var e=this.element.val().split(this.locale.separator),i=null,n=null;2===e.length&&(i=t(e[0],this.locale.format),n=t(e[1],this.locale.format)),(this.singleDatePicker||null===i||null===n)&&(n=i=t(this.element.val(),this.locale.format)),i.isValid()&&n.isValid()&&(this.setStartDate(i),this.setEndDate(n),this.updateView())}},keydown:function(t){9!==t.keyCode&&13!==t.keyCode||this.hide(),27===t.keyCode&&(t.preventDefault(),t.stopPropagation(),this.hide())},updateElement:function(){if(this.element.is("input")&&this.autoUpdateInput){var t=this.startDate.format(this.locale.format);this.singleDatePicker||(t+=this.locale.separator+this.endDate.format(this.locale.format)),t!==this.element.val()&&this.element.val(t).trigger("change")}},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData()}},e.fn.daterangepicker=function(t,n){var o=e.extend(!0,{},e.fn.daterangepicker.defaultOptions,t);return this.each(function(){var t=e(this);t.data("daterangepicker")&&t.data("daterangepicker").remove(),t.data("daterangepicker",new i(t,o,n))}),this},i}),function(){var t=1,e={},i=window!==window.parent&&!window.opener,n=function(t,e){t.postMessage(JSON.stringify(e),"*")},o=function(t,i){if(n(parent,t),!i)return new Promise(i=>{e[t.id]=i});e[t.id]=i};i&&(window.alert=function(t){n(parent,{event:"dialog",type:"alert",message:t})},window.confirm=function(e,i){var n={event:"dialog",type:"confirm",id:t++,message:e};return o(n,i)},window.prompt=function(e,i,n){var a={event:"dialog",type:"prompt",id:t++,message:e,value:i||""};return o(a,n)}),window.addEventListener("message",function(t){try{var o=JSON.parse(t.data)}catch(a){return}if(o&&"object"==typeof o&&"dialog"==o.event&&o.type)if(i)"confirm"==o.type?(e[o.id](o.result),delete e[o.id]):"prompt"==o.type&&(e[o.id](o.result),delete e[o.id]);else if("alert"==o.type)alert(o.message);else if("confirm"==o.type){o={event:"dialog",type:"confirm",id:o.id,result:confirm(o.message)};n(t.source,o)}else if("prompt"==o.type){o={event:"dialog",type:"prompt",id:o.id,result:prompt(o.message,o.value)};n(t.source,o)}},!1)}(),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery||Zepto)}(function(t){var e=function(e,i,n){var o={invalid:[],getCaret:function(){try{var t,i=0,n=e.get(0),a=document.selection,s=n.selectionStart;return a&&-1===navigator.appVersion.indexOf("MSIE 10")?((t=a.createRange()).moveStart("character",-o.val().length),i=t.text.length):(s||"0"===s)&&(i=s),i}catch(r){}},setCaret:function(t){try{if(e.is(":focus")){var n,o=e.get(0);o.setSelectionRange?(o.focus(),o.setSelectionRange(t,t)):((n=o.createTextRange()).collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select())}}catch(i){}},events:function(){e.on("keydown.mask",function(t){e.data("mask-keycode",t.keyCode||t.which)}).on(t.jMaskGlobals.useInput?"input.mask":"keyup.mask",o.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){e.keydown().keyup()},100)}).on("change.mask",function(){e.data("changed",!0)}).on("blur.mask",function(){s===o.val()||e.data("changed")||e.trigger("change"),e.data("changed",!1)}).on("blur.mask",function(){s=o.val()}).on("focus.mask",function(e){!0===n.selectOnFocus&&t(e.target).select()}).on("focusout.mask",function(){n.clearIfNotMatch&&!a.test(o.val())&&o.val("")})},getRegexMask:function(){for(var t,e,n,o,a=[],s=0;s<i.length;s++)(t=r.translation[i.charAt(s)])?(e=t.pattern.toString().replace(/.{1}$|^.{1}/g,""),n=t.optional,(t=t.recursive)?(a.push(i.charAt(s)),o={digit:i.charAt(s),pattern:e}):a.push(n||t?e+"?":e)):a.push(i.charAt(s).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return a=a.join(""),o&&(a=a.replace(new RegExp("("+o.digit+"(.*"+o.digit+")?)"),"($1)?").replace(new RegExp(o.digit,"g"),o.pattern)),new RegExp(a)},destroyEvents:function(){e.off("input keydown keyup paste drop blur focusout ".split(" ").join(".mask "))},val:function(t){var i=e.is("input")?"val":"text";return 0<arguments.length?(e[i]()!==t&&e[i](t),i=e):i=e[i](),i},getMCharsBeforeCount:function(t,e){for(var n=0,o=0,a=i.length;o<a&&o<t;o++)r.translation[i.charAt(o)]||(t=e?t+1:t,n++);return n},caretPos:function(t,e,n,a){return r.translation[i.charAt(Math.min(t-1,i.length-1))]?Math.min(t+n-e-a,n):o.caretPos(t+1,e,n,a)},behaviour:function(i){i=i||window.event,o.invalid=[];var n=e.data("mask-keycode");if(-1===t.inArray(n,r.byPassKeys)){var a=o.getCaret(),s=o.val().length,l=o.getMasked(),c=l.length,u=o.getMCharsBeforeCount(c-1)-o.getMCharsBeforeCount(s-1),d=a<s;return o.val(l),d&&(8!==n&&46!==n&&(a=o.caretPos(a,s,c,u)),o.setCaret(a)),o.callbacks(i)}},getMasked:function(t,e){var a,s,l=[],c=void 0===e?o.val():e+"",u=0,d=i.length,p=0,h=c.length,f=1,m="push",g=-1;for(n.reverse?(m="unshift",f=-1,a=0,u=d-1,p=h-1,s=function(){return-1<u&&-1<p}):(a=d-1,s=function(){return u<d&&p<h});s();){var v=i.charAt(u),_=c.charAt(p),b=r.translation[v];b?(_.match(b.pattern)?(l[m](_),b.recursive&&(-1===g?g=u:u===a&&(u=g-f),a===g&&(u-=f)),u+=f):b.optional?(u+=f,p-=f):b.fallback?(l[m](b.fallback),u+=f,p-=f):o.invalid.push({p:p,v:_,e:b.pattern}),p+=f):(t||l[m](v),_===v&&(p+=f),u+=f)}return c=i.charAt(a),d!==h+1||r.translation[c]||l.push(c),l.join("")},callbacks:function(t){var a=o.val(),r=a!==s,l=[a,t,e,n],c=function(t,e,i){"function"==typeof n[t]&&e&&n[t].apply(this,i)};c("onChange",!0===r,l),c("onKeyPress",!0===r,l),c("onComplete",a.length===i.length,l),c("onInvalid",0<o.invalid.length,[a,t,e,o.invalid,n])}};e=t(e);var a,r=this,s=o.val();i="function"==typeof i?i(o.val(),void 0,e,n):i,r.mask=i,r.options=n,r.remove=function(){var t=o.getCaret();return o.destroyEvents(),o.val(r.getCleanVal()),o.setCaret(t-o.getMCharsBeforeCount(t)),e},r.getCleanVal=function(){return o.getMasked(!0)},r.getMaskedVal=function(t){return o.getMasked(!1,t)},r.init=function(i){i=i||!1,n=n||{},r.clearIfNotMatch=t.jMaskGlobals.clearIfNotMatch,r.byPassKeys=t.jMaskGlobals.byPassKeys,r.translation=t.extend({},t.jMaskGlobals.translation,n.translation),r=t.extend(!0,{},r,n),a=o.getRegexMask(),!1===i?(n.placeholder&&e.attr("placeholder",n.placeholder),e.data("mask")&&e.attr("autocomplete","off"),o.destroyEvents(),o.events(),i=o.getCaret(),o.val(o.getMasked()),o.setCaret(i+o.getMCharsBeforeCount(i,!0))):(o.events(),o.val(o.getMasked()))},r.init(!e.is("input"))};t.maskWatchers={};var i=function(){var i=t(this),o={},a=i.attr("data-mask");if(i.attr("data-mask-reverse")&&(o.reverse=!0),i.attr("data-mask-clearifnotmatch")&&(o.clearIfNotMatch=!0),"true"===i.attr("data-mask-selectonfocus")&&(o.selectOnFocus=!0),n(i,a,o))return i.data("mask",new e(this,a,o))},n=function(e,i,n){n=n||{};var o=t(e).data("mask"),a=JSON.stringify;e=t(e).val()||t(e).text();try{return"function"==typeof i&&(i=i(e)),"object"!=typeof o||a(o.options)!==a(n)||o.mask!==i}catch(r){}};t.fn.mask=function(i,o){o=o||{};var a=this.selector,r=(s=t.jMaskGlobals).watchInterval,s=o.watchInputs||s.watchInputs,l=function(){if(n(this,i,o))return t(this).data("mask",new e(this,i,o))};return t(this).each(l),a&&""!==a&&s&&(clearInterval(t.maskWatchers[a]),t.maskWatchers[a]=setInterval(function(){t(document).find(a).each(l)},r)),this},t.fn.masked=function(t){return this.data("mask").getMaskedVal(t)},t.fn.unmask=function(){return clearInterval(t.maskWatchers[this.selector]),delete t.maskWatchers[this.selector],this.each(function(){var e=t(this).data("mask");e&&e.remove().removeData("mask")})},t.fn.cleanVal=function(){return this.data("mask").getCleanVal()},t.applyDataMask=function(e){((e=e||t.jMaskGlobals.maskElements)instanceof t?e:t(e)).filter(t.jMaskGlobals.dataMaskAttr).each(i)};var o={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,useInput:function(t){var e,i=document.createElement("div");return(e=(t="on"+t)in i)||(i.setAttribute(t,"return;"),e="function"==typeof i[t]),e}("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};t.jMaskGlobals=t.jMaskGlobals||{},(o=t.jMaskGlobals=t.extend(!0,{},o,t.jMaskGlobals)).dataMask&&t.applyDataMask(),setInterval(function(){t.jMaskGlobals.watchDataMask&&t.applyDataMask()},o.watchInterval)}),$(function(){function t(){$("#cnpj").length>0&&$("#cnpj").mask("99.999.999/9999-99"),$(".cnpj").length>0&&$(".cnpj").mask("99.999.999/9999-99"),$("#cadastro_cnpj").length>0&&$("#cadastro_cnpj").mask("99.999.999/9999-99"),$("#cadastro_despachante_cnpj").length>0&&$("#cadastro_despachante_cnpj").mask("99.999.999/9999-99"),$("#cadastro_empresa_cnpj").length>0&&$("#cadastro_empresa_cnpj").mask("99.999.999/9999-99"),$("#cadastro_telefone").length>0&&$("#cadastro_telefone").mask("(99) 9999-99999"),$("#cadastro_despachante_cnpj").length>0&&$("#cadastro_despachante_telefone").mask("(99) 9999-99999"),$(".format-numero-di").length>0&&$(".format-numero-di").mask("99/9999999-9"),$(".format-numero-di-e-dir").length>0&&$(".format-numero-di-e-dir").mask("999999999999"),$(".cpf").length>0&&$(".cpf").mask("999.999.999-99"),$("#cliente_cupom_fiscal_telefone").length>0&&$("#cliente_cupom_fiscal_telefone").mask("(99) 9999-99999"),$(".numeracao_ordem_garantia").length>0&&$(".numeracao_ordem_garantia").mask("9999/9999");const t=function(t){return 11===t.replace(/\D/g,"").length?"000.000.000-##":"00.000.000/0000-00"},e={onKeyPress:function(e,i,n,o){n.mask(t(e),o)}};$(".cpf_cnpj").each(function(){$(this).mask(t,e)}),$(".format-dinheiro").priceFormat({prefix:"",centsSeparator:",",thousandsSeparator:"."}),$(".format-dinheiro-custom").priceFormat({prefix:"",thousandsSeparator:"",clearOnEmpty:!0}),$(".masked-money").each(function(){const t=this.dataset.allowNegative,e=parseInt(this.dataset.centsLimit)||2;if($(this).val().length>0){const t=Number($(this).val()).toFixed(e),i=$(this).val(t).unmask()/10**e;isNaN(i)||(this.value=i.toFixed(e))}$(this).priceFormat({prefix:"",thousandsSeparator:"",centsSeparator:",",clearOnEmpty:!0,allowZero:!0,centsLimit:e||2,allowNegative:"true"===t}),"safari"in window&&$(this).on("pricechange",function(){$(this).focusout(function(){$(this).trigger("change")})})})}t(),$(document).on("nested:fieldAdded",function(){t()})}),
/*!
 * Select2 4.0.3
 * https://select2.github.io
 *
 * Released under the MIT license
 * https://github.com/select2/select2/blob/master/LICENSE.md
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}(function(t){var e=function(){if(t&&t.fn&&t.fn.select2&&t.fn.select2.amd)var e=t.fn.select2.amd;var i,n,o,a;return e&&e.requirejs||(e?n=e:e={},function(t){function e(t,e){return y.call(t,e)}function a(t,e){var i,n,o,a,r,s,l,c,u,d,p,h=e&&e.split("/"),f=_.map,m=f&&f["*"]||{};if(t&&"."===t.charAt(0))if(e){for(r=(t=t.split("/")).length-1,_.nodeIdCompat&&$.test(t[r])&&(t[r]=t[r].replace($,"")),t=h.slice(0,h.length-1).concat(t),u=0;u<t.length;u+=1)if("."===(p=t[u]))t.splice(u,1),u-=1;else if(".."===p){if(1===u&&(".."===t[2]||".."===t[0]))break;u>0&&(t.splice(u-1,2),u-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((h||m)&&f){for(u=(i=t.split("/")).length;u>0;u-=1){if(n=i.slice(0,u).join("/"),h)for(d=h.length;d>0;d-=1)if((o=f[h.slice(0,d).join("/")])&&(o=o[n])){a=o,s=u;break}if(a)break;!l&&m&&m[n]&&(l=m[n],c=u)}!a&&l&&(a=l,s=c),a&&(i.splice(0,s,a),t=i.join("/"))}return t}function r(e,i){return function(){var n=w.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),h.apply(t,n.concat([e,i]))}}function s(t){return function(e){return a(e,t)}}function l(t){return function(e){g[t]=e}}function c(i){if(e(v,i)){var n=v[i];delete v[i],b[i]=!0,p.apply(t,n)}if(!e(g,i)&&!e(b,i))throw new Error("No "+i);return g[i]}function u(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function d(t){return function(){return _&&_.config&&_.config[t]||{}}}var p,h,f,m,g={},v={},_={},b={},y=Object.prototype.hasOwnProperty,w=[].slice,$=/\.js$/;f=function(t,e){var i,n=u(t),o=n[0];return t=n[1],o&&(i=c(o=a(o,e))),o?t=i&&i.normalize?i.normalize(t,s(e)):a(t,e):(o=(n=u(t=a(t,e)))[0],t=n[1],o&&(i=c(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:i}},m={require:function(t){return r(t)},exports:function(t){var e=g[t];return void 0!==e?e:g[t]={}},module:function(t){return{id:t,uri:"",exports:g[t],config:d(t)}}},p=function(i,n,o,a){var s,u,d,p,h,_,y=[],w=typeof o;if(a=a||i,"undefined"===w||"function"===w){for(n=!n.length&&o.length?["require","exports","module"]:n,h=0;h<n.length;h+=1)if("require"===(u=(p=f(n[h],a)).f))y[h]=m.require(i);else if("exports"===u)y[h]=m.exports(i),_=!0;else if("module"===u)s=y[h]=m.module(i);else if(e(g,u)||e(v,u)||e(b,u))y[h]=c(u);else{if(!p.p)throw new Error(i+" missing "+u);p.p.load(p.n,r(a,!0),l(u),{}),y[h]=g[u]}d=o?o.apply(g[i],y):undefined,i&&(s&&s.exports!==t&&s.exports!==g[i]?g[i]=s.exports:d===t&&_||(g[i]=d))}else i&&(g[i]=o)},i=n=h=function(e,i,n,o,a){if("string"==typeof e)return m[e]?m[e](i):c(f(e,i).f);if(!e.splice){if((_=e).deps&&h(_.deps,_.callback),!i)return;i.splice?(e=i,i=n,n=null):e=t}return i=i||function(){},"function"==typeof n&&(n=o,o=a),o?p(t,e,i,n):setTimeout(function(){p(t,e,i,n)},4),h},h.config=function(t){return h(t)},i._defined=g,(o=function(t,i,n){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");i.splice||(n=i,i=[]),e(g,t)||e(v,t)||(v[t]=[t,i,n])}).amd={jQuery:!0}}(),e.requirejs=i,e.require=n,e.define=o),e.define("almond",function(){}),e.define("jquery",[],function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e}),e.define("select2/utils",["jquery"],function(t){function e(t){var e=t.prototype,i=[];for(var n in e){"function"==typeof e[n]&&("constructor"!==n&&i.push(n))}return i}var i={Extend:function(t,e){function i(){this.constructor=t}var n={}.hasOwnProperty;for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},Decorate:function(t,i){function n(){var e=Array.prototype.unshift,n=i.prototype.constructor.length,o=t.prototype.constructor;n>0&&(e.call(arguments,t.prototype.constructor),o=i.prototype.constructor),o.apply(this,arguments)}function o(){this.constructor=n}var a=e(i),r=e(t);i.displayName=t.displayName,n.prototype=new o;for(var s=0;s<r.length;s++){var l=r[s];n.prototype[l]=t.prototype[l]}for(var c=function(t){var e=function(){};t in n.prototype&&(e=n.prototype[t]);var o=i.prototype[t];return function(){return Array.prototype.unshift.call(arguments,e),o.apply(this,arguments)}},u=0;u<a.length;u++){var d=a[u];n.prototype[d]=c(d)}return n}},n=function(){this.listeners={}};return n.prototype.on=function(t,e){this.listeners=this.listeners||{},t in this.listeners?this.listeners[t].push(e):this.listeners[t]=[e]},n.prototype.trigger=function(t){var e=Array.prototype.slice,i=e.call(arguments,1);this.listeners=this.listeners||{},null==i&&(i=[]),0===i.length&&i.push({}),i[0]._type=t,t in this.listeners&&this.invoke(this.listeners[t],e.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},n.prototype.invoke=function(t,e){for(var i=0,n=t.length;i<n;i++)t[i].apply(this,e)},i.Observable=n,i.generateChars=function(t){for(var e="",i=0;i<t;i++){e+=Math.floor(36*Math.random()).toString(36)}return e},i.bind=function(t,e){return function(){t.apply(e,arguments)}},i._convertData=function(t){for(var e in t){var i=e.split("-"),n=t;if(1!==i.length){for(var o=0;o<i.length;o++){var a=i[o];(a=a.substring(0,1).toLowerCase()+a.substring(1))in n||(n[a]={}),o==i.length-1&&(n[a]=t[e]),n=n[a]}delete t[e]}}return t},i.hasScroll=function(e,i){var n=t(i),o=i.style.overflowX,a=i.style.overflowY;return(o!==a||"hidden"!==a&&"visible"!==a)&&("scroll"===o||"scroll"===a||(n.innerHeight()<i.scrollHeight||n.innerWidth()<i.scrollWidth))},i.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof t?t:String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})},i.appendMany=function(e,i){if("1.7"===t.fn.jquery.substr(0,3)){var n=t();t.map(i,function(t){n=n.add(t)}),i=n}e.append(i)},i}),e.define("select2/results",["jquery","./utils"],function(t,e){function i(t,e,n){this.$element=t,this.data=n,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e,e},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(e){var i=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=t('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),o=this.options.get("translations").get(e.message);n.append(i(o(e.args))),n[0].className+=" select2-results__message",this.$results.append(n)},i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},i.prototype.append=function(t){this.hideLoading();var e=[];if(null!=t.results&&0!==t.results.length){t.results=this.sort(t.results);for(var i=0;i<t.results.length;i++){var n=t.results[i],o=this.option(n);e.push(o)}this.$results.append(e)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},i.prototype.position=function(t,e){e.find(".select2-results").append(t)},i.prototype.sort=function(t){return this.options.get("sorter")(t)},i.prototype.highlightFirstItem=function(){var t=this.$results.find(".select2-results__option[aria-selected]"),e=t.filter("[aria-selected=true]");e.length>0?e.first().trigger("mouseenter"):t.first().trigger("mouseenter"),this.ensureHighlightVisible()},i.prototype.setClasses=function(){var e=this;this.data.current(function(i){var n=t.map(i,function(t){return t.id.toString()});e.$results.find(".select2-results__option[aria-selected]").each(function(){var e=t(this),i=t.data(this,"data"),o=""+i.id;null!=i.element&&i.element.selected||null==i.element&&t.inArray(o,n)>-1?e.attr("aria-selected","true"):e.attr("aria-selected","false")})})},i.prototype.showLoading=function(t){this.hideLoading();var e={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(t)},i=this.option(e);i.className+=" loading-results",this.$results.prepend(i)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(e){var i=document.createElement("li");i.className="select2-results__option";var n={role:"treeitem","aria-selected":"false"};for(var o in e.disabled&&(delete n["aria-selected"],n["aria-disabled"]="true"),null==e.id&&delete n["aria-selected"],null!=e._resultId&&(i.id=e._resultId),e.title&&(i.title=e.title),e.children&&(n.role="group",n["aria-label"]=e.text,delete n["aria-selected"]),n){var a=n[o];i.setAttribute(o,a)}if(e.children){var r=t(i),s=document.createElement("strong");s.className="select2-results__group";t(s);this.template(e,s);for(var l=[],c=0;c<e.children.length;c++){var u=e.children[c],d=this.option(u);l.push(d)}var p=t("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});p.append(l),r.append(s),r.append(p)}else this.template(e,i);return t.data(i,"data",e),i},i.prototype.bind=function(e){var i=this,n=e.id+"-results";this.$results.attr("id",n),e.on("results:all",function(t){i.clear(),i.append(t.data),e.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),e.on("results:append",function(t){i.append(t.data),e.isOpen()&&i.setClasses()}),e.on("query",function(t){i.hideMessages(),i.showLoading(t)}),e.on("select",function(){e.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),e.on("unselect",function(){e.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),e.on("open",function(){i.$results.attr("aria-expanded","true"),i.$results.attr("aria-hidden","false"),i.setClasses(),i.ensureHighlightVisible()}),e.on("close",function(){i.$results.attr("aria-expanded","false"),i.$results.attr("aria-hidden","true"),i.$results.removeAttr("aria-activedescendant")}),e.on("results:toggle",function(){var t=i.getHighlightedResults();0!==t.length&&t.trigger("mouseup")}),e.on("results:select",function(){var t=i.getHighlightedResults();if(0!==t.length){var e=t.data("data");"true"==t.attr("aria-selected")?i.trigger("close",{}):i.trigger("select",{data:e})}}),e.on("results:previous",function(){var t=i.getHighlightedResults(),e=i.$results.find("[aria-selected]"),n=e.index(t);if(0!==n){var o=n-1;0===t.length&&(o=0);var a=e.eq(o);a.trigger("mouseenter");var r=i.$results.offset().top,s=a.offset().top,l=i.$results.scrollTop()+(s-r);0===o?i.$results.scrollTop(0):s-r<0&&i.$results.scrollTop(l)}}),e.on("results:next",function(){var t=i.getHighlightedResults(),e=i.$results.find("[aria-selected]"),n=e.index(t)+1;if(!(n>=e.length)){var o=e.eq(n);o.trigger("mouseenter");var a=i.$results.offset().top+i.$results.outerHeight(!1),r=o.offset().top+o.outerHeight(!1),s=i.$results.scrollTop()+r-a;0===n?i.$results.scrollTop(0):r>a&&i.$results.scrollTop(s)}}),e.on("results:focus",function(t){t.element.addClass("select2-results__option--highlighted")}),e.on("results:message",function(t){i.displayMessage(t)}),t.fn.mousewheel&&this.$results.on("mousewheel",function(t){var e=i.$results.scrollTop(),n=i.$results.get(0).scrollHeight-e+t.deltaY,o=t.deltaY>0&&e-t.deltaY<=0,a=t.deltaY<0&&n<=i.$results.height();o?(i.$results.scrollTop(0),t.preventDefault(),t.stopPropagation()):a&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),t.preventDefault(),t.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(e){var n=t(this),o=n.data("data");"true"!==n.attr("aria-selected")?i.trigger("select",{originalEvent:e,data:o}):i.options.get("multiple")?i.trigger("unselect",{originalEvent:e,data:o}):i.trigger("close",{})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(){var e=t(this).data("data");i.getHighlightedResults().removeClass("select2-results__option--highlighted"),i.trigger("results:focus",{data:e,element:t(this)})})},i.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(0!==t.length){var e=this.$results.find("[aria-selected]").index(t),i=this.$results.offset().top,n=t.offset().top,o=this.$results.scrollTop()+(n-i),a=n-i;o-=2*t.outerHeight(!1),e<=2?this.$results.scrollTop(0):(a>this.$results.outerHeight()||a<0)&&this.$results.scrollTop(o)}},i.prototype.template=function(e,i){var n=this.options.get("templateResult"),o=this.options.get("escapeMarkup"),a=n(e,i);null==a?i.style.display="none":"string"==typeof a?i.innerHTML=o(a):t(i).append(a)},i}),e.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),e.define("select2/selection/base",["jquery","../utils","../keys"],function(t,e,i){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),this.$selection=e,e},n.prototype.bind=function(t){var e=this,n=(t.id,t.id+"-results");this.container=t,this.$selection.on("focus",function(t){e.trigger("focus",t)}),this.$selection.on("blur",function(t){e._handleBlur(t)}),this.$selection.on("keydown",function(t){e.trigger("keypress",t),t.which===i.SPACE&&t.preventDefault()}),t.on("results:focus",function(t){e.$selection.attr("aria-activedescendant",t.data._resultId)}),t.on("selection:update",function(t){e.update(t.data)}),t.on("open",function(){e.$selection.attr("aria-expanded","true"),e.$selection.attr("aria-owns",n),e._attachCloseHandler(t)}),t.on("close",function(){e.$selection.attr("aria-expanded","false"),e.$selection.removeAttr("aria-activedescendant"),e.$selection.removeAttr("aria-owns"),e.$selection.focus(),e._detachCloseHandler(t)}),t.on("enable",function(){e.$selection.attr("tabindex",e._tabindex)}),t.on("disable",function(){e.$selection.attr("tabindex","-1")})},n.prototype._handleBlur=function(e){var i=this;window.setTimeout(function(){document.activeElement==i.$selection[0]||t.contains(i.$selection[0],document.activeElement)||i.trigger("blur",e)},1)},n.prototype._attachCloseHandler=function(e){t(document.body).on("mousedown.select2."+e.id,function(e){var i=t(e.target).closest(".select2");t(".select2.select2-container--open").each(function(){var e=t(this);this!=i[0]&&e.data("element").select2("close")})})},n.prototype._detachCloseHandler=function(e){t(document.body).off("mousedown.select2."+e.id)},n.prototype.position=function(t,e){e.find(".selection").append(t)},n.prototype.destroy=function(){this._detachCloseHandler(this.container)},n.prototype.update=function(){throw new Error("The `update` method must be defined in child classes.")},n}),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(t,e,i){function n(){n.__super__.constructor.apply(this,arguments)}return i.Extend(n,e),n.prototype.render=function(){var t=n.__super__.render.call(this);return t.addClass("select2-selection--single"),t.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),t},n.prototype.bind=function(t){var e=this;n.__super__.bind.apply(this,arguments);var i=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",function(t){1===t.which&&e.trigger("toggle",{originalEvent:t})}),this.$selection.on("focus",function(){}),this.$selection.on("blur",function(){}),t.on("focus",function(){t.isOpen()||e.$selection.focus()}),t.on("selection:update",function(t){e.update(t.data)})},n.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},n.prototype.display=function(t,e){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(t,e))},n.prototype.selectionContainer=function(){return t("<span></span>")},n.prototype.update=function(t){if(0!==t.length){var e=t[0],i=this.$selection.find(".select2-selection__rendered"),n=this.display(e,i);i.empty().append(n),i.prop("title",e.title||e.text)}else this.clear()},n}),e.define("select2/selection/multiple",["jquery","./base","../utils"],function(t,e,i){function n(){n.__super__.constructor.apply(this,arguments)}return i.Extend(n,e),n.prototype.render=function(){var t=n.__super__.render.call(this);return t.addClass("select2-selection--multiple"),t.html('<ul class="select2-selection__rendered"></ul>'),t},n.prototype.bind=function(){var e=this;n.__super__.bind.apply(this,arguments),this.$selection.on("click",function(t){e.trigger("toggle",{originalEvent:t})}),this.$selection.on("click",".select2-selection__choice__remove",function(i){if(!e.options.get("disabled")){var n=t(this).parent().data("data");e.trigger("unselect",{originalEvent:i,data:n})}})},n.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},n.prototype.display=function(t,e){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(t,e))},n.prototype.selectionContainer=function(){return t('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},n.prototype.update=function(t){if(this.clear(),0!==t.length){for(var e=[],n=0;n<t.length;n++){var o=t[n],a=this.selectionContainer(),r=this.display(o,a);a.append(r),a.prop("title",o.title||o.text),a.data("data",o),e.push(a)}var s=this.$selection.find(".select2-selection__rendered");i.appendMany(s,e)}},n}),e.define("select2/selection/placeholder",["../utils"],function(){function t(t,e,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),t.call(this,e,i)}return t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.createPlaceholder=function(t,e){var i=this.selectionContainer();return i.html(this.display(e)),i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),i},t.prototype.update=function(t,e){var i=1==e.length&&e[0].id!=this.placeholder.id;if(e.length>1||i)return t.call(this,e);this.clear();var n=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(n)},t}),e.define("select2/selection/allowClear",["jquery","../keys"],function(t,e){function i(){}return i.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(t){n._handleClear(t)}),e.on("keypress",function(t){n._handleKeyboardClear(t,e)})},i.prototype._handleClear=function(t,e){if(!this.options.get("disabled")){var i=this.$selection.find(".select2-selection__clear");if(0!==i.length){e.stopPropagation();for(var n=i.data("data"),o=0;o<n.length;o++){var a={data:n[o]};if(this.trigger("unselect",a),a.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},i.prototype._handleKeyboardClear=function(t,i,n){n.isOpen()||i.which!=e.DELETE&&i.which!=e.BACKSPACE||this._handleClear(i)},i.prototype.update=function(e,i){if(e.call(this,i),!(this.$selection.find(".select2-selection__placeholder").length>0||0===i.length)){var n=t('<span class="select2-selection__clear">&times;</span>');n.data("data",i),this.$selection.find(".select2-selection__rendered").prepend(n)}},i}),e.define("select2/selection/search",["jquery","../utils","../keys"],function(t,e,i){function n(t,e,i){t.call(this,e,i)}return n.prototype.render=function(e){var i=t('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=i,this.$search=i.find("input");var n=e.call(this);return this._transferTabIndex(),n},n.prototype.bind=function(t,e,n){var o=this;t.call(this,e,n),e.on("open",function(){o.$search.trigger("focus")}),e.on("close",function(){o.$search.val(""),o.$search.removeAttr("aria-activedescendant"),o.$search.trigger("focus")}),e.on("enable",function(){o.$search.prop("disabled",!1),o._transferTabIndex()}),e.on("disable",function(){o.$search.prop("disabled",!0)}),e.on("focus",function(){o.$search.trigger("focus")}),e.on("results:focus",function(t){o.$search.attr("aria-activedescendant",t.id)}),this.$selection.on("focusin",".select2-search--inline",function(t){o.trigger("focus",t)}),this.$selection.on("focusout",".select2-search--inline",function(t){o._handleBlur(t)}),this.$selection.on("keydown",".select2-search--inline",function(t){if(t.stopPropagation(),o.trigger("keypress",t),o._keyUpPrevented=t.isDefaultPrevented(),t.which===i.BACKSPACE&&""===o.$search.val()){var e=o.$searchContainer.prev(".select2-selection__choice");if(e.length>0){var n=e.data("data");o.searchRemoveChoice(n),t.preventDefault()}}});var a=document.documentMode,r=a&&a<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(){r?o.$selection.off("input.search input.searchcheck"):o.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(t){if(r&&"input"===t.type)o.$selection.off("input.search input.searchcheck");else{var e=t.which;e!=i.SHIFT&&e!=i.CTRL&&e!=i.ALT&&e!=i.TAB&&o.handleSearch(t)}})},n.prototype._transferTabIndex=function(){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},n.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)},n.prototype.update=function(t,e){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),t.call(this,e),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),i&&this.$search.focus()},n.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},n.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e}),this.$search.val(e.text),this.handleSearch()},n.prototype.resizeSearch=function(){this.$search.css("width","25px");var t="";""!==this.$search.attr("placeholder")?t=this.$selection.find(".select2-selection__rendered").innerWidth():t=.75*(this.$search.val().length+1)+"em";this.$search.css("width",t)},n}),e.define("select2/selection/eventRelay",["jquery"],function(t){function e(){}return e.prototype.bind=function(e,i,n){var o=this,a=["open","opening","close","closing","select","selecting","unselect","unselecting"],r=["opening","closing","selecting","unselecting"];e.call(this,i,n),i.on("*",function(e,i){if(-1!==t.inArray(e,a)){i=i||{};var n=t.Event("select2:"+e,{params:i});o.$element.trigger(n),-1!==t.inArray(e,r)&&(i.prevented=n.isDefaultPrevented())}})},e}),e.define("select2/translation",["jquery","require"],function(t,e){function i(t){this.dict=t||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(t){return this.dict[t]},i.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},i._cache={},i.loadPath=function(t){if(!(t in i._cache)){var n=e(t);i._cache[t]=n}return new i(i._cache[t])},i}),e.define("select2/diacritics",[],function(){return{"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q",
"\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"}}),e.define("select2/data/base",["../utils"],function(t){function e(){e.__super__.constructor.call(this)}return t.Extend(e,t.Observable),e.prototype.current=function(){throw new Error("The `current` method must be defined in child classes.")},e.prototype.query=function(){throw new Error("The `query` method must be defined in child classes.")},e.prototype.bind=function(){},e.prototype.destroy=function(){},e.prototype.generateResultId=function(e,i){var n=e.id+"-result-";return n+=t.generateChars(4),null!=i.id?n+="-"+i.id.toString():n+="-"+t.generateChars(4),n},e}),e.define("select2/data/select",["./base","../utils","jquery"],function(t,e,i){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,t),n.prototype.current=function(t){var e=[],n=this;this.$element.find(":selected").each(function(){var t=i(this),o=n.item(t);e.push(o)}),t(e)},n.prototype.select=function(t){var e=this;if(t.selected=!0,i(t.element).is("option"))return t.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(n){var o=[];(t=[t]).push.apply(t,n);for(var a=0;a<t.length;a++){var r=t[a].id;-1===i.inArray(r,o)&&o.push(r)}e.$element.val(o),e.$element.trigger("change")});else{var n=t.id;this.$element.val(n),this.$element.trigger("change")}},n.prototype.unselect=function(t){var e=this;if(this.$element.prop("multiple")){if(t.selected=!1,i(t.element).is("option"))return t.element.selected=!1,void this.$element.trigger("change");this.current(function(n){for(var o=[],a=0;a<n.length;a++){var r=n[a].id;r!==t.id&&-1===i.inArray(r,o)&&o.push(r)}e.$element.val(o),e.$element.trigger("change")})}},n.prototype.bind=function(t){var e=this;this.container=t,t.on("select",function(t){e.select(t.data)}),t.on("unselect",function(t){e.unselect(t.data)})},n.prototype.destroy=function(){this.$element.find("*").each(function(){i.removeData(this,"data")})},n.prototype.query=function(t,e){var n=[],o=this;this.$element.children().each(function(){var e=i(this);if(e.is("option")||e.is("optgroup")){var a=o.item(e),r=o.matches(t,a);null!==r&&n.push(r)}}),e({results:n})},n.prototype.addOptions=function(t){e.appendMany(this.$element,t)},n.prototype.option=function(t){var e;t.children?(e=document.createElement("optgroup")).label=t.text:(e=document.createElement("option")).textContent!==undefined?e.textContent=t.text:e.innerText=t.text,t.id&&(e.value=t.id),t.disabled&&(e.disabled=!0),t.selected&&(e.selected=!0),t.title&&(e.title=t.title);var n=i(e),o=this._normalizeItem(t);return o.element=e,i.data(e,"data",o),n},n.prototype.item=function(t){var e={};if(null!=(e=i.data(t[0],"data")))return e;if(t.is("option"))e={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")};else if(t.is("optgroup")){e={text:t.prop("label"),children:[],title:t.prop("title")};for(var n=t.children("option"),o=[],a=0;a<n.length;a++){var r=i(n[a]),s=this.item(r);o.push(s)}e.children=o}return(e=this._normalizeItem(e)).element=t[0],i.data(t[0],"data",e),e},n.prototype._normalizeItem=function(t){i.isPlainObject(t)||(t={id:t,text:t});var e={selected:!1,disabled:!1};return null!=(t=i.extend({},{text:""},t)).id&&(t.id=t.id.toString()),null!=t.text&&(t.text=t.text.toString()),null==t._resultId&&t.id&&null!=this.container&&(t._resultId=this.generateResultId(this.container,t)),i.extend({},e,t)},n.prototype.matches=function(t,e){return this.options.get("matcher")(t,e)},n}),e.define("select2/data/array",["./select","../utils","jquery"],function(t,e,i){function n(t,e){var i=e.get("data")||[];n.__super__.constructor.call(this,t,e),this.addOptions(this.convertToOptions(i))}return e.Extend(n,t),n.prototype.select=function(t){var e=this.$element.find("option").filter(function(e,i){return i.value==t.id.toString()});0===e.length&&(e=this.option(t),this.addOptions(e)),n.__super__.select.call(this,t)},n.prototype.convertToOptions=function(t){function n(t){return function(){return i(this).val()==t.id}}for(var o=this,a=this.$element.find("option"),r=a.map(function(){return o.item(i(this)).id}).get(),s=[],l=0;l<t.length;l++){var c=this._normalizeItem(t[l]);if(i.inArray(c.id,r)>=0){var u=a.filter(n(c)),d=this.item(u),p=i.extend(!0,{},c,d),h=this.option(p);u.replaceWith(h)}else{var f=this.option(c);if(c.children){var m=this.convertToOptions(c.children);e.appendMany(f,m)}s.push(f)}}return s},n}),e.define("select2/data/ajax",["./array","../utils","jquery"],function(t,e,i){function n(t,e){this.ajaxOptions=this._applyDefaults(e.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),n.__super__.constructor.call(this,t,e)}return e.Extend(n,t),n.prototype._applyDefaults=function(t){var e={data:function(t){return i.extend({},t,{q:t.term})},transport:function(t,e,n){var o=i.ajax(t);return o.then(e),o.fail(n),o}};return i.extend({},e,t,!0)},n.prototype.processResults=function(t){return t},n.prototype.query=function(t,e){function n(){var n=a.transport(a,function(n){var a=o.processResults(n,t);o.options.get("debug")&&window.console&&console.error&&(a&&a.results&&i.isArray(a.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),e(a)},function(){n.status&&"0"===n.status||o.trigger("results:message",{message:"errorLoading"})});o._request=n}var o=this;null!=this._request&&(i.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var a=i.extend({type:"GET"},this.ajaxOptions);"function"==typeof a.url&&(a.url=a.url.call(this.$element,t)),"function"==typeof a.data&&(a.data=a.data.call(this.$element,t)),this.ajaxOptions.delay&&null!=t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(n,this.ajaxOptions.delay)):n()},n}),e.define("select2/data/tags",["jquery"],function(t){function e(e,i,n){var o=n.get("tags"),a=n.get("createTag");a!==undefined&&(this.createTag=a);var r=n.get("insertTag");if(r!==undefined&&(this.insertTag=r),e.call(this,i,n),t.isArray(o))for(var s=0;s<o.length;s++){var l=o[s],c=this._normalizeItem(l),u=this.option(c);this.$element.append(u)}}return e.prototype.query=function(t,e,i){function n(t,a){for(var r=t.results,s=0;s<r.length;s++){var l=r[s],c=null!=l.children&&!n({results:l.children},!0);if(l.text===e.term||c)return!a&&(t.data=r,void i(t))}if(a)return!0;var u=o.createTag(e);if(null!=u){var d=o.option(u);d.attr("data-select2-tag",!0),o.addOptions([d]),o.insertTag(r,u)}t.results=r,i(t)}var o=this;this._removeOldTags(),null!=e.term&&null==e.page?t.call(this,e,n):t.call(this,e,i)},e.prototype.createTag=function(e,i){var n=t.trim(i.term);return""===n?null:{id:n,text:n}},e.prototype.insertTag=function(t,e,i){e.unshift(i)},e.prototype._removeOldTags=function(){this._lastTag;this.$element.find("option[data-select2-tag]").each(function(){this.selected||t(this).remove()})},e}),e.define("select2/data/tokenizer",["jquery"],function(t){function e(t,e,i){var n=i.get("tokenizer");n!==undefined&&(this.tokenizer=n),t.call(this,e,i)}return e.prototype.bind=function(t,e,i){t.call(this,e,i),this.$search=e.dropdown.$search||e.selection.$search||i.find(".select2-search__field")},e.prototype.query=function(e,i,n){function o(e){var i=r._normalizeItem(e);if(!r.$element.find("option").filter(function(){return t(this).val()===i.id}).length){var n=r.option(i);n.attr("data-select2-tag",!0),r._removeOldTags(),r.addOptions([n])}a(i)}function a(t){r.trigger("select",{data:t})}var r=this;i.term=i.term||"";var s=this.tokenizer(i,this.options,o);s.term!==i.term&&(this.$search.length&&(this.$search.val(s.term),this.$search.focus()),i.term=s.term),e.call(this,i,n)},e.prototype.tokenizer=function(e,i,n,o){for(var a=n.get("tokenSeparators")||[],r=i.term,s=0,l=this.createTag||function(t){return{id:t.term,text:t.term}};s<r.length;){var c=r[s];if(-1!==t.inArray(c,a)){var u=r.substr(0,s),d=l(t.extend({},i,{term:u}));null!=d?(o(d),r=r.substr(s+1)||"",s=0):s++}else s++}return{term:r}},e}),e.define("select2/data/minimumInputLength",[],function(){function t(t,e,i){this.minimumInputLength=i.get("minimumInputLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){e.term=e.term||"",e.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:e.term,params:e}}):t.call(this,e,i)},t}),e.define("select2/data/maximumInputLength",[],function(){function t(t,e,i){this.maximumInputLength=i.get("maximumInputLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){e.term=e.term||"",this.maximumInputLength>0&&e.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}}):t.call(this,e,i)},t}),e.define("select2/data/maximumSelectionLength",[],function(){function t(t,e,i){this.maximumSelectionLength=i.get("maximumSelectionLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){var n=this;this.current(function(o){var a=null!=o?o.length:0;n.maximumSelectionLength>0&&a>=n.maximumSelectionLength?n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}}):t.call(n,e,i)})},t}),e.define("select2/dropdown",["jquery","./utils"],function(t,e){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e,e},i.prototype.bind=function(){},i.prototype.position=function(){},i.prototype.destroy=function(){this.$dropdown.remove()},i}),e.define("select2/dropdown/search",["jquery","../utils"],function(t){function e(){}return e.prototype.render=function(e){var i=e.call(this),n=t('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=n,this.$search=n.find("input"),i.prepend(n),i},e.prototype.bind=function(e,i,n){var o=this;e.call(this,i,n),this.$search.on("keydown",function(t){o.trigger("keypress",t),o._keyUpPrevented=t.isDefaultPrevented()}),this.$search.on("input",function(){t(this).off("keyup")}),this.$search.on("keyup input",function(t){o.handleSearch(t)}),i.on("open",function(){o.$search.attr("tabindex",0),o.$search.focus(),window.setTimeout(function(){o.$search.focus()},0)}),i.on("close",function(){o.$search.attr("tabindex",-1),o.$search.val("")}),i.on("focus",function(){i.isOpen()&&o.$search.focus()}),i.on("results:all",function(t){null!=t.query.term&&""!==t.query.term||(o.showSearch(t)?o.$searchContainer.removeClass("select2-search--hide"):o.$searchContainer.addClass("select2-search--hide"))})},e.prototype.handleSearch=function(){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},e.prototype.showSearch=function(){return!0},e}),e.define("select2/dropdown/hidePlaceholder",[],function(){function t(t,e,i,n){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),t.call(this,e,i,n)}return t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results),t.call(this,e)},t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.removePlaceholder=function(t,e){for(var i=e.slice(0),n=e.length-1;n>=0;n--){var o=e[n];this.placeholder.id===o.id&&i.splice(n,1)}return i},t}),e.define("select2/dropdown/infiniteScroll",["jquery"],function(t){function e(t,e,i,n){this.lastParams={},t.call(this,e,i,n),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(t,e){this.$loadingMore.remove(),this.loading=!1,t.call(this,e),this.showLoadingMore(e)&&this.$results.append(this.$loadingMore)},e.prototype.bind=function(e,i,n){var o=this;e.call(this,i,n),i.on("query",function(t){o.lastParams=t,o.loading=!0}),i.on("query:append",function(t){o.lastParams=t,o.loading=!0}),this.$results.on("scroll",function(){var e=t.contains(document.documentElement,o.$loadingMore[0]);!o.loading&&e&&(o.$results.offset().top+o.$results.outerHeight(!1)+50>=o.$loadingMore.offset().top+o.$loadingMore.outerHeight(!1)&&o.loadMore())})},e.prototype.loadMore=function(){this.loading=!0;var e=t.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more},e.prototype.createLoadingMore=function(){var e=t('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),i=this.options.get("translations").get("loadingMore");return e.html(i(this.lastParams)),e},e}),e.define("select2/dropdown/attachBody",["jquery","../utils"],function(t,e){function i(e,i,n){this.$dropdownParent=n.get("dropdownParent")||t(document.body),e.call(this,i,n)}return i.prototype.bind=function(t,e,i){var n=this,o=!1;t.call(this,e,i),e.on("open",function(){n._showDropdown(),n._attachPositioningHandler(e),o||(o=!0,e.on("results:all",function(){n._positionDropdown(),n._resizeDropdown()}),e.on("results:append",function(){n._positionDropdown(),n._resizeDropdown()}))}),e.on("close",function(){n._hideDropdown(),n._detachPositioningHandler(e)}),this.$dropdownContainer.on("mousedown",function(t){t.stopPropagation()})},i.prototype.destroy=function(t){t.call(this),this.$dropdownContainer.remove()},i.prototype.position=function(t,e,i){e.attr("class",i.attr("class")),e.removeClass("select2"),e.addClass("select2-container--open"),e.css({position:"absolute",top:-999999}),this.$container=i},i.prototype.render=function(e){var i=t("<span></span>"),n=e.call(this);return i.append(n),this.$dropdownContainer=i,i},i.prototype._hideDropdown=function(){this.$dropdownContainer.detach()},i.prototype._attachPositioningHandler=function(i,n){var o=this,a="scroll.select2."+n.id,r="resize.select2."+n.id,s="orientationchange.select2."+n.id,l=this.$container.parents().filter(e.hasScroll);l.each(function(){t(this).data("select2-scroll-position",{x:t(this).scrollLeft(),y:t(this).scrollTop()})}),l.on(a,function(){var e=t(this).data("select2-scroll-position");t(this).scrollTop(e.y)}),t(window).on(a+" "+r+" "+s,function(){o._positionDropdown(),o._resizeDropdown()})},i.prototype._detachPositioningHandler=function(i,n){var o="scroll.select2."+n.id,a="resize.select2."+n.id,r="orientationchange.select2."+n.id;this.$container.parents().filter(e.hasScroll).off(o),t(window).off(o+" "+a+" "+r)},i.prototype._positionDropdown=function(){var e=t(window),i=this.$dropdown.hasClass("select2-dropdown--above"),n=this.$dropdown.hasClass("select2-dropdown--below"),o=null,a=this.$container.offset();a.bottom=a.top+this.$container.outerHeight(!1);var r={height:this.$container.outerHeight(!1)};r.top=a.top,r.bottom=a.top+r.height;var s={height:this.$dropdown.outerHeight(!1)},l={top:e.scrollTop(),bottom:e.scrollTop()+e.height()},c=l.top<a.top-s.height,u=l.bottom>a.bottom+s.height,d={left:a.left,top:r.bottom},p=this.$dropdownParent;"static"===p.css("position")&&(p=p.offsetParent());var h=p.offset();d.top-=h.top,d.left-=h.left,i||n||(o="below"),u||!c||i?!c&&u&&i&&(o="below"):o="above",("above"==o||i&&"below"!==o)&&(d.top=r.top-h.top-s.height),null!=o&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+o),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+o)),this.$dropdownContainer.css(d)},i.prototype._resizeDropdown=function(){var t={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(t.minWidth=t.width,t.position="relative",t.width="auto"),this.$dropdown.css(t)},i.prototype._showDropdown=function(){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},i}),e.define("select2/dropdown/minimumResultsForSearch",[],function(){function t(e){for(var i=0,n=0;n<e.length;n++){var o=e[n];o.children?i+=t(o.children):i++}return i}function e(t,e,i,n){this.minimumResultsForSearch=i.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=Infinity),t.call(this,e,i,n)}return e.prototype.showSearch=function(e,i){return!(t(i.data.results)<this.minimumResultsForSearch)&&e.call(this,i)},e}),e.define("select2/dropdown/selectOnClose",[],function(){function t(){}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("close",function(t){n._handleSelectOnClose(t)})},t.prototype._handleSelectOnClose=function(t,e){if(e&&null!=e.originalSelect2Event){var i=e.originalSelect2Event;if("select"===i._type||"unselect"===i._type)return}var n=this.getHighlightedResults();if(!(n.length<1)){var o=n.data("data");null!=o.element&&o.element.selected||null==o.element&&o.selected||this.trigger("select",{data:o})}},t}),e.define("select2/dropdown/closeOnSelect",[],function(){function t(){}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("select",function(t){n._selectTriggered(t)}),e.on("unselect",function(t){n._selectTriggered(t)})},t.prototype._selectTriggered=function(t,e){var i=e.originalEvent;i&&i.ctrlKey||this.trigger("close",{originalEvent:i,originalSelect2Event:e})},t}),e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum,i="Please delete "+e+" character";return 1!=e&&(i+="s"),i},inputTooShort:function(t){return"Please enter "+(t.minimum-t.input.length)+" or more characters"},loadingMore:function(){return"Loading more results\u2026"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";return 1!=t.maximum&&(e+="s"),e},noResults:function(){return"No results found"},searching:function(){return"Searching\u2026"}}}),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(t,e,i,n,o,a,r,s,l,c,u,d,p,h,f,m,g,v,_,b,y,w,$,x,k,C,D,S,T){function A(){this.reset()}return A.prototype.apply=function(d){if(null==(d=t.extend(!0,{},this.defaults,d)).dataAdapter){if(null!=d.ajax?d.dataAdapter=f:null!=d.data?d.dataAdapter=h:d.dataAdapter=p,d.minimumInputLength>0&&(d.dataAdapter=c.Decorate(d.dataAdapter,v)),d.maximumInputLength>0&&(d.dataAdapter=c.Decorate(d.dataAdapter,_)),d.maximumSelectionLength>0&&(d.dataAdapter=c.Decorate(d.dataAdapter,b)),d.tags&&(d.dataAdapter=c.Decorate(d.dataAdapter,m)),null==d.tokenSeparators&&null==d.tokenizer||(d.dataAdapter=c.Decorate(d.dataAdapter,g)),null!=d.query){var T=e(d.amdBase+"compat/query");d.dataAdapter=c.Decorate(d.dataAdapter,T)}if(null!=d.initSelection){var A=e(d.amdBase+"compat/initSelection");d.dataAdapter=c.Decorate(d.dataAdapter,A)}}if(null==d.resultsAdapter&&(d.resultsAdapter=i,null!=d.ajax&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,x)),null!=d.placeholder&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,$)),d.selectOnClose&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,D))),null==d.dropdownAdapter){if(d.multiple)d.dropdownAdapter=y;else{var E=c.Decorate(y,w);d.dropdownAdapter=E}if(0!==d.minimumResultsForSearch&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,C)),d.closeOnSelect&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,S)),null!=d.dropdownCssClass||null!=d.dropdownCss||null!=d.adaptDropdownCssClass){var M=e(d.amdBase+"compat/dropdownCss");d.dropdownAdapter=c.Decorate(d.dropdownAdapter,M)}d.dropdownAdapter=c.Decorate(d.dropdownAdapter,k)}if(null==d.selectionAdapter){if(d.multiple?d.selectionAdapter=o:d.selectionAdapter=n,null!=d.placeholder&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,a)),d.allowClear&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,r)),d.multiple&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,s)),null!=d.containerCssClass||null!=d.containerCss||null!=d.adaptContainerCssClass){var O=e(d.amdBase+"compat/containerCss");d.selectionAdapter=c.Decorate(d.selectionAdapter,O)}d.selectionAdapter=c.Decorate(d.selectionAdapter,l)}if("string"==typeof d.language)if(d.language.indexOf("-")>0){var I=d.language.split("-")[0];d.language=[d.language,I]}else d.language=[d.language];if(t.isArray(d.language)){var P=new u;d.language.push("en");for(var N=d.language,L=0;L<N.length;L++){var R=N[L],F={};try{F=u.loadPath(R)}catch(q){try{R=this.defaults.amdLanguageBase+R,F=u.loadPath(R)}catch(z){d.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+R+'" could not be automatically loaded. A fallback will be used instead.');continue}}P.extend(F)}d.translations=P}else{var j=u.loadPath(this.defaults.amdLanguageBase+"en"),B=new u(d.language);B.extend(j),d.translations=B}return d},A.prototype.reset=function(){function e(t){function e(t){return d[t]||t}return t.replace(/[^\u0000-\u007E]/g,e)}function i(n,o){if(""===t.trim(n.term))return o;if(o.children&&o.children.length>0){for(var a=t.extend(!0,{},o),r=o.children.length-1;r>=0;r--){null==i(n,o.children[r])&&a.children.splice(r,1)}return a.children.length>0?a:i(n,a)}var s=e(o.text).toUpperCase(),l=e(n.term).toUpperCase();return s.indexOf(l)>-1?o:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:T,matcher:i,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}},A.prototype.set=function(e,i){var n={};n[t.camelCase(e)]=i;var o=c._convertData(n);t.extend(this.defaults,o)},new A}),e.define("select2/options",["require","jquery","./defaults","./utils"],function(t,e,i,n){function o(e,o){if(this.options=e,null!=o&&this.fromElement(o),this.options=i.apply(this.options),o&&o.is("input")){var a=t(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=n.Decorate(this.options.dataAdapter,a)}}return o.prototype.fromElement=function(t){var i=["select2"];null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.language&&(t.prop("lang")?this.options.language=t.prop("lang").toLowerCase():t.closest("[lang]").prop("lang")&&(this.options.language=t.closest("[lang]").prop("lang"))),null==this.options.dir&&(t.prop("dir")?this.options.dir=t.prop("dir"):t.closest("[dir]").prop("dir")?this.options.dir=t.closest("[dir]").prop("dir"):this.options.dir="ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),t.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),t.data("data",t.data("select2Tags")),t.data("tags",!0)),t.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",t.data("ajaxUrl")),t.data("ajax--url",t.data("ajaxUrl")));var o={};o=e.fn.jquery&&"1."==e.fn.jquery.substr(0,2)&&t[0].dataset?e.extend(!0,{},t[0].dataset,t.data()):t.data();var a=e.extend(!0,{},o);for(var r in a=n._convertData(a))e.inArray(r,i)>-1||(e.isPlainObject(this.options[r])?e.extend(this.options[r],a[r]):this.options[r]=a[r]);return this},o.prototype.get=function(t){return this.options[t]},o.prototype.set=function(t,e){this.options[t]=e},o}),e.define("select2/core",["jquery","./options","./utils","./keys"],function(t,e,i,n){var o=function(t,i){null!=t.data("select2")&&t.data("select2").destroy(),this.$element=t,this.id=this._generateId(t),i=i||{},this.options=new e(i,t),o.__super__.constructor.call(this);var n=t.attr("tabindex")||0;t.data("old-tabindex",n),t.attr("tabindex","-1");var a=this.options.get("dataAdapter");this.dataAdapter=new a(t,this.options);var r=this.render();this._placeContainer(r);var s=this.options.get("selectionAdapter");this.selection=new s(t,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,r);var l=this.options.get("dropdownAdapter");this.dropdown=new l(t,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,r);var c=this.options.get("resultsAdapter");this.results=new c(t,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var u=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(t){u.trigger("selection:update",{data:t})}),t.addClass("select2-hidden-accessible"),t.attr("aria-hidden","true"),this._syncAttributes(),t.data("select2",this)};return i.Extend(o,i.Observable),o.prototype._generateId=function(t){return"select2-"+(null!=t.attr("id")?t.attr("id"):null!=t.attr("name")?t.attr("name")+"-"+i.generateChars(2):i.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},o.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));null!=e&&t.css("width",e)},o.prototype._resolveWidth=function(t,e){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==e){var n=this._resolveWidth(t,"style");return null!=n?n:this._resolveWidth(t,"element")}if("element"==e){var o=t.outerWidth(!1);return o<=0?"auto":o+"px"}if("style"==e){var a=t.attr("style");if("string"!=typeof a)return null;for(var r=a.split(";"),s=0,l=r.length;s<l;s+=1){var c=r[s].replace(/\s/g,"").match(i);if(null!==c&&c.length>=1)return c[1]}return null}return e},o.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},o.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",function(){e.dataAdapter.current(function(t){e.trigger("selection:update",{data:t})})}),this.$element.on("focus.select2",function(t){e.trigger("focus",t)}),this._syncA=i.bind(this._syncAttributes,this),this._syncS=i.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=n?(this._observer=new n(function(i){t.each(i,e._syncA),t.each(i,e._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",e._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",e._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",e._syncS,!1))},o.prototype._registerDataEvents=function(){var t=this;this.dataAdapter.on("*",function(e,i){t.trigger(e,i)})},o.prototype._registerSelectionEvents=function(){var e=this,i=["toggle","focus"];this.selection.on("toggle",function(){e.toggleDropdown()}),this.selection.on("focus",function(t){e.focus(t)}),this.selection.on("*",function(n,o){-1===t.inArray(n,i)&&e.trigger(n,o)})},o.prototype._registerDropdownEvents=function(){var t=this;this.dropdown.on("*",function(e,i){t.trigger(e,i)})},o.prototype._registerResultsEvents=function(){var t=this;this.results.on("*",function(e,i){t.trigger(e,i)})},o.prototype._registerEvents=function(){var t=this;this.on("open",function(){t.$container.addClass("select2-container--open")}),this.on("close",function(){t.$container.removeClass("select2-container--open")}),this.on("enable",function(){t.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){t.$container.addClass("select2-container--disabled")}),this.on("blur",function(){t.$container.removeClass("select2-container--focus")}),this.on("query",function(e){t.isOpen()||t.trigger("open",{}),this.dataAdapter.query(e,function(i){t.trigger("results:all",{data:i,query:e})})}),this.on("query:append",function(e){this.dataAdapter.query(e,function(i){t.trigger("results:append",{data:i,query:e})})}),this.on("keypress",function(e){var i=e.which;t.isOpen()?i===n.ESC||i===n.TAB||i===n.UP&&e.altKey?(t.close(),e.preventDefault()):i===n.ENTER?(t.trigger("results:select",{}),e.preventDefault()):i===n.SPACE&&e.ctrlKey?(t.trigger("results:toggle",{}),e.preventDefault()):i===n.UP?(t.trigger("results:previous",{}),e.preventDefault()):i===n.DOWN&&(t.trigger("results:next",{}),e.preventDefault()):(i===n.ENTER||i===n.SPACE||i===n.DOWN&&e.altKey)&&(t.open(),e.preventDefault())})},o.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},o.prototype._syncSubtree=function(t,e){var i=!1,n=this;if(!t||!t.target||"OPTION"===t.target.nodeName||"OPTGROUP"===t.target.nodeName){if(e)if(e.addedNodes&&e.addedNodes.length>0)for(var o=0;o<e.addedNodes.length;o++){e.addedNodes[o].selected&&(i=!0)}else e.removedNodes&&e.removedNodes.length>0&&(i=!0);else i=!0;i&&this.dataAdapter.current(function(t){n.trigger("selection:update",{data:t})})}},o.prototype.trigger=function(t,e){var i=o.__super__.trigger,n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(e===undefined&&(e={}),t in n){var a=n[t],r={prevented:!1,name:t,args:e};if(i.call(this,a,r),r.prevented)return void(e.prevented=!0)}i.call(this,t,e)},o.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},o.prototype.open=function(){this.isOpen()||this.trigger("query",{})},o.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},o.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")
},o.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},o.prototype.focus=function(){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},o.prototype.enable=function(t){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=t&&0!==t.length||(t=[!0]);var e=!t[0];this.$element.prop("disabled",e)},o.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current(function(e){t=e}),t},o.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var i=e[0];t.isArray(i)&&(i=t.map(i,function(t){return t.toString()})),this.$element.val(i).trigger("change")},o.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},o.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),e.data("element",this.$element),e},o}),e.define("select2/compat/utils",["jquery"],function(t){function e(e,i,n){var o,a,r=[];(o=t.trim(e.attr("class")))&&t((o=""+o).split(/\s+/)).each(function(){0===this.indexOf("select2-")&&r.push(this)}),(o=t.trim(i.attr("class")))&&t((o=""+o).split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&null!=(a=n(this))&&r.push(a)}),e.attr("class",r.join(" "))}return{syncCssClasses:e}}),e.define("select2/compat/containerCss",["jquery","./utils"],function(t,e){function i(){return null}function n(){}return n.prototype.render=function(n){var o=n.call(this),a=this.options.get("containerCssClass")||"";t.isFunction(a)&&(a=a(this.$element));var r=this.options.get("adaptContainerCssClass");if(r=r||i,-1!==a.indexOf(":all:")){a=a.replace(":all:","");var s=r;r=function(t){var e=s(t);return null!=e?e+" "+t:t}}var l=this.options.get("containerCss")||{};return t.isFunction(l)&&(l=l(this.$element)),e.syncCssClasses(o,this.$element,r),o.css(l),o.addClass(a),o},n}),e.define("select2/compat/dropdownCss",["jquery","./utils"],function(t,e){function i(){return null}function n(){}return n.prototype.render=function(n){var o=n.call(this),a=this.options.get("dropdownCssClass")||"";t.isFunction(a)&&(a=a(this.$element));var r=this.options.get("adaptDropdownCssClass");if(r=r||i,-1!==a.indexOf(":all:")){a=a.replace(":all:","");var s=r;r=function(t){var e=s(t);return null!=e?e+" "+t:t}}var l=this.options.get("dropdownCss")||{};return t.isFunction(l)&&(l=l(this.$element)),e.syncCssClasses(o,this.$element,r),o.css(l),o.addClass(a),o},n}),e.define("select2/compat/initSelection",["jquery"],function(t){function e(t,e,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2"),this.initSelection=i.get("initSelection"),this._isInitialized=!1,t.call(this,e,i)}return e.prototype.current=function(e,i){var n=this;this._isInitialized?e.call(this,i):this.initSelection.call(null,this.$element,function(e){n._isInitialized=!0,t.isArray(e)||(e=[e]),i(e)})},e}),e.define("select2/compat/inputData",["jquery"],function(t){function e(t,e,i){this._currentData=[],this._valueSeparator=i.get("valueSeparator")||",","hidden"===e.prop("type")&&i.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead."),t.call(this,e,i)}return e.prototype.current=function(e,i){function n(e,i){var o=[];return e.selected||-1!==t.inArray(e.id,i)?(e.selected=!0,o.push(e)):e.selected=!1,e.children&&o.push.apply(o,n(e.children,i)),o}for(var o=[],a=0;a<this._currentData.length;a++){var r=this._currentData[a];o.push.apply(o,n(r,this.$element.val().split(this._valueSeparator)))}i(o)},e.prototype.select=function(e,i){if(this.options.get("multiple")){var n=this.$element.val();n+=this._valueSeparator+i.id,this.$element.val(n),this.$element.trigger("change")}else this.current(function(e){t.map(e,function(t){t.selected=!1})}),this.$element.val(i.id),this.$element.trigger("change")},e.prototype.unselect=function(t,e){var i=this;e.selected=!1,this.current(function(t){for(var n=[],o=0;o<t.length;o++){var a=t[o];e.id!=a.id&&n.push(a.id)}i.$element.val(n.join(i._valueSeparator)),i.$element.trigger("change")})},e.prototype.query=function(t,e,i){for(var n=[],o=0;o<this._currentData.length;o++){var a=this._currentData[o],r=this.matches(e,a);null!==r&&n.push(r)}i({results:n})},e.prototype.addOptions=function(e,i){var n=t.map(i,function(e){return t.data(e[0],"data")});this._currentData.push.apply(this._currentData,n)},e}),e.define("select2/compat/matcher",["jquery"],function(t){function e(e){function i(i,n){var o=t.extend(!0,{},n);if(null==i.term||""===t.trim(i.term))return o;if(n.children){for(var a=n.children.length-1;a>=0;a--){var r=n.children[a];e(i.term,r.text,r)||o.children.splice(a,1)}if(o.children.length>0)return o}return e(i.term,n.text,n)?o:null}return i}return e}),e.define("select2/compat/query",[],function(){function t(t,e,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2."),t.call(this,e,i)}return t.prototype.query=function(t,e,i){e.callback=i,this.options.get("query").call(null,e)},t}),e.define("select2/dropdown/attachContainer",[],function(){function t(t,e,i){t.call(this,e,i)}return t.prototype.position=function(t,e,i){i.find(".dropdown-wrapper").append(e),e.addClass("select2-dropdown--below"),i.addClass("select2-container--below")},t}),e.define("select2/dropdown/stopPropagation",[],function(){function t(){}return t.prototype.bind=function(t,e,i){t.call(this,e,i);var n=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$dropdown.on(n.join(" "),function(t){t.stopPropagation()})},t}),e.define("select2/selection/stopPropagation",[],function(){function t(){}return t.prototype.bind=function(t,e,i){t.call(this,e,i);var n=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$selection.on(n.join(" "),function(t){t.stopPropagation()})},t}),
/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */
a=function(t){function e(e){var r=e||window.event,s=l.call(arguments,1),c=0,d=0,p=0,h=0,f=0,m=0;if((e=t.event.fix(r)).type="mousewheel","detail"in r&&(p=-1*r.detail),"wheelDelta"in r&&(p=r.wheelDelta),"wheelDeltaY"in r&&(p=r.wheelDeltaY),"wheelDeltaX"in r&&(d=-1*r.wheelDeltaX),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(d=-1*p,p=0),c=0===p?d:p,"deltaY"in r&&(c=p=-1*r.deltaY),"deltaX"in r&&(d=r.deltaX,0===p&&(c=-1*d)),0!==p||0!==d){if(1===r.deltaMode){var g=t.data(this,"mousewheel-line-height");c*=g,p*=g,d*=g}else if(2===r.deltaMode){var v=t.data(this,"mousewheel-page-height");c*=v,p*=v,d*=v}if(h=Math.max(Math.abs(p),Math.abs(d)),(!a||h<a)&&(a=h,n(r,h)&&(a/=40)),n(r,h)&&(c/=40,d/=40,p/=40),c=Math[c>=1?"floor":"ceil"](c/a),d=Math[d>=1?"floor":"ceil"](d/a),p=Math[p>=1?"floor":"ceil"](p/a),u.settings.normalizeOffset&&this.getBoundingClientRect){var _=this.getBoundingClientRect();f=e.clientX-_.left,m=e.clientY-_.top}return e.deltaX=d,e.deltaY=p,e.deltaFactor=a,e.offsetX=f,e.offsetY=m,e.deltaMode=0,s.unshift(e,c,d,p),o&&clearTimeout(o),o=setTimeout(i,200),(t.event.dispatch||t.event.handle).apply(this,s)}}function i(){a=null}function n(t,e){return u.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}var o,a,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(t.event.fixHooks)for(var c=r.length;c;)t.event.fixHooks[r[--c]]=t.event.mouseHooks;var u=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=s.length;i;)this.addEventListener(s[--i],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",u.getLineHeight(this)),t.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=s.length;i;)this.removeEventListener(s[--i],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var i=t(e),n=i["offsetParent"in t.fn?"offsetParent":"parent"]();return n.length||(n=t("body")),parseInt(n.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})},"function"==typeof e.define&&e.define.amd?e.define("jquery-mousewheel",["jquery"],a):"object"==typeof exports?module.exports=a:a(t),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(t,e,i,n){if(null==t.fn.select2){var o=["open","close","destroy"];t.fn.select2=function(e){if("object"==typeof(e=e||{}))return this.each(function(){var n=t.extend(!0,{},e);new i(t(this),n)}),this;if("string"==typeof e){var n,a=Array.prototype.slice.call(arguments,1);return this.each(function(){var i=t(this).data("select2");null==i&&window.console&&console.error&&console.error("The select2('"+e+"') method was called on an element that is not using Select2."),n=i[e].apply(i,a)}),t.inArray(e,o)>-1?this:n}throw new Error("Invalid arguments for Select2: "+e)}}return null==t.fn.select2.defaults&&(t.fn.select2.defaults=n),i}),{define:e.define,require:e.require}}(),i=e.require("jquery.select2");return t.fn.select2.amd=e,i}),
/*! Select2 4.0.3 | https://github.com/select2/select2/blob/master/LICENSE.md */
function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var t=jQuery.fn.select2.amd;t.define("select2/i18n/pt-BR",[],function(){return{errorLoading:function(){return"Os resultados n\xe3o puderam ser carregados."},inputTooLong:function(t){var e=t.input.length-t.maximum,i="Apague "+e+" caracter";return 1!=e&&(i+="es"),i},inputTooShort:function(t){return"Digite "+(t.minimum-t.input.length)+" ou mais caracteres"},loadingMore:function(){return"Carregando mais resultados\u2026"},maximumSelected:function(t){var e="Voc\xea s\xf3 pode selecionar "+t.maximum+" ite";return 1==t.maximum?e+="m":e+="ns",e},noResults:function(){return"Nenhum resultado encontrado"},searching:function(){return"Buscando\u2026"}}}),t.define,t.require}(),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){"use strict";t.fn.priceFormat=function(e){e=t.extend(!0,{},t.fn.priceFormat.defaults,e);window.ctrl_down=!1;var i=!1;return t(window).bind("keyup keydown",function(t){return window.ctrl_down=t.ctrlKey,!0}),t(this).bind("keyup keydown",function(t){return i=t.metaKey,!0}),this.each(function(){function n(t){f.is("input")?f.val(t):f.html(t),f.trigger("pricechange")}function o(){return m=f.is("input")?f.val():f.html()}function a(t){for(var e="",i=0;i<t.length;i++){var n=t.charAt(i);0==e.length&&0==n&&(n=!1),n&&n.match(g)&&(w?e.length<w&&(e+=n):e+=n)}return e}function r(t){for(;t.length<$+1;)t="0"+t;return t}function s(e,i){if(!i&&(""===e||e===s("0",!0)&&!A)&&S)return"";var n=r(a(e)),o="",l=0;0==$&&(b="",c="");var c=n.substr(n.length-$,$),u=n.substr(0,n.length-$);if(n=T?u+b+c:"0"!==u?u+b+c:b+c,y||""!=t.trim(y)){for(var d=u.length;d>0;d--){var p=u.substr(d-1,1);++l%3==0&&(p=y+p),o=p+o}o.substr(0,1)==y&&(o=o.substring(1,o.length)),n=0==$?o:o+b+c}return!C||0==u&&0==c||(n=-1!=e.indexOf("-")&&e.indexOf("+")<e.indexOf("-")?"-"+n:D?"+"+n:""+n),v&&(n=v+n),_&&(n+=_),n}function l(t){var e=t.keyCode?t.keyCode:t.which,o=String.fromCharCode(e),a=!1,r=m,l=s(r+o);(e>=48&&e<=57||e>=96&&e<=105)&&(a=!0),192==e&&(a=!0),8==e&&(a=!0),9==e&&(a=!0),13==e&&(a=!0),46==e&&(a=!0),37==e&&(a=!0),39==e&&(a=!0),!C||189!=e&&109!=e&&173!=e||(a=!0),!D||187!=e&&107!=e&&61!=e||(a=!0),e>=16&&e<=20&&(a=!0),27==e&&(a=!0),e>=33&&e<=40&&(a=!0),e>=44&&e<=46&&(a=!0),(window.ctrl_down||i)&&(86==e&&(a=!0),67==e&&(a=!0),88==e&&(a=!0),82==e&&(a=!0),84==e&&(a=!0),76==e&&(a=!0),87==e&&(a=!0),81==e&&(a=!0),78==e&&(a=!0),65==e&&(a=!0)),a||(t.preventDefault(),t.stopPropagation(),r!=l&&n(l))}function c(){var t=o(),e=s(t);t!=e&&n(e),e==s("0",!0)&&"0"!=t&&S&&!A&&n("")}function u(){f.val(v+o())}function d(){f.val(o()+_)}function p(){""!=t.trim(v)&&x&&n(o().split(v)[1])}function h(){""!=t.trim(_)&&k&&n(o().split(_)[0])}var f=t(this),m="",g=/[0-9]/;m=f.is("input")?f.val():f.html();var v=e.prefix,_=e.suffix,b=e.centsSeparator,y=e.thousandsSeparator,w=e.limit,$=e.centsLimit,x=e.clearPrefix,k=e.clearSuffix,C=e.allowNegative,D=e.insertPlusSign,S=e.clearOnEmpty,T=e.leadingZero,A=e.allowZero;D&&(C=!0),f.bind("keydown.price_format",l),f.bind("keyup.price_format",c),f.bind("focusout.price_format",c),x&&(f.bind("focusout.price_format",function(){p()}),f.bind("focusin.price_format",function(){u()})),k&&(f.bind("focusout.price_format",function(){h()}),f.bind("focusin.price_format",function(){d()})),o().length>0&&(c(),p(),h())})},t.fn.unpriceFormat=function(){return t(this).unbind(".price_format")},t.fn.unmask=function(){var e,i="";e=t(this).is("input")?t(this).val()||[]:t(this).html();for(var n=0;n<e.length;n++)isNaN(e[n])&&"-"!=e[n]||(i+=e[n]);return i},t.fn.priceToFloat=function(){var e;return e=t(this).is("input")?t(this).val()||[]:t(this).html(),parseFloat(e.replace(/[^0-9\-\.]/g,""))},t.fn.priceFormat.defaults={prefix:"US$ ",suffix:"",centsSeparator:".",thousandsSeparator:",",limit:!1,centsLimit:2,clearPrefix:!1,clearSufix:!1,allowNegative:!1,insertPlusSign:!1,clearOnEmpty:!1,leadingZero:!0,allowZero:!1}}),$(".autocomplete_ajax").each(function(){var t=$(this),e=t.data("autocomplete-source")+"?"+t.data("term")+"="+t.val()+"&nao_salvar_filtro=true";$(this).autocomplete({autoFocus:!0,source:function(t,i){$.getJSON(e,{},i)},select:function(e,i){Window[t.data("after-selected")](i)}})}),function(t){window.NestedFormEvents=function(){this.addFields=t.proxy(this.addFields,this),this.removeFields=t.proxy(this.removeFields,this)},NestedFormEvents.prototype={addFields:function(e){var i=e.currentTarget,n=t(i).data("association"),o=t("#"+t(i).data("blueprint-id")).data("blueprint"),a=(t(i).closest(".fields").closestChild("input, textarea, select").eq(0).attr("name")||"").replace(/\[[a-z_]+\]$/,""),r=o.match(new RegExp("\\[([a-z_]+)\\]\\[new_"+n+"\\]"));if(r&&(a=a.replace(new RegExp("\\["+r[1]+"\\]\\[(new_)?\\d+\\]$"),"")),a)for(var s=a.match(/[a-z_]+_attributes(?=\]\[(new_)?\d+\])/g)||[],l=a.match(/[0-9]+/g)||[],c=0;c<s.length;c++)l[c]&&(o=(o=o.replace(new RegExp("(_"+s[c]+")_.+?_","g"),"$1_"+l[c]+"_")).replace(new RegExp("(\\["+s[c]+"\\])\\[.+?\\]","g"),"$1["+l[c]+"]"));var u=new RegExp("new_"+n,"g"),d=this.newId();o=t.trim(o.replace(u,d));var p=this.insertFields(o,n,i);return p.trigger({type:"nested:fieldAdded",field:p,link:i}).trigger({type:"nested:fieldAdded:"+n,field:p,link:i}),!1},newId:function(){return(new Date).getTime()},insertFields:function(e,i,n){var o=t(n).data("target");return o?t(e).appendTo(t(o)):t(e).insertBefore(n)},removeFields:function(e){var i=t(e.currentTarget),n=i.data("association");i.prev("input[type=hidden]").val("1");var o=i.closest(".fields");return o.hide(),o.trigger({type:"nested:fieldRemoved",field:o}).trigger({type:"nested:fieldRemoved:"+n,field:o}),!1}},window.nestedFormEvents=new NestedFormEvents,t(document).delegate("form a.add_nested_fields","click",nestedFormEvents.addFields).delegate("form a.remove_nested_fields","click",nestedFormEvents.removeFields)}(jQuery),
/*
 * Copyright 2011, Tobias Lindig
 *
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 */
function(t){t.fn.closestChild=function(e){if(e&&""!=e){var i=[];for(i.push(this);i.length>0;)for(var n=i.shift().children(),o=0;o<n.length;++o){var a=t(n[o]);if(a.is(e))return a;i.push(a)}}return t()}}(jQuery),
/*!
 * clipboard.js v1.5.15
 * https://zenorocha.github.io/clipboard.js
 *
 * Licensed MIT  Zeno Rocha
 */
function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Clipboard=t()}}(function(){var t;return function e(t,i,n){function o(r,s){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[r]={exports:{}};t[r][0].call(u.exports,function(e){var i=t[r][1][e];return o(i||e)},u,u.exports,e,t,i,n)}return i[r].exports}for(var a="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e){function i(t,e){for(;t&&t!==document;){if(t.matches(e))return t;t=t.parentNode}}if(Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}e.exports=i},{}],2:[function(t,e){function i(t,e,i,o,a){var r=n.apply(this,arguments);return t.addEventListener(i,r,a),{destroy:function(){t.removeEventListener(i,r,a)}}}function n(t,e,i,n){return function(i){i.delegateTarget=o(i.target,e),i.delegateTarget&&n.call(t,i)}}var o=t("./closest");e.exports=i},{"./closest":1}],3:[function(t,e,i){i.node=function(t){return t!==undefined&&t instanceof HTMLElement&&1===t.nodeType},i.nodeList=function(t){var e=Object.prototype.toString.call(t);return t!==undefined&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||i.node(t[0]))},i.string=function(t){return"string"==typeof t||t instanceof String},i.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},{}],4:[function(t,e){function i(t,e,i){if(!t&&!e&&!i)throw new Error("Missing required arguments");if(!r.string(e))throw new TypeError("Second argument must be a String");if(!r.fn(i))throw new TypeError("Third argument must be a Function");if(r.node(t))return n(t,e,i);if(r.nodeList(t))return o(t,e,i);if(r.string(t))return a(t,e,i);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function n(t,e,i){return t.addEventListener(e,i),{destroy:function(){t.removeEventListener(e,i)}}}function o(t,e,i){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,i)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,i)})}}}function a(t,e,i){return s(document.body,t,e,i)}var r=t("./is"),s=t("delegate");e.exports=i},{"./is":3,delegate:2}],5:[function(t,e){function i(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName)t.focus(),t.setSelectionRange(0,t.value.length),e=t.value;else{t.hasAttribute("contenteditable")&&t.focus();var i=window.getSelection(),n=document.createRange();n.selectNodeContents(t),i.removeAllRanges(),i.addRange(n),e=i.toString()}return e}e.exports=i},{}],6:[function(t,e){function i(){}i.prototype={on:function(t,e,i){var n=this.e||(this.e={});return(n[t]||(n[t]=[])).push({fn:e,ctx:i}),this},once:function(t,e,i){function n(){o.off(t,n),e.apply(i,arguments)}var o=this;return n._=e,this.on(t,n,i)},emit:function(t){for(var e=[].slice.call(arguments,1),i=((this.e||(this.e={}))[t]||[]).slice(),n=0,o=i.length;n<o;n++)i[n].fn.apply(i[n].ctx,e);return this},off:function(t,e){var i=this.e||(this.e={}),n=i[t],o=[];if(n&&e)for(var a=0,r=n.length;a<r;a++)n[a].fn!==e&&n[a].fn._!==e&&o.push(n[a]);return o.length?i[t]=o:delete i[t],this}},e.exports=i},{}],7:[function(e,i,n){!function(o,a){if("function"==typeof t&&t.amd)t(["module","select"],a);else if(void 0!==n)a(i,e("select"));else{var r={exports:{}};a(r,o.select),o.clipboardAction=r.exports}}(this,function(t,e){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=i(e),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(e){n(this,t),this.resolveOptions(e),this.initSelection()}return r(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.action=t.action,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var i=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.addEventListener("focus",window.scrollTo(0,i)),this.fakeElem.style.top=i+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,o["default"])(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,o["default"])(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(t!==undefined){if(!t||"object"!==(void 0===t?"undefined":a(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=s})},{select:5}],8:[function(e,i,n){!function(o,a){if("function"==typeof t&&t.amd)t(["module","./clipboard-action","tiny-emitter","good-listener"],a);else if(void 0!==n)a(i,e("./clipboard-action"),e("tiny-emitter"),e("good-listener"));else{var r={exports:{}};a(r,o.clipboardAction,o.tinyEmitter,o.goodListener),o.clipboard=r.exports}}(this,function(t,e,i,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){var i="data-clipboard-"+t;if(e.hasAttribute(i))return e.getAttribute(i)}var c=o(e),u=o(i),d=o(n),p=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=function(){function t(e,i){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.resolveOptions(i),n.listenClick(e),n}return s(t,u["default"]),p(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,d["default"])(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new c["default"]({action:this.action(e),target:this.target(e),text:this.text(e),trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return l("action",t)}},{key:"defaultTarget",value:function(t){var e=l("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return l("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}]),t}();t.exports=h})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)}),
/**
 * Selectize (v0.15.2)
 * https://selectize.dev
 *
 * Copyright (c) 2013-2015 Brian Reavis & contributors
 * Copyright (c) 2020-2022 Selectize Team & contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
 * file except in compliance with the License. You may obtain a copy of the License at:
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
 * ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 *
 * @author Brian Reavis <brian@thirdroute.com>
 * @author Ris Adams <selectize@risadams.com>
 */
function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&"object"==typeof module.exports?module.exports=e(require("jquery")):t.Selectize=e(t.jQuery)}(this,function(t){"use strict";function e(t,e){return navigator.userAgentData?t===navigator.userAgentData.platform:e.test(navigator.userAgent)}var i=function(t,e){if("string"!=typeof e||e.length){var i="string"==typeof e?new RegExp(e,"i"):e,n=function(t){var e=0;if(3===t.nodeType){var o=t.data.search(i);if(o>=0&&t.data.length>0){var a=t.data.match(i),r=document.createElement("span");r.className="highlight";var s=t.splitText(o),l=(s.splitText(a[0].length),s.cloneNode(!0));r.appendChild(l),s.parentNode.replaceChild(r,s),e=1}}else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName)&&("highlight"!==t.className||"SPAN"!==t.tagName))for(var c=0;c<t.childNodes.length;++c)c+=n(t.childNodes[c]);return e};return t.each(function(){n(this)})}};t.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;var t=this.parentNode;t.replaceChild(this.firstChild,this),t.normalize()}).end()};var n=function(){};n.prototype={on:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},off:function(t,e){var i=arguments.length;return 0===i?delete this._events:1===i?delete this._events[t]:(this._events=this._events||{},void(t in this._events!=!1&&this._events[t].splice(this._events[t].indexOf(e),1)))},trigger:function(t){const e=this._events=this._events||{};if(t in e!=!1)for(var i=0;i<e[t].length;i++)e[t][i].apply(this,Array.prototype.slice.call(arguments,1))}},n.mixin=function(t){for(var e=["on","off","trigger"],i=0;i<e.length;i++)t.prototype[e[i]]=n.prototype[e[i]]};var o={mixin:function(t){t.plugins={},t.prototype.initializePlugins=function(t){var e,i,n,o=this,a=[];if(o.plugins={names:[],settings:{},requested:{},loaded:{}},P(t))for(e=0,i=t.length;e<i;e++)"string"==typeof t[e]?a.push(t[e]):(o.plugins.settings[t[e].name]=t[e].options,a.push(t[e].name));else if(t)for(n in t)t.hasOwnProperty(n)&&(o.plugins.settings[n]=t[n],a.push(n));for(;a.length;)o.require(a.shift())},t.prototype.loadPlugin=function(e){var i=this,n=i.plugins,o=t.plugins[e];if(!t.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');n.requested[e]=!0,n.loaded[e]=o.fn.apply(i,[i.plugins.settings[e]||{}]),n.names.push(e)},t.prototype.require=function(t){var e=this,i=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(i.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return i.loaded[t]},t.define=function(e,i){t.plugins[e]={name:e,fn:i}}}},a=function(t,e){this.items=t,this.settings=e||{diacritics:!0}};a.prototype.tokenize=function(t,e){if(!(t=c(String(t||"").toLowerCase()))||!t.length)return[];var i,n,o,a,r=[],s=t.split(/ +/);for(i=0,n=s.length;i<n;i++){if(o=u(s[i]),this.settings.diacritics)for(a in p)p.hasOwnProperty(a)&&(o=o.replace(new RegExp(a,"g"),p[a]));e&&(o="\\b"+o),r.push({string:s[i],regex:new RegExp(o,"i")})}return r},a.prototype.iterator=function(t,e){(d(t)?Array.prototype.forEach||function(t){for(var e=0,i=this.length;e<i;e++)t(this[e],e,this)}:function(t){for(var e in this)this.hasOwnProperty(e)&&t(this[e],e,this)}).apply(t,[e])},a.prototype.getScoreFunction=function(t,e){var i,n,o,a;t=this.prepareSearch(t,e),n=t.tokens,i=t.options.fields,o=n.length,a=t.options.nesting;var r,s=function(t,e){var i,n;return t?-1===(n=(t=String(t||"")).search(e.regex))?0:(i=e.string.length/t.length,0===n&&(i+=.5),i):0},c=(r=i.length)?1===r?function(t,e){return s(l(e,i[0],a),t)}:function(t,e){for(var n=0,o=0;n<r;n++)o+=s(l(e,i[n],a),t);return o/r}:function(){return 0};return o?1===o?function(t){return c(n[0],t)}:"and"===t.options.conjunction?function(t){for(var e,i=0,a=0;i<o;i++){if((e=c(n[i],t))<=0)return 0;a+=e}return a/o}:function(t){for(var e=0,i=0;e<o;e++)i+=c(n[e],t);return i/o}:function(){return 0}},a.prototype.getSortFunction=function(t,e){var i,n,o,a,s,c,u,d,p,h,f;if(f=!(t=(o=this).prepareSearch(t,e)).query&&e.sort_empty||e.sort,p=function(t,i){return"$score"===t?i.score:l(o.items[i.id],t,e.nesting)},s=[],f)for(i=0,n=f.length;i<n;i++)(t.query||"$score"!==f[i].field)&&s.push(f[i]);if(t.query){for(h=!0,i=0,n=s.length;i<n;i++)if("$score"===s[i].field){h=!1;break}h&&s.unshift({field:"$score",direction:"desc"})}else for(i=0,n=s.length;i<n;i++)if("$score"===s[i].field){s.splice(i,1);break}for(d=[],i=0,n=s.length;i<n;i++)d.push("desc"===s[i].direction?-1:1);return(c=s.length)?1===c?(a=s[0].field,u=d[0],function(t,e){return u*r(p(a,t),p(a,e))}):function(t,e){var i,n,o;for(i=0;i<c;i++)if(o=s[i].field,n=d[i]*r(p(o,t),p(o,e)))return n;return 0}:null},a.prototype.prepareSearch=function(t,e){if("object"==typeof t)return t;var i=(e=s({},e)).fields,n=e.sort,o=e.sort_empty;return i&&!d(i)&&(e.fields=[i]),n&&!d(n)&&(e.sort=[n]),o&&!d(o)&&(e.sort_empty=[o]),{options:e,query:String(t||"").toLowerCase(),tokens:this.tokenize(t,e.respect_word_boundaries),total:0,items:[]}},a.prototype.search=function(t,e){var i,n,o,a,r=this;return n=this.prepareSearch(t,e),e=n.options,t=n.query,a=e.score||r.getScoreFunction(n),t.length?r.iterator(r.items,function(t,o){i=a(t),(!1===e.filter||i>0)&&n.items.push({score:i,id:o})}):r.iterator(r.items,function(t,e){n.items.push({score:1,id:e})}),(o=r.getSortFunction(n,e))&&n.items.sort(o),n.total=n.items.length,"number"==typeof e.limit&&(n.items=n.items.slice(0,e.limit)),n};var r=function(t,e){return"number"==typeof t&&"number"==typeof e?t>e?1:t<e?-1:0:(t=h(String(t||"")))>(e=h(String(e||"")))?1:e>t?-1:0},s=function(t){var e,i,n,o;for(e=1,i=arguments.length;e<i;e++)if(o=arguments[e])for(n in o)o.hasOwnProperty(n)&&(t[n]=o[n]);return t},l=function(t,e,i){if(t&&e){if(!i)return t[e];for(var n=e.split(".");n.length&&(t=t[n.shift()]););return t}},c=function(t){return(t+"").replace(/^\s+|\s+$|/g,"")},u=function(t){return(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},d=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},p={a:"[a\u1e00\u1e01\u0102\u0103\xc2\xe2\u01cd\u01ce\u023a\u2c65\u0226\u0227\u1ea0\u1ea1\xc4\xe4\xc0\xe0\xc1\xe1\u0100\u0101\xc3\xe3\xc5\xe5\u0105\u0104\xc3\u0105\u0104]",b:"[b\u2422\u03b2\u0392B\u0e3f\ud800\udf01\u16d2]",c:"[c\u0106\u0107\u0108\u0109\u010c\u010d\u010a\u010bC\u0304c\u0304\xc7\xe7\u1e08\u1e09\u023b\u023c\u0187\u0188\u0255\u1d04\uff23\uff43]",d:"[d\u010e\u010f\u1e0a\u1e0b\u1e10\u1e11\u1e0c\u1e0d\u1e12\u1e13\u1e0e\u1e0f\u0110\u0111D\u0326d\u0326\u0189\u0256\u018a\u0257\u018b\u018c\u1d6d\u1d81\u1d91\u0221\u1d05\uff24\uff44\xf0]",e:"[e\xc9\xe9\xc8\xe8\xca\xea\u1e18\u1e19\u011a\u011b\u0114\u0115\u1ebc\u1ebd\u1e1a\u1e1b\u1eba\u1ebb\u0116\u0117\xcb\xeb\u0112\u0113\u0228\u0229\u0118\u0119\u1d92\u0246\u0247\u0204\u0205\u1ebe\u1ebf\u1ec0\u1ec1\u1ec4\u1ec5\u1ec2\u1ec3\u1e1c\u1e1d\u1e16\u1e17\u1e14\u1e15\u0206\u0207\u1eb8\u1eb9\u1ec6\u1ec7\u2c78\u1d07\uff25\uff45\u0258\u01dd\u018f\u0190\u03b5]",f:"[f\u0191\u0192\u1e1e\u1e1f]",g:"[g\u0262\u20b2\u01e4\u01e5\u011c\u011d\u011e\u011f\u0122\u0123\u0193\u0260\u0120\u0121]",h:"[h\u0124\u0125\u0126\u0127\u1e28\u1e29\u1e96\u1e96\u1e24\u1e25\u1e22\u1e23\u0266\u02b0\u01f6\u0195]",i:"[i\xcd\xed\xcc\xec\u012c\u012d\xce\xee\u01cf\u01d0\xcf\xef\u1e2e\u1e2f\u0128\u0129\u012e\u012f\u012a\u012b\u1ec8\u1ec9\u0208\u0209\u020a\u020b\u1eca\u1ecb\u1e2c\u1e2d\u0197\u0268\u0268\u0306\u1d7b\u1d96\u0130iI\u0131\u026a\uff29\uff49]",j:"[j\u0237\u0134\u0135\u0248\u0249\u029d\u025f\u02b2]",k:"[k\u0198\u0199\ua740\ua741\u1e30\u1e31\u01e8\u01e9\u1e32\u1e33\u1e34\u1e35\u03ba\u03f0\u20ad]",l:"[l\u0141\u0142\u013d\u013e\u013b\u013c\u0139\u013a\u1e36\u1e37\u1e38\u1e39\u1e3c\u1e3d\u1e3a\u1e3b\u013f\u0140\u023d\u019a\u2c60\u2c61\u2c62\u026b\u026c\u1d85\u026d\u0234\u029f\uff2c\uff4c]",n:"[n\u0143\u0144\u01f8\u01f9\u0147\u0148\xd1\xf1\u1e44\u1e45\u0145\u0146\u1e46\u1e47\u1e4a\u1e4b\u1e48\u1e49N\u0308n\u0308\u019d\u0272\u0220\u019e\u1d70\u1d87\u0273\u0235\u0274\uff2e\uff4e\u014a\u014b]",o:"[o\xd8\xf8\xd6\xf6\xd3\xf3\xd2\xf2\xd4\xf4\u01d1\u01d2\u0150\u0151\u014e\u014f\u022e\u022f\u1ecc\u1ecd\u019f\u0275\u01a0\u01a1\u1ece\u1ecf\u014c\u014d\xd5\xf5\u01ea\u01eb\u020c\u020d\u0555\u0585]",p:"[p\u1e54\u1e55\u1e56\u1e57\u2c63\u1d7d\u01a4\u01a5\u1d71]",q:"[q\ua756\ua757\u02a0\u024a\u024b\ua758\ua759q\u0303]",r:"[r\u0154\u0155\u024c\u024d\u0158\u0159\u0156\u0157\u1e58\u1e59\u0210\u0211\u0212\u0213\u1e5a\u1e5b\u2c64\u027d]",s:"[s\u015a\u015b\u1e60\u1e61\u1e62\u1e63\ua7a8\ua7a9\u015c\u015d\u0160\u0161\u015e\u015f\u0218\u0219S\u0308s\u0308]",t:"[t\u0164\u0165\u1e6a\u1e6b\u0162\u0163\u1e6c\u1e6d\u01ae\u0288\u021a\u021b\u1e70\u1e71\u1e6e\u1e6f\u01ac\u01ad]",u:"[u\u016c\u016d\u0244\u0289\u1ee4\u1ee5\xdc\xfc\xda\xfa\xd9\xf9\xdb\xfb\u01d3\u01d4\u0170\u0171\u016c\u016d\u01af\u01b0\u1ee6\u1ee7\u016a\u016b\u0168\u0169\u0172\u0173\u0214\u0215\u222a]",v:"[v\u1e7c\u1e7d\u1e7e\u1e7f\u01b2\u028b\ua75e\ua75f\u2c71\u028b]",w:"[w\u1e82\u1e83\u1e80\u1e81\u0174\u0175\u1e84\u1e85\u1e86\u1e87\u1e88\u1e89]",x:"[x\u1e8c\u1e8d\u1e8a\u1e8b\u03c7]",y:"[y\xdd\xfd\u1ef2\u1ef3\u0176\u0177\u0178\xff\u1ef8\u1ef9\u1e8e\u1e8f\u1ef4\u1ef5\u024e\u024f\u01b3\u01b4]",z:"[z\u0179\u017a\u1e90\u1e91\u017d\u017e\u017b\u017c\u1e92\u1e93\u1e94\u1e95\u01b5\u01b6]"},h=function(){var t,e,i,n,o="",a={};for(i in p)if(p.hasOwnProperty(i))for(o+=n=p[i].substring(2,p[i].length-1),t=0,e=n.length;t<e;t++)a[n.charAt(t)]=i;var r=new RegExp("["+o+"]","g");return function(t){return t.replace(r,function(t){return a[t]}).toLowerCase()}}(),f=e("macOS",/Mac/),m=65,g=13,v=27,_=37,b=38,y=80,w=39,$=40,x=78,k=8,C=46,D=16,S=f?91:17,T=f?18:17,A=9,E=1,M=2,O=!e("Android",/android/i)&&!!document.createElement("input").validity,I=function(t){return void 0!==t},P=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},N=function(t){return null==t?null:"boolean"==typeof t?t?"1":"0":t+""},L=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},R={before:function(t,e,i){var n=t[e];t[e]=function(){return i.apply(t,arguments),n.apply(t,arguments)}},after:function(t,e,i){var n=t[e];t[e]=function(){var e=n.apply(t,arguments);return i.apply(t,arguments),e}}},F=function(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}},j=function(t,e){var i;return function(){var n=this,o=arguments;window.clearTimeout(i),i=window.setTimeout(function(){t.apply(n,o)},e)}},B=function(t,e,i){var n,o=t.trigger,a={};for(n in t.trigger=function(){var i=arguments[0];if(-1===e.indexOf(i))return o.apply(t,arguments);a[i]=arguments},i.apply(t,[]),t.trigger=o,a)a.hasOwnProperty(n)&&o.apply(t,a[n])},q=function(t,e,i,n){t.on(e,i,function(e){for(var i=e.target;i&&i.parentNode!==t[0];)i=i.parentNode;return e.currentTarget=i,n.apply(this,[e])})},z=function(t){var e={};if(t===undefined)return console.warn("WARN getInputSelection cannot locate input control"),e;if("selectionStart"in t)e.start=t.selectionStart,e.length=t.selectionEnd-e.start;else if(document.selection){t.focus();var i=document.selection.createRange(),n=document.selection.createRange().text.length;i.moveStart("character",-t.value.length),e.start=i.text.length-n,e.length=n}return e},H=function(t,e,i){var n,o,a={};if(i)for(n=0,o=i.length;n<o;n++)a[i[n]]=t.css(i[n]);else a=t.css();e.css(a)},W=function(e,i){return e?(G.$testInput||(G.$testInput=t("<span />").css({position:"absolute",width:"auto",padding:0,whiteSpace:"pre"}),t("<div />").css({position:"absolute",width:0,height:0,overflow:"hidden"}).attr({"aria-hidden":!0}).append(G.$testInput).appendTo("body")),G.$testInput.text(e),H(i,G.$testInput,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]),G.$testInput.width()):0},Y=function(t){var e=null,i=function(i,n){var o,a,r,s,l,c,u,d,p;n=n||{},(i=i||window.event||{}).metaKey||i.altKey||(n.force||!1!==t.data("grow"))&&(o=t.val(),i.type&&"keydown"===i.type.toLowerCase()&&(r=(a=i.keyCode)>=48&&a<=57||a>=65&&a<=90||a>=96&&a<=111||a>=186&&a<=222||32===a,a===C||a===k?(p=z(t[0])).length?o=o.substring(0,p.start)+o.substring(p.start+p.length):a===k&&p.start?o=o.substring(0,p.start-1)+o.substring(p.start+1):a===C&&"undefined"!=typeof p.start&&(o=o.substring(0,p.start)+o.substring(p.start+1)):r&&(u=i.shiftKey,d=String.fromCharCode(i.keyCode),o+=d=u?d.toUpperCase():d.toLowerCase())),c=(l=t.attr("placeholder"))?W(l,t)+4:0,(s=Math.max(W(o,t),c)+4)!==e&&(e=s,t.width(s),t.triggerHandler("resize")))};t.on("keydown keyup update blur",i),i()},V=function(t){var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML},U=function(t){try{JSON.parse(t)}catch(e){return!1}return!0},G=function(e,i){var n,o,r,s,l=this;(s=e[0]).selectize=l;var c=window.getComputedStyle&&window.getComputedStyle(s,null);if(r=(r=c?c.getPropertyValue("direction"):s.currentStyle&&s.currentStyle.direction)||e.parents("[dir]:first").attr("dir")||"",l.settings={},t.extend(l,{order:0,settings:i,$input:e,tabIndex:e.attr("tabindex")||"",tagType:"select"===s.tagName.toLowerCase()?E:M,rtl:/rtl/i.test(r),eventNS:".selectize"+ ++G.count,highlightedValue:null,isBlurring:!1,isOpen:!1,isDisabled:!1,isRequired:e.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",lastValidValue:"",lastOpenTarget:!1,caretPos:0,loading:0,loadedSearches:{},isDropdownClosing:!1,$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===i.loadThrottle?l.onSearchChange:j(l.onSearchChange,i.loadThrottle)}),l.sifter=new a(this.options,{diacritics:i.diacritics}),l.settings.options){for(n=0,o=l.settings.options.length;n<o;n++)l.registerOption(l.settings.options[n]);delete l.settings.options}if(l.settings.optgroups){for(n=0,o=l.settings.optgroups.length;n<o;n++)l.registerOptionGroup(l.settings.optgroups[n]);delete l.settings.optgroups}l.settings.mode=l.settings.mode||(1===l.settings.maxItems?"single":"multi"),"boolean"!=typeof l.settings.hideSelected&&(l.settings.hideSelected="multi"===l.settings.mode),l.initializePlugins(l.settings.plugins),l.setupCallbacks(),l.setupTemplates(),l.setup()};return n.mixin(G),o.mixin(G),t.extend(G.prototype,{setup:function(){var e,i,n,o,a,r,s,l,c,u,d=this,p=d.settings,h=d.eventNS,m=t(window),g=t(document),v=d.$input;if(s=d.settings.mode,l=v.attr("class")||"",e=t("<div>").addClass(p.wrapperClass).addClass(l+" selectize-control").addClass(s),i=t("<div>").addClass(p.inputClass+" selectize-input items").appendTo(e),n=t('<input type="text" autocomplete="new-password" autofill="no" />').appendTo(i).attr("tabindex",v.is(":disabled")?"-1":d.tabIndex),r=t(p.dropdownParent||e),o=t("<div>").addClass(p.dropdownClass).addClass(s+" selectize-dropdown").hide().appendTo(r),a=t("<div>").addClass(p.dropdownContentClass+" selectize-dropdown-content").attr("tabindex","-1").appendTo(o),(u=v.attr("id"))&&(n.attr("id",u+"-selectized"),t("label[for='"+u+"']").attr("for",u+"-selectized")),d.settings.copyClassesToDropdown&&o.addClass(l),e.css({width:v[0].style.width}),d.plugins.names.length&&(c="plugin-"+d.plugins.names.join(" plugin-"),e.addClass(c),o.addClass(c)),(null===p.maxItems||p.maxItems>1)&&d.tagType===E&&v.attr("multiple","multiple"),d.settings.placeholder&&n.attr("placeholder",p.placeholder),d.settings.search||(n.attr("readonly",!0),n.attr("inputmode","none"),i.css("cursor","pointer")),!d.settings.splitOn&&d.settings.delimiter){var _=d.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");d.settings.splitOn=new RegExp("\\s*"+_+"+\\s*")}v.attr("autocorrect")&&n.attr("autocorrect",v.attr("autocorrect")),v.attr("autocapitalize")&&n.attr("autocapitalize",v.attr("autocapitalize")),v.is("input")&&(n[0].type=v[0].type),d.$wrapper=e,d.$control=i,d.$control_input=n,d.$dropdown=o,d.$dropdown_content=a,o.on("mouseenter mousedown mouseup click","[data-disabled]>[data-selectable]",function(t){t.stopImmediatePropagation()}),o.on("mouseenter","[data-selectable]",function(){return d.onOptionHover.apply(d,arguments)}),o.on("mouseup click","[data-selectable]",function(){return d.onOptionSelect.apply(d,arguments)}),q(i,"mouseup","*:not(input)",function(){return d.onItemSelect.apply(d,arguments)}),Y(n),i.on({mousedown:function(){return d.onMouseDown.apply(d,arguments)},click:function(){return d.onClick.apply(d,arguments)}}),n.on({mousedown:function(t){(""!==d.$control_input.val()||d.settings.openOnFocus)&&t.stopPropagation()},keydown:function(){return d.onKeyDown.apply(d,arguments)},keypress:function(){return d.onKeyPress.apply(d,arguments)},input:function(){return d.onInput.apply(d,arguments)},resize:function(){d.positionDropdown.apply(d,[])},blur:function(){return d.onBlur.apply(d,arguments)},focus:function(){return d.onFocus.apply(d,arguments)},paste:function(){return d.onPaste.apply(d,arguments)}}),g.on("keydown"+h,function(t){d.isCmdDown=t[f?"metaKey":"ctrlKey"],d.isCtrlDown=t[f?"altKey":"ctrlKey"],d.isShiftDown=t.shiftKey}),g.on("keyup"+h,function(t){t.keyCode===T&&(d.isCtrlDown=!1),t.keyCode===D&&(d.isShiftDown=!1),t.keyCode===S&&(d.isCmdDown=!1)}),g.on("mousedown"+h,function(t){if(d.isFocused){if(t.target===d.$dropdown[0]||t.target.parentNode===d.$dropdown[0])return!1;d.$dropdown.has(t.target).length?(d.ignoreBlur=!0,window.setTimeout(function(){d.ignoreBlur=!1},0)):t.target!==d.$control[0]&&d.blur(t.target)}}),m.on(["scroll"+h,"resize"+h].join(" "),function(){d.isOpen&&d.positionDropdown.apply(d,arguments)}),m.on("mousemove"+h,function(){d.ignoreHover=d.settings.ignoreHover});var b=t("<div></div>"),y=v.children().detach();v.replaceWith(b),b.replaceWith(v),this.revertSettings={$children:y,tabindex:v.attr("tabindex")},v.attr("tabindex",-1).hide().after(d.$wrapper),Array.isArray(p.items)&&(d.lastValidValue=p.items,d.setValue(p.items),delete p.items),O&&v.on("invalid"+h,function(t){t.preventDefault(),d.isInvalid=!0,d.refreshState()}),d.updateOriginalInput(),d.refreshItems(),d.refreshState(),d.updatePlaceholder(),d.isSetup=!0,v.is(":disabled")&&d.disable(),d.on("change",this.onChange),v.data("selectize",d),v.addClass("selectized"),d.trigger("initialize"),!0===p.preload&&d.onSearchChange("")},setupTemplates:function(){var e=this,i=e.settings.labelField,n=e.settings.valueField,o=e.settings.optgroupLabelField,a={optgroup:function(t){return'<div class="optgroup">'+t.html+"</div>"},optgroup_header:function(t,e){return'<div class="optgroup-header">'+e(t[o])+"</div>"},option:function(t,e){var o=t.classes?" "+t.classes:"";return o+=""===t[n]?" selectize-dropdown-emptyoptionlabel":"","<div"+(t.styles?' style="'+t.styles+'"':"")+' class="option'+o+'">'+e(t[i])+"</div>"},item:function(t,e){return'<div class="item">'+e(t[i])+"</div>"},option_create:function(t,e){return'<div class="create">Add <strong>'+e(t.input)+"</strong>&#x2026;</div>"}};e.settings.render=t.extend({},a,e.settings.render)},setupCallbacks:function(){var t,e,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur",dropdown_item_activate:"onDropdownItemActivate",dropdown_item_deactivate:"onDropdownItemDeactivate"};for(t in i)i.hasOwnProperty(t)&&(e=this.settings[i[t]])&&this.on(t,e)},onClick:function(t){var e=this;e.isDropdownClosing||e.isFocused&&e.isOpen||(e.focus(),t.preventDefault())},onMouseDown:function(e){var i=this,n=e.isDefaultPrevented();t(e.target);if(i.isFocused||n||window.setTimeout(function(){i.focus()},0),e.target!==i.$control_input[0]||""===i.$control_input.val())return"single"===i.settings.mode?i.isOpen?i.close():i.open():(n||i.setActiveItem(null),i.settings.openOnFocus||(i.isOpen&&e.target===i.lastOpenTarget?(i.close(),i.lastOpenTarget=!1):i.isOpen?i.lastOpenTarget=e.target:(i.refreshOptions(),i.open(),i.lastOpenTarget=e.target))),!1},onChange:function(){var t=this;""!==t.getValue()&&(t.lastValidValue=t.getValue()),this.$input.trigger("input"),this.$input.trigger("change")},onPaste:function(t){var e=this;e.isFull()||e.isInputHidden||e.isLocked?t.preventDefault():e.settings.splitOn&&setTimeout(function(){var t=e.$control_input.val();if(t.match(e.settings.splitOn))for(var i=t.trim().split(e.settings.splitOn),n=0,o=i.length;n<o;n++)e.createItem(i[n])},0)},onKeyPress:function(t){if(this.isLocked)return t&&t.preventDefault();var e=String.fromCharCode(t.keyCode||t.which);return this.settings.create&&"multi"===this.settings.mode&&e===this.settings.delimiter?(this.createItem(),t.preventDefault(),!1):void 0},onKeyDown:function(t){t.target,this.$control_input[0];var e=this;if(e.isLocked)t.keyCode!==A&&t.preventDefault();else{switch(t.keyCode){case m:if(e.isCmdDown)return void e.selectAll();break;case v:return void(e.isOpen&&(t.preventDefault(),t.stopPropagation(),e.close()));case x:if(!t.ctrlKey||t.altKey)break;case $:if(!e.isOpen&&e.hasOptions)e.open();else if(e.$activeOption){e.ignoreHover=!0;var i=e.getAdjacentOption(e.$activeOption,1);i.length&&e.setActiveOption(i,!0,!0)}return void t.preventDefault();case y:if(!t.ctrlKey||t.altKey)break;case b:if(e.$activeOption){e.ignoreHover=!0;var n=e.getAdjacentOption(e.$activeOption,-1);n.length&&e.setActiveOption(n,!0,!0)}return void t.preventDefault();case g:return void(e.isOpen&&e.$activeOption&&(e.onOptionSelect({currentTarget:e.$activeOption}),t.preventDefault()));case _:return void e.advanceSelection(-1,t);case w:return void e.advanceSelection(1,t);case A:return e.settings.selectOnTab&&e.isOpen&&e.$activeOption&&(e.onOptionSelect({currentTarget:e.$activeOption}),e.isFull()||t.preventDefault()),void(e.settings.create&&e.createItem()&&e.settings.showAddOptionOnCreate&&t.preventDefault());case k:case C:return void e.deleteSelection(t)}!e.isFull()&&!e.isInputHidden||(f?t.metaKey:t.ctrlKey)||t.preventDefault()}},onInput:function(){var t=this,e=t.$control_input.val()||"";t.lastValue!==e&&(t.lastValue=e,t.onSearchChange(e),t.refreshOptions(),t.trigger("type",e))},onSearchChange:function(t){var e=this,i=e.settings.load;i&&(e.loadedSearches.hasOwnProperty(t)||(e.loadedSearches[t]=!0,e.load(function(n){i.apply(e,[t,n])})))},onFocus:function(t){var e=this,i=e.isFocused;if(e.isDisabled)return e.blur(),t&&t.preventDefault(),!1;e.ignoreFocus||(e.isFocused=!0,"focus"===e.settings.preload&&e.onSearchChange(""),i||e.trigger("focus"),e.$activeItems.length||(e.showInput(),e.setActiveItem(null),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())},onBlur:function(t,e){var i=this;if(!i.ignoreBlur&&i.isFocused&&(i.isFocused=!1,!i.ignoreFocus)){var n=function(){i.close(),i.setTextboxValue(""),i.setActiveItem(null),i.setActiveOption(null),i.setCaret(i.items.length),i.refreshState(),e&&e.focus&&e.focus(),i.isBlurring=!1,i.ignoreFocus=!1,i.trigger("blur")};i.isBlurring=!0,i.ignoreFocus=!0,i.settings.create&&i.settings.createOnBlur?i.createItem(null,!1,n):n()}},onOptionHover:function(t){this.ignoreHover||this.setActiveOption(t.currentTarget,!1)},onOptionSelect:function(e){var i,n,o=this;e.preventDefault&&(e.preventDefault(),e.stopPropagation()),(n=t(e.currentTarget)).hasClass("create")?o.createItem(null,function(){o.settings.closeAfterSelect&&o.close()}):void 0!==(i=n.attr("data-value"))&&(o.lastQuery=null,o.setTextboxValue(""),o.addItem(i),o.settings.closeAfterSelect?o.close():!o.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&o.setActiveOption(o.getOption(i)))},onItemSelect:function(t){var e=this;e.isLocked||"multi"===e.settings.mode&&(t.preventDefault(),e.setActiveItem(t.currentTarget,t))},load:function(t){var e=this,i=e.$wrapper.addClass(e.settings.loadingClass);e.loading++,t.apply(e,[function(t){e.loading=Math.max(e.loading-1,0),t&&t.length&&(e.addOption(t),e.refreshOptions(e.isFocused&&!e.isInputHidden)),e.loading||i.removeClass(e.settings.loadingClass),e.trigger("load",t)}])},getTextboxValue:function(){return this.$control_input.val()},setTextboxValue:function(t){var e=this.$control_input;e.val()!==t&&(e.val(t).triggerHandler("update"),this.lastValue=t)},getValue:function(){return this.tagType===E&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(t,e){(Array.isArray(t)?t:[t]).join("")!==this.items.join("")&&B(this,e?[]:["change"],function(){this.clear(e),this.addItems(t,e)})},setMaxItems:function(t){0===t&&(t=null),this.settings.maxItems=t,this.settings.mode=this.settings.mode||(1===this.settings.maxItems?"single":"multi"),this.refreshState()},setActiveItem:function(e,i){var n,o,a,r,s,l,c,u,d=this;if("single"!==d.settings.mode){if(!(e=t(e)).length)return t(d.$activeItems).removeClass("active"),d.$activeItems=[],void(d.isFocused&&d.showInput());if("mousedown"===(n=i&&i.type.toLowerCase())&&d.isShiftDown&&d.$activeItems.length){for(u=d.$control.children(".active:last"),(r=Array.prototype.indexOf.apply(d.$control[0].childNodes,[u[0]]))>(s=Array.prototype.indexOf.apply(d.$control[0].childNodes,[e[0]]))&&(c=r,r=s,s=c),o=r;o<=s;o++)l=d.$control[0].childNodes[o],-1===d.$activeItems.indexOf(l)&&(t(l).addClass("active"),d.$activeItems.push(l));i.preventDefault()}else"mousedown"===n&&d.isCtrlDown||"keydown"===n&&this.isShiftDown?e.hasClass("active")?(a=d.$activeItems.indexOf(e[0]),d.$activeItems.splice(a,1),e.removeClass("active")):d.$activeItems.push(e.addClass("active")[0]):(t(d.$activeItems).removeClass("active"),d.$activeItems=[e.addClass("active")[0]]);d.hideInput(),this.isFocused||d.focus()}},setActiveOption:function(e,i,n){var o,a,r,s,l,c=this;c.$activeOption&&(c.$activeOption.removeClass("active"),c.trigger("dropdown_item_deactivate",c.$activeOption.attr("data-value"))),c.$activeOption=null,(e=t(e)).length&&(c.$activeOption=e.addClass("active"),c.isOpen&&c.trigger("dropdown_item_activate",c.$activeOption.attr("data-value")),!i&&I(i)||(o=c.$dropdown_content.height(),a=c.$activeOption.outerHeight(!0),i=c.$dropdown_content.scrollTop()||0,s=r=c.$activeOption.offset().top-c.$dropdown_content.offset().top+i,l=r-o+a,r+a>o+i?c.$dropdown_content.stop().animate({scrollTop:l},n?c.settings.scrollDuration:0):r<i&&c.$dropdown_content.stop().animate({scrollTop:s},n?c.settings.scrollDuration:0)))},selectAll:function(){var t=this;"single"!==t.settings.mode&&(t.$activeItems=Array.prototype.slice.apply(t.$control.children(":not(input)").addClass("active")),t.$activeItems.length&&(t.hideInput(),t.close()),t.focus())},hideInput:function(){var t=this;t.setTextboxValue(""),t.$control_input.css({opacity:0,position:"absolute",left:t.rtl?1e4:0}),t.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var t=this;return t.isDisabled?t:(t.ignoreFocus=!0,t.$control_input[0].focus(),window.setTimeout(function(){t.ignoreFocus=!1,t.onFocus()},0),t)},blur:function(t){return this.$control_input[0].blur(),this.onBlur(null,t),this},getScoreFunction:function(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())},getSearchOptions:function(){var t=this.settings,e=t.sortField;return"string"==typeof e&&(e=[{field:e}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting,filter:t.filter,respect_word_boundaries:t.respect_word_boundaries}},search:function(e){var i,n,o,a=this,r=a.settings,s=this.getSearchOptions();if(r.score&&"function"!=typeof(o=a.settings.score.apply(this,[e])))throw new Error('Selectize "score" setting must be a function that returns a function');if(e!==a.lastQuery?(r.normalize&&(e=e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")),a.lastQuery=e,n=a.sifter.search(e,t.extend(s,{score:o})),a.currentResults=n):n=t.extend(!0,{},a.currentResults),r.hideSelected)for(i=n.items.length-1;i>=0;i--)-1!==a.items.indexOf(N(n.items[i].id))&&n.items.splice(i,1);return n},refreshOptions:function(e){var n,o,a,r,s,l,c,u,d,p,h,f,m,g,v,_;void 0===e&&(e=!0);var b=this,y=b.$control_input.val().trim(),w=b.search(y),$=b.$dropdown_content,x=b.$activeOption&&N(b.$activeOption.attr("data-value"));for(r=w.items.length,"number"==typeof b.settings.maxOptions&&(r=Math.min(r,b.settings.maxOptions)),s={},l=[],n=0;n<r;n++)for(c=b.options[w.items[n].id],u=b.render("option",c),d=c[b.settings.optgroupField]||"",o=0,a=(p=Array.isArray(d)?d:[d])&&p.length;o<a;o++){var k;if(d=p[o],!b.optgroups.hasOwnProperty(d)&&"function"==typeof b.settings.optionGroupRegister)(k=b.settings.optionGroupRegister.apply(b,[d]))&&b.registerOptionGroup(k);b.optgroups.hasOwnProperty(d)||(d=""),s.hasOwnProperty(d)||(s[d]=document.createDocumentFragment(),l.push(d)),s[d].appendChild(u)}for(this.settings.lockOptgroupOrder&&l.sort(function(t,e){return(b.optgroups[t]&&b.optgroups[t].$order||0)-(b.optgroups[e]&&b.optgroups[e].$order||0)}),h=document.createDocumentFragment(),n=0,r=l.length;n<r;n++)d=l[n],b.optgroups.hasOwnProperty(d)&&s[d].childNodes.length?((f=document.createDocumentFragment()).appendChild(b.render("optgroup_header",b.optgroups[d])),f.appendChild(s[d]),h.appendChild(b.render("optgroup",t.extend({},b.optgroups[d],{html:V(f),dom:f})))):h.appendChild(s[d]);if($.html(h),b.settings.highlight&&($.removeHighlight(),w.query.length&&w.tokens.length))for(n=0,r=w.tokens.length;n<r;n++)i($,w.tokens[n].regex);if(!b.settings.hideSelected)for(b.$dropdown.find(".selected").removeClass("selected"),n=0,r=b.items.length;n<r;n++)b.getOption(b.items[n]).addClass("selected");"auto"!==b.settings.dropdownSize.sizeType&&b.isOpen&&b.setupDropdownHeight(),b.positionDropdown(),(m=b.canCreate(y))&&b.settings.showAddOptionOnCreate&&($.prepend(b.render("option_create",{input:y})),_=t($[0].childNodes[0])),b.hasOptions=w.items.length>0||m&&b.settings.showAddOptionOnCreate||b.settings.setFirstOptionActive,b.hasOptions?(w.items.length>0?(v=x&&b.getOption(x),""!==w.query&&b.settings.setFirstOptionActive?g=$.find("[data-selectable]:first"):""!==w.query&&v&&v.length?g=v:"single"===b.settings.mode&&b.items.length&&(g=b.getOption(b.items[0])),g&&g.length||(g=_&&!b.settings.addPrecedence?b.getAdjacentOption(_,1):$.find("[data-selectable]:first"))):g=_,b.setActiveOption(g),e&&!b.isOpen&&b.open()):(b.setActiveOption(null),e&&b.isOpen&&b.close())},addOption:function(t){var e,i,n,o=this;if(Array.isArray(t))for(e=0,i=t.length;e<i;e++)o.addOption(t[e]);else(n=o.registerOption(t))&&(o.userOptions[n]=!0,o.lastQuery=null,o.trigger("option_add",n,t))},registerOption:function(t){var e=N(t[this.settings.valueField]);return null!=e&&!this.options.hasOwnProperty(e)&&(t.$order=t.$order||++this.order,this.options[e]=t,e)},registerOptionGroup:function(t){var e=N(t[this.settings.optgroupValueField]);return!!e&&(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)},addOptionGroup:function(t,e){e[this.settings.optgroupValueField]=t,(t=this.registerOptionGroup(e))&&this.trigger("optgroup_add",t,e)},removeOptionGroup:function(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.renderCache={},this.trigger("optgroup_remove",t))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(e,i){var n,o,a,r,s,l,c,u=this;if(e=N(e),a=N(i[u.settings.valueField]),null!==e&&u.options.hasOwnProperty(e)){if("string"!=typeof a)throw new Error("Value must be set in option data");c=u.options[e].$order,a!==e&&(delete u.options[e],-1!==(r=u.items.indexOf(e))&&u.items.splice(r,1,a)),i.$order=i.$order||c,u.options[a]=i,s=u.renderCache.item,l=u.renderCache.option,s&&(delete s[e],delete s[a]),l&&(delete l[e],delete l[a]),-1!==u.items.indexOf(a)&&(n=u.getItem(e),o=t(u.render("item",i)),n.hasClass("active")&&o.addClass("active"),n.replaceWith(o)),u.lastQuery=null,u.isOpen&&u.refreshOptions(!1)}},removeOption:function(t,e){var i=this;t=N(t);var n=i.renderCache.item,o=i.renderCache.option;n&&delete n[t],o&&delete o[t],delete i.userOptions[t],delete i.options[t],i.lastQuery=null,i.trigger("option_remove",t),i.removeItem(t,e)},clearOptions:function(e){var i=this;i.loadedSearches={},i.userOptions={},i.renderCache={};var n=i.options;t.each(i.options,function(t){-1==i.items.indexOf(t)&&delete n[t]}),i.options=i.sifter.items=n,i.lastQuery=null,i.trigger("option_clear"),i.clear(e)},getOption:function(t){return this.getElementWithValue(t,this.$dropdown_content.find("[data-selectable]"))},getFirstOption:function(){var e=this.$dropdown.find("[data-selectable]");return e.length>0?e.eq(0):t()},getAdjacentOption:function(e,i){var n=this.$dropdown.find("[data-selectable]"),o=n.index(e)+i;return o>=0&&o<n.length?n.eq(o):t()},getElementWithValue:function(e,i){
if(null!=(e=N(e)))for(var n=0,o=i.length;n<o;n++)if(i[n].getAttribute("data-value")===e)return t(i[n]);return t()},getElementWithTextContent:function(e,i,n){if(null!=(e=N(e)))for(var o=0,a=n.length;o<a;o++){var r=n[o].textContent;if(1==i&&(r=null!==r?r.toLowerCase():null,e=e.toLowerCase()),r===e)return t(n[o])}return t()},getItem:function(t){return this.getElementWithValue(t,this.$control.children())},getFirstItemMatchedByTextContent:function(t,e){return e=null!==e&&!0===e,this.getElementWithTextContent(t,e,this.$dropdown_content.find("[data-selectable]"))},addItems:function(t,e){this.buffer=document.createDocumentFragment();for(var i=this.$control[0].childNodes,n=0;n<i.length;n++)this.buffer.appendChild(i[n]);for(var o=Array.isArray(t)?t:[t],a=(n=0,o.length);n<a;n++)this.isPending=n<a-1,this.addItem(o[n],e);var r=this.$control[0];r.insertBefore(this.buffer,r.firstChild),this.buffer=null},addItem:function(e,i){B(this,i?[]:["change"],function(){var n,o,a,r,s,l=this,c=l.settings.mode;e=N(e),-1===l.items.indexOf(e)?l.options.hasOwnProperty(e)&&("single"===c&&l.clear(i),"multi"===c&&l.isFull()||(n=t(l.render("item",l.options[e])),s=l.isFull(),l.items.splice(l.caretPos,0,e),l.insertAtCaret(n),(!l.isPending||!s&&l.isFull())&&l.refreshState(),l.isSetup&&(a=l.$dropdown_content.find("[data-selectable]"),l.isPending||(o=l.getOption(e),r=l.getAdjacentOption(o,1).attr("data-value"),l.refreshOptions(l.isFocused&&"single"!==c),r&&l.setActiveOption(l.getOption(r))),!a.length||l.isFull()?l.close():l.isPending||l.positionDropdown(),l.updatePlaceholder(),l.trigger("item_add",e,n),l.isPending||l.updateOriginalInput({silent:i})))):"single"===c&&l.close()})},removeItem:function(e,i){var n,o,a,r=this;n=e instanceof t?e:r.getItem(e),e=N(n.attr("data-value")),-1!==(o=r.items.indexOf(e))&&(r.trigger("item_before_remove",e,n),n.remove(),n.hasClass("active")&&(n.removeClass("active"),a=r.$activeItems.indexOf(n[0]),r.$activeItems.splice(a,1),n.removeClass("active")),r.items.splice(o,1),r.lastQuery=null,!r.settings.persist&&r.userOptions.hasOwnProperty(e)&&r.removeOption(e,i),o<r.caretPos&&r.setCaret(r.caretPos-1),r.refreshState(),r.updatePlaceholder(),r.updateOriginalInput({silent:i}),r.positionDropdown(),r.trigger("item_remove",e,n))},createItem:function(t,e){var i=this,n=i.caretPos;t=t||(i.$control_input.val()||"").trim();var o=arguments[arguments.length-1];if("function"!=typeof o&&(o=function(){}),"boolean"!=typeof e&&(e=!0),!i.canCreate(t))return o(),!1;i.lock();var a="function"==typeof i.settings.create?this.settings.create:function(t){var e={};e[i.settings.labelField]=t;var n=t;if(i.settings.formatValueToKey&&"function"==typeof i.settings.formatValueToKey&&(null==(n=i.settings.formatValueToKey.apply(this,[n]))||"object"==typeof n||"function"==typeof n))throw new Error('Selectize "formatValueToKey" setting must be a function that returns a value other than object or function.');return e[i.settings.valueField]=n,e},r=F(function(t){if(i.unlock(),!t||"object"!=typeof t)return o();var a=N(t[i.settings.valueField]);if("string"!=typeof a)return o();i.setTextboxValue(""),i.addOption(t),i.setCaret(n),i.addItem(a),i.refreshOptions(e&&"single"!==i.settings.mode),o(t)}),s=a.apply(this,[t,r]);return void 0!==s&&r(s),!0},refreshItems:function(t){this.lastQuery=null,this.isSetup&&this.addItem(this.items,t),this.refreshState(),this.updateOriginalInput({silent:t})},refreshState:function(){this.refreshValidityState(),this.refreshClasses()},refreshValidityState:function(){if(!this.isRequired)return!1;var t=!this.items.length;this.isInvalid=t,this.$control_input.prop("required",t),this.$input.prop("required",!t)},refreshClasses:function(){var e=this,i=e.isFull(),n=e.isLocked;e.$wrapper.toggleClass("rtl",e.rtl),e.$control.toggleClass("focus",e.isFocused).toggleClass("disabled",e.isDisabled).toggleClass("required",e.isRequired).toggleClass("invalid",e.isInvalid).toggleClass("locked",n).toggleClass("full",i).toggleClass("not-full",!i).toggleClass("input-active",e.isFocused&&!e.isInputHidden).toggleClass("dropdown-active",e.isOpen).toggleClass("has-options",!t.isEmptyObject(e.options)).toggleClass("has-items",e.items.length>0),e.$control_input.data("grow",!i&&!n)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(t){var e,i,n,o,a,r,s=this;t=t||{},s.tagType===E?(o=s.$input.find("option"),e=[],i=[],n=[],r=[],o.get().forEach(function(t){e.push(t.value)}),s.items.forEach(function(t){a=s.options[t][s.settings.labelField]||"",r.push(t),-1==e.indexOf(t)&&i.push('<option value="'+L(t)+'" selected="selected">'+L(a)+"</option>")}),n=e.filter(function(t){return r.indexOf(t)<0}).map(function(t){return'option[value="'+L(t)+'"]'}),e.length-n.length+i.length!==0||s.$input.attr("multiple")||i.push('<option value="" selected="selected"></option>'),s.$input.find(n.join(", ")).remove(),s.$input.append(i.join(""))):(s.$input.val(s.getValue()),s.$input.attr("value",s.$input.val())),s.isSetup&&(t.silent||s.trigger("change",s.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var t=this.$control_input;this.items.length?t.removeAttr("placeholder"):t.attr("placeholder",this.settings.placeholder),t.triggerHandler("update",{force:!0})}},open:function(){var t=this;t.isLocked||t.isOpen||"multi"===t.settings.mode&&t.isFull()||(t.focus(),t.isOpen=!0,t.refreshState(),t.$dropdown.css({visibility:"hidden",display:"block"}),t.setupDropdownHeight(),t.$dropdown.css({visibility:"visible"}),t.trigger("dropdown_open",t.$dropdown))},close:function(){var t=this,e=t.isOpen;"single"===t.settings.mode&&t.items.length&&(t.hideInput(),t.isBlurring&&t.$control_input[0].blur()),t.isOpen=!1,t.$dropdown.hide(),t.setActiveOption(null),t.refreshState(),e&&t.trigger("dropdown_close",t.$dropdown)},positionDropdown:function(){var t=this.$control,e="body"===this.settings.dropdownParent?t.offset():t.position();e.top+=t.outerHeight(!0);var i=t[0].getBoundingClientRect().width;this.settings.minWidth&&this.settings.minWidth>i&&(i=this.settings.minWidth),this.$dropdown.css({width:i,top:e.top,left:e.left})},setupDropdownHeight:function(){if("object"==typeof this.settings.dropdownSize&&"auto"!==this.settings.dropdownSize.sizeType){var e=this.settings.dropdownSize.sizeValue;if("numberItems"===this.settings.dropdownSize.sizeType){for(var i=this.$dropdown_content.find("*").not(".optgroup, .highlight").not(this.settings.ignoreOnDropwdownHeight),n=0,o=0,a=0,r=0,s=0;s<e;s++){var l=t(i[s]);if(0===l.length)break;if(n+=l.outerHeight(!0),void 0===l.data("selectable")){if(l.hasClass("optgroup-header")){var c=window.getComputedStyle(l.parent()[0],":before");c&&(o=c.marginTop?Number(c.marginTop.replace(/\W*(\w)\w*/g,"$1")):0,a=c.marginBottom?Number(c.marginBottom.replace(/\W*(\w)\w*/g,"$1")):0,r=c.borderTopWidth?Number(c.borderTopWidth.replace(/\W*(\w)\w*/g,"$1")):0)}e++}}e=n+(this.$dropdown_content.css("padding-top")?Number(this.$dropdown_content.css("padding-top").replace(/\W*(\w)\w*/g,"$1")):0)+(this.$dropdown_content.css("padding-bottom")?Number(this.$dropdown_content.css("padding-bottom").replace(/\W*(\w)\w*/g,"$1")):0)+o+a+r+"px"}else if("fixedHeight"!==this.settings.dropdownSize.sizeType)return void console.warn('Selectize.js - Value of "sizeType" must be "fixedHeight" or "numberItems');this.$dropdown_content.css({height:e,maxHeight:"none"})}},clear:function(t){var e=this;e.items.length&&(e.$control.children(":not(input)").remove(),e.items=[],e.lastQuery=null,e.setCaret(0),e.setActiveItem(null),e.updatePlaceholder(),e.updateOriginalInput({silent:t}),e.refreshState(),e.showInput(),e.trigger("clear"))},insertAtCaret:function(t){var e=Math.min(this.caretPos,this.items.length),i=t[0],n=this.buffer||this.$control[0];0===e?n.insertBefore(i,n.firstChild):n.insertBefore(i,n.childNodes[e]),this.setCaret(e+1)},deleteSelection:function(e){var i,n,o,a,r,s,l,c,u,d=this;if(o=e&&e.keyCode===k?-1:1,a=z(d.$control_input[0]),d.$activeOption&&!d.settings.hideSelected&&(l="string"==typeof d.settings.deselectBehavior&&"top"===d.settings.deselectBehavior?d.getFirstOption().attr("data-value"):d.getAdjacentOption(d.$activeOption,-1).attr("data-value")),r=[],d.$activeItems.length){for(u=d.$control.children(".active:"+(o>0?"last":"first")),s=d.$control.children(":not(input)").index(u),o>0&&s++,i=0,n=d.$activeItems.length;i<n;i++)r.push(t(d.$activeItems[i]).attr("data-value"));e&&(e.preventDefault(),e.stopPropagation())}else(d.isFocused||"single"===d.settings.mode)&&d.items.length&&(o<0&&0===a.start&&0===a.length?r.push(d.items[d.caretPos-1]):o>0&&a.start===d.$control_input.val().length&&r.push(d.items[d.caretPos]));if(!r.length||"function"==typeof d.settings.onDelete&&!1===d.settings.onDelete.apply(d,[r]))return!1;for(void 0!==s&&d.setCaret(s);r.length;)d.removeItem(r.pop());return d.showInput(),d.positionDropdown(),d.refreshOptions(!0),l&&(c=d.getOption(l)).length&&d.setActiveOption(c),!0},advanceSelection:function(t,e){var i,n,o,a,r,s=this;0!==t&&(s.rtl&&(t*=-1),i=t>0?"last":"first",n=z(s.$control_input[0]),s.isFocused&&!s.isInputHidden?(a=s.$control_input.val().length,(t<0?0===n.start&&0===n.length:n.start===a)&&!a&&s.advanceCaret(t,e)):(r=s.$control.children(".active:"+i)).length&&(o=s.$control.children(":not(input)").index(r),s.setActiveItem(null),s.setCaret(t>0?o+1:o)))},advanceCaret:function(t,e){var i,n,o=this;0!==t&&(i=t>0?"next":"prev",o.isShiftDown?(n=o.$control_input[i]()).length&&(o.hideInput(),o.setActiveItem(n),e&&e.preventDefault()):o.setCaret(o.caretPos+t))},setCaret:function(e){var i,n,o,a,r=this;if(e="single"===r.settings.mode?r.items.length:Math.max(0,Math.min(r.items.length,e)),!r.isPending)for(i=0,n=(o=r.$control.children(":not(input)")).length;i<n;i++)a=t(o[i]).detach(),i<e?r.$control_input.before(a):r.$control.append(a);r.caretPos=e},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var t=this;t.$input.prop("disabled",!0),t.$control_input.prop("disabled",!0).prop("tabindex",-1),t.isDisabled=!0,t.lock()},enable:function(){var t=this;t.$input.prop("disabled",!1),t.$control_input.prop("disabled",!1).prop("tabindex",t.tabIndex),t.isDisabled=!1,t.unlock()},destroy:function(){var e=this,i=e.eventNS,n=e.revertSettings;e.trigger("destroy"),e.off(),e.$wrapper.remove(),e.$dropdown.remove(),e.$input.html("").append(n.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:n.tabindex}).show(),e.$control_input.removeData("grow"),e.$input.removeData("selectize"),0==--G.count&&G.$testInput&&(G.$testInput.remove(),G.$testInput=undefined),t(window).off(i),t(document).off(i),t(document.body).off(i),delete e.$input[0].selectize},render:function(e,i){var n,o,a="",r=!1,s=this;return"option"!==e&&"item"!==e||(r=!!(n=N(i[s.settings.valueField]))),r&&(I(s.renderCache[e])||(s.renderCache[e]={}),s.renderCache[e].hasOwnProperty(n))?s.renderCache[e][n]:(a=t(s.settings.render[e].apply(this,[i,L])),"option"===e||"option_create"===e?i[s.settings.disabledField]||a.attr("data-selectable",""):"optgroup"===e&&(o=i[s.settings.optgroupValueField]||"",a.attr("data-group",o),i[s.settings.disabledField]&&a.attr("data-disabled","")),"option"!==e&&"item"!==e||a.attr("data-value",n||""),r&&(s.renderCache[e][n]=a[0]),a[0])},clearCache:function(t){var e=this;void 0===t?e.renderCache={}:delete e.renderCache[t]},canCreate:function(t){var e=this;if(!e.settings.create)return!1;var i=e.settings.createFilter;return t.length&&("function"!=typeof i||i.apply(e,[t]))&&("string"!=typeof i||new RegExp(i).test(t))&&(!(i instanceof RegExp)||i.test(t))}}),G.count=0,G.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,showAddOptionOnCreate:!0,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!0,preload:!1,allowEmptyOption:!1,showEmptyOptionInDropdown:!1,emptyOptionLabel:"--",setFirstOptionActive:!1,closeAfterSelect:!1,closeDropdownThreshold:250,scrollDuration:60,deselectBehavior:"previous",loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",respect_word_boundaries:!1,normalize:!0,mode:null,wrapperClass:"",inputClass:"",dropdownClass:"",dropdownContentClass:"",dropdownParent:null,copyClassesToDropdown:!0,dropdownSize:{sizeType:"auto",sizeValue:"auto"},ignoreOnDropwdownHeight:"img, i",search:!0,render:{}},t.fn.selectize=function(e){var i=t.fn.selectize.defaults,n=t.extend({},i,e),o=n.dataAttr,a=n.labelField,r=n.valueField,s=n.disabledField,l=n.optgroupField,c=n.optgroupLabelField,u=n.optgroupValueField,d=function(t,e){var i,s,l,c,u=t.attr(o);if(u)for(e.options=JSON.parse(u),i=0,s=e.options.length;i<s;i++)e.items.push(e.options[i][r]);else{var d=(t.val()||"").trim();if(!n.allowEmptyOption&&!d.length)return;for(i=0,s=(l=d.split(n.delimiter)).length;i<s;i++)(c={})[a]=l[i],c[r]=l[i],e.options.push(c);e.items=l}},p=function(e,i){var d,p,h,f,m=i.options,g={},v=function(t){var e=o&&t.attr(o),i=t.data(),n={};return"string"==typeof e&&e.length&&(U(e)?Object.assign(n,JSON.parse(e)):n[e]=e),Object.assign(n,i),n||null},_=function(e,o){e=t(e);var c=N(e.val());if(c||n.allowEmptyOption)if(g.hasOwnProperty(c)){if(o){var u=g[c][l];u?Array.isArray(u)?u.push(o):g[c][l]=[u,o]:g[c][l]=o}}else{var d=v(e)||{};d[a]=d[a]||e.text(),d[r]=d[r]||c,d[s]=d[s]||e.prop("disabled"),d[l]=d[l]||o,d.styles=e.attr("style")||"",d.classes=e.attr("class")||"",g[c]=d,m.push(d),e.is(":selected")&&i.items.push(c)}},b=function(e){var n,o,a,r,l;for((a=(e=t(e)).attr("label"))&&((r=v(e)||{})[c]=a,r[u]=a,r[s]=e.prop("disabled"),i.optgroups.push(r)),n=0,o=(l=t("option",e)).length;n<o;n++)_(l[n],a)};for(i.maxItems=e.attr("multiple")?null:1,d=0,p=(f=e.children()).length;d<p;d++)"optgroup"===(h=f[d].tagName.toLowerCase())?b(f[d]):"option"===h&&_(f[d])};return this.each(function(){if(!this.selectize){var o=t(this),a=this.tagName.toLowerCase(),r=o.attr("placeholder")||o.attr("data-placeholder");if(r||n.allowEmptyOption||(r=o.children('option[value=""]').text()),n.allowEmptyOption&&n.showEmptyOptionInDropdown&&!o.children('option[value=""]').length){var s=o.html(),l=L(n.emptyOptionLabel||"--");o.html('<option value="">'+l+"</option>"+s)}var c={placeholder:r,options:[],optgroups:[],items:[]};"select"===a?p(o,c):d(o,c),new G(o,t.extend(!0,{},i,c,e)).settings_user=e}})},t.fn.selectize.defaults=G.defaults,t.fn.selectize.support={validity:O},G.define("auto_position",function(){var t=this;const e={top:"top",bottom:"bottom"};t.positionDropdown=function(){const i=this.$control,n="body"===this.settings.dropdownParent?i.offset():i.position();n.top+=i.outerHeight(!0);const o=this.$dropdown.prop("scrollHeight")+5,a=this.$control.get(0).getBoundingClientRect().top,r=this.$wrapper.height(),s=t.$control.get(0).getBoundingClientRect().bottom,l=a+o+r>window.innerHeight&&s-o-r>=0?e.top:e.bottom,c={width:i.outerWidth(),left:n.left};if(l===e.top){const t={bottom:n.top,top:"unset"};"body"===this.settings.dropdownParent&&(t.top=n.top-this.$dropdown.outerHeight(!0)-i.outerHeight(!0),t.bottom="unset"),Object.assign(c,t),this.$dropdown.addClass("selectize-position-top"),this.$control.addClass("selectize-position-top")}else Object.assign(c,{top:n.top,bottom:"unset"}),this.$dropdown.removeClass("selectize-position-top"),this.$control.removeClass("selectize-position-top");this.$dropdown.css(c)}}),G.define("auto_select_on_type",function(){var t,e=this;e.onBlur=(t=e.onBlur,function(){var i=e.getFirstItemMatchedByTextContent(e.lastValue,!0);return void 0!==i.attr("data-value")&&e.getValue()!==i.attr("data-value")&&e.setValue(i.attr("data-value")),t.apply(this,arguments)})}),G.define("autofill_disable",function(){var t,e=this;e.setup=(t=e.setup,function(){t.apply(e,arguments),e.$control_input.attr({autocomplete:"new-password",autofill:"no"})})}),G.define("clear_button",function(e){var i,n=this;e=t.extend({title:"Clear",className:"clear",label:"\xd7",html:function(t){return'<a class="'+t.className+'" title="'+t.title+'"> '+t.label+"</a>"}},e),n.setup=(i=n.setup,function(){i.apply(n,arguments),n.$button_clear=t(e.html(e)),"single"===n.settings.mode&&n.$wrapper.addClass("single"),n.$wrapper.append(n.$button_clear),""!==n.getValue()&&0!==n.getValue().length||n.$wrapper.find("."+e.className).css("display","none"),n.on("change",function(){""===n.getValue()||0===n.getValue().length?n.$wrapper.find("."+e.className).css("display","none"):n.$wrapper.find("."+e.className).css("display","")}),n.$wrapper.on("click","."+e.className,function(t){t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),n.isLocked||(n.clear(),n.$wrapper.find("."+e.className).css("display","none"))})})}),G.define("drag_drop",function(){if(!t.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var e,i=this;i.lock=(e=i.lock,function(){var t=i.$control.data("sortable");return t&&t.disable(),e.apply(i,arguments)}),i.unlock=function(){var t=i.unlock;return function(){var e=i.$control.data("sortable");return e&&e.enable(),t.apply(i,arguments)}}(),i.setup=function(){var e=i.setup;return function(){e.apply(this,arguments);var n=i.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:i.isLocked,start:function(t,e){e.placeholder.css("width",e.helper.css("width")),n.addClass("dragging")},stop:function(){n.removeClass("dragging");var e=i.$activeItems?i.$activeItems.slice():null,o=[];n.children("[data-value]").each(function(){o.push(t(this).attr("data-value"))}),i.isFocused=!1,i.setValue(o),i.isFocused=!0,i.setActiveItem(e),i.positionDropdown()}})}}()}}),G.define("dropdown_header",function(e){var i,n=this;e=t.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(t){return'<div class="'+t.headerClass+'"><div class="'+t.titleRowClass+'"><span class="'+t.labelClass+'">'+t.title+'</span><a href="javascript:void(0)" class="'+t.closeClass+'">&#xd7;</a></div></div>'}},e),n.setup=(i=n.setup,function(){i.apply(n,arguments),n.$dropdown_header=t(e.html(e)),n.$dropdown.prepend(n.$dropdown_header),n.$dropdown_header.find("."+e.closeClass).on("click",function(){n.close()})})}),G.define("optgroup_columns",function(e){var i,n=this;e=t.extend({equalizeWidth:!0,equalizeHeight:!0},e),this.getAdjacentOption=function(e,i){var n=e.closest("[data-group]").find("[data-selectable]"),o=n.index(e)+i;return o>=0&&o<n.length?n.eq(o):t()},this.onKeyDown=(i=n.onKeyDown,function(t){var e,o,a,r;return!this.isOpen||t.keyCode!==_&&t.keyCode!==w?i.apply(this,arguments):(n.ignoreHover=!0,e=(r=this.$activeOption.closest("[data-group]")).find("[data-selectable]").index(this.$activeOption),void((o=(a=(r=t.keyCode===_?r.prev("[data-group]"):r.next("[data-group]")).find("[data-selectable]")).eq(Math.min(a.length-1,e))).length&&this.setActiveOption(o)))});var o=function(){var t,e=o.width,i=document;return void 0===e&&((t=i.createElement("div")).innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',t=t.firstChild,i.body.appendChild(t),e=o.width=t.offsetWidth-t.clientWidth,i.body.removeChild(t)),e},a=function(){var i,a,r,s,l,c,u;if((a=(u=t("[data-group]",n.$dropdown_content)).length)&&n.$dropdown_content.width()){if(e.equalizeHeight){for(r=0,i=0;i<a;i++)r=Math.max(r,u.eq(i).height());u.css({height:r})}e.equalizeWidth&&(c=n.$dropdown_content.innerWidth()-o(),s=Math.round(c/a),u.css({width:s}),a>1&&(l=c-s*(a-1),u.eq(a-1).css({width:l})))}};(e.equalizeHeight||e.equalizeWidth)&&(R.after(this,"positionDropdown",a),R.after(this,"refreshOptions",a))}),G.define("read-only",function(){var t,e=this;this.setup=(t=e.setup,function(){t.apply(this,arguments),this.$dropdown.hasClass("read-only")&&this.$control_input.attr("readonly","readonly")}),this.readonly=function(t){t?(this.$control_input.attr("readonly","readonly"),this.$dropdown.addClass("read-only")):(this.$control_input.removeAttr("readonly"),this.$dropdown.removeClass("read-only"))}}),G.define("remove_button",function(e){"single"!==this.settings.mode&&function(e,i){var n,o=e,a='<a href="javascript:void(0)" class="'+i.className+'" tabindex="-1" title="'+L(i.title)+'">'+i.label+"</a>",r=function(t,e){var i=t.search(/(<\/[^>]+>\s*)$/);return t.substring(0,i)+e+t.substring(i)};e.setup=(n=o.setup,function(){if(i.append){var s=o.settings.render.item;o.settings.render.item=function(){return r(s.apply(e,arguments),a)}}n.apply(e,arguments),e.$control.on("click","."+i.className,function(e){if(e.preventDefault(),!o.isLocked){var i=t(e.currentTarget).parent();return o.setActiveItem(i),o.deleteSelection()&&o.setCaret(o.items.length),!1}})})}(this,e=t.extend({label:"&#xd7;",title:"Remove",className:"remove",append:!0},e))}),G.define("restore_on_backspace",function(t){var e,i=this;t.text=t.text||function(t){return t[this.settings.labelField]},this.onKeyDown=(e=i.onKeyDown,function(i){var n,o;return i.keyCode===k&&""===this.$control_input.val()&&!this.$activeItems.length&&(n=this.caretPos-1)>=0&&n<this.items.length?(o=this.options[this.items[n]],this.deleteSelection(i)&&(this.setTextboxValue(t.text.apply(this,[o])),this.refreshOptions(!0)),void i.preventDefault()):e.apply(this,arguments)})}),G.define("select_on_focus",function(){var t,e,i=this;i.on("focus",(t=i.onFocus,function(){var e=i.getItem(i.getValue()).text();return i.clear(),i.setTextboxValue(e),i.$control_input.select(),setTimeout(function(){i.settings.selectOnTab&&i.setActiveOption(i.getFirstItemMatchedByTextContent(e)),i.settings.score=null},0),t.apply(this,arguments)})),i.onBlur=(e=i.onBlur,function(){return""===i.getValue()&&i.lastValidValue!==i.getValue()&&i.setValue(i.lastValidValue),setTimeout(function(){i.settings.score=function(){return function(){return 1}}},0),e.apply(this,arguments)}),i.settings.score=function(){return function(){return 1}}}),G.define("tag_limit",function(e){const i=this;e.tagLimit=e.tagLimit,this.onBlur=function(){const n=i.onBlur;return function(i){if(n.apply(this,i),!i)return;const o=this.$control,a=o.find(".item"),r=e.tagLimit;r===undefined||a.length<=r||(a.toArray().forEach(function(e,i){i<r||t(e).hide()}),o.append("<span><b>"+(a.length-r)+"</b></span>"))}}(),this.onFocus=function(){const t=i.onFocus;return function(e){if(t.apply(this,e),!e)return;const i=this.$control;i.find(".item").show(),i.find("span").remove()}}()}),G}),$("#mov_estoque_nota_fiscal_valor_total").on("change blur",function(){return calcula_valor_unitario_comercial()}),$("#mov_estoque_nota_fiscal_valor_unitario_comercial").on("change blur",function(){calcula_valor_total(),calcula_valor_unitario_tributado()}),$("#mov_estoque_nota_fiscal_quantidade_tributada").on("change blur",function(){return calcula_valor_unitario_tributado()});var quantidade_comercial=$("#quantidade_produtos").data("quantidade"),quantidade_tributada=function(){return stringToFloat($("#mov_estoque_nota_fiscal_quantidade_tributada").val())},valor_unitario_comercial_digitado=function(){return stringToFloat($("#mov_estoque_nota_fiscal_valor_unitario_comercial").val())},valor_total_digitado=function(){return stringToFloat($("#mov_estoque_nota_fiscal_valor_total").val())},valor_unitario_comercial_calculado=function(){if(quantidade_comercial>0)return valor_total_digitado()/quantidade_comercial},valor_unitario_tributado_calculado=function(){if(quantidade_tributada()>0)return valor_total_digitado()/quantidade_tributada()},valor_total_calculado=function(){if(quantidade_comercial>0)return valor_unitario_comercial_digitado()*quantidade_comercial},calcula_valor_unitario_comercial=function(){$("#mov_estoque_nota_fiscal_valor_unitario_comercial").val(floatToString(valor_unitario_comercial_calculado()))},calcula_valor_unitario_tributado=function(){$("#mov_estoque_nota_fiscal_valor_unitario_tributado").val(floatToString(valor_unitario_tributado_calculado()))},calcula_valor_total=function(){$("#mov_estoque_nota_fiscal_valor_total").val(floatToString(valor_total_calculado()))},stringToFloat=function(t){if(""!=t&&!isNaN(t)&&null!=t)return parseFloat(t.replace(",","."))||0},floatToString=function(t){if(""!=t&&!isNaN(t)&&null!=t)return t.toString().replace(".",",")};$(".select-all").on("click",function(){$(this).closest("table").find("tbody input[type=checkbox].mass-selectable:enabled").prop("checked",$(this).is(":checked"))}),$(function(){$(".det-export-check").click(function(){$(this).is(":checked")?($(".det-export").attr("disabled",!1),$(".div_busca_movimentacao_entrada").show()):($(".det-export").attr("disabled",!0),$(".div_busca_movimentacao_entrada").hide())})}),function(t,e){"use strict";if("function"==typeof define&&define.amd)define([],e);else if("object"==typeof exports)module.exports=e();else{var i="hopscotch";if(t[i])return;t[i]=e()}}(this,function(){var Hopscotch,HopscotchBubble,HopscotchCalloutManager,HopscotchI18N,customI18N,customRenderer,customEscape,utils,callbacks,helpers,winLoadHandler,defaultOpts,winHopscotch,templateToUse="bubble_default",Sizzle=window.Sizzle||null,undefinedStr="undefined",waitingToStart=!1,hasJquery=typeof jQuery!==undefinedStr,hasSessionStorage=!1,isStorageWritable=!1,document=window.document,validIdRegEx=/^[a-zA-Z]+[a-zA-Z0-9_-]*$/,rtlMatches={left:"right",right:"left"};try{typeof window.sessionStorage!==undefinedStr&&(hasSessionStorage=!0,sessionStorage.setItem("hopscotch.test.storage","ok"),sessionStorage.removeItem("hopscotch.test.storage"),isStorageWritable=!0)}catch(err){}return defaultOpts={smoothScroll:!0,scrollDuration:1e3,scrollTopMargin:200,showCloseButton:!0,showPrevButton:!1,showNextButton:!0,bubbleWidth:280,bubblePadding:15,arrowWidth:20,skipIfNoElement:!0,isRtl:!1,cookieName:"hopscotch.tour.state"},Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),winLoadHandler=function(){waitingToStart&&winHopscotch.startTour()},utils={addClass:function(t,e){var i,n,o,a;if(t.className){for(n=e.split(/\s+/),i=" "+t.className+" ",o=0,a=n.length;a>o;++o)i.indexOf(" "+n[o]+" ")<0&&(i+=n[o]+" ");t.className=i.replace(/^\s+|\s+$/g,"")}else t.className=e},removeClass:function(t,e){var i,n,o,a;for(n=e.split(/\s+/),i=" "+t.className+" ",o=0,a=n.length;a>o;++o)i=i.replace(" "+n[o]+" "," ");t.className=i.replace(/^\s+|\s+$/g,"")},hasClass:function(t,e){return!!t.className&&-1!==(" "+t.className+" ").indexOf(" "+e+" ")},getPixelValue:function(t){var e=typeof t;return"number"===e?t:"string"===e?parseInt(t,10):0},valOrDefault:function(t,e){return typeof t!==undefinedStr?t:e},invokeCallbackArrayHelper:function(t){var e;return Array.isArray(t)&&"function"==typeof(e=helpers[t[0]])?e.apply(this,t.slice(1)):void 0},invokeCallbackArray:function(t){var e,i;if(Array.isArray(t)){if("string"==typeof t[0])return utils.invokeCallbackArrayHelper(t);for(e=0,i=t.length;i>e;++e)utils.invokeCallback(t[e])}},invokeCallback:function(t){return"function"==typeof t?t():"string"==typeof t&&helpers[t]?helpers[t]():utils.invokeCallbackArray(t)},invokeEventCallbacks:function(t,e){var i,n,o=callbacks[t];if(e)return this.invokeCallback(e);for(i=0,n=o.length;n>i;++i)this.invokeCallback(o[i].cb)},getScrollTop:function(){return typeof window.pageYOffset!==undefinedStr?window.pageYOffset:document.documentElement.scrollTop},getScrollLeft:function(){return typeof window.pageXOffset!==undefinedStr?window.pageXOffset:document.documentElement.scrollLeft},getWindowHeight:function(){return window.innerHeight||document.documentElement.clientHeight},addEvtListener:function(t,e,i){return t?t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i):void 0},removeEvtListener:function(t,e,i){return t?t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent("on"+e,i):void 0},documentIsReady:function(){return"complete"===document.readyState},evtPreventDefault:function(t){t.preventDefault?t.preventDefault():event&&(event.returnValue=!1)},extend:function(t,e){var i;for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},getStepTargetHelper:function(t){var e=document.getElementById(t);if(e)return e;if(hasJquery)return(e=jQuery(t)).length?e[0]:null;if(Sizzle)return(e=new Sizzle(t)).length?e[0]:null;if(document.querySelector)try{return document.querySelector(t)}catch(c){}return/^#[a-zA-Z][\w-_:.]*$/.test(t)?document.getElementById(t.substring(1)):null},getStepTarget:function(t){var e;if(!t||!t.target)return null;if("string"==typeof t.target)return utils.getStepTargetHelper(t.target);if(Array.isArray(t.target)){var i,n;for(i=0,n=t.target.length;n>i;i++)if("string"==typeof t.target[i]&&(e=utils.getStepTargetHelper(t.target[i])))return e;return null}return t.target},getI18NString:function(t){return customI18N[t]||HopscotchI18N[t]},setState:function(t,e,i){var n,o="";if(hasSessionStorage&&isStorageWritable)try{sessionStorage.setItem(t,e)}catch(a){isStorageWritable=!1,this.setState(t,e,i)}else hasSessionStorage&&sessionStorage.removeItem(t),i&&((n=new Date).setTime(n.getTime()+24*i*60*60*1e3),o="; expires="+n.toGMTString()),document.cookie=t+"="+e+o+"; path=/"},getState:function(t){var e,i,n,o=t+"=",a=document.cookie.split(";");if(hasSessionStorage&&(n=sessionStorage.getItem(t)))return n;for(e=0;e<a.length;e++){for(i=a[e];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(o)){n=i.substring(o.length,i.length);break}}return n},clearState:function(t){hasSessionStorage?sessionStorage.removeItem(t):this.setState(t,"",-1)},normalizePlacement:function(t){!t.placement&&t.orientation&&(t.placement=t.orientation)},flipPlacement:function(t){if(t.isRtl&&!t._isFlipped){var e,i,n=["orientation","placement"];for(i in t.xOffset&&(t.xOffset=-1*this.getPixelValue(t.xOffset)),n)e=n[i],t.hasOwnProperty(e)&&rtlMatches.hasOwnProperty(t[e])&&(t[e]=rtlMatches[t[e]]);t._isFlipped=!0}}},utils.addEvtListener(window,"load",winLoadHandler),callbacks={next:[],prev:[],start:[],end:[],show:[],error:[],close:[]},helpers={},HopscotchI18N={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"},customI18N={},HopscotchBubble=function(t){this.init(t)},HopscotchBubble.prototype={isShowing:!1,currStep:void 0,setPosition:function(t){var e,i,n,o,a,r,s,l=utils.getStepTarget(t),c=this.element,u=this.arrowEl,d=t.isRtl?"right":"left";if(utils.flipPlacement(t),utils.normalizePlacement(t),i=c.offsetWidth,e=c.offsetHeight,utils.removeClass(c,"fade-in-down fade-in-up fade-in-left fade-in-right"),n=l.getBoundingClientRect(),s=t.isRtl?n.right-i:n.left,"top"===t.placement)o=n.top-e-this.opt.arrowWidth,a=s;else if("bottom"===t.placement)o=n.bottom+this.opt.arrowWidth,a=s;else if("left"===t.placement)o=n.top,a=n.left-i-this.opt.arrowWidth;else{if("right"!==t.placement)throw new Error("Bubble placement failed because step.placement is invalid or undefined!");o=n.top,a=n.right+this.opt.arrowWidth}(r="center"!==t.arrowOffset?utils.getPixelValue(t.arrowOffset):t.arrowOffset)?"top"===t.placement||"bottom"===t.placement?(u.style.top="",u.style[d]="center"===r?Math.floor(i/2-u.offsetWidth/2)+"px":r+"px"):("left"===t.placement||"right"===t.placement)&&(u.style[d]="",u.style.top="center"===r?Math.floor(e/2-u.offsetHeight/2)+"px":r+"px"):(u.style.top="",u.style[d]=""),"center"===t.xOffset?a=n.left+l.offsetWidth/2-i/2:a+=utils.getPixelValue(t.xOffset),"center"===t.yOffset?o=n.top+l.offsetHeight/2-e/2:o+=utils.getPixelValue(t.yOffset),t.fixedElement||(o+=utils.getScrollTop(),a+=utils.getScrollLeft()),c.style.position=t.fixedElement?"fixed":"absolute",c.style.top=o+"px",c.style.left=a+"px"},render:function(t,e,n){var o,a,r,s,l,c,u,d,p,h=this.element;if(t?this.currStep=t:this.currStep&&(t=this.currStep),this.opt.isTourBubble?(s=winHopscotch.getCurrTour())&&(a=s.customData,o=s.customRenderer,t.isRtl=t.hasOwnProperty("isRtl")?t.isRtl:s.hasOwnProperty("isRtl")?s.isRtl:this.opt.isRtl,r=s.unsafe,Array.isArray(s.steps)&&(l=s.steps.length,c=this._getStepI18nNum(this._getStepNum(l-1)),d=this._getStepNum(e)===this._getStepNum(l-1))):(a=t.customData,o=t.customRenderer,r=t.unsafe,t.isRtl=t.hasOwnProperty("isRtl")?t.isRtl:this.opt.isRtl),u=utils.getI18NString(d?"doneBtn":t.showSkip?"skipBtn":"nextBtn"),utils.flipPlacement(t),utils.normalizePlacement(t),this.placement=t.placement,p={i18n:{prevBtn:utils.getI18NString("prevBtn"),nextBtn:u,closeTooltip:utils.getI18NString("closeTooltip"),stepNum:this._getStepI18nNum(this._getStepNum(e)),numSteps:c},buttons:{
showPrev:utils.valOrDefault(t.showPrevButton,this.opt.showPrevButton)&&this._getStepNum(e)>0,showNext:utils.valOrDefault(t.showNextButton,this.opt.showNextButton),showCTA:utils.valOrDefault(t.showCTAButton&&t.ctaLabel,!1),ctaLabel:t.ctaLabel,showClose:utils.valOrDefault(this.opt.showCloseButton,!0)},step:{num:e,isLast:utils.valOrDefault(d,!1),title:t.title||"",content:t.content||"",isRtl:t.isRtl,placement:t.placement,padding:utils.valOrDefault(t.padding,this.opt.bubblePadding),width:utils.getPixelValue(t.width)||this.opt.bubbleWidth,customData:t.customData||{}},tour:{isTour:this.opt.isTourBubble,numSteps:l,unsafe:utils.valOrDefault(r,!1),customData:a||{}}},"function"==typeof o)h.innerHTML=o(p);else if("string"==typeof o){if(!winHopscotch.templates||"function"!=typeof winHopscotch.templates[o])throw new Error('Bubble rendering failed - template "'+o+'" is not a function.');h.innerHTML=winHopscotch.templates[o](p)}else if(customRenderer)h.innerHTML=customRenderer(p);else{if(!winHopscotch.templates||"function"!=typeof winHopscotch.templates[templateToUse])throw new Error('Bubble rendering failed - template "'+templateToUse+'" is not a function.');h.innerHTML=winHopscotch.templates[templateToUse](p)}for(children=h.children,numChildren=children.length,i=0;i<numChildren;i++)node=children[i],utils.hasClass(node,"hopscotch-arrow")&&(this.arrowEl=node);return h.style.zIndex="number"==typeof t.zindex?t.zindex:"",this._setArrow(t.placement),this.hide(!1),this.setPosition(t),n&&n(!t.fixedElement),this},_getStepNum:function(t){var e,i=0,n=winHopscotch.getSkippedStepsIndexes(),o=n.length;for(e=0;o>e;e++)t>n[e]&&i++;return t-i},_getStepI18nNum:function(t){var e=utils.getI18NString("stepNums");return e&&t<e.length?t=e[t]:t+=1,t},_setArrow:function(t){utils.removeClass(this.arrowEl,"down up right left"),"top"===t?utils.addClass(this.arrowEl,"down"):"bottom"===t?utils.addClass(this.arrowEl,"up"):"left"===t?utils.addClass(this.arrowEl,"right"):"right"===t&&utils.addClass(this.arrowEl,"left")},_getArrowDirection:function(){return"top"===this.placement?"down":"bottom"===this.placement?"up":"left"===this.placement?"right":"right"===this.placement?"left":void 0},show:function(){var t=this,e="fade-in-"+this._getArrowDirection(),i=1e3;return utils.removeClass(this.element,"hide"),utils.addClass(this.element,e),setTimeout(function(){utils.removeClass(t.element,"invisible")},50),setTimeout(function(){utils.removeClass(t.element,e)},i),this.isShowing=!0,this},hide:function(t){var e=this.element;return t=utils.valOrDefault(t,!0),e.style.top="",e.style.left="",t?(utils.addClass(e,"hide"),utils.removeClass(e,"invisible")):(utils.removeClass(e,"hide"),utils.addClass(e,"invisible")),utils.removeClass(e,"animate fade-in-up fade-in-down fade-in-right fade-in-left"),this.isShowing=!1,this},destroy:function(){var t=this.element;t&&t.parentNode.removeChild(t),utils.removeEvtListener(t,"click",this.clickCb)},_handleBubbleClick:function(t){function e(i){return i===t.currentTarget?null:utils.hasClass(i,"hopscotch-cta")?"cta":utils.hasClass(i,"hopscotch-next")?"next":utils.hasClass(i,"hopscotch-prev")?"prev":utils.hasClass(i,"hopscotch-close")?"close":e(i.parentElement)}var i;if("cta"===(i=e((t=t||window.event).target||t.srcElement)))this.opt.isTourBubble||winHopscotch.getCalloutManager().removeCallout(this.currStep.id),this.currStep.onCTA&&utils.invokeCallback(this.currStep.onCTA);else if("next"===i)winHopscotch.nextStep(!0);else if("prev"===i)winHopscotch.prevStep(!0);else if("close"===i){if(this.opt.isTourBubble){var n=winHopscotch.getCurrStepNum()===winHopscotch.getCurrTour().steps.length-1;utils.invokeEventCallbacks("close"),winHopscotch.endTour(!0,n)}else this.opt.onClose&&utils.invokeCallback(this.opt.onClose),this.opt.id&&!this.opt.isTourBubble?winHopscotch.getCalloutManager().removeCallout(this.opt.id):this.destroy();utils.evtPreventDefault(t)}},init:function(t){var e,i,n,o,a=document.createElement("div"),r=this,s=!1;this.element=a,o={showPrevButton:defaultOpts.showPrevButton,showNextButton:defaultOpts.showNextButton,bubbleWidth:defaultOpts.bubbleWidth,bubblePadding:defaultOpts.bubblePadding,arrowWidth:defaultOpts.arrowWidth,isRtl:defaultOpts.isRtl,showNumber:!0,isTourBubble:!0},t=typeof t===undefinedStr?{}:t,utils.extend(o,t),this.opt=o,a.className="hopscotch-bubble animated",o.isTourBubble?(n=winHopscotch.getCurrTour())&&utils.addClass(a,"tour-"+n.id):utils.addClass(a,"hopscotch-callout no-number"),e=function(){!s&&r.isShowing&&(s=!0,setTimeout(function(){r.setPosition(r.currStep),s=!1},100))},utils.addEvtListener(window,"resize",e),this.clickCb=function(t){r._handleBubbleClick(t)},utils.addEvtListener(a,"click",this.clickCb),this.hide(),utils.documentIsReady()?document.body.appendChild(a):(document.addEventListener?(i=function(){document.removeEventListener("DOMContentLoaded",i),window.removeEventListener("load",i),document.body.appendChild(a)},document.addEventListener("DOMContentLoaded",i,!1)):(i=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",i),window.detachEvent("onload",i),document.body.appendChild(a))},document.attachEvent("onreadystatechange",i)),utils.addEvtListener(window,"load",i))}},HopscotchCalloutManager=function(){var t={},e={};this.createCallout=function(i){var n;if(!i.id)throw new Error("Must specify a callout id.");if(!validIdRegEx.test(i.id))throw new Error("Callout ID is using an invalid format. Use alphanumeric, underscores, and/or hyphens only. First character must be a letter.");if(t[i.id])throw new Error("Callout by that id already exists. Please choose a unique id.");if(!utils.getStepTarget(i))throw new Error("Must specify existing target element via 'target' option.");return i.showNextButton=i.showPrevButton=!1,i.isTourBubble=!1,n=new HopscotchBubble(i),t[i.id]=n,e[i.id]=i,n.render(i,null,function(){n.show(),i.onShow&&utils.invokeCallback(i.onShow)}),n},this.getCallout=function(e){return t[e]},this.removeAllCallouts=function(){var e;for(e in t)t.hasOwnProperty(e)&&this.removeCallout(e)},this.removeCallout=function(i){var n=t[i];t[i]=null,e[i]=null,n&&n.destroy()},this.refreshCalloutPositions=function(){var i,n,o;for(i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(n=t[i],o=e[i],n&&o&&n.setPosition(o))}},Hopscotch=function(t){var e,i,n,o,a,r,s,l,c=this,u={},d=[],p=function(t){return e&&e.element&&e.element.parentNode||(e=new HopscotchBubble(n)),t&&utils.extend(e.opt,{bubblePadding:f("bubblePadding"),bubbleWidth:f("bubbleWidth"),showNextButton:f("showNextButton"),showPrevButton:f("showPrevButton"),showCloseButton:f("showCloseButton"),arrowWidth:f("arrowWidth"),isRtl:f("isRtl")}),e},h=function(){e&&(e.destroy(),e=null)},f=function(t){return void 0===n?defaultOpts[t]:utils.valOrDefault(n[t],defaultOpts[t])},m=function(){return!o||0>a||a>=o.steps.length?null:o.steps[a]},g=function(){c.nextStep()},v=function(t){var e,i,n,o,a,r,s=p().element,l=utils.getPixelValue(s.style.top),c=l+utils.getPixelValue(s.offsetHeight),u=utils.getStepTarget(m()).getBoundingClientRect(),d=u.top+utils.getScrollTop(),h=u.bottom+utils.getScrollTop(),g=d>l?l:d,v=c>h?c:h,_=utils.getScrollTop(),b=_+utils.getWindowHeight(),y=g-f("scrollTopMargin");g>=_&&(g<=_+f("scrollTopMargin")||b>=v)?t&&t():f("smoothScroll")?typeof YAHOO!==undefinedStr&&typeof YAHOO.env!==undefinedStr&&typeof YAHOO.env.ua!==undefinedStr&&typeof YAHOO.util!==undefinedStr&&typeof YAHOO.util.Scroll!==undefinedStr?(e=YAHOO.env.ua.webkit?document.body:document.documentElement,n=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:void 0,(i=new YAHOO.util.Scroll(e,{scroll:{to:[0,y]}},f("scrollDuration")/1e3,n)).onComplete.subscribe(t),i.animate()):hasJquery?jQuery("body, html").animate({scrollTop:y},f("scrollDuration"),t):(0>y&&(y=0),o=_>g?-1:1,a=Math.abs(_-y)/(f("scrollDuration")/10),(r=function(){var e=utils.getScrollTop(),i=e+o*a;return o>0&&i>=y||0>o&&y>=i?(i=y,t&&t(),void window.scrollTo(0,i)):(window.scrollTo(0,i),utils.getScrollTop()===e?void(t&&t()):void setTimeout(r,10))})()):(window.scrollTo(0,y),t&&t())},_=function(t,e){var i,n;a+t>=0&&a+t<o.steps.length?(a+=t,n=function(){utils.getStepTarget(i)?(u[a]&&delete u[a],e(a)):(u[a]=!0,utils.invokeEventCallbacks("error"),_(t,e))},(i=m()).delay?setTimeout(n,i.delay):n()):e(-1)},b=function(t,e){var i,n,r,s,l=p(),c=this;if(l.hide(),t=utils.valOrDefault(t,!0),(i=m()).nextOnTargetClick&&utils.removeEvtListener(utils.getStepTarget(i),"click",g),n=i,r=e>0?n.multipage:a>0&&o.steps[a-1].multipage,s=function(i){var o;if(-1===i)return this.endTour(!0);if(t&&(o=e>0?utils.invokeEventCallbacks("next",n.onNext):utils.invokeEventCallbacks("prev",n.onPrev)),i===a){if(r)return void x();(o=utils.valOrDefault(o,!0))?this.showStep(i):this.endTour(!1)}},!r&&f("skipIfNoElement"))_(e,function(t){s.call(c,t)});else if(a+e>=0&&a+e<o.steps.length){if(a+=e,i=m(),!utils.getStepTarget(i)&&!r)return utils.invokeEventCallbacks("error"),this.endTour(!0,!1);s.call(this,a)}else if(a+e===o.steps.length)return this.endTour();return this},y=function(t){var e,i,n,o={};for(e in t)t.hasOwnProperty(e)&&"id"!==e&&"steps"!==e&&(o[e]=t[e]);return l.call(this,o,!0),(i=utils.getState(f("cookieName")))&&(n=i.split(":"),r=n[0],s=n[1],n.length>2&&(d=n[2].split(",")),s=parseInt(s,10)),this},w=function(t,e,i){var n,o;if(a=t||0,u=e||{},n=m(),o=utils.getStepTarget(n))i(a);else if(!o){if(utils.invokeEventCallbacks("error"),u[a]=!0,f("skipIfNoElement"))return void _(1,i);i(a=-1)}},$=function(t){function e(){n.show(),utils.invokeEventCallbacks("show",i.onShow)}var i=o.steps[t],n=p(),r=utils.getStepTarget(i);a!==t&&m().nextOnTargetClick&&utils.removeEvtListener(utils.getStepTarget(m()),"click",g),a=t,n.hide(!1),n.render(i,t,function(t){t?v(e):e(),i.nextOnTargetClick&&utils.addEvtListener(r,"click",g)}),x()},x=function(){var t=o.id+":"+a,e=winHopscotch.getSkippedStepsIndexes();e&&e.length>0&&(t+=":"+e.join(",")),utils.setState(f("cookieName"),t,1)},k=function(t){t&&this.configure(t)};this.getCalloutManager=function(){return typeof i===undefinedStr&&(i=new HopscotchCalloutManager),i},this.startTour=function(t,e){var i,n={},a=this;if(!o){if(!t)throw new Error("Tour data is required for startTour.");if(!t.id||!validIdRegEx.test(t.id))throw new Error("Tour ID is using an invalid format. Use alphanumeric, underscores, and/or hyphens only. First character must be a letter.");o=t,y.call(this,t)}if(typeof e!==undefinedStr){if(e>=o.steps.length)throw new Error("Specified step number out of bounds.");i=e}if(!utils.documentIsReady())return waitingToStart=!0,this;if(void 0===i&&o.id===r&&typeof s!==undefinedStr){if(i=s,d.length>0)for(var l=0,c=d.length;c>l;l++)n[d[l]]=!0}else i||(i=0);return w(i,n,function(t){return-1!==t&&utils.getStepTarget(o.steps[t])?(utils.invokeEventCallbacks("start"),p().hide(!1),a.isActive=!0,void(utils.getStepTarget(m())?a.showStep(t):(utils.invokeEventCallbacks("error"),f("skipIfNoElement")&&a.nextStep(!1)))):void a.endTour(!1,!1)}),this},this.showStep=function(t){var e=o.steps[t];if(utils.getStepTarget(e))return e.delay?setTimeout(function(){$(t)},e.delay):$(t),this},this.prevStep=function(t){return b.call(this,t,-1),this},this.nextStep=function(t){return b.call(this,t,1),this},this.endTour=function(t,e){var i,n=p();return t=utils.valOrDefault(t,!0),e=utils.valOrDefault(e,!0),o&&((i=m())&&i.nextOnTargetClick&&utils.removeEvtListener(utils.getStepTarget(i),"click",g)),a=0,s=void 0,n.hide(),t&&utils.clearState(f("cookieName")),this.isActive&&(this.isActive=!1,o&&e&&utils.invokeEventCallbacks("end")),this.removeCallbacks(null,!0),this.resetDefaultOptions(),h(),o=null,this},this.getCurrTour=function(){return o},this.getCurrTarget=function(){return utils.getStepTarget(m())},this.getCurrStepNum=function(){return a},this.getSkippedStepsIndexes=function(){var t,e=[];for(t in u)e.push(t);return e},this.refreshBubblePosition=function(){var t=m();return t&&p().setPosition(t),this.getCalloutManager().refreshCalloutPositions(),this},this.listen=function(t,e,i){return t&&callbacks[t].push({cb:e,fromTour:i}),this},this.unlisten=function(t,e){var i,n,o=callbacks[t];for(i=0,n=o.length;n>i;++i)o[i]===e&&o.splice(i,1);return this},this.removeCallbacks=function(t,e){var i,n,o,a;for(a in callbacks)if(!t||t===a)if(e)for(n=0,o=(i=callbacks[a]).length;o>n;++n)i[n].fromTour&&(i.splice(n--,1),--o);else callbacks[a]=[];return this},this.registerHelper=function(t,e){"string"==typeof t&&"function"==typeof e&&(helpers[t]=e)},this.unregisterHelper=function(t){helpers[t]=null},this.invokeHelper=function(t){var e,i,n=[];for(e=1,i=arguments.length;i>e;++e)n.push(arguments[e]);helpers[t]&&helpers[t].call(null,n)},this.setCookieName=function(t){return n.cookieName=t,this},this.resetDefaultOptions=function(){return n={},this},this.resetDefaultI18N=function(){return customI18N={},this},this.getState=function(){return utils.getState(f("cookieName"))},l=function(t,e){var i,o,a,r=["next","prev","start","end","show","error","close"];for(n||this.resetDefaultOptions(),utils.extend(n,t),t&&utils.extend(customI18N,t.i18n),o=0,a=r.length;a>o;++o)t[i="on"+r[o].charAt(0).toUpperCase()+r[o].substring(1)]&&this.listen(r[o],t[i],e);return p(!0),this},this.configure=function(t){return l.call(this,t,!1)},this.setRenderer=function(t){var e=typeof t;return"string"===e?(templateToUse=t,customRenderer=void 0):"function"===e&&(customRenderer=t),this},this.setEscaper=function(t){return"function"==typeof t&&(customEscape=t),this},k.call(this,t)},winHopscotch=new Hopscotch,function(){var _={escape:function(t){return customEscape?customEscape(t):null==t?"":(""+t).replace(new RegExp("[&<>\"']","g"),function(t){return"&"==t?"&amp;":"<"==t?"&lt;":">"==t?"&gt;":'"'==t?"&quot;":"'"==t?"&#x27;":void 0})}};this.templates=this.templates||{},this.templates.bubble_default=function(obj){function optEscape(t,e){return e?_.escape(t):t}obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj)__p+='\n<div class="hopscotch-bubble-container" style="width: '+(null==(__t=step.width)?"":__t)+"px; padding: "+(null==(__t=step.padding)?"":__t)+'px;">\n  ',tour.isTour&&(__p+='<span class="hopscotch-bubble-number">'+(null==(__t=i18n.stepNum)?"":__t)+"</span>"),__p+='\n  <div class="hopscotch-bubble-content">\n    ',""!==step.title&&(__p+='<h3 class="hopscotch-title">'+(null==(__t=optEscape(step.title,tour.unsafe))?"":__t)+"</h3>"),__p+="\n    ",""!==step.content&&(__p+='<div class="hopscotch-content">'+(null==(__t=optEscape(step.content,tour.unsafe))?"":__t)+"</div>"),__p+='\n  </div>\n  <div class="hopscotch-actions">\n    ',buttons.showPrev&&(__p+='<button class="hopscotch-nav-button prev hopscotch-prev">'+(null==(__t=i18n.prevBtn)?"":__t)+"</button>"),__p+="\n    ",buttons.showCTA&&(__p+='<button class="hopscotch-nav-button next hopscotch-cta">'+(null==(__t=buttons.ctaLabel)?"":__t)+"</button>"),__p+="\n    ",buttons.showNext&&(__p+='<button class="hopscotch-nav-button next hopscotch-next">'+(null==(__t=i18n.nextBtn)?"":__t)+"</button>"),__p+="\n  </div>\n  ",buttons.showClose&&(__p+='<button class="hopscotch-bubble-close hopscotch-close">'+(null==(__t=i18n.closeTooltip)?"":__t)+"</button>"),__p+='\n</div>\n<div class="hopscotch-bubble-arrow-container hopscotch-arrow">\n  <div class="hopscotch-bubble-arrow-border"></div>\n  <div class="hopscotch-bubble-arrow"></div>\n</div>';return __p}}.call(winHopscotch),winHopscotch}),function(t,e,i){var n,o=(n={tour:{id:"tourcomex",i18n:{nextBtn:"Pr\xf3ximo",prevBtn:"Anterior",doneBtn:"Feito",skipBtn:"Pular"},steps:[{title:"Ol\xe1! Boas-vindas!",content:"Antes de come\xe7ar a usar o sistema, voc\xea precisa finalizar o seu cadastro. Clique em 'Cadastro'. ",target:e.querySelector('a[href="/meu_cadastro/edit"]'),placement:"left",yOffset:"-20px",xOffset:"10px",showNextButton:!1,nextOnTargetClick:!0,multipage:!0},{title:"Preencha os campos",content:"Preencha os campos necess\xe1rios para podermos finalizar seu cadastro. Em seguida, clique em salvar.",target:".btn.btn-primary",placement:"top",yOffset:"1px",xOffset:"-200px",arrowOffset:"210px",showNextButton:!1,nextOnTargetClick:!0,multipage:!0},{title:"Agora sim",content:"Vamos te ajudar a criar sua primeira Nota. Passe o mouse aqui e clique em 'Declara\xe7\xf5es de Importa\xe7\xe3o'",target:e.querySelector('a[href="/dis"]'),placement:"right",yOffset:"170px",xOffset:"70px",showNextButton:!1,nextOnTargetClick:!0,multipage:!0},{title:"Importar",content:"Clique no bot\xe3o para importar",target:"#submit",placement:"left",yOffset:"-20px",showNextButton:!1,nextOnTargetClick:!0,multipage:!0},{title:"Carregar XML",content:"Clique em 'Buscar XML' para inserir a sua DI e logo em seguida clique aqui no bot\xe3o 'Salvar'.",target:".btn.btn-primary",placement:"left",yOffset:"-20px",showNextButton:!1,nextOnTargetClick:!0,multipage:!0},{title:"Vamos editar alguns dados",content:"Preencha os campos: ICMS total, Taxa AFRMM (se houver), Taxa ATAERO (se houver), Modalidade de frete, Entrada da mercadoria, Documento do fornecedor e UF (desembara\xe7o aduaneiro). Se tiver alguma d\xfavida, deixe o mouse em cima do campor para ver a descri\xe7\xe3o. Ap\xf3s, clique no Bot\xe3o Prosseguir.",target:".btn.btn-primary",placement:"left",width:"400px",yOffset:"-75px",xOffset:"-60px",arrowOffset:"center",showNextButton:!1,nextOnTargetClick:!0,multipage:!0},{title:"Vamos gerar a Nota Fiscal?",content:"Agora voc\xea precisa clicar no bot\xe3o para gerar a Nota Fiscal de Importa\xe7\xe3o.",target:".tour",placement:"left",yOffset:"-15px",showNextButton:!1,nextOnTargetClick:!0,multipage:!0},{title:"Vizualizando!",content:"Clique aqui para vizualizar a Nota Fiscal",target:".btn.btn-primary",placement:"left",yOffset:"-15px",showNextButton:!1,nextOnTargetClick:!0,multipage:!0},{title:"Finalizando!",content:'Clique na seta para baixo, ao lado do Bot\xe3o "Transmitir" e depois v\xe1 em "Pr\xe9via DANFE". Pronto, a sua Nota Fiscal de Importa\xe7\xe3o est\xe1 pronta.',target:e.querySelector(".btn.btn-primary"),placement:"left",xOffset:"1px",yOffset:"-70px",arrowOffset:"center"}]}},{init:function(){i.startTour(n.tour)},shouldContinueTour:function(t){if(i.getState()===t)return!0}});t.introComex=o}(window,document,hopscotch),$(function(){$(window).bind("load resize",function(){topOffset=60,width=this.window.innerWidth>0?this.window.innerWidth:this.screen.width,width<768?($("div.navbar-collapse").addClass("collapse"),topOffset=100):$("div.navbar-collapse").removeClass("collapse"),height=(this.window.innerHeight>0?this.window.innerHeight:this.screen.height)-1,height-=topOffset,height<1&&(height=1),height>topOffset&&$("#page-wrapper").css("min-height",height+"px")}),traduz_url=function(t){return t.replace("/adicaos","/dis")};var t=window.location,e=$("ul.nav a").filter(function(){return this.href==t||0==traduz_url(t.href).indexOf(this.href)}).addClass("active").parent().parent().addClass("in").parent();e.is("li")&&e.addClass("active")});var ufs_id={AC:1,AL:2,AM:3,AP:4,BA:5,CE:6,DF:7,ES:8,GO:9,MA:10,MG:11,MS:12,MT:13,PA:14,PB:15,PE:16,PI:17,PR:18,RJ:19,RN:20,RO:21,RR:22,RS:23,SC:24,SE:25,SP:26,TO:27,EX:28},totalizadores,$td,metodo,colunas,valores,soma,$datepicker,tipo_desconto;$("#fornecedor_tipo_pessoa_id").on("change",function(){switch($(this).val()){case"1":$("#fornecedor_inscricao_estadual").prop("disabled",!1),$("#fornecedor_inscricao_municipal").prop("disabled",!1),$("#fornecedor_nome_fantasia").prop("disabled",!1);break;case"2":case"3":$("#fornecedor_inscricao_estadual").prop("disabled",!0),$("#fornecedor_inscricao_municipal").prop("disabled",!0),$("#fornecedor_nome_fantasia").prop("disabled",!0)}}),$("#cliente_tipo_pessoa_id").on("change",function(){switch($(this).val()){case"1":$("#cliente_inscricao_estadual").prop("disabled",!1),$("#cliente_inscricao_municipal").prop("disabled",!1),$("#cliente_nome_fantasia").prop("disabled",!1);break;case"2":case"3":$("#cliente_inscricao_estadual").prop("disabled",!0),$("#cliente_inscricao_municipal").prop("disabled",!0),$("#cliente_nome_fantasia").prop("disabled",!0)}}),$("#emissor_tipo_pessoa_id").on("change",function(){switch($(this).val()){case"1":$("#emissor_inscricao_estadual").prop("disabled",!1),$("#emissor_inscricao_municipal").prop("disabled",!1),$("#emissor_razao_social").prop("disabled",!1);break;case"2":case"3":$("#emissor_inscricao_estadual").prop("disabled",!0),$("#emissor_inscricao_municipal").prop("disabled",!0),$("#emissor_razao_social").prop("disabled",!0)}}),$(".datetime-focus").on("focus",focusDateInput),document.addEventListener("DOMContentLoaded",()=>{let t=$(".datetime-ini"),e=$(".datetime-fim"),i=$("[data-inicial-date]"),n=$("[data-final-date]"),o="YYYY-MM-DDTHH:mm";t.val(moment(i.val()).format(o)),e.val(moment(n.val()).format(o)),$("input.autocomplete_tag").each(function(){carrega_autocomplete_tag(this)})}),submitFiltroDataHora(".filtro-datetimetag"),$(".datepicker_tag, .datepicker").datepicker($.datepicker.regional["pt-br"]),$(".datetimepicker_tag").datetimepicker($.datepicker.regional["pt-br"]),$(document).on("nested:fieldAdded",function(t){var e=t.field,i=e.find(".datepicker_tag, .datepicker"),n=e.find(".datetimepicker_tag");aplicaChosenSelect(),$.each(i,function(t,e){$(e).datepicker($.datepicker.regional["pt-br"])}),$.each(n,function(t,e){$(e).datetimepicker($.datepicker.regional["pt-br"])})}),$(".autocomplete_tag").focus(function(){$(this).autocomplete("search",$(this).val())}),$(document).ajaxError(function(t,e,i){i.suppressErrors||4===e.readyState&&(404===e.status&&alert("Voc\xea tentou executar uma a\xe7\xe3o baseada num recurso que n\xe3o existe mais. Por favor, recarregue a p\xe1gina e tente novamente."),401!==e.status?e.status>=500&&alert("Ocorreu um erro inesperado. Caso o erro persista, entre em contato com o suporte t\xe9cnico."):window.location="/sessions/new")}),$(document).on("chosen:updated change",".ufs",function(){$(this).val()&&$.getScript("/ufs/"+$(this).val()+"/municipios?codigo_ibge="+$("#municipio_ibge").val())}),$(document).on("keypress",".campo_numerico",function(t){var e=t.which;return!!isNumber(e)||(44===e||(46===e?($(this).val($(this).val()+","),t.preventDefault(),!0):e===undefined||void t.preventDefault()))}),$("#minha_conta").hover(function(){$("#minha_conta_options").show()},function(){$("#minha_conta_options").hide()}),$().val("news here!"),$(document).on("keypress",".campo_inteiro",function(t){var e=t.keyCode;return!!isNumber(e)||(e===undefined||void t.preventDefault())}),totalizadores=$("td.totalizador"),totalizadores.each(function(){$td=$(this),metodo=$td.data("column"),colunas=$("td[data-column="+metodo+"]:not(.totalizador)"),valores=colunas.map(function(){return parseFloat($(this).data("value"))}),soma=0,$.each(valores,function(){soma+=this}),$td.text(soma.toFixed(2).replace(".",","))}),$datepicker=$("input.datepicker"),$datepicker.each(function(){if($(this).val().match(/\d\d\d\d-\d\d-\d\d/)){var t=new Date($(this).val()+"T15:00:00");console.log(t),$(this).val($.datepicker.formatDate("dd/mm/yy",t))}}),tipo_desconto=$("#configuracao_tipo_desconto_id"),$("form").on("submit",valor_real_mascara),$("#collection_check_boxes_check_all").on("change",function(){$(".collection_check_box").each(function(){1==$("#collection_check_boxes_check_all").prop("checked")?$(this).prop("checked",!0):$(this).prop("checked",!1)})}),$(function(){initTooltip(),initPopOver()}),$(".tooltip-with-html").tooltip({html:!0}),$(".tip").tooltip(),$(".popoverCustom").popover({content:"Aqui est\xe3o as informa\xe7\xf5es do seu plano atual.",html:!0,placement:"top"}),$(".testee").click(function(){$(".popoverCustom").popover("toggle")}),$(".popoverCustom").on("hide.bs.popover",function(){$("#collapse-test").collapse("hide")}),$(".popoverCustom").on("hide.bs.popover",function(){$("#collapse-test-2").collapse("hide")}),$(".popoverCustom").on("hide.bs.popover",function(){$("#collapse-test-3").collapse("hide")}),$(".popoverCustom").on("hide.bs.popover",function(){$("#wrap3").collapse("show")}),jQuery(function(t){t('[data-toggle="custon-popover"]').popover()}),$("#submit-excel").click(function(){$("#format_file").val("xlsx"),$("#format_file").closest("form").submit()}),$(".borda-clicavel").mousemove(function(t){$(this).css("cursor","pointer"),t.offsetX+5>=$(this).outerWidth()?$(this).removeClass("listagem-stakeholder").addClass("listagem-stakeholder-hover"):t.offsetX-10>=$(this).outerWidth()&&$(this).removeClass("listagem-stakeholder-hover").addClass("listagem-stakeholder")}),$(".borda-clicavel").mouseleave(function(){$(this).removeClass("listagem-stakeholder-hover").addClass("listagem-stakeholder")}),$(".expandir-borda").click(function(){expandir_tabela()}),$(".retrair-tabela").click(function(){var t=document.getElementById("tamanho-tabela");document.getElementById("quickview");if(null==t)return!1;t.classList.contains("col-md-12")&&($("#icon").removeClass("fa-minus-circle").addClass("fa-plus-circle"),$("#busca-field").removeClass("col-md-11").addClass("col-md-10"),t.style.transition="all .5s",$("#tamanho-tabela").removeClass("col-md-12").addClass("col-md-3"),$("#quickview").removeClass("quickview-closed").addClass("quickview-open"),$("td:nth-child(2)").hide(),$("td:nth-child(3)").hide(),$("td:nth-child(4)").hide(),$("td:nth-child(5)").hide()),scrollToTop($("html, body")),$("#myCarousel").hide()}),$(".busca_produto_nota").each(function(){var t=$(this).data("autocomplete-source"),e=$(this);e.dataMap={},e.selectize({valueField:"id",labelField:"label",searchField:"label",persist:!1,preload:!0,render:{option:function(t,e){return"<div><span>"+e(t.label)+"</span></div>"}},load:function(e,i){$.ajax({url:t,data:{codigo_ou_descricao:e,limite:20,nao_salvar_filtro:!0},type:"GET",dataType:"json",error:function(){i()},success:function(t){console.log(t.produto_estoques),i(t.produto_estoques)}})},onOptionAdd:function(t,i){e.dataMap[t]=i},onChange:function(t){if(t&&e.dataMap[t]){if(e.dataMap[t].pu)var i=e.dataMap[t].pu.replace(".",",");else i="";if(e.dataMap[t].pu_saida)var n=e.dataMap[t].pu_saida.replace(".",",");else n="";"saida"===$("#tipo_de_nota").val()?$("#produto_nota_fiscal_valor_unitario").val(n):$("#produto_nota_fiscal_valor_unitario").val(i)}else t&&console.log("Aconteceu algo de errado")}})}),$(document).ready(function(){if($(".datepicker_tag, .datepicker").mask("00/00/0000"),$("#tableExpand").click(function(){var t=document.getElementById("tamanho-tabela"),e=document.getElementById("quickview");null!=t&&t.classList.contains("col-md-3")?(t.style.transition="all .5s",$("#tamanho-tabela").removeClass("col-md-3").addClass("col-md-12")):$("#tamanho-tabela").removeClass("col-md-12").addClass("col-md-3"),null!=e&&e.classList.contains("quickview-open")?$("#quickview").removeClass("quickview-open").addClass("quickview-closed"):$("#quickview").removeClass("quickview-closed").addClass("quickview-open"),$("td:nth-child(2)").toggle(),$("td:nth-child(3)").toggle(),$("td:nth-child(4)").toggle()}),"true"===$("#exibe_renovacao_degustacao").val()){var t=$("#exibe_renovacao_degustacao").data("emissorId"),e=$("#exibe_renovacao_degustacao").data("diasParaRenovarDegustacao"),i=moment($("#exibe_renovacao_degustacao").data("inicioDegustacao"),"DD/MM/YYYY"),n=2*e-parseInt(moment.duration(moment().diff(i)).asDays()),o="";o=i.add(e,"days").isSame(moment(),"day")?"Hoje \xe9 o \xfaltimo dia do seu per\xedodo de degusta\xe7\xe3o.":"Seu per\xedodo de degusta\xe7\xe3o acabou.",swal({title:o,text:"Deseja renovar por mais "+n+" dias?",type:"info",allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#2A578C",cancelButtonColor:"#D82B0A",confirmButtonText:"Sim",cancelButtonText:"N\xe3o"}).then(function(){$.post("/emissors/"+t+"/renovar_degustacao")})["catch"](function(){$.post("/emissors/"+t+"/finalizar_degustacao")})}aplicaClipboardLinkBoleto()}),$("select[name='format']").on("change",function(){var t=$(this).closest("form"),e="html"==$(this).val();t.find(".required_non_html").prop("required",!e),t.find(".required_html").prop("required",e)}),$(".cmx-character-limit").on("keyup",function(){check_character_limit($(this))}),$(".cmx-character-limit").each(function(){check_character_limit($(this))}),$(".botao-visualizar-parcelas").on("click",function(t){t.preventDefault(),$("#listagem-parcelas-"+$(this).data("id")).toggle()}),$("[name='checkbox-endereco-entrega']").bootstrapSwitch(),$("[name='checkbox-endereco-entrega']").on("switchChange.bootstrapSwitch",function(){$("#endereco-entrega").toggleClass("hide"),$("#nota_fiscal_endereco_de_entrega_id")[0].selectize.clear()}),$(".clipboard-link.clipboard-tooltip").tooltip({trigger:"click",placement:"bottom"}),$(".btn-remover-anexo").on("ajax:before",function(){$("#loader-anexos").show(),$("#div-anexos").hide()}),$(".select-tipo-visualizacao").on("change",function(){data={configuracao:{}},data.configuracao[this.name]=this.value,$.ajax({url:"/configuracoes/"+$(this).data("configuracaoId"),data:data,type:"PUT",dataType:"json",success:function(){window.location.reload()},error:function(){window.location.reload()}})}),aplicaChosenSelect(),$("#nota_fiscal_cfop_id").change(function(){new Promise(function(t){setTimeout(function(){t($("#salva_nfe_padrao").data("analyticsCfop",$("#nota_fiscal_cfop_id option:selected").text()))},1e3)}).then(function(){$("#salva_nfe_padrao").data("analyticsNaturezaOperacao",$("#nota_fiscal_natureza_da_operacao").val())})}),$(document).ready(function(){$("#modal-onboarding").modal(),$("#modal-completa-cadastro-pessoa").modal({backdrop:"static",keyboard:!1}),$("#modal-escolha-de-pagamento").modal({backdrop:"static",keyboard:!1}),$('[data-toggle="collapse"]').on("click",bsCollapse)}),$(".magia-recompra").hoverDelay({delayIn:500,delayOut:500,handlerIn:function(t){t.addClass("ativa-hover")},handlerOut:function(t){t.removeClass("ativa-hover")}}),$(".daterange").daterangepicker({autoUpdateInput:!1,locale:{format:"DD/MM/YYYY",separator:" - ",applyLabel:"Aplicar",cancelLabel:"Limpar",fromLabel:"De",toLabel:"At\xe9",customRangeLabel:"Personalizar",weekLabel:"S",daysOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],monthNames:["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],firstDay:1}},function(t,e,i){console.log("New date range selected: "+t.format("DD/MM/YYYY")+" to "+e.format("DD/MM/YYYY")+" (predefined range: "+i+")")}),$(".daterange").on("cancel.daterangepicker",function(){$(this).val(""),$("#"+$(this).data("hidden-start")).val(""),$("#"+$(this).data("hidden-end")).val("")}),$(".daterange").on("apply.daterangepicker",function(t,e){$(this).val(e.startDate.format("DD/MM/YYYY")+" - "+e.endDate.format("DD/MM/YYYY")),$("#"+$(this).data("hidden-start")).val(e.startDate.format("DD/MM/YYYY")),$("#"+$(this).data("hidden-end")).val(e.endDate.format("DD/MM/YYYY"))}),$("#icone-dashboard").hover(function(){$("#badge-notificacoes").hide()}).mouseleave(function(){$("#badge-notificacoes").show()}),$(document).on("nested:fieldAdded",function(t){t.field.find('[data-toggle="switch"]').bootstrapSwitch();const e=t.field.find('[data-toggle="collapse"]');e.length>0&&e.on("click",bsCollapse)}),function(){let t=document.getElementById("bar-footer-app");null!=t&&window.addEventListener("scroll",function(){let e="end-scroll";document.body.scrollHeight-60<=window.scrollY+window.innerHeight?t.classList.add(e):t.classList.remove(e)})}(),showAlertImportXmlDi(),$("form.validacao_dados_nao_salvos input, form.validacao_dados_nao_salvos select").each(function(){$(this).on("change",(t,e)=>{e||window.addEventListener("beforeunload",t=>{t.returnValue="Voc\xea fez altera\xe7\xf5es no formul\xe1rio e n\xe3o salvou. Deseja sair da p\xe1gina mesmo assim?"})})})
;for(var allCountries=[[""," ",""],["Afghanistan (\u202b\u0627\u0641\u063a\u0627\u0646\u0633\u062a\u0627\u0646\u202c\u200e)","af","93"],["Albania (Shqip\xebri)","al","355"],["Algeria (\u202b\u0627\u0644\u062c\u0632\u0627\u0626\u0631\u202c\u200e)","dz","213"],["American Samoa","as","1",5,["684"]],["Andorra","ad","376"],["Angola","ao","244"],["Anguilla","ai","1",6,["264"]],["Antigua and Barbuda","ag","1",7,["268"]],["Argentina","ar","54"],["Armenia (\u0540\u0561\u0575\u0561\u057d\u057f\u0561\u0576)","am","374"],["Aruba","aw","297"],["Ascension Island","ac","247"],["Australia","au","61",0],["Austria (\xd6sterreich)","at","43"],["Azerbaijan (Az\u0259rbaycan)","az","994"],["Bahamas","bs","1",8,["242"]],["Bahrain (\u202b\u0627\u0644\u0628\u062d\u0631\u064a\u0646\u202c\u200e)","bh","973"],["Bangladesh (\u09ac\u09be\u0982\u09b2\u09be\u09a6\u09c7\u09b6)","bd","880"],["Barbados","bb","1",9,["246"]],["Belarus (\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u044c)","by","375"],["Belgium (Belgi\xeb)","be","32"],["Belize","bz","501"],["Benin (B\xe9nin)","bj","229"],["Bermuda","bm","1",10,["441"]],["Bhutan (\u0f60\u0f56\u0fb2\u0f74\u0f42)","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina (\u0411\u043e\u0441\u043d\u0430 \u0438 \u0425\u0435\u0440\u0446\u0435\u0433\u043e\u0432\u0438\u043d\u0430)","ba","387"],["Botswana","bw","267"],["Brazil (Brasil)","br","55"],["British Indian Ocean Territory","io","246"],["British Virgin Islands","vg","1",11,["284"]],["Brunei","bn","673"],["Bulgaria (\u0411\u044a\u043b\u0433\u0430\u0440\u0438\u044f)","bg","359"],["Burkina Faso","bf","226"],["Burundi (Uburundi)","bi","257"],["Cambodia (\u1780\u1798\u17d2\u1796\u17bb\u1787\u17b6)","kh","855"],["Cameroon (Cameroun)","cm","237"],["Canada","ca","1",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde (Kabu Verdi)","cv","238"],["Caribbean Netherlands","bq","599",1,["3","4","7"]],["Cayman Islands","ky","1",12,["345"]],["Central African Republic (R\xe9publique centrafricaine)","cf","236"],["Chad (Tchad)","td","235"],["Chile","cl","56"],["China (\u4e2d\u56fd)","cn","86"],["Christmas Island","cx","61",2,["89164"]],["Cocos (Keeling) Islands","cc","61",1,["89162"]],["Colombia","co","57"],["Comoros (\u202b\u062c\u0632\u0631 \u0627\u0644\u0642\u0645\u0631\u202c\u200e)","km","269"],["Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)","cd","243"],["Congo (Republic) (Congo-Brazzaville)","cg","242"],["Cook Islands","ck","682"],["Costa Rica","cr","506"],["C\xf4te d\u2019Ivoire","ci","225"],["Croatia (Hrvatska)","hr","385"],["Cuba","cu","53"],["Cura\xe7ao","cw","599",0],["Cyprus (\u039a\u03cd\u03c0\u03c1\u03bf\u03c2)","cy","357"],["Czech Republic (\u010cesk\xe1 republika)","cz","420"],["Denmark (Danmark)","dk","45"],["Djibouti","dj","253"],["Dominica","dm","1",13,["767"]],["Dominican Republic (Rep\xfablica Dominicana)","do","1",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt (\u202b\u0645\u0635\u0631\u202c\u200e)","eg","20"],["El Salvador","sv","503"],["Equatorial Guinea (Guinea Ecuatorial)","gq","240"],["Eritrea","er","291"],["Estonia (Eesti)","ee","372"],["Eswatini","sz","268"],["Ethiopia","et","251"],["Falkland Islands (Islas Malvinas)","fk","500"],["Faroe Islands (F\xf8royar)","fo","298"],["Fiji","fj","679"],["Finland (Suomi)","fi","358",0],["France","fr","33"],["French Guiana (Guyane fran\xe7aise)","gf","594"],["French Polynesia (Polyn\xe9sie fran\xe7aise)","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia (\u10e1\u10d0\u10e5\u10d0\u10e0\u10d7\u10d5\u10d4\u10da\u10dd)","ge","995"],["Germany (Deutschland)","de","49"],["Ghana (Gaana)","gh","233"],["Gibraltar","gi","350"],["Greece (\u0395\u03bb\u03bb\u03ac\u03b4\u03b1)","gr","30"],["Greenland (Kalaallit Nunaat)","gl","299"],["Grenada","gd","1",14,["473"]],["Guadeloupe","gp","590",0],["Guam","gu","1",15,["671"]],["Guatemala","gt","502"],["Guernsey","gg","44",1,["1481","7781","7839","7911"]],["Guinea (Guin\xe9e)","gn","224"],["Guinea-Bissau (Guin\xe9 Bissau)","gw","245"],["Guyana","gy","592"],["Haiti","ht","509"],["Honduras","hn","504"],["Hong Kong (\u9999\u6e2f)","hk","852"],["Hungary (Magyarorsz\xe1g)","hu","36"],["Iceland (\xcdsland)","is","354"],["India (\u092d\u093e\u0930\u0924)","in","91"],["Indonesia","id","62"],["Iran (\u202b\u0627\u06cc\u0631\u0627\u0646\u202c\u200e)","ir","98"],["Iraq (\u202b\u0627\u0644\u0639\u0631\u0627\u0642\u202c\u200e)","iq","964"],["Ireland","ie","353"],["Isle of Man","im","44",2,["1624","74576","7524","7924","7624"]],["Israel (\u202b\u05d9\u05e9\u05e8\u05d0\u05dc\u202c\u200e)","il","972"],["Italy (Italia)","it","39",0],["Jamaica","jm","1",4,["876","658"]],["Japan (\u65e5\u672c)","jp","81"],["Jersey","je","44",3,["1534","7509","7700","7797","7829","7937"]],["Jordan (\u202b\u0627\u0644\u0623\u0631\u062f\u0646\u202c\u200e)","jo","962"],["Kazakhstan (\u041a\u0430\u0437\u0430\u0445\u0441\u0442\u0430\u043d)","kz","7",1,["33","7"]],["Kenya","ke","254"],["Kiribati","ki","686"],["Kosovo","xk","383"],["Kuwait (\u202b\u0627\u0644\u0643\u0648\u064a\u062a\u202c\u200e)","kw","965"],["Kyrgyzstan (\u041a\u044b\u0440\u0433\u044b\u0437\u0441\u0442\u0430\u043d)","kg","996"],["Laos (\u0ea5\u0eb2\u0ea7)","la","856"],["Latvia (Latvija)","lv","371"],["Lebanon (\u202b\u0644\u0628\u0646\u0627\u0646\u202c\u200e)","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya (\u202b\u0644\u064a\u0628\u064a\u0627\u202c\u200e)","ly","218"],["Liechtenstein","li","423"],["Lithuania (Lietuva)","lt","370"],["Luxembourg","lu","352"],["Macau (\u6fb3\u9580)","mo","853"],["North Macedonia (\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0438\u0458\u0430)","mk","389"],["Madagascar (Madagasikara)","mg","261"],["Malawi","mw","265"],["Malaysia","my","60"],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania (\u202b\u0645\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u0627\u202c\u200e)","mr","222"],["Mauritius (Moris)","mu","230"],["Mayotte","yt","262",1,["269","639"]],["Mexico (M\xe9xico)","mx","52"],["Micronesia","fm","691"],["Moldova (Republica Moldova)","md","373"],["Monaco","mc","377"],["Mongolia (\u041c\u043e\u043d\u0433\u043e\u043b)","mn","976"],["Montenegro (Crna Gora)","me","382"],["Montserrat","ms","1",16,["664"]],["Morocco (\u202b\u0627\u0644\u0645\u063a\u0631\u0628\u202c\u200e)","ma","212",0],["Mozambique (Mo\xe7ambique)","mz","258"],["Myanmar (Burma) (\u1019\u103c\u1014\u103a\u1019\u102c)","mm","95"],["Namibia (Namibi\xeb)","na","264"],["Nauru","nr","674"],["Nepal (\u0928\u0947\u092a\u093e\u0932)","np","977"],["Netherlands (Nederland)","nl","31"],["New Caledonia (Nouvelle-Cal\xe9donie)","nc","687"],["New Zealand","nz","64"],["Nicaragua","ni","505"],["Niger (Nijar)","ne","227"],["Nigeria","ng","234"],["Niue","nu","683"],["Norfolk Island","nf","672"],["North Korea (\uc870\uc120 \ubbfc\uc8fc\uc8fc\uc758 \uc778\ubbfc \uacf5\ud654\uad6d)","kp","850"],["Northern Mariana Islands","mp","1",17,["670"]],["Norway (Norge)","no","47",0],["Oman (\u202b\u0639\u064f\u0645\u0627\u0646\u202c\u200e)","om","968"],["Pakistan (\u202b\u067e\u0627\u06a9\u0633\u062a\u0627\u0646\u202c\u200e)","pk","92"],["Palau","pw","680"],["Palestine (\u202b\u0641\u0644\u0633\u0637\u064a\u0646\u202c\u200e)","ps","970"],["Panama (Panam\xe1)","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru (Per\xfa)","pe","51"],["Philippines","ph","63"],["Poland (Polska)","pl","48"],["Portugal","pt","351"],["Puerto Rico","pr","1",3,["787","939"]],["Qatar (\u202b\u0642\u0637\u0631\u202c\u200e)","qa","974"],["R\xe9union (La R\xe9union)","re","262",0],["Romania (Rom\xe2nia)","ro","40"],["Russia (\u0420\u043e\u0441\u0441\u0438\u044f)","ru","7",0],["Rwanda","rw","250"],["Saint Barth\xe9lemy","bl","590",1],["Saint Helena","sh","290"],["Saint Kitts and Nevis","kn","1",18,["869"]],["Saint Lucia","lc","1",19,["758"]],["Saint Martin (Saint-Martin (partie fran\xe7aise))","mf","590",2],["Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)","pm","508"],["Saint Vincent and the Grenadines","vc","1",20,["784"]],["Samoa","ws","685"],["San Marino","sm","378"],["S\xe3o Tom\xe9 and Pr\xedncipe (S\xe3o Tom\xe9 e Pr\xedncipe)","st","239"],["Saudi Arabia (\u202b\u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629\u202c\u200e)","sa","966"],["Senegal (S\xe9n\xe9gal)","sn","221"],["Serbia (\u0421\u0440\u0431\u0438\u0458\u0430)","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65"],["Sint Maarten","sx","1",21,["721"]],["Slovakia (Slovensko)","sk","421"],["Slovenia (Slovenija)","si","386"],["Solomon Islands","sb","677"],["Somalia (Soomaaliya)","so","252"],["South Africa","za","27"],["South Korea (\ub300\ud55c\ubbfc\uad6d)","kr","82"],["South Sudan (\u202b\u062c\u0646\u0648\u0628 \u0627\u0644\u0633\u0648\u062f\u0627\u0646\u202c\u200e)","ss","211"],["Spain (Espa\xf1a)","es","34"],["Sri Lanka (\u0dc1\u0dca\u200d\u0dbb\u0dd3 \u0dbd\u0d82\u0d9a\u0dcf\u0dc0)","lk","94"],["Sudan (\u202b\u0627\u0644\u0633\u0648\u062f\u0627\u0646\u202c\u200e)","sd","249"],["Suriname","sr","597"],["Svalbard and Jan Mayen","sj","47",1,["79"]],["Sweden (Sverige)","se","46"],["Switzerland (Schweiz)","ch","41"],["Syria (\u202b\u0633\u0648\u0631\u064a\u0627\u202c\u200e)","sy","963"],["Taiwan (\u53f0\u7063)","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand (\u0e44\u0e17\u0e22)","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tokelau","tk","690"],["Tonga","to","676"],["Trinidad and Tobago","tt","1",22,["868"]],["Tunisia (\u202b\u062a\u0648\u0646\u0633\u202c\u200e)","tn","216"],["Turkey (T\xfcrkiye)","tr","90"],["Turkmenistan","tm","993"],["Turks and Caicos Islands","tc","1",23,["649"]],["Tuvalu","tv","688"],["U.S. Virgin Islands","vi","1",24,["340"]],["Uganda","ug","256"],["Ukraine (\u0423\u043a\u0440\u0430\u0457\u043d\u0430)","ua","380"],["United Arab Emirates (\u202b\u0627\u0644\u0625\u0645\u0627\u0631\u0627\u062a \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0645\u062a\u062d\u062f\u0629\u202c\u200e)","ae","971"],["United Kingdom","gb","44",0],["United States","us","1",0],["Uruguay","uy","598"],["Uzbekistan (O\u02bbzbekiston)","uz","998"],["Vanuatu","vu","678"],["Vatican City (Citt\xe0 del Vaticano)","va","39",1,["06698"]],["Venezuela","ve","58"],["Vietnam (Vi\u1ec7t Nam)","vn","84"],["Wallis and Futuna (Wallis-et-Futuna)","wf","681"],["Western Sahara (\u202b\u0627\u0644\u0635\u062d\u0631\u0627\u0621 \u0627\u0644\u063a\u0631\u0628\u064a\u0629\u202c\u200e)","eh","212",1,["5288","5289"]],["Yemen (\u202b\u0627\u0644\u064a\u0645\u0646\u202c\u200e)","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"],["\xc5land Islands","ax","358",1,["18"]]],i=0;i<allCountries.length;i++){var c=allCountries[i];allCountries[i]={text:c[0],sigla:c[1],id:c[1],code:c[2],priority:1}}$(".popover-listagem-nota-fiscal").popover({placement:"left",trigger:"hover"}),$("#devolucao_venda_select").length>0&&$("#devolucao_venda_select").select2({theme:"bootstrap",language:"pt-BR",ajax:{url:$("#devolucao_venda_select").data("autocomplete-source"),delay:250}}),$("#complementar_select").length>0&&$("#complementar_select").select2({theme:"bootstrap",language:"pt-BR",ajax:{url:$("#complementar_select").data("autocomplete-source"),delay:250}}),$(".campos-checagem-exportacao").on("change",function(){$("#nota_fiscal_tipo_documento").val();habilita_campos_exportacao("EX"==$("#nota_fiscal_stakeholder_uf").val())}),$("#informacao_complementar").on("change",function(){if(""!=$(this).val()){var t=$("#nota_fiscal_inf_cpl").val();t.match($(this).val())||$("#nota_fiscal_inf_cpl").val(t+"; "+$(this).val())}}),$("#informacao_complementar_fisco").on("change",function(){$("#nota_fiscal_inf_ad_fisco").val($(this).val())}),$("#seleciona_todos").click(function(){const t=$("#cupom-fiscal-list tr");$('input[name="seleciona[]"]:enabled').prop("checked",$(this).is(":checked")),t.each((t,e)=>{$(this).is(":checked")?$(e).addClass("selected-row"):$(e).removeClass("selected-row")})}),$("#botao_cancelar_form").on("click",function(t){$("#form_complementar").remove(),fecha_form_complementar(),t.preventDefault()}),$("#janela_status").dialog({width:500,height:300,autoOpen:!1}),$("#nota_fiscal_cfop_id").on("change",function(){$.getScript("/cfops/"+$(this).val())}),$("#numero_nota_fiscal").change(function(){""===$(this).val()&&$("#nota_fiscal_id").val("")}),$("#nota_fiscal_stakeholder_id").on("change",function(){$.getScript("/stakeholders/"+$(this).val()+"/dados_nfe"),$(".campos_veiculo").show()}),$("#nota_fiscal_finalidade_emissao").on("change",function(){$("#numero_nota").toggle("1"!==$(this).val())}),$("#numero_nota").toggle("1"!==$("#nota_fiscal_finalidade_emissao").val()),jQuery(function(t){t('[data-toggle="popover"]').popover({trigger:"hover"})}),$("#nota_fiscal_f_nao_movimentar_estoque").on("change.bootstrapSwitch",function(){$(this).is(":checked")&&alert("Ao salvar a nota fiscal com esta op\xe7\xe3o marcada, a nota fiscal N\xc3O ir\xe1 movimentar o estoque quando for aceita e as movimenta\xe7\xf5es pendentes ser\xe3o desfeitas.")}),$("#mov_estoque_nota_fiscal_valor_unitario_tributado").change(function(){var t=(parseFloat($(this).val().replace(",",".")).toFixed(10)*parseFloat($("#quantidade_produtos").data("quantidade")).toFixed(2)).toFixed(2);isNaN(t)||$("#valor_total").val(t.replace(".",","))}),$("#valor_total").change(function(){var t=(parseFloat($(this).val().replace(",",".")).toFixed(2)/parseFloat($("#quantidade_produtos").data("quantidade")).toFixed(2)).toFixed(10);isNaN(t)||t==Infinity||$("#mov_estoque_nota_fiscal_valor_unitario_tributado").val(t.replace(".",","))}),$("#mov_estoque_nota_fiscal_acao_em_massa .submitavel").click(function(){$("#acao_coletiva_action").val($(this).data("action")),$("#mov_estoque_nota_fiscal_acao_em_massa").submit()}),$("#nota_fiscal_serie").on("change blur",function(){var t=$("#nota_fiscal_serie").val();$.get("/nota_fiscals/proximo_numero_nfe?serie="+t,function(t){t.serie!=$("#nota_fiscal_numero_nfe").val()&&$("#nota_fiscal_numero_nfe").val(t.serie).effect("highlight",{},2e3)}),$.get("/nota_fiscals/ie_para_serie?serie="+t,function(t){t.ie!=$("#nota_fiscal_ie_especifica").val()&&$("#nota_fiscal_ie_especifica").val(t.ie).effect("highlight",{},2e3)})}),$.each($(".ajax-select"),function(t,e){$(e).select2({theme:"bootstrap",language:"pt-BR",ajax:{url:$(this).data("autocomplete-source"),delay:250}})}),$("#nota_fiscal_tipo_nfe_armazenagem").on("change",function(){var t=$("#nota_fiscal_tipo_nfe_armazenagem option:selected").prop("value");"di"==t?($(".nfes_aquisicao").hide(),$(".nfes_di").show()):"compra"==t&&($(".nfes_aquisicao").show(),$(".nfes_di").hide())}),$("#parametrizacao").on("change",function(){var t=$(this).val(),e=$("#nota_fiscal_stakeholder_id").val(),i=$("#nota_fiscal_tipo_documento").val(),n=$.ajax("/busca_cfop",{data:{parametros_generico_id:t,stakeholder_id:e,tipo_de_nota:i},suppressErrors:!0});n.done(function(t){$("#nota_fiscal_cfop_id").val(t.cfop.id),$("#nota_fiscal_cfop_id").trigger("change"),console.log(t)}),n.fail(function(t){console.log(t)})}),$("#ipi_situacao_tributaria_id").on("change",function(){$.getScript("/codigos_de_enquadramento?ipi_situacao_tributaria_id="+$(this).val())}),$("#nota_fiscal_cfop_id").on("change",function(){$.getJSON("/cfops/"+$(this).val()).done(function(t){t.cfop.devolucao&&$("#nota_fiscal_finalidade_emissao").val("4")})}),document.addEventListener("DOMContentLoaded",()=>{$("#nota_fiscal_de_entrada_para_conta_e_ordem").on("change",executaAcoesAposSelecionarDadosDeRemessa),$("#nota_fiscal_stakeholder_id").on("change",executaAcoesAposSelecionarDadosDeRemessa),executaAcoesAposSelecionarDadosDeRemessa()}),$("#tipo_de_acrescimo_ao_valor_dos_produtos").on("change",function(){let t=$(this).val();if($("#acrescimo_ao_valor_dos_produtos").val(null),"percentual"===t)return acrescimoEmPorcentagem();acrescimoEmReais()}),$("#nota_fiscal_p_icms").on("keyup",function(){$(".produtos-nfe-conta-e-ordem-icms").val($(this).val())}),$("#nota_fiscal_p_fcp").on("keyup",function(){$(".produtos-nfe-conta-e-ordem-fcp").val($(this).val())}),$("#btn-grupo-combustiveis").on("click",function(t){t.preventDefault(),$("#div-grupo-combustiveis").show(),$(this).hide()}),$("#btn-grupo-medicamentos").on("click",function(t){t.preventDefault(),$("#div-grupo-medicamentos").show(),$(this).hide()}),$("#btn-grupo-rastreabilidade").on("click",function(t){t.preventDefault(),$("#div-grupo-rastreabilidade").show(),$(this).hide()}),$("#parametros_nota_fiscal_recuperar_bases_icms").on("change",function(){$("#div-base-de-calculo-icms").toggle()}),$("#mov_estoque_nota_fiscal_v_icms_bc").on("change",function(){$("#mov_estoque_nota_fiscal_v_fcp_bc").val($(this).val()).trigger("change")}),$("#mov_estoque_nota_fiscal_v_icms_st_bc").on("change",function(){$("#mov_estoque_nota_fiscal_v_fcp_st_bc").val($(this).val()).trigger("change")}),$("#nota_fiscal_indicador_presenca").on("change",function(){const t=["2","3","9"].includes(this.value);t||($("#nota_fiscal_indicador_intermediador").val(null).trigger("change"),$("#nota_fiscal_inf_intermed_cnpj").val(null),$("#nota_fiscal_inf_intermed_id_cad_int_tran").val(null),$("#info_intermediador_box").toggle(!1)),$("#indicador_intermediador_box").toggle(t)}),$("#nota_fiscal_indicador_intermediador").on("change",function(){const t="site_ou_plataforma_terceiros"===this.value;t||($("#nota_fiscal_inf_intermed_id_cad_int_tran").val(null),$("#nota_fiscal_inf_intermed_cnpj").val(null)),$("#info_intermediador_box").toggle(t)});const togglePaymentDescription=()=>{const t="3"===$(".payment-mean-field").val();$(".payment-mean-description").toggle(t)};$(".payment-mean-field").on("change",function(){togglePaymentDescription()}),togglePaymentDescription();const lits_row=document.querySelectorAll("#cupom-fiscal-list tr");if(lits_row){let list=Array.from(lits_row);list.map(handleClickRow)}const cupomFiscalList=document.getElementById("cupom-fiscal-list");if(document.addEventListener("keyup",t=>{t.ctrlKey&&"i"===t.key&&cupomFiscalList&&submita("imprimir_nfces")}),cupomFiscalList){const imprimirNfeAutomaticamente=document.querySelector("#imprimir-nfe-automaticamente");if(imprimirNfeAutomaticamente){const getPrinter=window.localStorage.getItem("printer");getPrinter&&(imprimirNfeAutomaticamente.checked="true"==getPrinter),imprimirNfeAutomaticamente.addEventListener("change",t=>{window.localStorage.setItem("printer",t.target.checked)})}}$("#botao_status").hover(function(){"Aberto"==$(this).html()?($(this).html("Fechar"),$(this).css("color","#fcfff5"),$(this).css("background-color","#d9534f"),$(this).css("border-color","#d9534f")):($(this).html("Aberto"),$(this).css("color","#fcfff5"),$(this).css("background-color","#5cb85c"),$(this).css("border-color","#5cb85c"))}),$(document).ready(function(){adicionaPuAtacado(),$("#cupom_fiscal_entrega_a_domicilio").change();var t=valorTotalItem();$("#campo-valor-total").text("Valor Total: R$ "+formataFloat(t));var e=!1,i=[];$(window).keypress(function(t){t.which>=48&&t.which<=57&&i.push(String.fromCharCode(t.which)),0==e&&setTimeout(function(){if(i.length>=10){var t=i.join("");$("#barcode").val(t)}i=[],e=!1},500),e=!0}),tipoDesconto("#tipo-desconto"),$("#valor-desconto-total").val(""),adicionaCamposProduto(),preparaBotaoPagamento(),impedeSubmitBarCode(".codigo_item_cupom_fiscal"),aplicaValorTotal()}),$("#tipo-desconto").change(function(){tipoDesconto(this)}),$("#valor-desconto-total").on("focus",function(){limpaCampo(".desconto-item-cupom:visible"),aplicaValorTotal()}),$(document).on("nested:fieldAdded:forma_de_pagamento_cupom_fiscals",function(t){var e=t.link,i=t.field,n=$(i).find(".link_remove");switch($(e).addClass("disabled"),e.id){case"dinheiro":adicionaDocumentoId(i,t),hideReset(i,".parcela",".campo_parcela"),n.addClass("col-md-2");break;case"credito":adicionaDocumentoId(i,t),hideReset(i,".troco",".campo_dinheiro_recebido"),n.addClass("col-md-2");break;case"debito":adicionaDocumentoId(i,t),hideReset(i,".troco",".campo_dinheiro_recebido"),hideReset(i,".parcela",".campo_parcela"),n.addClass("col-md-10");break;case"cheque":adicionaDocumentoId(i,t),hideReset(i,".troco",".campo_dinheiro_recebido"),n.addClass("col-md-2");break;case"pix":adicionaDocumentoId(i,t),hideReset(i,".troco",".campo_dinheiro_recebido"),hideReset(i,".parcela",".campo_parcela"),n.addClass("col-md-10");break;default:console.log("Erro na adi\xe7\xe3o!")}addValor()}),$(document).on("nested:fieldAdded:item_cupom_fiscals",function(t){impedeSubmitBarCode(".codigo_item_cupom_fiscal");var e=t.field;$(e).find(".codigo_item_cupom_fiscal").focus(),$(".desconto-item-cupom:visible").each(function(){$(this).on("focus",function(){limpaCampo("#valor-desconto-total"),aplicaValorTotal()})})}),$(document).on("nested:fieldRemoved:forma_de_pagamento_cupom_fiscals",function(t){switch($(t.field).find(".documento_id").val()){case"4":$("#dinheiro").removeClass("disabled");break;case"6":$("#credito").removeClass("disabled");break;case"7":$("#debito").removeClass("disabled");break;case"5":$("#cheque").removeClass("disabled");break;case"54":$("#pix").removeClass("disabled");break;default:console.log("Erro ao remover!")}});var aplicaValorTotal=function(){var t=descontoSobTotal(valorTotalItem());return $("#cupom_fiscal_entrega_a_domicilio").is(":checked")&&(t+=parseFloatVirgula($("#cupom_fiscal_valor_frete").val())),$("#campo-valor-total").text("Valor Total: R$ "+formataFloat(t)),t};$(document).on("nested:fieldRemoved",aplicaValorTotal),$(document).on("change",".pu:visible",aplicaValorTotal),$(document).on("change",".qtde:visible",aplicaValorTotal),$(document).on("change",".desconto-item-cupom:visible",aplicaValorTotal),$(document).on("change",".desconto-total",aplicaValorTotal),$(document).on("change","#tipo-desconto",aplicaValorTotal),$(document).on("change","#cupom_fiscal_entrega_a_domicilio",aplicaValorTotal),$(document).on("change","#cupom_fiscal_valor_frete",aplicaValorTotal),$("#cpf_cupom_fiscal").autocomplete({source:$("#cpf_cupom_fiscal").data("autocomplete-source"),delay:1e3,minLength:3,response:function(t,e){0===$.grep(e.content,function(t){return t.value==$("#cpf_cupom_fiscal").val()}).length&&""!==$(this).val()&&e.content.unshift({id:0,label:$(this).val()+" (criar novo)",value:$(this).val()})},select:function(t,e){0===e.item.id&&$("div#formulario_novo_cliente_cupom_fiscal").dialog("open");$(this).data("id");$(".cliente_id").val(e.item.id),$(".cliente_nome").attr("placeholder","Nome do cliente: "+e.item.nome+".")}}),$("div#formulario_novo_cliente_cupom_fiscal").dialog({autoOpen:!1,height:600,width:710,resizable:!0,draggable:!1,modal:!0,buttons:{Salvar:function(){$("div#formulario_novo_cliente_cupom_fiscal").find("form").submit()},Cancelar:function(){$(this).dialog("close")}},open:function(){$("#cpf_cliente_cupom_fiscal").val($("#cpf_cupom_fiscal").val())}}),$("#cpf_cupom_fiscal").keyup(function(){this.value||($(".cliente_id").val(""),$(".cliente_nome").attr("placeholder","Cliente atual sem cadastro."))}),$(document).on("change","#cupom_fiscal_pessoa_id",function(t){let e=`/pessoas/${t.target.value}`;$.ajax({url:e,type:"GET",dataType:"json",success:t=>{null!=t.pessoa.comissao?$("#cupom_fiscal_comissao").val(t.pessoa.comissao):$("#cupom_fiscal_comissao").val(0)}})}),$(document).on("click",".botao-calculo:visible",function(t){if($(".campo_dinheiro_recebido:visible").val().length>0){var e=t.target.id.replace("botao_calculo_",""),i=formataFloat(decideTroco(parseFloatVirgula($(".campo_dinheiro_recebido:visible").val()),valorPagamentoAtual(e)));$(".campo-simulacao").text("R$ "+i)}else $(".campo-simulacao").text("R$ 0,00")}),$("#cupom_fiscal_entrega_a_domicilio").change(function(){this.checked?$(".campos-entrega-a-domicilio").show():$(".campos-entrega-a-domicilio").hide()}),$(".descricao_item_cupom_fiscal").each(function(){$(this).autocomplete({source:$(this).data("autocomplete-source"),select:function(t,e){var i=$(this).data("id"),n=$(".id_field[data-id="+i+"]"),o="#codigo_"+i,a="#campo_pu_"+i,r="#campo_qtde_"+i,s="#preco_atacado_"+i,l="#qtde_atacado_"+i;$(n).val(e.item.id),$(o).val(e.item.codigo),$(a).val(e.item.pu_saida_s),$(r).val("1"),$(s).val(e.item.pu_atacado),$(l).val(e.item.qtde_atacado),$(r).change(),aplicaValorTotal()}})}),$(".codigo_item_cupom_fiscal").each(function(){$(this).autocomplete({source:$(this).data("autocomplete-source"),select:function(t,e){var i=$(this).data("id"),n=$(".id_field[data-id="+i+"]"),o="#descricao_"+i,a="#campo_pu_"+i,r="#campo_qtde_"+i,s="#preco_atacado_"+i,l="#qtde_atacado_"+i;$(n).val(e.item.id),$(o).val(e.item.descricao),$(a).val(e.item.pu_saida_s),$(r).val("1"),$(s).val(e.item.pu_atacado),$(l).val(e.item.qtde_atacado),$(r).change(),aplicaValorTotal()}})}),$(document).on("nested:fieldAdded",function(t){var e=t.field,i=e.find(".descricao_item_cupom_fiscal"),n=e.find(".id_field"),o=e.find(".codigo_item_cupom_fiscal"),a=e.find(".pu"),r=e.find(".unidade-de-medida"),s=e.find(".unidade-de-medida-id"),l=e.find(".qtde"),c=e.find(".item_preco_atacado"),u=e.find(".item_qtde_atacado");i.autocomplete({source:i.data("autocomplete-source"),select:function(t,e){n.val(e.item.id),o.val(e.item.codigo),r.text(e.item.codigo_unidade_de_medida),s.val(e.item.id_unidade_de_medida),a.val(e.item.pu_saida_s),l.val("1"),c.val(e.item.pu_atacado),u.val(e.item.qtde_atacado),l.change(),aplicaValorTotal()}}),o.autocomplete({source:o.data("autocomplete-source"),select:function(t,e){n.val(e.item.id),o.val(e.item.codigo),r.text(e.item.codigo_unidade_de_medida),s.val(e.item.id_unidade_de_medida),i.val(e.item.descricao),a.val(e.item.pu_saida_s),l.val("1"),c.val(e.item.pu_atacado),u.val(e.item.qtde_atacado),l.change(),aplicaValorTotal()}}),adicionaPuAtacado()}),function(t){function e(e){const{id:i}=e.params.data;let n=listSubcategoria.filter(t=>t.top_category_id==i);t("#por_subcategoria_id").html(new Option("Subcategoria","",!1,!1)).trigger("change"),t("#por_subcategoria_id").select2({data:i?n:listSubcategoria,theme:"bootstrap",language:"pt-BR"})}function i(e){e.autocomplete({autoFocus:!0,source:function(i,n){t.getJSON(e.data("autocomplete-source"),{descricao:e.val(),nao_salvar_filtro:!0},n)},select:function(i,n){var o=t("#produto_estoque_produto_estoque_opcoes_propriedade_attributes_"+e.data("index")+"_valor_propriedade");o.val(""),o.autocomplete({source:n.item.opcoes})}})}function n(t){return parseFloat(t.replace(",","."))}function o(t){return t.toString().replace(".",",")}function a(e){t("#fator").val(e),t.each(t(".produto_conversao"),function(i,n){var a=t(n).data("qtde"),r=e*a;t(n).find(".nova_quantidade").text(o(r))}),t("#regiao_simulacao").show()}t(".popover-movimentacao").popover({placement:"top",trigger:"hover",html:!0}),t("#produto_estoque_acao_em_massa .row .submitavel").click(function(){t("#produto_estoque_acao_em_massa #acao_em_massa_action").val(t(this).data("action")),t("#produto_estoque_acao_em_massa").submit()}),t("#produto_estoque_unidade_de_medida_nome").length>0&&(t("#produto_estoque_unidade_de_medida_nome").autocomplete({autoFocus:!0,source:t("#produto_estoque_unidade_de_medida_nome").data("autocomplete-source"),minLength:0,autofocus:!0}),t("#produto_estoque_unidade_de_medida_nome").focus(function(){t(this).autocomplete("search","")})),t("#produto_estoque_classificacao_fiscal_codigo").length>0&&(t("#produto_estoque_classificacao_fiscal_codigo").autocomplete({autoFocus:!0,source:t("#produto_estoque_classificacao_fiscal_codigo").data("autocomplete-source"),minLength:0,autofocus:!0}),t("#produto_estoque_classificacao_fiscal_codigo").focus(function(){t(this).autocomplete("search","")})),t("#por_top_category_id").on("select2:select",function(t){e(t)}),t("#produto_estoque_top_category_description").autocomplete({autoFocus:!0,source:function(e,i){t.getJSON(t("#produto_estoque_top_category_description").data("autocomplete-source"),{description:t("#produto_estoque_top_category_description").val(),nao_salvar_filtro:!0},i)},select:function(e,i){t("#produto_estoque_category_description").val(""),t("#produto_estoque_category_description").autocomplete({source:i.item.subcategorias})}}),t(".codigo_materia").each(function(){t(this).autocomplete({autoFocus:!0,source:t(this).data("autocomplete-source"),select:function(e,i){var n=t(this).data("id"),o=t(".id_field[data-id="+n+"]");t(o).val(i.item.id);var a=t(".unidade_de_medida_composicao[data-id="+n+"]");t(a).html(i.item.codigo_unidade_de_medida)}})}),t(document).on("nested:fieldAdded",function(t){var e=t.field,i=e.find(".codigo_materia"),n=e.find(".id_field"),o=e.find(".unidade_de_medida_composicao");i.autocomplete({autoFocus:!0,source:i.data("autocomplete-source"),select:function(t,e){n.val(e.item.id),o.html(e.item.codigo_unidade_de_medida)}})}),t(".autocomplete-propriedade").each(function(){i(t(this))}),t(document).on("nested:fieldAdded:produto_estoque_opcoes_propriedade",function(t){i(t.field.find(".autocomplete-propriedade"))}),t("#seleciona_todos").click(function(){t(".listagem input:checkbox").prop("checked",this.checked)}),t("#nova_unidade_de_medida").on("change",function(){t(".nova_unidade").text(t(this).find("option:selected").text()),t("#unidade_escolhida").show()}),t("#fator_de").on("keypress",function(e){e.which&&t("#fator_para").val("")}),t("#fator_para").on("keypress",function(e){e.which&&t("#fator_de").val("")}),t("#fator_de").on("keyup",function(e){var i=n(t(this).val());i?a(i):9!=e.keyCode&&(t("#fator").text(""),t("#regiao_simulacao").hide())}),t("#fator_para").on("keyup",function(e){var i=n(t(this).val());i?a(1/i):9!=e.keyCode&&(t("#fator").text(""),t("#regiao_simulacao").hide())}),t(document).ready(function(){impedeSubmitBarCode(".codigo-gtin")}),t("#produto_estoque_pessoa_token").tokenInput("/pessoas/busca_vendedores.json",{crossDomain:!1,prePopulate:t("#produto_estoque_pessoa_token").data("pre"),theme:"facebook"}),t("#seleciona_todos_produtos_armazenados").on("change",function(){t(".checkbox_produtos_armazenados").each(function(){1==t("#seleciona_todos_produtos_armazenados").prop("checked")?(t(this).prop("checked",!0),t(this).trigger("change")):(t(this).prop("checked",!1),t(this).trigger("change"))})}),t("#campo_tabela_atacado").change(function(){""!=t(this).val()&&jQuery.ajax({url:"/tabela_de_vendas/"+t(this).val()+"/busca_fator",type:"GET",dataType:"json",success:function(e){if(""!=t("#pu_saida").val()){var i=(e*parseFloat(t("#pu_saida").val())).toFixed(2);t("#preco_atacado_produto_estoque").val(i.replace(".",","))}}})});const r=t("#produto_estoque_classificacao_fiscal_codigo").val();r&&verificaNcmVeiculo(r)}(jQuery),$(".filtro_produto_saida").on("change",function(){"xlsx"===$(this).val()?$("#saida_excel_resumido").css("display","block"):($("#saida_excel_resumido").css("display","none"),$("#excel_resumido").attr("checked",!1))}),$("#gerar_gtin").on("click",function(t){t.preventDefault(),$("#produto_estoque_codigo_de_barras_interno").val(gtin14Gen())}),$("#produto_estoque_classificacao_fiscal_codigo").on("change",function(){const t=$(this).val();verificaNcmVeiculo(t),$("#carregando_produto_estoqu_cest").show(),$("#div_cests").hide(),request_cests=$.ajax("/cests/select_cests",{data:{ncm:t.replace(/\./g,"")},suppressErrors:!0}),request_cests.done(function(t){$("#carregando_produto_estoqu_cest").hide(),$("#div_cests").show(),$("#div_cests").html(t),aplicaChosenSelect()});var e=$.ajax("/parametros_classificacao_fiscals/pega_mva",{data:{classificacao:t},dataType:"script",suppressErrors:!0});e.done(function(t){$("#produto_estoque_p_mva").val(t),""!=t&&alert("Aten\xe7\xe3o! Essa classifica\xe7\xe3o fiscal possui mva cadastrado. Caso o produto n\xe3o possua substitui\xe7\xe3o tribut\xe1ria, por favor, apague o campo mva original")}),e.fail(function(t){console.log(t.responseText)})}),$(".verifica_codigo").on("change",function(){$.ajax({url:"/produto_estoques/verifica_se_codigo_existe",type:"POST",dataType:"json",data:{codigo:this.value},success:function(t){t?$("#aviso_codigo_duplicado").show():$("#aviso_codigo_duplicado").hide()}})}),$(".chosen-select-modal-cadastra-produto").select2({theme:"bootstrap",language:"pt-BR",minimumResultsForSearch:10,dropdownParent:$("#modalCadastrarProduto")}),$("#modalCadastrarProduto .ui-autocomplete-input").autocomplete({appendTo:"#modalCadastrarProduto"}),$("#produto_estoque_tipo_de_medida").on("change",function(){const t=$("#produto_estoque_tipo_de_medida");$(".tipo_medida_utilizador").text(tipoDeMedidaText(t))}),function(t){t("#movimentacao_estoque_nfe_associada").on("click",function(){t(this).is(":checked")?t("#linha_numero_nfe").show():(t("#linha_numero_nfe").hide(),
t("#movimentacao_estoque_numero_nfe").val(""),t('input[name="movimentacao_estoque[dthr_confirmacao]"]').val(null),t("#data_emissao").hide(),t("#lista_produtos").hide())}),t("#movimentacao_estoque_numero_nfe").on("blur",function(){t(this).val()&&t.getScript("/nota_fiscals/search.js?numero_nfe="+t(this).val())}),t("#lista_produtos").on("click",'input[name="movimentacao_estoque[mov_estoque_nota_fiscal_id]"]',function(){var e=t(this).closest("tr").data("quantidade"),i=t(this).closest("tr").data("preco-unitario"),n=t(this).closest("tr").data("tipo-movimentacao");t("#movimentacao_estoque_qtde").val(e).effect("highlight",{},4e3),""==t("#movimentacao_estoque_pu").val()&&t("#movimentacao_estoque_pu").val(i).effect("highlight",{},4e3),t("#movimentacao_estoque_d_tipo_movimentacao").val(n).effect("highlight",{},4e3)}),t(".acoes_coletivas_tag").on("click",function(e){e.preventDefault();let i=t(this).data("name");"Excluir em massa"===i&&(t("#commit").val(i),deleteRecords())})}(jQuery),jQuery(function(t){function e(e){let i=document.querySelectorAll('#acoes_coletivas_contas_a_recebers input[type="checkbox"]:checked'),n=Array.from(i).filter(t=>"false"===t.parentElement.dataset.podeAlterarRecebimentoConciliado);if(n.length>0){let t=[];return n.forEach(e=>{t.push(e.parentElement.dataset.numeroTitulo)}),swal("Ops!","H\xe1 recebimento(s) j\xe1 conciliado(s) na sele\xe7\xe3o e voc\xea n\xe3o possui permiss\xe3o para alter\xe1-lo(s). Desmarque o(s) seguinte(s) recebimento(s) para prosseguir:<br>"+t.join(", ")+".","warning"),!1}t("#commit").val(e),t("#acoes_coletivas_contas_a_recebers").submit()}function i(t){if(o){let e=2==t?"block":"none";o.style.display=e}}t("#seleciona_todos").on("click",function(){t('input[name="seleciona[]"]:enabled').prop("checked",t(this).is(":checked"))}),t("#contas_a_receber_numero_nota_fiscal").autocomplete({autoFocus:!0,source:t("#contas_a_receber_numero_nota_fiscal").data("autocomplete-source"),delay:800,select:function(t,e){busca_nfe_car(e)}}),t("#contas_a_receber_numero_nota_fiscal").on("keyup paste change cut",function(){""==t(this).val()&&t("#contas_a_receber_nota_fiscal_id").val("")}),t("#contas_a_receber_pessoa_token").length>0&&t("#contas_a_receber_pessoa_token").tokenInput("/pessoas/busca_vendedores.json",{crossDomain:!1,prePopulate:t("#contas_a_receber_pessoa_token").data("pre"),theme:"facebook"}),t("#mostrar").bind("change",function(){t(this).is(":checked")?(t(".avalista_documento").show(),t("#contas_a_receber_cliente_id").prop("disabled",!0)):(t(".avalista_documento").hide(),t("#contas_a_receber_cliente_id").prop("disabled",!1))}),t("#contas_a_receber_data_pagamento").change(function(){moment(t(this).val(),"DD/MM/YYYY")>moment()&&alert("Aten\xe7\xe3o! Voc\xea est\xe1 informando uma data de recebimento futura.")}),t(".acoes_coletivas_tag").on("click",function(i){i.preventDefault();var n=t(this).data("name");if("Alterar selecionados"===n){let e=t(this).data("url");var o=document.querySelectorAll('#acoes_coletivas_contas_a_recebers input[type="checkbox"]:checked');o&&o.length>0?modalAcoesEmMassa(o,e):swal("Ops!","Nenhuma conta selecionada","warning")}else"Dar baixa em massa"===n?e(n):(t("#commit").val(n),t("#acoes_coletivas_contas_a_recebers").submit())}),input_total(".valor_recebido","#total_valor_receber"),t("#input_valor_recebido").length>0&&calcula_e_preenche_valor_inputs(t("#input_valor_recebido"),t("#input_valor_liquido"),t("#input_desconto"),t("#input_juros"));const n=document.querySelector("#contas_a_receber_documento_id"),o=document.querySelector("#el-heading-info-sale");null!=n&&n.value&&i(n.value),t("#contas_a_receber_documento_id").on("select2:select",function(t){i(t.target.value)})}),$("#contas_a_receber_moeda_id").on("change",()=>{let t=$("#contas_a_receber_moeda_id option:selected"),e="true"===t.attr("data-estrangeira");$("#taxa-cambio-field").toggle(e),$("#payment-box-cc").toggle(!e),e?($("#baixa-parcial").hide(),exibieRecebido(!$("#repetir_conta").is(":checked")),$("#contas_a_receber_taxa_cambio").val(t.attr("data-cambio"))):($("#baixa-parcial").show(),exibieRecebido(!0),$("#contas_a_receber_taxa_cambio").val("")),$(".currency-label").text(t.attr("data-label"))}),$(".botao-de-boleto-desabilitado").on("click",function(t){t.preventDefault(),exibe_mensagem_com_status("N\xe3o foi poss\xedvel gerar o boleto pois n\xe3o possui o valor m\xednimo para boleto. Valor m\xednimo: R$ 7,50","alert")}),$("#alterar_dados_de_cobranca").on("click",function(){$(".dados_de_cobranca").prop("readonly",!$(this).is(":checked"))}),$("#valor_a_receber_em_massa").on("change",function(){var t=$("#valor_a_receber_em_massa").val();$(".valor_recebido").val(t)}),$("#data_pagamento_em_massa").on("change",function(){var t=$("#data_pagamento_em_massa").val();$(".data_pagamento").val(t)}),$("#data_vencimento_em_massa").on("change",function(){var t=$("#data_vencimento_em_massa").val();$(".data_vencimento").val(t)}),$("#forma_de_pagamento_id_em_massa").on("change",function(){var t=$("#forma_de_pagamento_id_em_massa").val();$(".forma_de_pagamento_id").val(t),$(".forma_de_pagamento_id").trigger("change")}),$("#conta_corrente_id_em_massa").on("change",function(){var t=$("#conta_corrente_id_em_massa").val();$(".conta_corrente_id").val(t),$(".conta_corrente_id").trigger("change")}),$("#contas_a_receber_conta_corrente_id").on("change",function(){$("#contas_a_receber_conta_corrente_id option:selected").data("gera-boleto-pjbank")?($(".campos-boleto-padrao").hide(),$(".campos-boleto-pjbank").show()):($(".campos-boleto-pjbank").hide(),$(".campos-boleto-padrao").show()),(0===$("#alterar_dados_de_cobranca").length||$("#alterar_dados_de_cobranca").is(":checked"))&&$.ajax({url:"/contas_correntes/"+$("#contas_a_receber_conta_corrente_id option:selected").val(),type:"GET",suppressErrors:!0,dataType:"JSON",success:function(t){$("#contas_a_receber_instrucao1").val(t.conta_corrente.instrucao1),$("#contas_a_receber_instrucao2").val(t.conta_corrente.instrucao2),$("#contas_a_receber_instrucao3").val(t.conta_corrente.instrucao3),$("#contas_a_receber_instrucao4").val(t.conta_corrente.instrucao4),$("#contas_a_receber_instrucao5").val(t.conta_corrente.instrucao5),$("#contas_a_receber_instrucao6").val(t.conta_corrente.instrucao6),$("#contas_a_receber_instrucoes_texto").val(t.conta_corrente.instrucoes_texto),$("#contas_a_receber_percentual_multa").val(t.conta_corrente.percentual_multa),$("#contas_a_receber_percentual_mora_diaria").val(t.conta_corrente.percentual_mora_diaria),$("#contas_a_receber_percentual_mora_mensal").val(t.conta_corrente.percentual_mora_mensal),applyMask()}})}),$("#contas_a_receber_cliente_cnpj").autocomplete({autoFocus:!0,source:$("#contas_a_receber_cliente_cnpj").data("autocomplete-source"),delay:1e3,minLength:3,response:function(t,e){0===$.grep(e.content,function(t){return t.value==$("#contas_a_receber_cliente_cnpj").val()}).length&&""!==$(this).val()&&e.content.unshift({id:0,label:$(this).val()+" (criar novo)",value:$(this).val()})},select:function(t,e){0===e.item.id&&$("div#formulario_novo_stakeholder").dialog("open"),$("#contas_a_receber_stakeholder_cliente_id").val(e.item.id),autocompleteReceivableFieldsByCliente(e.item,"contas_a_receber")}}),$("#contas_a_receber_cliente_cnpj").keyup(function(){""===$(this).val()&&$("#contas_a_receber_stakeholder_cliente_id").val("")});const contasReceberBaixado=document.querySelector("#contas_a_receber_baixado");null!=contasReceberBaixado&&triggerContasReceberBaixado(contasReceberBaixado),$("#contas_a_receber_baixado").on("click",function(){triggerContasReceberBaixado($(this))}),$("#repetir_conta").on("change",function(){let t="true"===$("#contas_a_receber_moeda_id option:selected").attr("data-estrangeira");$(this).is(":checked")?exibieRecebido(!t):exibieRecebido(!0)}),$("#contas_a_receber_documento_id").on("change",function(){var t=$("#contas_a_receber_documento_id option:selected"),e=t.data("raises-warning"),i=t.data("current-document");e&&t.val()!=i&&swal({title:"Aten\xe7\xe3o! Ao atualizar a forma de pagamento, o boleto ser\xe1 cancelado",text:"Deseja confirmar a altera\xe7\xe3o?",type:"warning",showCancelButton:!0,confirmButtonColor:"#2A578C",cancelButtonColor:"#F00F00",confirmButtonText:"Sim",cancelButtonText:"N\xe3o"})["catch"](function(){$("#contas_a_receber_documento_id").val(i);let t=$(`#contas_a_receber_documento_id option[value="${i}"]`);return $("#select2-contas_a_receber_documento_id-container").text(t.text()),!1})}),$("#conta_a_pagar_data_pagamento").on("change",function(){moment($(this).val(),"DD/MM/YYYY")>moment()&&alert("Aten\xe7\xe3o! Voc\xea est\xe1 informando uma data de recebimento futura.")}),$('input[name="conta_a_pagar_nota_ou_aquisicao"]').on("change",function(){"nota_fiscal"==$(this).val()?($("#div_conta_a_pagar_nota_fiscal").show(),$("#div_conta_a_pagar_aquisicao_nacional").hide()):"aquisicao_nacional"==$(this).val()&&($("#div_conta_a_pagar_aquisicao_nacional").show(),$("#div_conta_a_pagar_nota_fiscal").hide())}),$("#conta_a_pagar_numero_nota_fiscal").autocomplete({autoFocus:!0,source:$("#conta_a_pagar_numero_nota_fiscal").data("autocomplete-source"),delay:800,select(t,e){busca_nfe_conta_a_pagar(e)}}),$("#conta_a_pagar_numero_nota_fiscal").on("keyup paste change cut",function(){""==$(this).val()&&$("#conta_a_pagar_nota_fiscal_id").val("")}),$("#conta_a_pagar_numero_compra").autocomplete({autoFocus:!0,source:$("#conta_a_pagar_numero_compra").data("autocomplete-source"),delay:800,select(t,e){busca_compra_conta_a_pagar(e)}}),$("#conta_a_pagar_numero_compra").on("keyup paste change cut",function(){""==$(this).val()&&$("#conta_a_pagar_compra_id").val("")}),$("#conta_a_pagar_processo_id").on("change",toggleCheckboxCustoDeMercadoria),$(document).on("ready",function(){toggleCheckboxCustoDeMercadoria();const t=$("#fatura_forma_pagamento");t.length>0&&t.trigger("change")}),$("#conta_a_pagar_moeda_id").on("change",()=>{var t=$("#conta_a_pagar_moeda_id option:selected"),e="true"===t.attr("data-estrangeira");$("#campo-taxa-cambio").toggle(e),e?(paidDisplays($("#repetir_conta").is(":not(:checked)")),$("#conta_a_pagar_taxa_cambio").val(t.attr("data-cambio"))):(paidDisplays(!0),$("#conta_a_pagar_taxa_cambio").val("")),$(".custom-addon").text(t.attr("data-label"))}),$("#conta_a_pagar_stakeholder_cnpj").autocomplete({autoFocus:!0,source:$("#conta_a_pagar_stakeholder_cnpj").data("autocomplete-source"),delay:1e3,minLength:3,response:function(t,e){0===$.grep(e.content,function(t){return t.value==$("#conta_a_pagar_stakeholder_cnpj").val()}).length&&""!==$(this).val()&&e.content.unshift({id:0,label:$(this).val()+" (criar novo)",value:$(this).val()})},select:function(t,e){0===e.item.id&&$("div#formulario_novo_stakeholder").dialog("open"),$("#conta_a_pagar_stakeholder_id").val(e.item.id),null!=e.item.plano_de_conta&&planoDeContaToReact(e.item.plano_de_conta),autocompletePayableFieldsByFornecedor(e.item,"conta_a_pagar")}}),$("#conta_a_pagar_stakeholder_cnpj").keyup(function(){""===$(this).val()&&$("#conta_a_pagar_stakeholder_id").val("")}),$("#conta_a_pagar_taxa_cambio").on("change",()=>{var t=to_float($("#conta_a_pagar_taxa_cambio").val())*to_float($("#conta_a_pagar_valor").val());$("#conta_a_pagar_valor_pago").val(formata_numero(t))}),$(".mass_action").on("click",function(t){t.preventDefault();let e=$(this).data("name");if("Alterar em massa"===e){let t=$(this).data("url");var i=document.querySelectorAll('#acoes_coletivas_conta_a_pagars input[type="checkbox"]:checked');i&&i.length>0?modalAcoesEmMassaCp(i,t):swal("Ops!","Nenhuma conta selecionada","warning")}else"Dar baixa em massa"===e?validaBaixaEmMassa(e):($("#commit").val(e),$("#acoes_coletivas_conta_a_pagars").submit())}),$("#repetir_conta").on("change",function(){let t="true"===$("#conta_a_pagar_moeda_id option:selected").attr("data-estrangeira");$(this).is(":checked")?paidDisplays(!t):paidDisplays(!0)}),$("#configuracao_allows_dismember_sales_order").on("switchChange.bootstrapSwitch",settingsDismemberSalesOrder),$("#configuracao_allows_dismember_sales_order").on("init.bootstrapSwitch",settingsDismemberSalesOrder);const indicadorIntermediador=$("#configuracao_indicador_intermediador");verificaPresencaIntermediador(indicadorIntermediador.val()),null!=indicadorIntermediador.value&&verificaPresencaIntermediador(indicadorIntermediador.val()),indicadorIntermediador.change(function(){verificaPresencaIntermediador($(this).val())}),hideOrShowTransportadoraPadraoVtex(),$("#configuracao_tipo_pedido_vtex").on("change",()=>{hideOrShowTransportadoraPadraoVtex()}),$(document).on("ready",()=>{mostra_div_custo_recorrencia()}),$("#configuracao_recorrencia_status").on("change",function(){mostra_div_custo_recorrencia(),"credito"===this.value?($('label[for="configuracao_recorrencia_numero_titulo"]').text("N\xfamero do t\xedtulo *"),$("#numero_fatura").show(),$("#cliente_field").show(),$("#fornecedor_field").hide(),$("#documento_fiscal_field").hide(),$("#select_plano_de_contas_receitas").show(),$("#select_plano_de_contas_despesas").hide()):($('label[for="configuracao_recorrencia_numero_titulo"]').text("C\xf3digo *"),$("#numero_fatura").hide(),$("#cliente_field").hide(),$("#fornecedor_field").show(),$("#documento_fiscal_field").show(),$("#select_plano_de_contas_receitas").hide(),$("#select_plano_de_contas_despesas").show()),$("#configuracao_recorrencia_plano_de_conta_id").val("")}),$(".tipo-termino").on("change",function(){$("#configuracao_recorrencia_total_ocorrencia").hide(),$("#configuracao_recorrencia_data_termino").hide(),$("#configuracao_recorrencia_tipo_termino_apos_ocorrencia").is(":checked")?$("#configuracao_recorrencia_total_ocorrencia").show():$("#configuracao_recorrencia_tipo_termino_apos_data").is(":checked")&&$("#configuracao_recorrencia_data_termino").show()}),$("#configuracao_recorrencia_cliente_cnpj").autocomplete({autoFocus:!0,source:$("#configuracao_recorrencia_cliente_cnpj").data("autocomplete-source"),delay:1e3,minLength:3,response:function(t,e){0===$.grep(e.content,function(t){return t.value==$("#configuracao_recorrencia_cliente_cnpj").val()}).length&&""!==$(this).val()&&e.content.unshift({id:0,label:$(this).val()+" (criar novo)",value:$(this).val()})},select:function(t,e){0===e.item.id&&($("div#formulario_novo_stakeholder").dialog("open"),$("#input-tipos-stakeholder").val("cliente")),$("#configuracao_recorrencia_stakeholder_id").val(e.item.id),autocompleteReceivableFieldsByCliente(e.item,"configuracao_recorrencia")}}),$("#configuracao_recorrencia_cliente_cnpj").keyup(function(){""===$(this).val()&&$("#configuracao_recorrencia_stakeholder_id").val("")}),$("#configuracao_recorrencia_stakeholder_cnpj").autocomplete({autoFocus:!0,source:$("#configuracao_recorrencia_stakeholder_cnpj").data("autocomplete-source"),delay:1e3,minLength:3,response:function(t,e){0===$.grep(e.content,function(t){return t.value==$("#configuracao_recorrencia_stakeholder_cnpj").val()}).length&&""!==$(this).val()&&e.content.unshift({id:0,label:$(this).val()+" (criar novo)",value:$(this).val()})},select:function(t,e){0===e.item.id&&($("div#formulario_novo_stakeholder").dialog("open"),$("#input-tipos-stakeholder").val("fornecedor")),$("#configuracao_recorrencia_stakeholder_id").val(e.item.id),autocompletePayableFieldsByFornecedor(e.item,"configuracao_recorrencia")}}),$("#configuracao_recorrencia_stakeholder_cnpj").keyup(function(){""===$(this).val()&&$("#configuracao_recorrencia_stakeholder_id").val("")}),$("#repetir_conta").on("change",function(){$(this).is(":checked")?$("#campos_repetir_conta").show():($("#campos_repetir_conta").hide(),$("#campos_repetir_conta #quantidade_parcelas").val(""),$("#div_contas_em_massa").html(""),$("#div_contas_em_massa").hide())}),["#contas_a_receber_numero_titulo","#contas_a_receber_valor_a_receber","#contas_a_receber_data_prevista","#conta_a_pagar_numero_documento","#conta_a_pagar_valor","#conta_a_pagar_data_vencimento","#data_sinal","#valor_sinal","#quantidade_parcelas","#range","#tipo_range","#sufixo"].forEach(function(t){$(t).on("change",exibeResumoParcelas)}),$("#conta_a_pagar_moeda_id").on("change",preencher_moeda_label),jQuery(function(t){t("#valor_a_pagar_em_massa").on("change",function(){var e=t("#valor_a_pagar_em_massa").val();t(".valor_pago").val(e)}),t("#data_pagamento_em_massa").on("change",function(){var e=t("#data_pagamento_em_massa").val();t(".data_pagamento").val(e)}),t("#data_credito_em_massa").on("change",function(){var e=t("#data_credito_em_massa").val();t(".data_credito").val(e)}),t("#forma_de_pagamento_id_em_massa").on("change",function(){var e=t("#forma_de_pagamento_id_em_massa").val();t(".forma_de_pagamento_id").val(e),t(".forma_de_pagamento_id").trigger("change")}),input_total(".valor_pago","#total_valor_pagar")});const codigoIcmsTributadoIntegralmente="4",codigoIcmsTributadoPorSt="5",codigoIcmsComReducaoNaBaseDeCalculo="6",codigoIcmsIsento="8",codigoIcmsOutros="14",codigosIcmsDiferimentoNaoPermitido=[codigoIcmsTributadoIntegralmente,codigoIcmsTributadoPorSt,codigoIcmsComReducaoNaBaseDeCalculo,codigoIcmsIsento,codigoIcmsOutros],codigosBeneficioFiscalNaoPermitido=[codigoIcmsTributadoPorSt,codigoIcmsIsento,codigoIcmsOutros];var codigo_produto,descricao_produto,preenche_produto;jQuery(function(t){function e(t,e){t.removeClass("btn-default"),e.removeClass("btn-primary"),e.addClass("btn-default"),t.addClass("btn-primary")}function i(e,i){e.forEach(e=>{t(e)[0]&&"SELECT"===t(e)[0].tagName?t(e).prop("disabled",i):habilita_ou_desabilita_campos(e,i)})}function n(e){"1"==e?(t(".dados_terceiros").prop("disabled",!0),t(".dados_terceiros").val(null).trigger("change",!0)):t(".dados_terceiros").prop("disabled",!1)}function o(){t("#di_admissao_temporaria").is(":checked")?habilita_ou_desabilita_campos(".campos_admissao_temporaria",!1):habilita_ou_desabilita_campos(".campos_admissao_temporaria",!0)}function a(t,e){return(e*(1-t/100)).toFixed(4)}function r(t,e){return(100*(1-t/e)).toFixed(4)}function s(e){var i=t("#p_icms_bc_"+e).val(),n=t("#icms_ja_reduzido_"+e).is(":checked");i&&w(i)>0||n?t("#motivo_desoneracao_id_"+e).prop("disabled",!1):t("#motivo_desoneracao_id_"+e).prop("disabled",!0)}function l(){var e=t(this).data("id");t("#percentual_diferimento_"+e).prop("disabled",t(this).is(":checked"))}function c(){var e=t(this).data("id");t("#p_icms_bc_"+e).prop("disabled",t(this).is(":checked")),s(e),t(this).is(":checked")&&t("#possui_reducao_bc_icms_"+e).val(!0)}function u(){var e=t(this).data("id");t("#valor_icms_"+e).prop("disabled",t(this).is(":checked"))}function d(){var e=t("#progresso-finalizacao-di").data("chave");e&&t.get("/download_files/"+e+"/progresso",function(e){e.progresso&&t("#progresso-finalizacao-di").find(".progress-bar").css("width",e.progresso+"%").attr("aria-valuenow",e.progresso).text(e.progresso+"%"),"100"===e.progresso?t.ajax({url:"/dis/"+t("#progresso-finalizacao-di").data("diId"),type:"GET",dataType:"JSON",success:function(t){window.location.href="/nota_fiscals/"+t.di.nota_fiscal_id}}):setTimeout(d,1e3)})}function p(e){t(".acoes-submit-di").prop("disabled",!0),t("#destino").val(t(e).data("action")),t("#adicao_destino_id").val(t(e).data("adicao-id")),t("#item_di_destino_id").val(t(e).data("item-di-id")),t("#di-form").submit()}function h(){var e=0;t(".selecao_produtos").each(function(){var i=t(this).attr("id"),n=t("#"+i+" option").size();2==n?t("#"+i+" option:eq(1)").prop("selected",!0):n>2&&(t("#"+i+" option:eq(1)").prop("selected",!0),e+=1,t(this).closest("tr").css("border","dotted")),t(this).trigger("change",!0)}),e>0&&exibe_mensagem_com_status("Aten\xe7\xe3o! Os itens destacados com pontilhado possuem mais de um produto no estoque com mesmo c\xf3digo e unidade de medida. O sistema ir\xe1 associar automaticamente essa entrada a um desses produtos, mas voc\xea pode alterar esse comportamento selecionando outro item na coluna Produto, ou ainda  selecionar a op\xe7\xe3o X produto(s) encontrado(s) para que esse item entre como um novo produto.","info")}function f(e){var i,n,o,a,r,s,l,c,u,d,p,h="#"+e;t(h+"_p_icms").length>0&&($p_dif=t(h+"_percentual_diferimento"),i=to_float(t(h+"_p_icms").val()),n=to_float(t(h+"_p_fcp").val()),p_icms_total=i+n,o=to_float(t(h+"_valor_icms").val()),a=t(h+"_icms_ja_diferido").is(":checked"),r=$p_dif.val()?to_float($p_dif.val()):0,a&&r&&(o/=1-r/100),s=n/p_icms_total*o,u=(l=i/p_icms_total*o)-(c=l*(r/100)),p=s-s*(r/100),d=p_icms_total-p_icms_total*(r/100),t("#p_icms_total").text(formata_numero(i)+"% + "+formata_numero(n)+"% = "+formata_numero(p_icms_total)+"%"),t("#v_icms_sem_fcp").text("R$ "+formata_numero(l||0)),t("#v_fcp").text("R$ "+formata_numero(s||0)),t("#v_icms_final").text("R$ "+formata_numero(u||0)),t("#v_fcp_final").text("R$ "+formata_numero(p||0)),t("#p_icms_efetivo").text(formata_numero(d||0)+"%"),t(".possui_fcp").toggle(!!s&&s>0),t(".possui_diferimento").toggle(!!c&&c>0))}function m(){let e=["#di_motivo_desoneracao_id"],n=parseInt(t("#di_situacao_tributaria_b_id option:selected").data("codigo"));[0,10,51].includes(n)?i(e,!0):i(e,!1)}function g(){let e=["#di_p_mva"],n=parseInt(t("#di_situacao_tributaria_b_id option:selected").data("codigo"));[0,20,40,41,50,51].includes(n)?i(e,!0):i(e,!1)}function v(){let e=["#di_percentual_diferimento"],n=parseInt(t("#di_situacao_tributaria_b_id option:selected").data("codigo"));[51,90].includes(n)?i(e,!1):i(e,!0)}function _(){let e=parseInt(t("#di_situacao_tributaria_b_id option:selected").data("codigo"));[0,10,30,40,41,50,51].includes(e)?(t("#di_p_icms_bc").val(""),t("#di_p_icms_bc").attr("readonly",!0),t("#di_possui_reducao_bc_icms").prop("checked",!1)):(t("#di_p_icms_bc").attr("readonly",!1),t("#di_possui_reducao_bc_icms").prop("checked",!0))}function b(){let e=["#di_icms_ja_diferido"],n=parseInt(t("#di_situacao_tributaria_b_id option:selected").data("codigo")),o=[51,90],a=t("#calcular_pelo_sistema");o.includes(n)&&!a.hasClass("btn-primary")?i(e,!1):i(e,!0)}function y(){let e=["#di_icms_ja_reduzido"],n=parseInt(t("#di_situacao_tributaria_b_id option:selected").data("codigo")),o=[0,10,30,40,41,50,51],a=t("#calcular_pelo_sistema").hasClass("btn-primary");o.includes(n)?i(e,!0):i(e,a)}if(t("#formulario_nova_transportadora").dialog({autoOpen:!1,width:440,modal:!0,buttons:[{text:"Salvar",click:function(){t("#formulario_nova_transportadora").find("form").submit()}},{text:"Cancelar",click:function(){t(this).dialog("close")}}],open:function(){t("#transportadora_razao_social").val(t("#di_transportadora_nome").val())}}),t("#cadastro_de_icms_para_adicao_em_massa").toggle(t("#di_multiplos_icms").is(":checked")),habilita_ou_desabilita_campos(".possui_reducao_icms",!t("#adicao_possui_reducao_bc_icms").is(":checked")),t(document).ready(function(){if(t("#botao_icms_em_massa").hasClass("btn-primary")){i(["#di_p_icms","#di_situacao_tributaria_b_id","#di_p_fcp","#di_beneficio_fiscal"],!0)}if(t("#di_multiplos_icms").is(":checked")&&e(t("#botao_icms_em_massa"),t("#informar_por_di")),!t("#di_calcular_icms").is(":checked")){e(t("#informar_manualmente"),t("#calcular_pelo_sistema")),i(["#di_valor_icms"],!1)}}),t("#calcular_pelo_sistema").on("click",function(){e(t(this),t("#informar_manualmente")),i(["#di_valor_icms","#di_icms_ja_diferido","#di_icms_ja_reduzido"],!0),t("#di_calcular_icms").prop("checked",!0)}),t("#informar_manualmente").on("click",function(){e(t(this),t("#calcular_pelo_sistema")),i(["#di_valor_icms","#di_icms_ja_diferido","#di_icms_ja_reduzido"],!1),t("#di_calcular_icms").prop("checked",!1),b(),y()}),t("#di_icms_ja_reduzido").on("click",function(){1==t(this).is(":checked")&&t("#di_icms_ja_reduzido").val(1)}),t("#informar_por_di").on("click",function(){t("#di_multiplos_icms").prop("checked",!1),e(t(this),t("#botao_icms_em_massa")),i(["#di_icms_orig_id, #motivo_desoneracao_id","#di_p_mva","#di_p_icms","#di_situacao_tributaria_b_id","#di_p_fcp","#di_beneficio_fiscal"],!1)}),t("#botao_icms_em_massa").on("click",function(){e(t(this),t("#informar_por_di")),t("#di_multiplos_icms").prop("checked",!0)}),t("#di_multiplos_icms").on("change",function(){t("#botao_icms_em_massa").prop("disabled",!t(this).is(":checked")),t("#cadastro_de_icms_para_adicao_em_massa").toggle(),i([".sem_multiplos_icms","#di_situacao_tributaria_b_id","#di_icms_orig_id"],t("#di_multiplos_icms").is(":checked")),habilitaDesabilitaCamposDiferimento(),habilitaDesabilitaCampoReducaoBC()}),t("#di_calcular_icms").on("change",function(){i([".campos_valor_icms","#adicao_valor_icms","#di_valor_icms"],t(this).is(":checked"))}),t("#di_multiplos_icms").prop("checked")){t("#botao_icms_em_massa").prop("disabled",!t("#di_multiplos_icms").is(":checked")),i([".sem_multiplos_icms","#di_situacao_tributaria_b_id","#di_icms_orig_id","#di_valor_icms","#di_percentual_diferimento"],!0)}if(t("#di_calcular_icms").prop("checked")){i([".campos_valor_icms","#adicao_valor_icms","#di_valor_icms"],!0)}t("#adicao_possui_reducao_bc_icms").on("change",function(){habilita_ou_desabilita_campos(".possui_reducao_icms",!t(this).is(":checked"))}),t("#di_cfop_id").on("change",function(){t.getScript("/cfops/"+t(this).val())}),t(".codigo_item_di").on("keyup paste change cut",function(e){""===t(this).val()||teclaSilenciosa(e.keyCode)||(tr=t(this).closest("tr"),select=tr.find("select"),codigo=t(this).val(),classificacao_fiscal_id=tr.data("classificacao_fiscal_id"),unidade_de_medida_id=tr.data("unidade_de_medida_id"),t.get("/produto_estoques/busca_vinculados",{codigo:codigo,classificacao_fiscal_id:classificacao_fiscal_id,unidade_de_medida_id:unidade_de_medida_id},function(t){select.html(t)}))}),t("#di_tipo_intermedio").on("change",function(){n(t(this).val())}),habilita_ou_desabilita_campos("#item_di_codigo",t("#utiliza_codigo").is(":checked")),t("#utiliza_codigo").on("change",function(){habilita_ou_desabilita_campos("#item_di_codigo",t(this).is(":checked"))}),habilita_ou_desabilita_campos(".packing-block",!t("#utiliza_packing").is(":checked")),t("#utiliza_packing").on("change",function(){habilita_ou_desabilita_campos(".packing-block",!t(this).is(":checked"))});var w=function(t){return parseFloat(t.replace(",","."))};t("#di_p_icms").on("blur",function(){aliquota=w(t(this).val()),0==aliquota&&t("#di_valor_icms").val("0,00")});var $=function(){t.each(t(".dis_finalizando"),function(e,i){var n=i.value,o=function(){t.get("/dis/busca_id",{id:n},function(e){"F"==e.status?t.getScript("/dis/"+n+".js"):setTimeout(o,3e3)})};o()})};t(function(){t(".dis_finalizando").length>0&&$()}),t("#adicao_icms_ja_reduzido").on("change",function(){let e=t(this).prop("checked")?"Valor total do ICMS j\xe1 reduzido":"Valor total do ICMS";t("#valor_icms_label").html(e)}),o(),t("#di_admissao_temporaria").on("click",o),t("#aliquota_efetiva").on("change",function(){var e=parseFloat(t(this).val().replace(",",".")),i=parseFloat(t("#adicao_p_icms").val().replace(",","."));if(e>0&&!isNaN(e)&&i>0&&!isNaN(i)){var n=r(e,i);t("#adicao_p_icms_bc").val(n.toString().replace(".",","))}}),t("#adicao_p_icms_bc").on("change",function(){var e=parseFloat(t(this).val().replace(",",".")),i=parseFloat(t("#adicao_p_icms").val().replace(",","."));if(e>0&&!isNaN(e)&&i>0&&!isNaN(i)){var n=a(e,i);t("#aliquota_efetiva").val(n.toString().replace(".",","))}}),["p_icms","p_fcp","icms_ja_reduzido","p_mva","p_icms_bc","motivo_desoneracao_id","calcular_icms","beneficio_fiscal","icms_ja_diferido","percentual_diferimento","ipi_situacao_tributaria_id"].forEach(function(e){t("#"+e+"_em_massa").on("change",function(){var i=t(this);t(".campo_"+e).each(function(){t(this).prop("disabled")||(t(this).prop("checked",i.is(":checked")),t(this).val(i.val()),(this.name.includes("motivo_desoneracao_id")||this.name.includes("situacao_tributaria_id"))&&t(this).trigger("change",!0))})})}),t(".campo_p_icms_bc").on("change",function(){var e=t(this).data("id"),i=t(this).val();i&&w(i)>0?(t("#possui_reducao_bc_icms_"+e).val(!0),s(e)):(t("#possui_reducao_bc_icms_"+e).val(!1),s(e))}),t(".campo_icms_ja_diferido").on("change",l),t(".campo_icms_ja_diferido").each(l),t(".campo_icms_ja_reduzido").on("change",c),t(".campo_icms_ja_reduzido").each(c),t(".campo_calcular_icms").on("change",u),t(".campo_calcular_icms").each(u),t(document).on("ready",function(){t("#vincula_produto_automaticamente").val()&&h(),t(".acoes-submit-di").on("click",function(e){e.preventDefault(),t(this).data("confirm-action")?window.confirm(t(this).data("confirm-action"))&&p(this):p(this)}),d(),inicializaBotaoDeIA()}),t(document).ready(function(){var e=t("#adicao_criar_novo_fabricante"),i=t("#selecao_fabricante"),n=t("#selecao_fabricante_di");n.hide(),e.on("change",function(){let o=e.is(":checked");t(i).toggle(!o),t(n).toggle(o)})}),t(document).on("keyup cut paste change blur",".calculo_fcp",function(){f(t(this).closest("form").data("klass"))}),m(),g(),v(),_(),b(),y(),t("#di_situacao_tributaria_b_id").on("change",function(){parseInt(t("#di_situacao_tributaria_b_id option:selected").data("codigo"));m(),g(),v(),_(),b(),y()})}),$("#ipi_situacao_tributaria_id_em_massa").on("change",function(){let t=$(this).val(),e=codigosIcmsDiferimentoNaoPermitido.includes(t);habilita_ou_desabilita_campos_modal(".campo_percentual_diferimento",e,e),habilita_ou_desabilita_campos_modal(".campo_beneficio_fiscal",codigosBeneficioFiscalNaoPermitido.includes(t)),habilita_ou_desabilita_campos_modal(".field_motivo_desoneracao",t==codigoIcmsTributadoPorSt),habilita_ou_desabilita_campos_modal(".campo_p_icms_bc",t==codigoIcmsTributadoPorSt),habilita_ou_desabilita_campos_modal(".campo_p_icms",t==codigoIcmsIsento),habilita_ou_desabilita_campos_modal(".campo_p_fcp",t==codigoIcmsIsento)}),$(".campo_ipi_situacao_tributaria_id").change(function(){habilita_ou_desabilita_campos_dinamicos_modal(this)}),campos_dinamicos_modal(),$(".select-info-extra").change(function(){var t=this.value;$(".field-info-extra").val(t)}),document.addEventListener("DOMContentLoaded",()=>{$(".verifica_codigo_item_dis").on("change",VerificaSeCodigoExiste)}),document.addEventListener("DOMContentLoaded",function(){const t=$("#csosn_select");t.val(10),t.trigger("change")}),$("#pedido_numero").tooltip(),$("#informacoes-gerais a:not(.help-link)").click(function(t){t.preventDefault(),$(this).tab("show")}),$("#transporte a").click(function(t){t.preventDefault(),$(this).tab("show")}),$("#pedido_indicador_presenca").on("change",function(){const t=["2","3","9"].includes(this.value);t||($("#pedido_indicador_intermediador").val(null).trigger("change"),$("#pedido_inf_intermed_cnpj").val(null),$("#pedido_inf_intermed_id_cad_int_tran").val(null),$("#info_intermediador_box").toggle(!1)),$("#indicador_intermediador_box").toggle(t)}),$("#pedido_indicador_intermediador").on("change",function(){const t="site_ou_plataforma_terceiros"===this.value;t||($("#pedido_inf_intermed_id_cad_int_tran").val(null),$("#pedido_inf_intermed_cnpj").val(null)),$("#info_intermediador_box").toggle(t)}),codigo_produto=function(t){return t.split(" - ")[0]},descricao_produto=function(t){var e;return e=codigo_produto(t).length+3,t.slice(e,t.length)};const apos_escolha_tabela_de_venda=function(t,e=null){$("#item_pedido_pu");var i=$("#produto_estoque_id"),n=$("#pedido_moeda_id").val(),o=to_float($("#pedido_taxa_cambio").val());null==e&&(e=i.val()),$.post("/tabela_de_vendas/calcula_item_pedido",{id:t,produto_id:e,moeda_id:n,taxa_cambio:o})},apos_escolha_tabela_de_venda_do_pedido=function(t){$("#pedido_tabela_de_venda_id").val(t.id)},apos_escolha=function(t){let e=$("#pedido_id").val();var i=$("#pedido_stakeholder_cliente_id").val();$.post("/produto_estoques/carregar_produto",{id:t.id,stakeholder_id:i,movimentacao_estoque_qtde:t.movimentacao_estoque_qtde_s,pedido_id:e})},apos_escolher_combo=function(t){$.get("/pedidos/:pedido_id/combos_packs",{id:t.id})};$("#novo_produto").click(function(t){$("#formulario-novo-produto").modal({show:!0,backdrop:"static",keyboard:!1}),t.preventDefault()}),$("#formulario-novo-produto").on("hidden.bs.modal",function(){$("#formulario_novo_produto_repeat").prop("checked",!1)}),$("#produtos_em_massa").click(function(t){(enableDialogButton($("#botao_incluir_produtos_em_massa")),$("div#formulario_produtos_em_massa").dialog("open"),0===$("#formulario_novo_produto_em_massa_repeat").length)&&$("div#formulario_produtos_em_massa").parent().find(".ui-dialog-buttonpane").append('<div class="pull-left" style="padding: 10px 0 10px 0"><label><input type="checkbox" id="formulario_novo_produto_em_massa_repeat" /> Continuar inserindo produtos</label></div>');t.preventDefault()}),$("#aplicar_desconto_ou_acrescimo").click(function(t){if(enableDialogButton($("#botao_incluir_aplicar_desconto")),$("#formulario_aplicar_desconto").dialog("open"),0===$("#formulario_novo_produto_em_massa_repeat").length)$("div#formulario_aplicar_desconto").parent().find(".ui-dialog-buttonpane");t.preventDefault()}),$("#importar_produtos").click(function(){$("#modal-importar-produtos").modal({show:!0,backdrop:"static",Keyboard:!1})});var arquivoPlanilha=null
;$("#modal-importar-produtos").on("shown.bs.modal",function(){resetModal(),$("#pedido_arquivo").on("change",t=>{arquivoPlanilha=t.target.arquivoPlanilhas})}),$("#form-importar-produtos").on("submit",t=>{t.preventDefault();const e=new FormData(t.target);e["delete"]("pedido[arquivo]"),e["delete"]("_method"),e.append("pedido[arquivo]",Array.isArray(arquivoPlanilha)?arquivoPlanilha[0]:null),$.rails.ajax({url:t.target.action,type:"POST",data:e,contentType:!1,processData:!1,suppressErrors:!0})}),$("#ordem_de_compra_em_massa").click(function(t){enableDialogButton($("#botao_definir_ordem_de_compra_em_massa"));const e=$("input[id=seleciona_]:checked").map(function(){return this.value}).get();$("#itens_selecionados").val(e),$("div#formulario_ordem_de_compra_em_massa").dialog("open"),t.preventDefault()}),$("#link_exibir_inf_comp").click(function(t){$("#campos_inf_comp").toggle("fast"),"Remover"==$(this).val()?$(this).val("Adicionar informa\xe7\xf5es complementares"):$(this).val("Remover"),t.preventDefault()}),$("#link_exibir_observacao").click(function(t){t.preventDefault(),$("#campo_observacao").toggle("fast"),"Remover"==$(this).val()?$(this).val("Adicionar informa\xe7\xf5es complementares"):$(this).val("Remover")}),$("#link_exibir_inf_fisco").click(function(t){t.preventDefault(),$("#campos_inf_fisco").toggle("fast"),"Remover"==$(this).val()?$(this).val("Adicionar informa\xe7\xf5es ao fisco"):$(this).val("Remover")}),$("#link_recolher_janela_produto").click(function(t){t.preventDefault(),$("#janela_novo_produto").hide(),$("#campos_apos_carregar").hide(),$("#div_imagem_produto").hide().html(""),$("#novo_produto").show()}),$(".botao_finalizar_pedido").on("click",function(t){t.preventDefault(),Cookies.set("rota_update_pedido",$(this).data("caminho")),$("#continua_edicao").val(!1),$(".pedido_form").trigger("submit")}),toggleButtonsForm(),$(".botao_prosseguir_pedido").click(function(t){t.preventDefault();var e=$(".tab-ativa").next();$(this).attr("disabled","disabled"),e.length>0&&(Cookies.set("rota_update_pedido",e.find("a").data("caminho")),$(".pedido_form").trigger("submit"))}),$(".botao_salvar_pedido").click(function(t){t.preventDefault();var e=$("#verificando_pedido_exportacao").val(),i=$("#vem_do_crm").val();$(this).attr("disabled","disabled"),"true"==e?Cookies.set("rota_update_pedido","/fluxo_de_exportacao"):"true"==i?Cookies.set("rota_update_pedido","/crm/vendas"):Cookies.set("rota_update_pedido","/pedidos"),$(".pedido_form").trigger("submit")}),$("#pedido_tabela_de_venda_id").on("change",function(){""!==$(this).val()&&""!==$("#pedido_id").val()&&parseFloat($("#pedido_tabela_de_venda_id").data("valor"))!=to_float($("#pedido_tabela_de_venda_id").val())&&swal({title:"Aten\xe7\xe3o! <br>Ao alterar a tabela de vendas, o pre\xe7o unit\xe1rio dos produtos ser\xe1 recalculado.",text:"Deseja recalcular o pre\xe7o unit\xe1rio dos produtos?",type:"warning",showCancelButton:!0,confirmButtonColor:"#2A578C",cancelButtonColor:"#F00F00",confirmButtonText:"Sim",cancelButtonText:"N\xe3o"}).then(function(){$("#continua_edicao").val(!0);const t=$("#pedido_id").val();$($("#formulario_pedido")[0]).attr("action","/pedidos/"+t+"/aplica_tabela_de_venda_em_massa").submit()})["catch"](function(){return!1})}),$("div#formulario_nova_transportadora_pedido").dialog({autoOpen:!1,height:500,width:600,resizable:!0,draggable:!1,modal:!0,buttons:{Salvar:function(){$("div#formulario_nova_transportadora_pedido").find("form").submit()},Cancelar:function(){$(this).dialog("close")}}}),$("div#formulario_novo_produto").dialog({autoOpen:!1,height:500,width:"90%",resizable:!0,draggable:!1,modal:!0,buttons:[{text:"Incluir produto",id:"botao_incluir_produto",click:submitNovoProduto},{text:"Cancelar",click:function(){$(this).dialog("close")}}]}),$("div#formulario_produtos_em_massa").dialog({autoOpen:!1,height:500,width:600,resizable:!0,draggable:!1,modal:!0,buttons:[{text:"Incluir produtos",id:"botao_incluir_produtos_em_massa",click:function(){disableDialogButton($("#botao_incluir_produtos_em_massa")),$("div#formulario_produtos_em_massa").find("form").submit()}},{text:"Cancelar",click:function(){$(this).dialog("close")}}]}),$("div#formulario_ordem_de_compra_em_massa").dialog({autoOpen:!1,height:450,width:500,resizable:!0,draggable:!1,modal:!0,buttons:[{text:"Definir",id:"botao_definir_ordem_de_compra_em_massa",click:function(){disableDialogButton($("#botao_definir_ordem_de_compra_em_massa")),$("div#formulario_ordem_de_compra_em_massa").find("form").submit()}},{text:"Cancelar",click:function(){$(this).dialog("close")}}]}),$(document).on("keydown",submitShortcut),$("#botao-incluir-produto").click(function(){submitNovoProduto()}),$("#pedido_cliente_cnpj").autocomplete({autoFocus:!0,source:$("#pedido_cliente_cnpj").data("autocomplete-source"),delay:1e3,minLength:3,response:function(t,e){const i=$("#pedido_cliente_cnpj").data("is-export");0!==$.grep(e.content,function(t){return t.value==$("#pedido_cliente_cnpj").val()}).length||""===$(this).val()||i||e.content.unshift({id:0,label:$(this).val()+" (criar novo)",value:$(this).val()})},select:function(t,e){var i=document.getElementById("pedido_inf_cpl"),n="";i&&(n=i.value),0===e.item.id&&$("div#formulario_novo_stakeholder").dialog("open"),handleClienteSelect($("#pedido_stakeholder_cliente_id").val(e.item.id).val());var o="DOCUMENTO EMITIDO POR ME OU EPP OPTANTE PELO SIMPLES NACIONAL. NAO GERA DIREITO A CREDITO FISCAL DE IPI. PERMITE O APROVEITAMENTO DO CREDITO DE ICMS NO VALOR DE %{VALOR_APROV_ICMS} CORRESPONDENTE A ALIQUOTA DE %{ALIQ_APROV_ICMS}, NOS TERMOS DO ART. 23 DA LC 123/2006.";n=n.split(";").filter(function(t){return t.trim()!==o}).join(";"),e.item.deve_exibir_informacao_complementar_simples_nacional?i&&(i.value=n+"; "+o):i&&(i.value=n);let a=e.item.infomacao_complementar;e.item.parametriza_inf_cpl&&!i.value.split("; ").includes(a)&&(inf_cpl_texto=i.value,i.value=a+"; "+inf_cpl_texto),i&&isPresent(i.value)?$("#campos_inf_comp").toggle(!0):$("#campos_inf_comp").toggle(!1),$("#select2-pedido_tabela_de_venda_id-container").html(e.item.tabela_de_venda_codigo),$("#pedido_tabela_de_venda_id option[value="+e.item.tabela_de_venda_id+"]").attr("selected","selected"),$("#select2-pedido_pessoa_token_id-container").html(e.item.pessoa_nome),$("#pedido_pessoa_token_id option[value="+e.item.pessoa_id+"]").attr("selected","selected"),null!==e.item.observacao&&""!==e.item.observacao&&e.item.observacao!==undefined?($("#observacao_cliente").find("#conteudo-observacao-cliente").html("Observa\xe7\xe3o: "+e.item.observacao),$("#observacao_cliente").show()):($("#observacao_cliente").find("#conteudo-observacao-cliente").html(" "),$("#observacao_cliente").hide()),e.item.inadimplente&&($("#observacao_cliente").find("#conteudo-observacao-cliente").append("<br/>Aten\xe7\xe3o: Cliente com pend\xeancias administrativas. N\xe3o \xe9 poss\xedvel prosseguir com o pedido."),$("#observacao_cliente").show()),null!==e.item.pessoa_id&&""!==e.item.pessoa_id&&$("#pedido_pessoa_id").val(e.item.pessoa_id),$("#panel-notificacoes-pedido").find("ul").empty(),$("#panel-notificacoes-pedido").hide(),$("#painel-atualizacao-em-massa-de-pedido-por-tabela-de-venda").hide();var r=e.item.transportadora_padrao;r!=undefined&&null!=r&&($("#pedido_transportadora_cnpj").val(r.label),$("#pedido_stakeholder_transportadora_id").val(r.id),$("#panel-notificacoes-pedido").show(),$("#panel-notificacoes-pedido").find("ul").append("<li>A transportadora foi alterada para <strong>"+r.label+"</strong></li>"));var s=e.item.representante_padrao;if(s!=undefined&&null!=s){$("#pedido_pessoa_token_id").val(s.id),$("#pedido_pessoa_token_id").change(),$("#panel-notificacoes-pedido").show();var l="O cliente <strong>"+e.item.razao_social+"</strong> est\xe1 vinculado ao representante <strong>"+s.label+"</strong>, assim que salvar esse pedido somente o representante citado acima poder\xe1 modific\xe1-lo.";$("#panel-notificacoes-pedido").find("ul").append("<li>"+l+"</li>")}var c=e.item.tabela_de_venda;c!=undefined&&null!=c&&($("#pedido_tabela_de_venda_id").val(c.id),$("#pedido_tabela_de_venda_id").change(),$("#panel-notificacoes-pedido").show(),$("#panel-notificacoes-pedido").find("ul").append("<li>A tabela de venda foi alterada para <strong>"+c.label+"</strong></li>"),$("#painel-atualizacao-em-massa-de-pedido-por-tabela-de-venda").show()),""!==$("#pedido_id").val()&&parseFloat($("#pedido_cliente_cnpj").data("valor"))!=to_float($("#pedido_cliente_cnpj").val())&&swal({title:"Aten\xe7\xe3o! <br>Ao alterar cliente do pedido, os impostos ser\xe3o recalculado.",text:"Deseja recalcular os impostos do pedido?",type:"warning",showCancelButton:!0,showCloseButton:!0,confirmButtonColor:"#2A578C",cancelButtonColor:"#F00F00",confirmButtonText:"Sim",cancelButtonText:"N\xe3o"}).then(function(){$("#continua_edicao").val(!0);const t=$("#pedido_id").val();$($("#formulario_pedido")[0]).attr("action","/pedidos/"+t+"/recalcular_impostos").submit()})["catch"](function(){return!1})}}),$("#botao_recalcula_impostos").on("click",function(t){t.preventDefault();const e=$("#pedido_id").val();$($("#formulario_pedido")[0]).attr("action","/pedidos/"+e+"/recalcular_impostos").submit()}),$("#pedido_cliente_cnpj").keyup(function(){""===$(this).val()&&($("#pedido_stakeholder_cliente_id").val(""),$("#observacao_cliente").text(""))}),function(){const t=$("#pedido_adquirente_cnpj");t.autocomplete({autoFocus:!0,source:t.data("autocomplete-source"),delay:1e3,minLength:3,response:function(e,i){$.grep(i.content,function(e){return e.value==t.val()})},select:function(t,e){0===e.item.id&&$("div#formulario_novo_stakeholder").dialog("open"),$("#pedido_stakeholder_adquirente_id").val(e.item.id)}}),t.keyup(function(){""===$(this).val()&&$("#pedido_stakeholder_adquirente_id").val(null)})}(),$("#pedido_transportadora_cnpj").autocomplete({autoFocus:!0,source:$("#pedido_transportadora_cnpj").data("autocomplete-source"),response:function(t,e){$.grep(e.content,function(t){return t.value==$("#pedido_transportadora_cnpj").val()})},select:function(t,e){0===e.item.id?$("div#formulario_nova_transportadora_pedido").dialog("open"):carregaDadosDoVeiculoPedido(e.item)}}),$("#pedido_transportadora_cnpj").change(function(){""===$(this).val()&&$("#pedido_stakeholder_transportadora_id").val(null)}),$(".busca_produto_pedido").each(function(){var t=$(this).data("autocomplete-source"),e=$(this).data("buscar_zerados"),i=$(this).data("finalidade_produto_aplicada"),n=$(this).data("produto-em-massa"),o=!0!==n?"id":"descricao",a=$(this);a.dataMap={},a.selectize({valueField:o,labelField:"label",searchField:"label",persist:!1,render:{option:function(t,e){return"<div><span>"+e(t.label)+"</span></div>"}},load:function(n,o){$.ajax({url:t,data:{term:n,buscar_zerados:e,finalidade_produto_aplicada:i},type:"GET",error:function(){o()},success:function(t){o(t)}})},onOptionAdd:function(t,e){a.dataMap[t]=e},onChange:function(t){t&&a.dataMap[t]?($("#buscar_item_produtos_combos_packs").is(":checked")?apos_escolher_combo(a.dataMap[t]):apos_escolha(a.dataMap[t]),n||a[0].selectize.clear()):t&&console.log("Aconteceu algo de errado")}})}),$("#codigo_tabela_de_venda_busca").keyup(function(){if($(this).val().indexOf("-")>-1){var t=formata_numero_longo(to_float($("#pu_original").val())/to_float($("#pedido_taxa_cambio").val()));$("#item_pedido_pu").val(t)}}),$("#codigo_tabela_de_venda_busca").autocomplete({autoFocus:!0,source:$("#codigo_tabela_de_venda_busca").data("autocomplete-source"),delay:800,select:function(t,e){apos_escolha_tabela_de_venda(e.item.id)}}),$("#pedido_tabela_de_venda").autocomplete({autoFocus:!0,source:$("#pedido_tabela_de_venda").data("autocomplete-source"),delay:800,select:function(t,e){apos_escolha_tabela_de_venda_do_pedido(e.item)}}),$("#pedido_tabela_de_venda").keyup(function(){""===$(this).val()&&$("#pedido_tabela_de_venda_id").val(null)}),$("#item_pedido_chave_token").tokenInput("/nota_fiscals/find_chaves_nfe.json",{crossDomain:!1,prePopulate:$("#item_pedido_chave_token").data("pre"),theme:"facebook",propertyToSearch:"chave_acesso_nfe",tokenValue:"chave_acesso_nfe",hintText:"Pesquise por chave de acesso"}),$(".email_pedido").on("click",function(){$("#pedido_id").val($(this).data("id"))}),$(".acoes_em_massa_pedidos_action").on("click",function(t){function e(){$("#destino").val(i.data("action")),$("#acoes_em_massa_pedido_form").attr("target",i.attr("target")),$("#acoes_em_massa_pedido_form").submit()}t.preventDefault();var i=$(this),n=$(".check_box_acoes_em_massa:checked");if(0===n.length||"gerar_romaneio"!=i.data("action"))e();else{var o=!0;n.each(function(){var t=$(this).val();"false"===$("#validacao_romaneio_"+t).val()&&(o=!1)}),o?e():swal({title:"Alguns pedidos ainda n\xe3o possuem nota fiscal aceita.",text:"Deseja prosseguir?",type:"warning",showCancelButton:!0,confirmButtonColor:"#2A578C",cancelButtonColor:"#F00F00",confirmButtonText:"Sim",cancelButtonText:"N\xe3o"}).then(function(){e()})}}),$("#seleciona_todos").on("click",function(){$(".check_box_acoes_em_massa").prop("checked",$(this).is(":checked"))}),$(function(){$(document).on("click","#extrair_produtos_pedido",function(){$('input[name="seleciona[]"]:checked').length>0?$("#abre_modal_extrair_produto").trigger("click"):swal({title:"Nenhum produto selecionado!",type:"warning"})}),$(document).on("click","#abre_modal_extrair_produto",function(){$('input[name="seleciona[]"]:checked');Cookies.remove("produtos_selecionados");var t=[];$('input[name="seleciona[]"]:checked').each(function(){t.push(this.value)}),t=t.join(),Cookies.set("produtos_selecionados",t)}),$(".items_selecionados_extracao").each(function(){var t=this.value;$("#select_extrair_"+t).length&&$("#qtde_para_extrair_"+t).attr("disabled",!0),$(document).on("change","#select_extrair_"+t,function(){$("#qtde_para_extrair_"+t).attr("disabled","item_inteiro"===this.value)})})}),$("#aplicar_desconto_ou_acrescimo").click(function(t){enableDialogButton($("#botao_aplicar_desconto")),calculaDescontoPedido({id:"valor_desconto"}),$("div#formulario_aplicar_desconto").dialog("open"),t.preventDefault()}),$("div#formulario_aplicar_desconto").dialog({autoOpen:!1,height:500,width:600,resizable:!0,draggable:!1,modal:!0,buttons:[{text:"Aplicar Desconto",id:"botao_aplicar_desconto",click:function(){disableDialogButton($("#botao_aplicar_desconto")),$("div#formulario_aplicar_desconto").find("form").submit()}},{text:"Cancelar",click:function(){$(this).dialog("close")}}]}),$(".formulario_lotes").on("nested:fieldAdded",function(t){var e=t.field.find(".qtde_produtos_lote");if(e.size()>0){var i=$(".quantidade_produtos").data("quantidade");i&&calculaLoteRestante(i,e)}}),$(".formulario_lotes").on("nested:fieldRemoved",function(t){t.field.find(".qtde_produtos_lote").val("0,00")}),$("#item_pedido_qtde").on("change",function(){var t=this.value,e=$("#qtde_unidades_em_caixa").val();if(isPresent(t)&&isPresent(e)&&e>0){var i=(t=parseFloat(t.replace(",",".")))/e;i=Math.ceil(i),$("#item_pedido_qtde_caixas").val(i)}}),$("#item_pedido_qtde_caixas").on("change",function(){var t=this.value,e=$("#qtde_unidades_em_caixa").val();if(isPresent(t)&&isPresent(e)&&e>0){var i=(t=parseFloat(t.replace(",",".")))*e;$("#item_pedido_qtde").val(i.toString().replace(".",","))}}),$("#pedido_moeda_id").on("change",function(){var t=$("#pedido_moeda_id option:selected");if(t.data("cambio")){var e=to_float($(t).data("cambio")),i=to_float($(t).data("variacao"));i<0?($("#icon-variacao-cambio").attr("class","fa fa-arrow-down"),$("#variacao-cambio").attr("class","red")):($("#icon-variacao-cambio").attr("class","fa fa-arrow-up"),$("#variacao-cambio").attr("class","green")),$("#variacao-cambio").text(formata_numero(i)+"%"),$("#moeda-descricao").text($(t).data("descricao")),$("#moeda-cambio").text(formata_numero_longo(e)),$("#pedido_taxa_cambio").val(formata_numero_longo(e)).change(),$("#pedido_taxa_cambio").prop("title",$("#pedido_taxa_cambio").data("text-found")).tooltip("fixTitle").tooltip("show")}else $("#pedido_taxa_cambio").val("").change(),$("#pedido_taxa_cambio").prop("title",$("#pedido_taxa_cambio").data("text-not-found")).tooltip("fixTitle").tooltip("show")}),$("#pedido_taxa_cambio").on("change",function(){if(""!==$("#pedido_id").val()&&parseFloat($("#pedido_taxa_cambio").data("valor"))!=to_float($("#pedido_taxa_cambio").val())){var t=this;swal({title:"Aten\xe7\xe3o! <br>Ao atualizar o valor do c\xe2mbio, o valor em R$ do pedido ser\xe1 recalculado.",text:"Deseja confirmar a altera\xe7\xe3o?",type:"warning",showCancelButton:!0,confirmButtonColor:"#2A578C",cancelButtonColor:"#F00F00",confirmButtonText:"Sim",cancelButtonText:"N\xe3o"}).then(function(){$("#continua_edicao").val(!0),"formulario_pedido"==$(".simple_form").attr("id")?$("#formulario_pedido").trigger("submit"):$("#formulario_pedido_produto").trigger("submit")})["catch"](function(){return $(t).val($(t).data("valor")),$(t).blur(),!1})}}),$("#pedido_processo_pedido").on("change",function(){var t="/processos/"+$(this).val();$.getJSON(t,function(t){$("#pedido_valor_outras_despesas").val(formata_numero(t.processo.total_despesas_relatorio))})}),$("#documento_busca").on("change",function(){ativandoAutoCompleteDocumento($(this).val())}),ativandoAutoCompleteDocumento($("#documento_busca").val()),$(function(){function t(){if($("#item_pedido_qtde").length>0&&$("#unidade_tributada_pedido_venda").length>0){var t=$("#item_pedido_qtde").val()*parseFloat($("#unidade_tributada_pedido_venda").val().replace(",","."));t=isNaN(t)?"":formata_numero(t),$("#total_unidade_tributada_pedido2").html(t)}}t(),$(document).on("input","#unidade_tributada_pedido_venda, #item_pedido_qtde",function(){t()})}),processaCamposSeriaisDinamicos(),$(".formulario_serials").on("nested:fieldAdded",()=>{processaCamposSeriaisDinamicos()}),$(".select-note").change(function(){var t=this.value;$(".field-note").val(t)}),document.addEventListener("DOMContentLoaded",()=>{$(".esvazia_campo_tabela_de_venda_ao_mudar").change(function(){$("#codigo_tabela_de_venda_busca").val("")})});const vincularProcessoAction=$(".vincular-processo-action");var viaChangedFromCrt;vincularProcessoAction.length>0&&vincularProcessoAction.on("click",function(t){const e=document.querySelectorAll("input.check_box_acoes_em_massa[type='checkbox']:checked");t.preventDefault();const i=$("#modal-vincular-processo"),n=Array.from(e).reduce((t,e)=>(t.push(e.value),t),[]);if(i.length>0&&e.length>0){i.modal("show");const t=document.querySelector("#vincular-em-massa");n.map(e=>{let i=document.createElement("input");i.type="hidden",i.name="pedido_id[]",i.value=e,t.appendChild(i)}),$(i).on("hidden.bs.modal",function(){t.innerHTML=""})}else swal("Ops!","Nenhum processo selecionado","warning")}),$(".aprovar-pedido").on("click",aprovarPedido),$("#buscar_item_produtos_combos_packs").on("click",function(){$("#buscar_por_combos_packs").show(),$("#buscar_por_produto").hide()}),$("#buscar_item_produtos_produtos").on("click",function(){$("#buscar_por_combos_packs").hide(),$("#buscar_por_produto").show()}),$(()=>{$("#acesso_pessoa #seleciona_todos").on("change",function(){const t=$(this).is(":checked");t?$(".leitura_e_escrita_check_box").show(300):$(".leitura_e_escrita_check_box").hide(300),$("#acesso_pessoa :checkbox").prop("checked",t)}),$("#pessoa_f_vendedor").change(function(){$(this).is(":checked")?$(".opcoes_vendedor").fadeIn("slow"):$(".opcoes_vendedor").fadeOut("slow")}),$("#pessoa_f_vendedor").trigger("change"),$("#pessoa_possui_acesso").on("change",()=>{$("#acesso_pessoa").toggle($("#pessoa_possui_acesso").is(":checked"))})}),$(".submenu_check_box").on("change",function(){changeLeituraEEscritaCheckBox(this,"submenu")}),$(".permissao_check_box").on("change",function(){changeLeituraEEscritaCheckBox(this,"permissao")}),$("#acesso_pessoa #seleciona_todos_leitura_e_escrita").on("change",function(){$("#acesso_pessoa .leitura_e_escrita_check_box").prop("checked",$(this).is(":checked"))}),$("#contador_possui_acesso_ao_resto_do_sistema").on("change",()=>{$("#div-acessos").toggle()}),document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector("#buscar-usuario"),e=document.querySelectorAll("#lista-usuario tr"),i=Array.from(e);filterLinhasUsuario(i,""),t&&t.addEventListener("keyup",function(){filterLinhasUsuario(i,this.value.toLocaleLowerCase())})}),function(t){t("#compras_acoes_coletivas .submitavel").click(function(){t("#compras_acoes_coletivas #acoes_coletivas").val(t(this).data("action")),t("#compras_acoes_coletivas").submit()});const e=function(e){let i=(e=t(e)).data("id"),n=e.find(".codigo").val(),o=e.find(".unidade").val(),a=e.find(".classificacao_fiscal").val();n.length>0&&t.post("/compras/"+i+"/"+o+"/"+a+"/carregar_produtos",{codigo_produto:n})};t(".linha_compra .busca_produto").on("keyup paste change cut",function(i){if(""!==t(this).val()&&!teclaSilenciosa(i.keyCode)){let i=t(this).closest(".linha_compra");e(i)}}),t(".linha_compra .produto_selecionavel").on("keyup paste change cut",function(){let e=t(this).closest(".linha_compra"),i=e.data("id"),n=e.find(".produto_id").val();0!=n&&t.post("/compras/busca_produto_por_id",{produto_estoque_id:n,item_compra_id:i})}),t(".produto_id").on("change",function(){var e=t(this).data("item-id");""===t("#"+t(this).attr("id")+" option:selected").prop("value")?(t("#item_compra_icms_orig_"+e).prop("disabled",!1),t("#item_compra_classificacao_fiscal_"+e).prop("disabled",!1),t("#item_compra_unidade_de_medida_"+e).prop("disabled",!1),t("#item_compra_codigo_"+e).prop("disabled",!1)):(t("#item_compra_icms_orig_"+e).prop("disabled",!0),t("#item_compra_classificacao_fiscal_"+e).prop("disabled",!0),t("#item_compra_unidade_de_medida_"+e).prop("disabled",!0),t("#item_compra_codigo_"+e).prop("disabled",!0))}),t("#compra_retorno_de_armazenagem").on("change",function(){t(this).is(":checked")?t("#div_numero_pedido").show():t("#div_numero_pedido").hide()}),t("#origem_em_massa").on("change",function(){t(this).val()&&t(".icms_orig_item_compra:enabled").val(t(this).val())}),t("#motivo_movimentacao_em_massa").on("change",function(){t(this).val()&&t(".item_compra_motivo_movimentacao:enabled").val(t(this).val())}),t("#compra_numero_do_pedido").autocomplete({autoFocus:!0,source:t("#compra_numero_do_pedido").data("autocomplete-source"),delay:800,select:function(e,i){t("#compra_pedido_id").val(i.item.id)}}),t(document).on("ready",function(){let e="true"===t("#compra_configuracao_agrupa_produto_estoque").val();var i=0;t(".produto_selecionavel").each(function(){var n=t(this).attr("id"),o=t(this).data("itemId"),a=t("#"+n+" option").size();2==a?t("#"+n+" option:eq(1)").prop("selected",e):a>2&&(t("#"+n+" option:eq(1)").prop("selected",e),i+=1,t(".linha_compra[data-id='"+o+"']").css("border","dotted")),t(this).change()}),i>0&&exibe_mensagem_com_status("Aten\xe7\xe3o! Os itens destacados com pontilhado possuem mais de um produto no estoque com mesmo c\xf3digo, unidade de medida e NCM. O sistema ir\xe1 associar automaticamente essa entrada a um desses produtos, mas voc\xea pode alterar esse comportamento selecionando outro item na coluna Produto, ou ainda  selecionar a op\xe7\xe3o X produto(s) encontrado(s) para que esse item entre como um novo produto.","info")}),t("#compra_vincular_contas_a_pagar").on("change",exibe_esconde_div_plano_de_conta_na_compra),t(document).ready(exibe_esconde_div_plano_de_conta_na_compra),t(".busca_produto_para_compra").on("click",function(){var e=t(this).data("id");t("#select_todos_os_produtos_na_aquisicao_"+e).toggle(),t("#select_padrao_produtos_na_aquisicao_"+e).toggle()}),t(".selectize_ajax_produto_aquisicao").each(function(){var e=t(this).data("autocomplete-source"),i=t(this).data("id"),n=t("#item_compra_unidade_de_medida_"+i).val(),o={codigo:t("#codigo_item_compra_"+i).val(),descricao:t("#descricao_item_compra_"+i).val(),classificacaoFiscalId:t("#classificacao_fiscal_id_item_compra_"+i).val()},a=t(this);a.dataMap={},a.selectize({preload:!1,valueField:"id",labelField:"label",searchField:"label",render:{option:function(t,e){return"<div><span>"+e(t.label)+"</span></div>"}},load:function(i,o){t.ajax({url:e,data:{codigo_ou_descricao:i,unidade_de_medida:n,zerados:!0,nao_salvar_filtro:!0},type:"GET",dataType:"json",error:function(){o()},success:function(t){var e=[{id:"",label:"Selecione um produto"}].concat(t.produto_estoques);o(e)}})},onOptionAdd:function(t,e){a.dataMap[t]=e},onChange:function(e){var n=a.dataMap[e],r=t("#item_compra_icms_orig_"+i),s=t("#item_compra_descricao_"+i),l=t("#item_compra_classificacao_fiscal_"+i),c=t("#item_compra_unidade_de_medida_"+i),u=t("#item_compra_codigo_"+i);""===n.id?(u.prop("disabled",!1),u.val(o.codigo),s.prop("disabled",!1),s.val(o.descricao),r.prop("disabled",!1),l.prop("disabled",!1),l.val(o.classificacaoFiscalId),c.prop("disabled",!1)):(r.prop("disabled",!0),s.prop("disabled",!0),s.val(n.descricao),l.prop("disabled",!0),n.classificacao_fiscal.id!=o.classificacaoFiscalId&&swal({title:"O NCM do Produto em estoque \xe9 "+n.classificacao_fiscal.classificacao+". Deseja alterar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#006cb5",cancelButtonColor:"#d82b0a",confirmButtonText:"Sim",cancelButtonText:"Cancelar"}).then(function(t){t?l.val(n.classificacao_fiscal.id):l.val(o.classificacaoFiscalId)})["catch"](function(){}),c.prop("disabled",!0),u.prop("disabled",!0),u.val(n.codigo))}})}),t("#guardar_informacao_sobre_st_retido_todos").on("change",function(){t(".guardar_informacao_sobre_st_retido").prop("checked",this.checked)})}(jQuery),$(".select_produto").on("change",function(){var t=$(this).data("item-id");$("#compra_item_compras_attributes_"+t+"_produto_estoque_id").val(this.value),isPresent(this.value)&&0!=this.value&&(itemPossuiValorDeSt(t)||itemPossuiValorDeFCP(t))&&($("#div_guardar_informacao_sobre_st_retido_todos").show(),$("#div_guardar_informacao_sobre_st_retido_"+t).show())}),document.addEventListener("DOMContentLoaded",()=>{$(".verifica_codigo_item_compra").on("change",VerificaSeCodigoExiste),$("#link-excel-compras").on("click",t=>validaFiltroArquivo(t,"xlsx")),$("#link-pdf-compras").on("click",t=>validaFiltroArquivo(t,"pdf"))}),function(t){t("div#agrupar_categories_name_panel").dialog({autoOpen:!1,height:250,width:600,draggable:!1,modal:!0,buttons:{"Agrupar Categorias":function(){t("#description-hidden").val(t("#description-field").val()),t("#top-category-description-hidden").val(t("#top_category_description").val()),t("#agrupar_categories_form").submit()},Cancelar:function(){t(this).dialog("close")}},open:function(){t("#cliente_razao_social").val(t("#pedido_cliente_cnpj").val())}}),t("#agrupar-btn").click(function(){t("div#agrupar_categories_name_panel").dialog("open")})}(jQuery),$(document).ready(function(){$("#primeiro_acesso_plano_cambio").val()&&swal({title:"Bem-vindo ao C\xe2mbio Main\xf4!",html:'<p>Esse \xe9 um passo a passo de como aproveitar ao m\xe1ximo a nova experi\xeancia com o C\xe2mbio Main\xf4!</p><iframe width="560" height="315" src="https://www.youtube.com/embed/R7swXekXgPs" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><p>Caso ainda fique alguma d\xfavida, nos chame no chat!<br>Ser\xe1 um prazer lhe ajudar!</br></p>',confirmButtonColor:"#2A578C",imageUrl:"/images/logocambio.png",imageHeight:90,showCloseButton:!0,width:"600px"});if($("#primeiro_acesso").val()&&$("div#formulario_configuracao_de_ambiente").dialog("open"),$("#primeiro_acesso_cobranca_disponivel").val()&&$("#modalSituacaoClienteSuperlogica").modal("toggle"),$("#modalSituacaoClienteSuperlogica").on("hidden.bs.modal",function(){$.post("/dashboard/cliente_ja_notificado_situacao_pagamento")}),$("#comprovante_pagamento").on("change",function(){$("#form-comprovante-pagamento").submit(),swal({type:"success",title:"\xd3timo!",text:"Comprovante enviado com sucesso."})}),$("#enviar-cobranca").click(function(){var t=$(this).data("emissorToken");swal({title:"Tem certeza?",text:"A fatura ser\xe1 enviada ao respons\xe1vel financeiro",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sim, enviar!"}).then(function(){swal("\xd3timo!","E-mail enviado com sucesso.","success"),$.post("/emissors/"+t+"/enviar_email_com_fatura_de_cobranca")},function(t){"cancel"===t&&swal("Cancelado","O e-mail n\xe3o foi enviado.","error")})}),$("#clientes-que-mais-compram").length>0){var t=function(){$.ajax("/dashboard/clientes_que_mais_compram",{type:"GET",statusCode:{200:function(){$("#processando").length>0&&location.reload()},204:function(){setTimeout(t,5e3)}}})};t()}var e=function(t){$("#"+t).length>0&&$.ajax("/dashboard/"+t,{type:"GET",statusCode:{200:function(e){$("#"+t).html(e)},204:function(){setTimeout(function(){e(t)},5e3)}}})};e("relatorio_faturamento"),e("resumo_mensal_do_financeiro"),e("recebimentos_do_dia"),e("pagamentos_do_dia"),e("recebimentos_vencidos"),e("pagamentos_vencidos")}),$("div#formulario_configuracao_de_ambiente").dialog({autoOpen:!1,height:360,width:390,resizable:!1,draggable:!1,modal:!0,buttons:{Salvar:function(){$("div#formulario_configuracao_de_ambiente").find("form").submit(),$(this).dialog("close")}}}),$("#exibir_observacao_suporte").on("click",function(){$("#linha_observacao_suporte").toggle()}),$("#primeiro_acesso_importacao").click(function(){window.location.href="/dis"}),$("#modal-onboarding").modal({backdrop:"static",keyboard:!1}),$("div#formulario_nova_conta_a_pagar").dialog({autoOpen:!1,height:500,width:600,resizable:!0,draggable:!0,modal:!0,buttons:{Voltar:function(){var t=$("div#formulario_nova_conta_a_pagar").find("form");$("#errors").html(""),$(":input",t).not(":button, :submit, :reset, :hidden, #conta_a_pagar_tipo_conta_a_pagar_descricao, #conta_a_pagar_moeda_id").val("").removeAttr("checked").removeAttr("selected"),$("#modal-message").hide(),$(this).dialog("close")},Salvar:function(){submitFormContasProcessos($("div#formulario_nova_conta_a_pagar").find("form"),"conta-pagar")}},open:function(){$(".ui-dialog-buttonpane").find('button:contains("Salvar")').addClass("botao-salvar-despesa"),$(".ui-dialog-buttonpane").find('button:contains("Voltar")').addClass("botao-voltar-despesa"),$(".ui-dialog-buttonpane").addClass("footer-despesa"),$("#select-tipos-pagamento").change(tipoPagamentoSelecionado)}}),$("div#formulario_nova_conta_a_receber").dialog({autoOpen:!1,height:500,width:600,resizable:!0,draggable:!0,modal:!0,buttons:{Voltar:function(){var t=$("div#formulario_nova_conta_a_receber").find("form");$("#errors").html(""),$(":input",t).not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected"),$("#select2-contas_a_receber_cliente_id-container").html(""),$("#modal-message").hide(),$(this).dialog("close")},Salvar:function(){submitFormContasProcessos($("div#formulario_nova_conta_a_receber").find("form"))}},open:function(){$(".ui-dialog-buttonpane").find('button:contains("Salvar")').addClass("botao-salvar-receita"),$(".ui-dialog-buttonpane").find('button:contains("Voltar")').addClass("botao-voltar-receita"),$(".ui-dialog-buttonpane").addClass("footer-receita")}}),$("#nova_conta_a_pagar, .imposto_contas_a_pagar").click(function(t){if($("div#formulario_nova_conta_a_pagar").dialog("open"),$("div#formulario_nova_conta_a_pagar").siblings(".ui-dialog-titlebar").remove(),$(this).hasClass("imposto_contas_a_pagar")){let t=$(this).data("imposto"),e=$(this).data("imposto-padrao");$("#select-tipos-pagamento").val(t).trigger("change"),$("#conta_a_pagar_imposto_pre_cadastrado").val(e)}else $("#conta_a_pagar_imposto_pre_cadastrado").val(!1);0===$("#formulario_nova_conta_a_pagar_repeat").length&&$("div#formulario_nova_conta_a_pagar").parent().find(".ui-dialog-buttonpane").append('<div class="pull-left" style="padding: 10px 0 10px 0"><label><input type="checkbox" id="formulario_nova_conta_a_pagar_repeat" />Cadastrar outra despesa</label></div>');t.preventDefault()}),$("#nova_conta_a_receber").click(function(t){($("div#formulario_nova_conta_a_receber").dialog("open"),$("div#formulario_nova_conta_a_receber").siblings(".ui-dialog-titlebar").remove(),0===$("#formulario_nova_conta_a_receber_repeat").length)&&$("div#formulario_nova_conta_a_receber").parent().find(".ui-dialog-buttonpane").append('<div class="pull-left" style="padding: 10px 0 10px 0"><label><input type="checkbox" id="formulario_nova_conta_a_receber_repeat" />Cadastrar outra receita</label></div>');t.preventDefault()}),$("#processo_di_id").select2({theme:"bootstrap",language:"pt-BR",placeholder:"This is my placeholder",allowClear:!0,ajax:{url:$("#processo_di_id").data("autocomplete-source"),delay:250},placeholder:$("#processo_di_id").data("codigo-formatado")}),$("#processo_di_codigo").autocomplete({autoFocus:!0,source:$("#processo_di_codigo").data("autocomplete-source"),delay:800,minLength:0,select:function(t,e){$("#processo_di_id").val(e.item.id)}
}).click(function(){$(this).autocomplete("search")}),$("#processo_pedido_numero").autocomplete({autoFocus:!0,source:$("#processo_pedido_numero").data("autocomplete-source"),delay:800,minLength:0,select:function(t,e){$("#processo_pedido_id").val(e.item.id)}}).click(function(){$(this).autocomplete("search")}),$("#processo_tipo").on("change",function(){"importacao"==$(this).val()?($("#div_processo_pedido").hide(),$("#processo_pedido_id").val(null)):"exportacao"==$(this).val()&&$("#div_processo_pedido").show()}),$("#select-modalidade-processo").on("change",modalidadeProcessoHandleChange),$("#processo_via").on("change",function(){let e=$("#label-emissao-bl");switch($(this).val()){case"maritima":$("#label_bl").html("N\xfamero do BL"),e.html(t("activerecord.attributes.processo.data_emissao_wbl_bl",{type:"BL"})),$("#campos_via_aerea").hide(),$("#campos_via_navio").show(),viaChangedFromCrt&&handleViaChangeCrt(),viaChangedFromCrt=!1;break;case"aerea":$("#label_bl").html("AWB"),e.html(t("activerecord.attributes.processo.data_emissao_wbl_bl",{type:"AWB"})),$("#campos_via_aerea").show(),$("#campos_via_navio").hide(),viaChangedFromCrt&&handleViaChangeCrt(),viaChangedFromCrt=!1;break;case"rodoviaria":$("#label_bl").html("CRT"),e.html(t("activerecord.attributes.processo.data_emissao_wbl_bl",{type:"CRT"})),$("#campos_via_aerea").hide(),$("#campos_via_navio").hide(),handleViaChangeCrt(),viaChangedFromCrt=!0}}),$("#processo_via").trigger("change"),$("#processo_status").on("change",function(){selecionaLabelCorretoDeDatasDoProcesso()}),$(document).on("ready",function(){activeTabByEtapa(),selecionaLabelCorretoDeDatasDoProcesso(),InicializaAcaoEmMassa()}),preencheInputsTransferencia(),$("#processo_moeda_id").on("change",function(){var t=$("#processo_moeda_id option:selected"),e=to_float($(t).data("cambio")),i=to_float($(t).data("variacao"));i<0?($("#icon-variacao-cambio").attr("class","fa fa-arrow-down"),$("#variacao-cambio").attr("class","red")):($("#icon-variacao-cambio").attr("class","fa fa-arrow-up"),$("#variacao-cambio").attr("class","green")),$("#variacao-cambio").text(formata_numero(i)+"%"),$("#moeda-descricao").text($(t).data("descricao")),$("#moeda-cambio").text(formata_numero_longo(e)),$(".moeda-label").each(function(){$(this).text($(t).data("label"))})}),$(".solicitacao-numerario").click(function(){var t=$(this).data("processoId"),e=$(this).data("valorCambio");$(this).data("semDespesas")?avisoSemDespesas(t):avisoCambioPdf(t,e)}),$("#pagamentos-di").click(function(){confirmarCarregarPagamentosDi($(this).data("processoId"),$(this).data("canUpdate"))}),$('.modal-cadastro-processo a[data-toggle="tab"]').click(function(){Cookies.set("form-processo-tab",getTabHref(this)),exibirContinuarFormProcesso()}),$(".modal-cadastro-processo .btn-continuar").click(function(){let t=Cookies.get("form-processo-tab");if(t){let e=$(".modal-cadastro-processo").find('a[href="#'+t+'"]').closest("li").nextAll().not(".hide").first();Cookies.set("form-processo-tab",e.find("a").attr("href").substr(1))}else Cookies.set("form-processo-tab","tab_numerario");activeTabProcesso()}),$("#processo_saldo_inicial").on("change",function(){preencheInputsTransferencia()}),$(".botao-fechar-aviso-cambio").on("click",function(){$(".aviso-cambio").hide(),localStorage.setItem("aviso-cambio-fechado",!0)}),$(function(){localStorage.getItem("aviso-cambio-fechado")||$(".aviso-cambio").show()}),$(document).on("ready",function(){["importacao_direta",""].includes($("#processo_modalidade").val())&&$("#conta_bancaria_container").hide()}),$("#processo_modalidade").on("change",function(){["importacao_direta",""].includes($(this).val())?$("#conta_bancaria_container").hide():$("#conta_bancaria_container").show()}),$("[name='altera_estoque']").bootstrapSwitch(),$("[name='cadastrar_movimentacoes']").bootstrapSwitch(),$("[name='cadastrar_contas_a_pagar']").bootstrapSwitch(),$("[name='cadastrar_contas_a_receber']").bootstrapSwitch(),$("[name='cadastrar_fatura_para_30_dias']").bootstrapSwitch(),$(document).on("nested:fieldAdded:item_producaos",function(t){carregaFormulario(t,".item_producao")}),$(document).on("nested:fieldAdded:item_composicaos",function(t){t.field.find("#campo_inserido_manualmente").val(!0),carregaFormulario(t,".item_composicao")}),[".item_producao",".item_composicao"].forEach(function(t){$(t+".descricao").each(function(){$(this).autocomplete({source:$(this).data("autocomplete-source"),select:function(t,e){var i=$(this).data("id"),n=$(".id_field[data-id="+i+"]");$(n).val(e.item.id),$(".codigo").val(e.item.codigo),$(".pu").val(e.item.pu_saida_s),$(".qtde").val("1")}})}),$(t+".codigo").each(function(){$(this).autocomplete({source:$(this).data("autocomplete-source"),select:function(t,e){var i=$(this).data("id"),n=$(".id_field[data-id="+i+"]");$(n).val(e.item.id),$(".descricao").val(e.item.descricao),$(".pu").val(e.item.pu_saida_s),$(".qtde").val("1")}})})}),$(".update-only").click(function(t){t.preventDefault(),$(".form-producao").first().append("<input type='hidden' name='update_only' value='true'/>"),$(".form-producao").first().submit()});const data_format="MM/DD/YYYY",fator_milisegundos_dias=864e5;$(function(){if($(".simulacao").length>0){const t=$("#fatura_condicao_pagamento_id"),e=Boolean(t.data("nova-fatura"));requisitaSimulacao(e),e&&t.length>0&&isPresent(t.val())&&buscandoCondicaoPagamento(t.val()),$("#fatura_condicao_pagamento_id").on("change",function(){var t=$(this).val();$("#fatura_dias_para_primeira_parcela").val(""),$("#fatura_dias_para_sinal").val(""),isPresent(t)&&buscandoCondicaoPagamento(t)})}}),$(".simulacao").on("change",function(){this.classList.contains("fatura-vencimento")&&isPresent(this.value)?$(".fatura-intervalo-vencimento").first().val(""):this.classList.contains("fatura-intervalo-vencimento")&&isPresent(this.value)&&$(".fatura-vencimento").first().val(""),requisitaSimulacao()});const valueDtInicioPag=$("#fatura_dt_inicio_pagamento");valueDtInicioPag.length>0&&valueDtInicioPag.val().length>0&&requisitaSimulacao(),$("#fatura_tipo_intervalo_a_vista").on("change",()=>{refreshDataVencimento($("#fatura_intervalo_a_vista").val())}),$(".icms").on("change",function(){atualiza("icms",$(this).attr("data-index"))}),$(".ipi").on("change",function(){atualiza("ipi",$(this).attr("data-index"))}),$(".pis").on("change",function(){atualiza("pis",$(this).attr("data-index"))}),$(".cofins").on("change",function(){atualiza("cofins",$(this).attr("data-index"))}),$(".cst-em-massa").on("change",function(){imposto=$(this).attr("data-cst"),id=$(this).val(),assinalaEmMassa(imposto,id)}),$("#gera_credito_todos").on("change",function(){$(this).prop("checked")?$(".check_box_gera_credito").prop("checked",!0):$(".check_box_gera_credito").prop("checked",!1)}),$("#uf_origem_id").change(function(){carrega_municipios_na_escrituracao_manual(this.value,"origem")}),$("#uf_destino_id").change(function(){carrega_municipios_na_escrituracao_manual(this.value,"destino")}),$("#escrituracao_manual_indicador_operacao").change(function(){"prestacao"===this.value?$("#label_stakeholder").text("Cliente"):$("#label_stakeholder").text("Fornecedor")});var MATO_GROSSO_ID=13;$("#uf").change(cargaTributariaMediaDivToggle),$(document).ready(cargaTributariaMediaDivToggle);var id_modalidade_simples=2;$(document).ready(function(){instrucoesSimplesNacionalToggle(),habilita_desabilita_csosn(),aplicaClipBoard()}),$("#emissor_cnpj").on("change",function(){let t=this.value;const e=30,i=1;t!=undefined&&null!=t&&""!=t&&(14==(t=t.replace(/\./g,"").replace(/\//g,"").replace(/-/g,"")).length?busca_pelo_cnpj_emissor(t,e,i):numero_de_caracteres_invalido())}),$("#emissor_modalidade_id").on("change",instrucoesSimplesNacionalToggle),$(".btn-modalidade").on("click",function(){const t=$(this).data("avisarAlteracaoPreco"),e=$("#emissor_modalidade_id").val();$(this).data("id");$this=$(this),e&&t?swal({title:"Alterar o regime da empresa poder\xe1 causar uma altera\xe7\xe3o no valor do plano.",text:"Deseja continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#006cb5",cancelButtonColor:"#d82b0a",confirmButtonText:"Sim",cancelButtonText:"N\xe3o"}).then(t=>{t&&continuaAlteracaoDeTributacao($this)}):continuaAlteracaoDeTributacao($this)}),$(".alerta-iob").change(function(){if(isPresent($("#emissor_gestor_fiscal_id").val())&&$(this).data("valor")!=$(this).val()){var t=this;swal({title:"Ao alterar este campo, seu monitoramento tribut\xe1rio ser\xe1 redefinido.",text:"Deseja manter a altera\xe7\xe3o?",type:"warning",showCancelButton:!0,confirmButtonColor:"#006cb5",cancelButtonColor:"#d82b0a",confirmButtonText:"Sim",cancelButtonText:"N\xe3o"}).then(function(){})["catch"](function(){return $(t).val($(t).data("valor")),instrucoesSimplesNacionalToggle(),habilita_desabilita_csosn(),!1})}}),$("#link-ativar-recompra-ai").click(function(){ativaSegmentAnalytics("Conhecer Recompra.a\xed","bot\xe3o",null);var t=$(this).data("emissorId");swal({title:"Boas-vindas ao Recompra\xed,<br>o portal inteligente de compras recorrentes<br>da Main\xf4!",html:'<iframe width="444" height="250" src="//www.youtube.com/embed/_JnxLDGnXcw?rel=0&wmode=transparent&amp;iv_load_policy=3&amp;autoplay=0" frameborder="0" style="margin: 0 0 10px;" allowfullscreen></iframe><p>Ao clicar em "Quero ativar", voc\xea ter\xe1 acesso \xe0 plataforma.<br></p>',confirmButtonColor:"#2A578C",confirmButtonText:"Quero ativar",imageUrl:"/images/logo-maino-recompraai.png",imageHeight:90,showCloseButton:!0,width:"600px"}).then(function(){ativaSegmentAnalytics("Ativar Recompra.a\xed","bot\xe3o",null),$.getScript("/emissors/"+t+"/criar_loja_no_recompra_ai")})}),$(".popover-inutilizacao").popover({placement:"top",trigger:"hover"}),$("#conta_corrente_banco_id").on("change",function(){$(this).val()==15?$("#cod_benefiaciario").show():$("#cod_benefiaciario").hide()}),$("#conta_corrente_conta_cobranca").on("change",toggleDivCobranca),$(document).ready(function(){toggleDivCobranca()}),$(".icone-bradesco").click(function(){selecionaBanco("1")}),$(".icone-banco-do-brasil").click(function(){selecionaBanco("2")}),$(".icone-itau").click(function(){selecionaBanco("3")}),$(".icone-santander").click(function(){selecionaBanco("4")}),$(".icone-caixa-economica-federal").click(function(){selecionaBanco("5")}),$(function(){$(".datepicker_tag").datepicker($.datepicker.regional["pt-br"])}),$('[data-toggle="switch"]').bootstrapSwitch(),$(".btn-titularidade").on("click",function(){$(".btn-titularidade").removeClass("selecionado"),$(this).addClass("selecionado"),$("#transferencia_conta_digital_pjbank_mesma_titularidade").val($(this).data("mesmaTitularidade")),$(this).data("mesmaTitularidade")?($("#campos-outra-titularidade").hide(),$("#campos-mesma-titularidade").show()):($("#campos-mesma-titularidade").hide(),$("#campos-outra-titularidade").show())}),$(".btn-tipo-conta").on("click",function(){$(".btn-tipo-conta").removeClass("selecionado"),$(this).addClass("selecionado"),$("#transferencia_conta_digital_pjbank_tipo_conta_favorecido").val($(this).data("tipoConta"))}),$("#conta_corrente_com_sacador_avalista").on("change",function(){const t=$(this).is(":checked"),e=document.getElementById("conta_corrente_stakeholder_sacador_avalista_id");t&&e.selectize.setValue(""),$(".campos_sacador_avalista").toggle(t)}),$("#declaracao_cnpj_iugu").on("change",function(){const t=$(this).is(":checked");$("#btn-credenciar").attr("disabled",!t)}),$("#atualizador_de_pu_de_saida_dos_produtos_fator_sobre_preco_de_custo").on("keydown",calculaPrecoDeVenda),$("#atualizador_de_pu_de_saida_dos_produtos_fator_sobre_preco_de_custo").on("blur",calculaPrecoDeVenda),$("#atualizador_de_pu_de_saida_dos_produtos_fator_sobre_preco_de_custo").on("change",calculaPrecoDeVenda),$("#calcula_somente_produtos").on("change",calculaPrecoDeVenda),$("#produto_estoque_valor_total_saida").on("keydown",calculaValorTotal),$("#produto_estoque_valor_total_saida").on("change",calculaValorTotal),$("#calcula_via_valor_de_saida_definido").on("change",function(){$(this).is(":checked")?$("#valor_saida").show():$("#valor_saida").hide()}),$("#calcula_via_valor_de_saida_definido").on("change",function(){$(this).is(":checked")?($("#calcula_somente_produtos").prop("checked",!0),$("#calcula_somente_produtos").closest("div.row").hide()):$("#calcula_somente_produtos").closest("div.row").show()}),$("#stakeholder_tipos").on("change",function(){let t=$("#stakeholder_tipos").val();t!=undefined&&null!=t&&t.filter(function(t){return"cliente"==t}).length>0?$("#div_stakeholder_tipo_cliente").show():$("#div_stakeholder_tipo_cliente").hide()}),$("#modalCadastro").on("shown.bs.modal",function(){initContato(!0)}),$(document).on("nested:fieldAdded",function(){initContato()}),document.addEventListener("DOMContentLoaded",()=>{$("#classificacao_fiscal_acao_em_massa .row .submitavel").click(function(){const t=$(this).data("action"),e=$(this).data("disabled");if("gerar_relatorio"===t)return gerarRelatorio(t,e);if("monitorar"===t){swal({title:'<span style="font-size: 22px;">\n        Caso as classifica\xe7\xf5es fiscais selecionadas n\xe3o tenham a informa\xe7\xe3o do\n        CEST (C\xf3digo especificador da Substitui\xe7\xe3o Tribut\xe1ria), n\xe3o ser\xe1 retornado\n        do monitoramento os valores de MVA (Margem de Valor Agregado)\n        utilizados para c\xe1lculo da substitui\xe7\xe3o tribut\xe1ria do ICMS.\n        <br/><br/>\n        N\xe3o ser\xe1 poss\xedvel alterar o CEST depois que as classifica\xe7\xf5es fiscais forem monitoradas.\n      </span>',text:"Confirma o envio destas classifica\xe7\xf5es fiscais para o monitoramento tribut\xe1rio?",type:"warning",confirmButtonColor:"#2A578C",confirmButtonText:"Sim",showCloseButton:!0,showCancelButton:!0,cancelButtonText:"N\xe3o",width:"500px"}).then(function(){submitAcaoEmMassaNcm(t,e)})}else submitAcaoEmMassaNcm(t,e)}),$(".monitorar-classificacao").click(function(){confirmaMonitoramentoNcm($(this),$(this).data("id"),$(this).data("cest-codigo"))})}),$("tooltip_mva").tooltip(),$("#ordem_garantia_numero_da_nota_fiscal").autocomplete({autoFocus:!0,source:$("#ordem_garantia_numero_da_nota_fiscal").data("autocomplete-source"),delay:800,select:function(t,e){searchNfeWarrantyOrder(e)}}),$("#ordem_garantia_numero_da_nota_fiscal").on("keyup paste change cut",function(){""==$(this).val()&&$("#ordem_garantia_nota_fiscal_id").val("")}),$("#ordem_garantia_stakeholder_destinatario").autocomplete({autoFocus:!0,source:$("#ordem_garantia_stakeholder_destinatario").data("autocomplete-source"),delay:1e3,minLength:3,response:function(t,e){$.grep(e.content,function(t){return t.value==$("#ordem_garantia_stakeholder_destinatario").val()})},select:function(t,e){0===e.item.id&&$("div#formulario_novo_stakeholder").dialog("open"),$("#ordem_garantia_stakeholder_id").val(e.item.id)}}),$("#ordem_garantia_transportadora_cnpj").autocomplete({autoFocus:!0,source:$("#ordem_garantia_transportadora_cnpj").data("autocomplete-source"),response:function(t,e){$.grep(e.content,function(t){return t.value==$("#ordem_garantia_transportadora_cnpj").val()})},select:function(t,e){0===e.item.id?$("div#formulario_nova_transportadora_pedido").dialog("open"):carregaDadosDoVeiculo(e.item)}}),carregaDadosDoVeiculo=function(t){$("#ordem_garantia_stakeholder_transportadora_id").val(t.id),$("#ordem_garantia_placa_veiculo").val(t.placa_veiculo),$("#ordem_garantia_uf_veiculo_id").val(t.uf_veiculo_id),$("#ordem_garantia_antt").val(t.antt),$(".campos_veiculo").show()},$("#ordem_garantia_stakeholder_destinatario").keyup(function(){""===$(this).val()&&$("#ordem_garantia_stakeholder_id").val("")}),$(".tipo-resultado-analise-em-massa").on("change",function(){assinalaEmMassaTipoResultado($(this).val())}),$(document).ready(function(){exibeEscondeCustoFinalNaTabelaDeVenda(),carregaCambioPadrao()}),$("#tabela_de_venda_parent_id").on("change",exibeEscondeCustoFinalNaTabelaDeVenda),$("#moeda_cambio_id").on("change",carregaCambioPadrao),$(".busca_produto_tabela_fixa").each(function(){selectize_busca_produto_tabela_fixa(this)}),$(document).on("nested:fieldAdded:item_tabela_de_vendas",function(t){t.field.find(".busca_produto_tabela_fixa").each(function(){selectize_busca_produto_tabela_fixa(this)}),$("#moeda_cambio_id option").each(function(){$(".item-pu-"+$(this).data("codigoIso")).length>0&&adicionaCambioPorItem(t.field[0],this)}),t.field.find(".selectize-control.selectized.busca_produto_tabela_fixa").find(".selectize-input").find("input").focus()}),$("#modalCadastrarProduto").on("hidden.bs.modal",function(){limpa_select_produto_se_necessario()}),$(".chosen-select-modal-add-produtos-em-massa").select2({theme:"bootstrap",language:"pt-BR",minimumResultsForSearch:10,dropdownParent:$("#modalAddProdutosEmMassa")}),$("#filtrar-itens-tabela-fixa").click(function(){var t=this;swal({title:"Ao aplicar o filtro desejado voc\xea ir\xe1 perder todas as mudan\xe7as n\xe3o salvas. Deseja realmente continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#006cb5",cancelButtonColor:"#d82b0a",confirmButtonText:"Sim",cancelButtonText:"N\xe3o"}).then(function(){$(t).text("Filtrando..."),$(t).attr("disabled",!0),window.location="/tabelas_fixas/"+$(t).data("tabelaId")+"/edit?"+filtros_tabela_fixa()})["catch"](function(){})}),$("#limpar-filtro-itens-tabela-fixa").click(function(){var t=this;swal({title:"Ao limpar o filtro voc\xea ir\xe1 perder todas as mudan\xe7as n\xe3o salvas. Deseja realmente continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#006cb5",cancelButtonColor:"#d82b0a",confirmButtonText:"Sim",cancelButtonText:"N\xe3o"}).then(function(){$(t).text("limpando..."),$(t).attr("disabled",!0),window.location="/tabelas_fixas/"+$(t).data("tabelaId")+"/edit?limpar_filtro=true"})["catch"](function(){})}),$(".pu_item_cotacao").change(function(){let t=0;$(this).closest("tbody").find(".pu_item_cotacao").each(function(){const e=parseFloat($(this).data("quantidade").replace(",",".")),i=parseFloat(this.value.replace(",","."));t+=arredonda_float(e*i,2)});const e=$(this).closest("table").closest("tbody").find(".total_produtos_ncm_cotacao");$(e).text(t.toFixed(2).replace(".",","))}),$(".check-cotacao").click(function(){const t=$('[data-cotacao-id="'+this.dataset.cell+'"]');t.hasClass("produto-cotacao-selecionado")||($('.seleciona_cotacao[data-produto-id="'+this.dataset.produtoId+'"]').each(function(){deseleciona_cotacao(this)}),deseleciona_cotacao_fornecedor(),seleciona_cotacao(t[0]))}),$(".seleciona_cotacao_fornecedor").click(function(){deseleciona_cotacao_fornecedor(),$(".seleciona_cotacao").each(function(){deseleciona_cotacao(this)}),$(this).addClass("fornecedor-cotacao-selecionado"),$('.seleciona_cotacao[data-fornecedor-id="'+this.dataset.fornecedorId+'"]').each(function(){seleciona_cotacao(this)})}),$(".preenchimento_em_massa").trigger("change"),document.addEventListener("DOMContentLoaded",function(){initListens(),$(".btn-expandir-cotacao").on("click",function(){let t="+"===$(this).text()?"-":"+";$(this).text(t)});const t=document.querySelectorAll(".expander-individual > a");t&&(sectionCustoTotal(),t.forEach(t=>{t.addEventListener("click",expanderItem)}));const e=document.querySelector(".expander-todos > a");e&&e.addEventListener("click",function(e){handleExpanderAll(e,t)});const i=$(".combo-fornecedor-cotacao > select");i.length>0&&handleExpanderCotacao(i.val()),somaProdutoFormFornecedorExterno()});const elParent=document.querySelector(".parent-select-chosen")?".parent-select-chosen":null;$(document).on("nested:fieldAdded:group_memberships",function(t){t.field.find(".chosen-select-company-group").select2({ajax:{url:"/emissors/busca.json",dataType:"json",delay:250,data:function(t){return{term:t.term}},processResults:function(t){return{results:$.map(t,function(t){return{id:t.user.id,text:t.cnpj+" - "+t.razao_social}})}},cache:!0},minimumInputLength:3,escapeMarkup:function(t){return t},theme:"bootstrap",placeholder:"Selecionar produto",...elParent?{dropdownParent:$(elParent)}:{}})}),jQuery(function(t){t("#checkbox-baixa-criacao").on("change",function(){if(t("#campos_baixa_na_criacao").toggle(t(this).is(":checked")),0===t("#checkbox-baixa-criacao:checked").length&&(t("#campos_baixa_na_criacao :input").val(""),t("#input_desconto").val("0,00"),t("#input_juros").val("0,00"),t("#input_valor_liquido").val("0,00")),1===t("#checkbox-baixa-criacao:checked").length){t("#conta_a_pagar_data_pagamento").val(moment().format("L")),t("#contas_a_receber_data_pagamento").val(moment().format("L"));let e=t("#contas_a_receber_moeda_id option:selected");t(".currency-label").text(e.attr("data-label"))}})}),jQuery(function(t){t("#percentual_or_qtd_input_quantidade").on("change",function(){t("#form-quantidade-produto").toggle(t(this).is(":checked")),t("#form-percentual-produto").toggle(!t(this).is(":checked")),t("#percentual_produtos").val(null)}),t("#percentual_or_qtd_input_percentual").on("change",function(){t("#form-quantidade-produto").toggle(!t(this).is(":checked")),t("#form-percentual-produto").toggle(t(this).is(":checked")),t("#quantidade_produtos").val(null),t("#percentual_produtos").val("100.0")})});var ctx=document.getElementById("chart-fluxo-de-caixa");ctx&&$.ajax({url:"/relatorio_contas_correntes/chart",type:"GET",suppressErrors:!0,dataType:"JSON",success:function(t){var e=JSON.parse(t.chart);new Chart(ctx,{type:"bar",data:{labels:e.map(function(t){return t[0]}),datasets:[{label:"Entradas",data:e.map(function(t){return t[1]}),backgroundColor:"rgba(128, 171, 55, 1)",borderColor:"rgba(128, 171, 55, 1)",borderWidth:1},{label:"Entradas previstas",data:e.map(function(t){return t[4]}),backgroundColor:"rgba(128, 171, 55, 0.4)",borderColor:"rgba(128, 171, 55, 0.4)",borderWidth:1},{label:"Sa\xeddas",data:e.map(function(t){return t[2]}),backgroundColor:"rgba(221, 3, 51, 1)",borderColor:"rgba(221, 3, 51, 1)",borderWidth:1},{label:"Sa\xeddas previstas",data:e.map(function(t){return t[5]}),backgroundColor:"rgba(221, 3, 51, 0.3)",borderColor:"rgba(221, 3, 51, 0.3)",borderWidth:1},{type:"line",label:"Saldo",data:e.map(function(t){return t[3]}),backgroundColor:"rgba(43, 87, 140, 1)",borderColor:"rgba(43, 87, 140, 1)",fill:!1},{type:"line",label:"Saldo previsto",data:e.map(function(t){return t[6]}),backgroundColor:"rgba(43, 87, 140, 0.3)",borderColor:"rgba(43, 87, 140, 0.3)",borderDash:[10,5],fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,tooltips:{callbacks:{label:function(t,e){var i=e.datasets[t.datasetIndex].label||"",n=t.yLabel;i&&(i+=": "),i+=n<0?"- R$ ":"R$ ";var o=n<0?(-1*n).toString():n.toString();return i+=o=(o=parseFloat(o).toFixed(2)).replace(".",",").replace(/(\d)(?=(\d{3})+,)/g,"$1.")}}},scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(t){return"R$ "+t}}}]}}});$("#loader").hide()}}),$(".select-tipo-regua-cobranca").on("change",function(){disableInputDias(this)}),$(document).on("nested:fieldAdded:regua_de_cobrancas",function(t){t.field.find('[data-toggle="switch"]').bootstrapSwitch(),$(".select-tipo-regua-cobranca").on("change",function(){disableInputDias(this)})}),$("#select-variaveis-html-texto").on("change",function(){CKEDITOR.instances.conteudo_html_texto.setData(CKEDITOR.instances.conteudo_html_texto.getData()+" {{ "+this.value+" }}")}),$("#select-variaveis-txt-texto").on("change",function(){$("#conteudo_txt_texto").val($("#conteudo_txt_texto").val()+" {{ "+this.value+" }}").focus()}),$(document).on("ready",()=>{const t=$("#fechamento_cambio_quantidade_convertida"),e=$(".texto-moeda-escolhida"),i=$(".codigo-moeda-escolhida"),n=$("#escolheMoeda");let o,a,r=!1,s=!1,l=n.children("option:selected").text(),c=n.val();const u=(t,e,i,n=!1)=>{const o=isNaN(e)?0:e;!0===i?t.val(n?formata_numero_longo(o):formata_numero(o)):t.val(o)},d=(t,e)=>{t.text(e)},p=(t,e)=>{t.text(e)},h=t=>{const e=$("#exibeCambio");null!==t&&e.html(`${formata_numero_longo(t)}`)},f=t=>{const e=$("#exibeDiferencaCambio");null!==t&&(t==Infinity?e.html("+ 0,00"):e.html(` + ${formata_numero_longo(t)}`))},m=(t,e)=>{const i=$("#exibeSpreadFinal");null!==e&&(e==Infinity?i.html("R$ 0,00"):i.html(`R$ ${formata_numero_longo(t)}`))},g=t=>{const e=$("#exibeVariacaoCambial");null!==t&&(e.html(` ${formata_numero(t)}%`),t<0?(e.css("color","red"),$("#arrow-up").hide(),$("#arrow-down").show()):(e.css("color","green"),$("#arrow-up").show(),$("#arrow-down").hide()))},v=()=>{$("#banner_cotacao").length>0&&$.ajax({url:"/configuracoes/percentual_taxa_cambio",method:"GET",dataType:"json",success(t){s=!0,o=t.taxa_cambio_maino,a=o}})},_=(n,v)=>{$("#banner_cotacao").length>0&&$.ajax({url:"/moedas/",method:"GET",dataType:"json",success(_){const b=_.moedas,y=b.find(t=>t.codigo_iso===n),w=b.find(t=>"USD"===t.codigo_iso);if(y!==undefined&&s!==undefined){if(h(y.taxa_cambio_venda),g(y.variacao_cambial),t.prop("disabled",null===y.taxa_cambio_venda),r=null!==y.taxa_cambio_venda,d(e,c),p(i,l),v){const e=$("#quantidade_brl"),i=$("#fechamento_cambio_taxa"),n=$("#fechamento_cambio_spred"),r=$("#fechamento_cambio_quantidade_brl"),s=y.taxa_cambio_venda,l=w.taxa_cambio_venda,c=y.taxa_fixa_bc,d=y.taxa_fixa_corretora,p=to_float(t.val());let h;const g=(h=s+s*((o=p<=19999?1.5:a)/100)+d+c/p*l)-s,v=p*h;u(e,v,!0),u(i,s,!1),u(n,h,!1),u(r,v,!1),m(h,g,p),f(g,p)}}else h(null),g(null),t.prop("disabled",!0),r=!1}})};let b;setInterval(()=>{!1===s&&v()},3e3),setInterval(()=>{!1===r&&_(l,!1)},3e3),n.change(()=>{l=n.children("option:selected").text(),c=n.val(),_(l,!0)}),t.on("change keydown keyup",()=>_(l,!0)),t.on("focus",()=>{ativaSegmentAnalytics("Focar no input de quantidade convertida","bot\xe3o",null)}),t.on("keyup",()=>{clearTimeout(b),b=setTimeout(()=>{ativaSegmentAnalytics("Digitar no input de quantidade convertida","bot\xe3o",null)},1e3)}),$("#solicitar_cambio").on("click",()=>{ativaSegmentAnalytics("Abrir modal simula\xe7\xe3o cota\xe7\xe3o c\xe2mbio","bot\xe3o",null)}),$(".taxas-cambio-container").hide(),$("#fechamento_cambio_quantidade_convertida").on("change keydown keyup",function(){$(this).val()?($(".informacoes-cambio-container").hide(),$(".taxas-cambio-container").show()):($(".taxas-cambio-container").hide(),$(".informacoes-cambio-container").show())})}),$(document).on("ready",()=>{for(var t=document.getElementsByClassName("radio_buttons"),e=0,i=document.getElementById("botao_confirma_corretora"),n=0;n<t.length;n++)t[n].checked&&e++;0==e&&$(i).attr("disabled",!0),$(".corretora").click(function(){var t=!1;$(this).hasClass("sem-preferencia")&&(t=!0);for(var e=$(this).attr("id"),n=document.getElementById("radio_corretora-"+e),o=document.getElementsByClassName("corretora"),a=document.getElementsByClassName("sem-preferencia")[0],r=document.getElementsByClassName("com-preferencia"),s=document.getElementById("form_exclusivo-"+e),l=document.getElementsByClassName("form-exclusivo"),c=0;c<l.length;c++)$(l[c]).hide();$(s).show(),n.checked=!0,$(i).removeAttr("disabled");for(c=0;c<o.length;c++){var u=o[c].id,d=$(o[c]).find("radio_corretora-"+u),p=document.getElementById(d.selector);if(t){for(c=0;c<r.length;c++)$(r[c]).removeClass("corretora-selecionada");var h=a;$(a).addClass("corretora-selecionada")}else if(p.checked){h=document.getElementById(d.context.id);$(h).addClass("corretora-selecionada"),$(a).removeClass("corretora-selecionada")}else{var f=document.getElementById(d.context.id);$(f).removeClass("corretora-selecionada"),$(a).removeClass("corretora-selecionada")}}}),$("#botao_confirma_corretora").click(function(){$("#panel_geral").removeClass("tab-corretora"),$("#panel_geral").addClass("tab-formulario")}),$("#botao_volta_formulario").click(function(){$("#panel_geral").removeClass("tab-formulario"),$("#panel_geral").addClass("tab-corretora"),window.scrollTo(0,0)}),$("#botao_confirma_corretora").click(function(){ativaSegmentAnalytics("Confirma Corretora Escolhida","bot\xe3o",null)}),$("#botao_cadastro_cambio").click(function(){let t;$(".radio_buttons").each(function(){$(this).is(":checked")&&(t=$(this))});let e=t.val(),i=$(`#nome-parceiro-${e}`).text();const n="/exchange_registrations",o={method:"POST",body:JSON.stringify({exchange_registration:{broker:i}}),headers:{"Content-Type":"application/json"}};fetch(n,o).then(window.open(t.data("registration-url"),"_blank"))})}),$("#filtro-conta-digital-pjbank .btn-tipo-transacao").on("click",function(){$("#filtro-conta-digital-pjbank #tipo").val($(this).data("tipoTransacao")),submitFiltroContaDigital()}),$("#filtro-conta-digital-pjbank .btn-mes").on("click",function(){$("#filtro-conta-digital-pjbank #data").val($(this).data("dataInicio")+" - "+$(this).data("dataFim")),$("#filtro-conta-digital-pjbank #data_inicio").val($(this).data("dataInicio")),$("#filtro-conta-digital-pjbank #data_fim").val($(this).data("dataFim")),submitFiltroContaDigital()}),$("#filtro-conta-digital-pjbank #data.daterange").on("apply.daterangepicker",function(){submitFiltroContaDigital()}),$("#filtro-conta-digital-pjbank #data.daterange").on("cancel.daterangepicker",function(){submitFiltroContaDigital()}),$(".btn-add-valor-deposito").on("click",function(){var t=to_float($("#deposito_conta_digital_pjbank_valor").val()),e=to_float($(this).data("valor"));$("#deposito_conta_digital_pjbank_valor").val(formata_numero(t+e))}),$(document).ready(function(){$("#a-tab-clientes").click(function(){$(".botao-excel-clientes").show(),$(".botao-excel-produtos").hide()}),$("#a-tab-produtos").click(function(){$(".botao-excel-produtos").show(),$(".botao-excel-clientes").hide()}),getDataCurvaAbc("/crm/curva_abc/clientes"+window.location.search,"clientes",[]),getDataCurvaAbc("/crm/curva_abc/produtos"+window.location.search,"produtos",[])}),$(document).ready(()=>{getDataMargemLucro(`/crm/margem_lucro_relatorios/produtos${window.location.search}`,"produtos",[])}),$(function(){function t(){let t=0;$("#modal_serial_number_product .fields").each((e,i)=>{""!=$(i).find("input").val()&&"none"!=$(i).css("display")&&t++}),$("#quantidade_serial").html(t>0?`possui ${t}`:"n\xe3o possui")}$(".readonly-date").datepicker("destroy"),$(document).on("click",".btn-add-lote",function(){$(".readonly-date").datepicker("destroy")}),$(document).on("change",".lote_select",function(){var t="/item_pedidos/"+$("#hidden_item_id").val()+"/seleciona_lote";$.ajax({url:t,type:"GET",data:{numero:$(this).val()},dataType:"json",success:t=>{if("lote"in t&&null!=t.lote){const e=$(this).data("index");$("#item_pedido_lotes_attributes_"+e+"_codigo_agregacao").val(t.lote.codigo_agregacao),$("#item_pedido_lotes_attributes_"+e+"_data_fabricacao").val(moment(t.lote.data_fabricacao).format("DD/MM/YYYY")),$("#item_pedido_lotes_attributes_"+e+"_data_validade").val(moment(t.lote.data_validade).format("DD/MM/YYYY"))}}})}),t(),$("#modal_serial_number_product").on("hidden.bs.modal",function(){t()})}),$("#modal_serial_number_product").on("click",'[data-dismiss="modal"]',function(t){t.stopPropagation()}),document.addEventListener("DOMContentLoaded",()=>{$("#item_pedido_tabela_de_venda_select").change(function(){let t=$(this).val(),e=$("#item_pedido_produto_estoque_id").val();if(e||(e=$("#produto_estoque_id").val()),t&&e){let i=formata_numero_longo(to_float($("#pu_original").val())/to_float($("#pedido_taxa_cambio").val()));$("#item_pedido_pu_alterado_pedido").val(i),apos_escolha_tabela_de_venda(t,e)}}),$(".reseta_selec_tabela_de_venda_ao_mudar").change(function(){$("#item_pedido_tabela_de_venda_select").val("").trigger("change")}),alteraDescontoAcrescimo()}),toggleCamposPagamentoParcelado(),$("#condicao_pagamento_forma_pagamento").on("change",function(){toggleCamposPagamentoParcelado()}),$("#modal-escolha-de-pagamento").modal({backdrop:"static",keyboard:!1}),$("#modal-listagem-cobrancas").modal({show:!1,backdrop:"static",keyboard:!1}),$("#modal-upload-informacao-pagamento").modal({show:!1,backdrop:"static",keyboard:!1}),$(".boleto").click(function(){$("#modal-escolha-de-pagamento").modal("hide"),$("#modal-listagem-cobrancas").modal({backdrop:"static",keyboard:!1})}),$(".upload").click(function(){$("#modal-escolha-de-pagamento").modal("hide"),$("#modal-upload-informacao-pagamento").modal({backdrop:"static",keyboard:!1})}),$(".close-modal").each(function(){$(this).click(function(){$("#modal-listagem-cobrancas").modal("hide"),$("#modal-upload-informacao-pagamento").modal("hide"),$("#modal-escolha-de-pagamento").modal({backdrop:"static",keyboard:!1})})}),$(document).on("ready",function(){$("#submit_cadastro_inicial").on("click",function(t){t.preventDefault(),$("#aceite_termos_de_uso").is(":checked")?$("#new_cadastro").submit():$("#erro-termos").css("display","inline")}),$("#ativa_termos_de_uso").on("click",function(){var t=$("#termos_de_uso_area");"332px"!=t.css("height")?t.css({padding:"10px",height:"332px","border-color":"rgba(204,204,204, 0.8)"}):t.css({height:"0",padding:"0","border-color":"rgba(204,204,204, 0)"})})});var cotas={},funcionalidadesExtras={};const showMoreLimit=5;$(document).on("ready",function(){if(0!=$("#json_valores").length){
const l=JSON.parse($("#json_valores").val()),c=l.filter(t=>["sped","pcp","cupom_fiscal","marketplaces","recompra_ai","rastreamento_de_embarques"].includes(t.cota)),u=l.filter(t=>!["sped","pcp","cupom_fiscal","marketplaces","recompra_ai","rastreamento_de_embarques"].includes(t.cota)),d=to_float($("#valor_plano_base").val());function t(){$("#value_modality").html(formatValues(d))}function e(){const t=a()+r()+d;$("#total-plano").html(formatValues(t))}function i(t,e){let i=n(`${t}`,e);const o=e>0?i.valor:0;$(`#preco_cota_${t}`).html(formatValues(o))}function n(t,e){return e>0?u.filter(i=>i.cota===t&&i.qtde_maxima>=e).sort((t,e)=>t.qtde_maxima-e.qtde_maxima)[0]||{cota:"undefined",qtde_maxima:0,valor:0}:0}function o(t){return c.find(e=>e.role_id==t)||{cota:"undefined",id:0,valor:0}}function a(){return $.map($(".preco-select"),t=>{return cotas[`${$(t).attr("id")}`]=n(`${$(t).attr("id")}`,$(t).val()).valor}).reduce((t,e)=>t+e,0)}function r(){return $.map($(".check_box_role:checked"),t=>{return funcionalidadesExtras[`${$(t).data("name")}`]=o($(t).val()).valor}).reduce((t,e)=>t+e,0)}function s(){"true"===$("#verifica_plano_legado").val()&&["numero_ncms_monitoradas","numero_usuarios","numero_dues_anual","numero_dis_anual","numero_nfes_anual","numero_rastreamento_embarque_anual"].forEach(t=>{$(`#${t}`).val(" ")})}initializeSeeMore(),initializeFloatPanel(),s(),t(),$(".preco-select").each((t,e)=>{i($(e).attr("id"),$(e).val())}),c.forEach(t=>{$(`#${t.cota}`).append(`<span>${formatValues(t.valor)}</span>`),$(`#cota-th-${t.cota}`).append(`<br><span>${formatValues(t.valor)}</span>`)}),$(".preco-select, .check_box_role").on("change",function(){$(this).is("input[type=checkbox]")||i($(this).attr("id"),$(this).val()),e()}),$(".salvar-meu-plano").click(t=>{e(),avisoConfirmacaoMudancaPlano(t)}),$(".confirm-modal").on("hidden.bs.modal",function(){$(this).off("confirmed")})}}),$(document).on("ready",()=>{mostra_div_custo_lancamento_automatico()}),$("#configuracao_lancamento_automatico_status").change(function(){mostra_div_custo_lancamento_automatico()});const _Notificacao={app:null};$("#new_importacao_de_atualizacao_de_produtos").on("submit",importacaoAtualizacaoSubmitForm),$("#importacao-imagens-produtos").on("submit",importacaoAtualizacaoSubmitForm),$("#new_importacao_de_inventario_sap").on("submit",importacaoDeInventarioSapSubmitForm),$(".edit_estoque_conferencia").on("submit",function(){$(this).find("[onkeypress='return somente_numero(event)']").each(function(){$(this).val(trataValorDecimal(this))})}),$(".edit_estoque_conferencia").on("keypress",function(t){"Enter"==t.key&&t.preventDefault()}),document.addEventListener("DOMContentLoaded",function(){bloqueiaJavascriptEtapasProcesso()||inicializaBotaoModalReordenacao()}),document.addEventListener("DOMContentLoaded",()=>{document.getElementById("chart-fluxo-de-caixa-contador")&&$("#filtro-fluxo-de-caixa-contador").submit()}),document.addEventListener("DOMContentLoaded",()=>{const t=$("#modal-confirmar-compra-pacote");$(".btn-comprar-pacote").on("click",handleBuyPackageButton),t.on("hidden.bs.modal",handleCloseModalComprarPacote)}),document.addEventListener("DOMContentLoaded",()=>{$(".btn-comprar-primeiro-pacote").on("click",handleBuyFirstPackageButton)}),document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("btnCertificadoDigitalModal");t&&t.addEventListener("click",function(){$("#emailCertificadoDigitalModal").modal()})});var gestaDeCambioFormData={};document.addEventListener("DOMContentLoaded",()=>{0!=$("#gestao-de-cambio-form").length&&(initializeAnexoInput(),initializeSelectProcessos(),initializeSelectBeneficiario(),updateResumoPagamentosContrato(),deveExibirAbaDePagamentos(),$(".recalcula-valor-contrato").on("change",calculoCamposDeValoresNoCambio),$(".select-vinculo-cambio-contrato-pagamento").each(startSelectPagamentosHandler),$("#btn-voltar-pagamentos").on("click",changeTabPresentationClass))}),$(document).on("nested:fieldAdded:anexos_cambio_contratos",t=>{initializeAnexoInput($(t.field).find(".anexo-input")),restaurarDadosGestaoDeCambio()}),$(document).on("nested:fieldAdded:vinculo_cambio_contrato_com_processos",t=>{initializeSelectProcessos($(t.field).find(".select-vinculo-cambio-contrato-processo")),restaurarDadosGestaoDeCambio()}),$(document).on("nested:fieldRemoved:vinculo_cambio_contrato_com_processos",t=>{const e=t.field;$(e).find(".pagamentos-contrato-de-cambio").remove(),gestaoDeCambioUpdatePagamentosMessage(),updateResumoPagamentosContrato()}),$(document).on("click",".remove-pagamentos-contrato-cambio",removerPagamentoModal),$("#comex_gestao_de_cambio_contrato_valor_total").on("change",updateResumoPagamentosContrato),$("#add-processos-gestao-de-cambio, #add-anexos-gestao-de-cambio").on("click",salvarDadosGestaoDeCambio),function(){function t(t){if(isPresent(t)&&"null"!=t){JSON.parse(t).forEach(function(t){let e=t.valor,i=t.atributo;$(`#${i}`).is("textarea")?$(`#${i}`).text(e):$(`#${i}`).val(e)})}}function e(e,n,o=!1){if(isPresent(n)&&isPresent(e)){$.ajax("/ncms/find_ncm_properties",{data:{id:e,modality:n}}).done(function(e){let n=$("#product_catalog_product_properties").val();i(e,o),t(n)})}}function i(t,e){$(".ncm_properties_div").empty(),isPresent(t)&&!t.data?t.forEach(function(t){let i=$(`<div class='form-group' id='form-group-${t.code}'></div>`),n=`<label>${t.presentation_name}</label>`,o=t.purpose;if(o.length>0){let a=$(`<select ${e?"disabled":""} name='property[value_${t.id}]' id=${t.code} class='form-control chosen-select'></select>`);o.forEach(function(t){a.append($("<option></option>").val(t.codigo).text(`${t.codigo} - ${t.descricao}`))}),i.append(n),i.append(a),$(".ncm_properties_div").append(i),t.conditional_property&&a.on("change",function(){$(`.child-${t.id}`).remove();let[e]=t.conditioned.filter(function(t){return t.condicao.valor==a.val()});if(e){let i=e.atributo,n=$(`<div class='form-group child-${t.id}' id='form-group-${i.codigo}'></div>`),o=`<label>${i.nomeApresentacao}</label>`,a=$(`<textarea class='form-control' id=${t.code} name='property[child_${t.id}]' ></textarea>`);n.append(o),n.append(a),$(`#form-group-${t.code}`).after(n)}})}else{let o=$(`<textarea ${e?"disabled":""} class='form-control' id=${t.code} name='property[value_${t.id}]' ></textarea>`);i.append(n),i.append(o),$(".ncm_properties_div").append(i)}let a=$(`<input name='property[code_${t.id}]' type='hidden' value=${t.code}>`);i.prepend(a)}):$(".ncm_properties_div").append(o())}function n(t){$("#product_catalog_product_ncm_id").val(t.id_ncm);let e=$("<option selected='selected'></option>").val(t.codigo).text(t.codigo);$("#product_catalog_product_internal_code").append(e).trigger("change"),$("#product_catalog_product_denomination").val(t.descricao.slice(0,99)),$("#product_catalog_product_description").val(t.additional_information),$("#product_catalog_product_ncm_code").val(t.ncm_description).trigger("change")}function o(){return"\n        <div class='col-md-12 listagem-vazia'>\n          <img src='/assets/mascote_xml-5fd0d3169f5a5879dd7058467c796d42fd1e97b95ee57eecbcd8d6986c505a70.png' alt='Mascote xml'>\n          <p>Esse NCM n\xe3o possui atributos</p>\n        </div>\n      "}let a=$("#product_catalog_product_modality").val();if(e($("#product_catalog_product_ncm_id").val(),a),$(".find_product_catalog_product").each(function(){let t=$(this).data("autocomplete-source"),e=$(this);e.dataMap={},e.selectize({valueField:"id",labelField:"label",searchField:"label",persist:!1,render:{option:function(t,e){return"<div><span>"+e(t.label)+"</span></div>"}},load:function(e,i){$.ajax({url:t,data:{term:e},type:"GET",error:function(){i()},success:function(t){i(t)}})},onOptionAdd:function(t,i){e.dataMap[t]=i},onChange:function(t){t&&e.dataMap[t]?n(e.dataMap[t]):t&&console.log("Aconteceu algo de errado")}})}),$("#show-products").length>0){e($("#ncm_id").val(),$("#product-modality").val(),!0)}$("#product_catalog_product_ncm_code").length>0&&$("#product_catalog_product_ncm_code").autocomplete({autoFocus:!0,source:$("#product_catalog_product_ncm_code").data("autocomplete-source"),minLength:0,autofocus:!0,select:function(t,i){let n=$("#product_catalog_product_modality").val();e(i.item.id,n),$(this).data("id",i.item.id)}}),$(".reprocess_properties").change(function(){e($("#product_catalog_product_ncm_id").val(),$("#product_catalog_product_modality").val())}),$("#not_synchronized_product").click(function(){$("#product_catalog_product_action").val("only_save_database"),$("#product_catalog_product_status").val("not_synchronized")}),$("#sketch_product").click(function(){$("#product_catalog_product_action").val("update"),$("#product_catalog_product_status").val("sketch")}),$("#active_product").click(function(){$("#product_catalog_product_action").val("update"),$("#product_catalog_product_status").val("active")}),$("#create_new_version_product").click(function(){$("#product_catalog_product_action").val("create_next_version"),$("#product_catalog_product_status").val("active")}),$("#rectify_product").click(function(){$("#product_catalog_product_action").val("rectify_version"),$("#product_catalog_product_status").val("active")}),$("#inactive_product").click(function(){$("#product_catalog_product_action").val("update"),$("#product_catalog_product_status").val("inactive")})}(),$(function(){toggleSelectForeignOperator($("#product_catalog_manufacturer_known_true")),$(".checkbox_know").change(function(){toggleSelectForeignOperator($("#product_catalog_manufacturer_known_true"))}),$("#product_catalog_manufacturer_pais_id").change(function(){let t=JSON.parse($("#foreign_operators").val()),e=$(this).children("option:selected").data("country_code");renderSelectForeignOperators(t.filter(t=>t.country_code==e))})}),$(function(){$("#active_foreign_operator").click(function(){$("#product_catalog_foreign_operator_action").val("update"),$("#product_catalog_foreign_operator_status").val("active")}),$("#create_new_version_foreign_operator").click(function(){$("#product_catalog_foreign_operator_action").val("create_next_version"),$("#product_catalog_foreign_operator_status").val("active")}),$("#rectify_foreign_operator").click(function(){$("#product_catalog_foreign_operator_action").val("rectify_version"),$("#product_catalog_foreign_operator_status").val("active")}),$("#inactive_foreign_operator").click(function(){$("#product_catalog_foreign_operator_action").val("update"),$("#product_catalog_foreign_operator_status").val("inactive")})}),$("#pesquisa-numero-do-documento-stakeholder").on("click",function(){var t=$("#stakeholder_numero_do_documento_pesquisa").val(),e=30,i=2,n=1;t!=undefined&&null!=t&&""!=t&&(t=t.replace(/\./g,"").replace(/\//g,"").replace(/-/g,""),$("#success-busca-numero-do-documento").hide(),$("#pesquisa-numero-do-documento-stakeholder").find("#icone-pesquisa-numero-do-documento").toggleClass("fa-search fa-hourglass-start"),$("#pesquisa-numero-do-documento-stakeholder").css("pointer-events","none"),$("#pesquisa-numero-do-documento-stakeholder").find("#texto-pesquisa-numero-do-documento").html("Buscando..."),null!=$("#input-tipos-stakeholder").val()?11==t.length?busca_pelo_cpf(t,e,i):14==t.length?busca_pelo_cnpj(t,e,n):numero_de_caracteres_invalido():erro("Por favor, preencha o campo indicando o que voc\xea quer cadastrar."))}),$(".btn-formulario-cadastro-de-stakeholder").on("click",function(t){$("#input-tipos-stakeholder").val()==undefined&&(t.preventDefault(),alert("Aten\xe7\xe3o! \xc9 necess\xe1rio selecionar pelo menos um tipo."))}),$("#formulario-de-cadastro-de-stakeholder input").keydown(function(t){if(13==t.keyCode)return t.preventDefault(),!1}),$("#modal-primeira-parte").keyup(function(t){13==t.keyCode&&$("#pesquisa-numero-do-documento-stakeholder").click()}),$("#stakeholder_tipo_pessoa_id").on("change",function(){1!=$(this).val()?$(".campo-exclusivo-pj").each(function(){defineNaoContribuinte(),$(this).hide()}):$(".campo-exclusivo-pj").each(function(){$(this).show()})}),$(document).ready(function(){$("#input-tipos-stakeholder option:selected").index()<0&&$("#segunda-parte").addClass("disabled")}),$("#input-tipos-stakeholder").on("change",function(){$("#input-tipos-stakeholder option:selected").index()<0?($("#segunda-parte").addClass("disabled"),$("#h4two").tooltip("enable"),$("label.preenchimento-manual-warning").removeClass("preenchimento-manual-hide")):($("#segunda-parte").removeClass("disabled"),$("#h4two").tooltip("disable"),$("label.preenchimento-manual-warning").addClass("preenchimento-manual-hide"))}),$("#busca_listagem_stakeholder_form").on("ajax:before",function(){$("#loader-tabela-stakeholders").show(),$("#tabela-stakeholder").hide()}),$("div#formulario_novo_stakeholder").dialog({autoOpen:!1,height:500,width:600,resizable:!0,draggable:!1,modal:!0,buttons:[{id:"salvar_stakeholder",text:"Salvar",click:function(){$("#salvar_stakeholder").attr("disabled","disabled"),$("#formulario_stakeholder_pedido").submit()}},{id:"cancel",text:"Cancelar",click:function(){$("#formulario_stakeholder_pedido").trigger("reset"),$(this).dialog("close")}}],open:function(){isPresent($("#pedido_cliente_cnpj").val())&&preenche_nome_ou_documento($("#pedido_cliente_cnpj").val()),isPresent($("#processo_cliente_cnpj").val())&&preenche_nome_ou_documento($("#processo_cliente_cnpj").val()),isPresent($("#processo_fornecedor_cnpj").val())&&preenche_nome_ou_documento($("#processo_fornecedor_cnpj").val()),isPresent($("#contas_a_receber_cliente_cnpj").val())&&preenche_nome_ou_documento($("#contas_a_receber_cliente_cnpj").val()),isPresent($("#conta_a_pagar_fornecedor_cnpj").val())&&preenche_nome_ou_documento($("#conta_a_pagar_fornecedor_cnpj").val()),isPresent($("#di_transportadora_cnpj").val())&&preenche_nome_ou_documento($("#di_transportadora_cnpj").val())}}),$("#salvar_stakeholder").on("click",function(){$(this).prop("disabled",!0)}),autocomplete_stakeholder("#processo_cliente_cnpj","#processo_stakeholder_cliente_id","cliente"),autocomplete_stakeholder("#processo_fornecedor_cnpj","#processo_stakeholder_fornecedor_id","fornecedor"),autocomplete_stakeholder("#foreign_operator_fornecedor_cnpj","#foreign_operator_fornecedor_id","fornecedor"),autocomplete_stakeholder("#di_transportadora_cnpj","#di_stakeholder_transportadora_id","transportadora");const enableSaveFileForm=()=>{let t=$("#stakeholder-save-button");t.attr("disabled",!1),t.val("Salvar")};$("#parametrizacao-ncm-listagem-uf").on("change",".parametrizacao-ncm-selecao-uf",function(){mostra_parametrizacao_st_por_regras_da_uf(this)}),$.each($("#parametrizacao-ncm-listagem-uf .parametrizacao-ncm-selecao-uf"),function(t,e){mostra_parametrizacao_st_por_regras_da_uf(e)}),$(document).on("nested:fieldAdded",function(t){carrega_autocomplete_tag(t.field.find(".autocomplete_tag"))}),$(document).ready(function(){let t=$("#lightbox");$('[data-target="#lightbox"]').on("click",function(){let e=$(this).find("img"),i=e.attr("src"),n=e.attr("alt"),o={maxWidth:$(window).width()-200,maxHeight:$(window).height()-200};t.find(".close").addClass("hidden"),t.find("img").attr("src",i),t.find("img").attr("alt",n),t.find("img").css(o)}),t.on("shown.bs.modal",function(){let e=t.find("img");t.find(".modal-dialog").css({width:e.width()}),t.find(".close").removeClass("hidden")})}),
/*! X-editable - v1.5.3
* In-place editing with Twitter Bootstrap, jQuery UI or pure jQuery
* http://github.com/vitalets/x-editable
* Copyright (c) 2015 - 2016 Vitaliy Potapov; Licensed MIT */
function(t){"use strict";var e=function(e,i){this.options=t.extend({},t.fn.editableform.defaults,i),this.$div=t(e),this.options.scope||(this.options.scope=this)};e.prototype={constructor:e,initInput:function(){this.input=this.options.input,this.value=this.input.str2value(this.options.value),this.input.prerender()},initTemplate:function(){this.$form=t(t.fn.editableform.template)},initButtons:function(){var e=this.$form.find(".editable-buttons");e.append(t.fn.editableform.buttons),"bottom"===this.options.showbuttons&&e.addClass("editable-buttons-bottom")},render:function(){this.$loading=t(t.fn.editableform.loading),this.$div.empty().append(this.$loading),this.initTemplate(),this.options.showbuttons?this.initButtons():this.$form.find(".editable-buttons").remove(),this.showLoading(),this.isSaving=!1,this.$div.triggerHandler("rendering"),this.initInput(),this.$form.find("div.editable-input").append(this.input.$tpl),this.$div.append(this.$form),t.when(this.input.render()).then(t.proxy(function(){if(this.options.showbuttons||this.input.autosubmit(),this.$form.find(".editable-cancel").click(t.proxy(this.cancel,this)),this.input.error)this.error(this.input.error),this.$form.find(".editable-submit").attr("disabled",!0),this.input.$input.attr("disabled",!0),this.$form.submit(function(t){t.preventDefault()});else{this.error(!1),this.input.$input.removeAttr("disabled"),this.$form.find(".editable-submit").removeAttr("disabled");var e=null===this.value||this.value===undefined||""===this.value?this.options.defaultValue:this.value;this.input.value2input(e),this.$form.submit(t.proxy(this.submit,this))}this.$div.triggerHandler("rendered"),this.showForm(),this.input.postrender&&this.input.postrender()},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var t,e;this.$form?(t=this.$form.outerWidth(),e=this.$form.outerHeight(),t&&this.$loading.width(t),e&&this.$loading.height(e),this.$form.hide()):(t=this.$loading.parent().width())&&this.$loading.width(t),this.$loading.show()},showForm:function(t){this.$loading.hide(),this.$form.show(),!1!==t&&this.input.activate(),this.$div.triggerHandler("show")},error:function(e){var i,n=this.$form.find(".control-group"),o=this.$form.find(".editable-error-block");if(!1===e)n.removeClass(t.fn.editableform.errorGroupClass),o.removeClass(t.fn.editableform.errorBlockClass).empty().hide();else{if(e){i=(""+e).split("\n");for(var a=0;a<i.length;a++)i[a]=t("<div>").text(i[a]).html();e=i.join("<br>")}n.addClass(t.fn.editableform.errorGroupClass),o.addClass(t.fn.editableform.errorBlockClass).html(e).show()}},submit:function(e){e.stopPropagation(),e.preventDefault();var i=this.input.input2value(),n=this.validate(i);if("object"===t.type(n)&&n.newValue!==undefined){if(i=n.newValue,this.input.value2input(i),"string"==typeof n.msg)return this.error(n.msg),void this.showForm()}else if(n)return this.error(n),void this.showForm();if(this.options.savenochange||this.input.value2str(i)!==this.input.value2str(this.value)){var o=this.input.value2submit(i);this.isSaving=!0,t.when(this.save(o)).done(t.proxy(function(t){this.isSaving=!1;var e="function"==typeof this.options.success?this.options.success.call(this.options.scope,t,i):null;return!1===e?(this.error(!1),void this.showForm(!1)):"string"==typeof e?(this.error(e),void this.showForm()):(e&&"object"==typeof e&&e.hasOwnProperty("newValue")&&(i=e.newValue),this.error(!1),this.value=i,void this.$div.triggerHandler("save",{newValue:i,submitValue:o,response:t}))},this)).fail(t.proxy(function(t){var e;this.isSaving=!1,e="function"==typeof this.options.error?this.options.error.call(this.options.scope,t,i):"string"==typeof t?t:t.responseText||t.statusText||"Unknown error!",this.error(e),this.showForm()},this))}else this.$div.triggerHandler("nochange")},save:function(e){this.options.pk=t.fn.editableutils.tryParseJson(this.options.pk,!0);var i,n="function"==typeof this.options.pk?this.options.pk.call(this.options.scope):this.options.pk;if(!!("function"==typeof this.options.url||this.options.url&&("always"===this.options.send||"auto"===this.options.send&&null!==n&&n!==undefined)))return this.showLoading(),i={name:this.options.name||"",value:e,pk:n},"function"==typeof this.options.params?i=this.options.params.call(this.options.scope,i):(this.options.params=t.fn.editableutils.tryParseJson(this.options.params,!0),t.extend(i,this.options.params)),"function"==typeof this.options.url?this.options.url.call(this.options.scope,i):t.ajax(t.extend({url:this.options.url,data:i,type:"POST"},this.options.ajaxOptions))},validate:function(t){if(t===undefined&&(t=this.value),"function"==typeof this.options.validate)return this.options.validate.call(this.options.scope,t)},option:function(t,e){t in this.options&&(this.options[t]=e),"value"===t&&this.setValue(e)},setValue:function(t,e){this.value=e?this.input.str2value(t):t,this.$form&&this.$form.is(":visible")&&this.input.value2input(this.value)}},t.fn.editableform=function(i){var n=arguments;return this.each(function(){var o=t(this),a=o.data("editableform"),r="object"==typeof i&&i;a||o.data("editableform",a=new e(this,r)),"string"==typeof i&&a[i].apply(a,Array.prototype.slice.call(n,1))})},t.fn.editableform.Constructor=e,t.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:!0,scope:null,savenochange:!1},t.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>',t.fn.editableform.loading='<div class="editableform-loading"></div>',t.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>',t.fn.editableform.errorGroupClass=null,t.fn.editableform.errorBlockClass="editable-error",t.fn.editableform.engine="jquery"}(window.jQuery),function(t){"use strict";t.fn.editableutils={inherit:function(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.superclass=e.prototype},setCursorPosition:function(t,e){if(t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select()}},tryParseJson:function(t,e){if("string"==typeof t&&t.length&&t.match(/^[\{\[].*[\}\]]$/))if(e)try{t=new Function("return "+t)()}catch(i){}finally{return t}else t=new Function("return "+t)();return t},sliceObj:function(e,i,n){var o,a,r={};if(!t.isArray(i)||!i.length)return r;for(var s=0;s<i.length;s++)o=i[s],e.hasOwnProperty(o)&&(r[o]=e[o]),!0!==n&&(a=o.toLowerCase(),e.hasOwnProperty(a)&&(r[o]=e[a]));return r},getConfigData:function(e){var i={};return t.each(e.data(),function(t,e){("object"!=typeof e||e&&"object"==typeof e&&(e.constructor===Object||e.constructor===Array))&&(i[t]=e)}),i},objectKeys:function(t){if(Object.keys)return Object.keys(t);if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e,i=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push(e);return i},escape:function(e){return t("<div>").text(e).html()},itemsByValue:function(e,i,n){if(!i||null===e)return[];if("function"!=typeof n){var o=n||"value";n=function(t){return t[o]}}var a=t.isArray(e),r=[],s=this;return t.each(i,function(i,o){if(o.children)r=r.concat(s.itemsByValue(e,o.children,n));else if(a)t.grep(e,function(t){return t==(o&&"object"==typeof o?n(o):o)}).length&&r.push(o);else{var l=o&&"object"==typeof o?n(o):o;e==l&&r.push(o)}}),r},createInput:function(e){var i,n=e.type;return"date"===n&&("inline"===e.mode?t.fn.editabletypes.datefield?n="datefield":t.fn.editabletypes.dateuifield&&(n="dateuifield"):t.fn.editabletypes.date?n="date":t.fn.editabletypes.dateui&&(n="dateui"),"date"!==n||t.fn.editabletypes.date||(n="combodate")),"datetime"===n&&"inline"===e.mode&&(n="datetimefield"),"wysihtml5"!==n||t.fn.editabletypes[n]||(n="textarea"),"function"==typeof t.fn.editabletypes[n]?new(i=t.fn.editabletypes[n])(this.sliceObj(e,this.objectKeys(i.defaults))):(t.error("Unknown type: "+n),!1)},supportsTransitions:function(){var t=(document.body||document.documentElement).style,e="transition",i=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof t[e])return!0;e=e.charAt(0).toUpperCase()+e.substr(1);for(var n=0;n<i.length;n++)if("string"==typeof t[i[n]+e])return!0;return!1}}}(window.jQuery),function(t){"use strict";var e=function(t,e){this.init(t,e)},i=function(t,e){this.init(t,e)};e.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(i,n){this.$element=t(i),this.options=t.extend({},t.fn.editableContainer.defaults,n),this.splitOptions(),this.formOptions.scope=this.$element[0],this.initContainer(),this.delayedHide=!1,this.$element.on("destroyed",t.proxy(function(){this.destroy()},this)),t(document).data("editable-handlers-attached")||(t(document).on("keyup.editable",function(e){27===e.which&&t(".editable-open").editableContainer("hide")}),t(document).on("click.editable",function(i){var n,o=t(i.target),a=[".editable-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-link-modal"];if(!t(".select2-drop-mask").is(":visible")&&t.contains(document.documentElement,i.target)&&!o.is(document)){for(n=0;n<a.length;n++)if(o.is(a[n])||o.parents(a[n]).length)return;e.prototype.closeOthers(i.target)}}),t(document).data("editable-handlers-attached",!0))},splitOptions:function(){if(this.containerOptions={},this.formOptions={},!t.fn[this.containerName])throw new Error(this.containerName+" not found. Have you included corresponding js file?");for(var e in this.options)e in this.defaults?this.containerOptions[e]=this.options[e]:this.formOptions[e]=this.options[e]},tip:function(){return this.container()?this.container().$tip:null},container:function(){var t;return this.containerDataName&&(t=this.$element.data(this.containerDataName))?t:t=this.$element.data(this.containerName)},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:t.proxy(this.save,this),nochange:t.proxy(function(){this.hide("nochange")},this),cancel:t.proxy(function(){this.hide("cancel")},this),show:t.proxy(function(){this.delayedHide?(this.hide(this.delayedHide.reason),this.delayedHide=!1):this.setPosition()},this),rendering:t.proxy(this.setPosition,this),resize:t.proxy(this.setPosition,this),rendered:t.proxy(function(){this.$element.triggerHandler("shown",t(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(e){this.$element.addClass("editable-open"),!1!==e&&this.closeOthers(this.$element[0]),this.innerShow(),this.tip().addClass(this.containerClass),this.$form,this.$form=t("<div>"),this.tip().is(this.innerCss)?this.tip().append(this.$form):this.tip().find(this.innerCss).append(this.$form),this.renderForm()},hide:function(t){this.tip()&&this.tip().is(":visible")&&this.$element.hasClass("editable-open")&&(this.$form.data("editableform").isSaving?this.delayedHide={reason:t}:(this.delayedHide=!1,this.$element.removeClass("editable-open"),this.innerHide(),this.$element.triggerHandler("hidden",t||"manual")))},innerShow:function(){},innerHide:function(){},toggle:function(t){this.container()&&this.tip()&&this.tip().is(":visible")?this.hide():this.show(t)},setPosition:function(){},save:function(t,e){this.$element.triggerHandler("save",e),this.hide("save")},option:function(t,e){this.options[t]=e,t in this.containerOptions?(this.containerOptions[t]=e,this.setContainerOption(t,e)):(this.formOptions[t]=e,this.$form&&this.$form.editableform("option",t,e))},setContainerOption:function(t,e){this.call("option",t,e)},destroy:function(){this.hide(),this.innerDestroy(),this.$element.off("destroyed"),this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(e){t(".editable-open").each(function(i,n){if(n!==e&&!t(n).find(e).length){var o=t(n),a=o.data("editableContainer");a&&("cancel"===a.options.onblur?o.data("editableContainer").hide("onblur"):"submit"===a.options.onblur&&o.data("editableContainer").tip().find("form").submit())}})},activate:function(){this.tip&&this.tip().is(":visible")&&this.$form&&this.$form.data("editableform").input.activate()}},t.fn.editableContainer=function(n){var o=arguments;return this.each(function(){var a=t(this),r="editableContainer",s=a.data(r),l="object"==typeof n&&n,c="inline"===l.mode?i:e;s||a.data(r,s=new c(this,l)),"string"==typeof n&&s[n].apply(s,Array.prototype.slice.call(o,1))})},t.fn.editableContainer.Popup=e,t.fn.editableContainer.Inline=i,t.fn.editableContainer.defaults={value:null,placement:"top",autohide:!0,onblur:"cancel",anim:!1,mode:"popup"},jQuery.event.special.destroyed={remove:function(t){t.handler&&t.handler()}}}(window.jQuery),function(t){"use strict";t.extend(t.fn.editableContainer.Inline.prototype,t.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=t("<span></span>"),this.options.anim||(this.options.anim=0)},splitOptions:function(){this.containerOptions={},this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide(),this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,t.proxy(function(){this.$element.show(),this.innerDestroy()},this))},innerDestroy:function(){this.tip()&&this.tip().empty().remove()}})}(window.jQuery),function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.editable.defaults,i,t.fn.editableutils.getConfigData(this.$element)),this.options.selector?this.initLive():this.init(),this.options.highlight&&!t.fn.editableutils.supportsTransitions()&&(this.options.highlight=!1)};e.prototype={constructor:e,init:function(){var e,i=!1;if(this.options.name=this.options.name||this.$element.attr("id"),this.options.scope=this.$element[0],this.input=t.fn.editableutils.createInput(this.options),this.input){switch(this.options.value===undefined||null===this.options.value?(this.value=this.input.html2value(t.trim(this.$element.html())),i=!0):(this.options.value=t.fn.editableutils.tryParseJson(this.options.value,!0),"string"==typeof this.options.value?this.value=this.input.str2value(this.options.value):this.value=this.options.value),this.$element.addClass("editable"),"textarea"===this.input.type&&this.$element.addClass("editable-pre-wrapped"),"manual"!==this.options.toggle?(this.$element.addClass("editable-click"),this.$element.on(this.options.toggle+".editable",t.proxy(function(t){if(this.options.disabled||t.preventDefault(),"mouseenter"===this.options.toggle)this.show();else{var e="click"!==this.options.toggle;this.toggle(e)}},this))):this.$element.attr("tabindex",-1),"function"==typeof this.options.display&&(this.options.autotext="always"),this.options.autotext){case"always":e=!0;break;case"auto":e=!t.trim(this.$element.text()).length&&null!==this.value&&this.value!==undefined&&!i;break;default:e=!1}t.when(!e||this.render()).then(t.proxy(function(){this.options.disabled?this.disable():this.enable(),this.$element.triggerHandler("init",this)},this))}},initLive:function(){var e=this.options.selector;this.options.selector=!1,this.options.autotext="never",this.$element.on(this.options.toggle+".editable",e,t.proxy(function(e){var i=t(e.target);i.data("editable")||(i.hasClass(this.options.emptyclass)&&i.empty(),i.editable(this.options).trigger(e))},this))},render:function(t){if(!1!==this.options.display)return this.input.value2htmlFinal?this.input.value2html(this.value,this.$element[0],this.options.display,t):"function"==typeof this.options.display?this.options.display.call(this.$element[0],this.value,t):this.input.value2html(this.value,this.$element[0])},enable:function(){this.options.disabled=!1,this.$element.removeClass("editable-disabled"),this.handleEmpty(this.isEmpty),"manual"!==this.options.toggle&&"-1"===this.$element.attr("tabindex")&&this.$element.removeAttr("tabindex")},disable:function(){this.options.disabled=!0,this.hide(),this.$element.addClass("editable-disabled"),this.handleEmpty(this.isEmpty),this.$element.attr("tabindex",-1)},toggleDisabled:function(){this.options.disabled?this.enable():this.disable()},option:function(e,i){if(e&&"object"==typeof e)t.each(e,t.proxy(function(e,i){this.option(t.trim(e),i)},this));else{if(this.options[e]=i,"disabled"===e)return i?this.disable():this.enable();"value"===e&&this.setValue(i),this.container&&this.container.option(e,i),this.input.option&&this.input.option(e,i)}},handleEmpty:function(e){!1!==this.options.display&&(e!==undefined?this.isEmpty=e:"function"==typeof this.input.isEmpty?this.isEmpty=this.input.isEmpty(this.$element):this.isEmpty=""===t.trim(this.$element.html()),this.options.disabled?this.isEmpty&&(this.$element.empty(),this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass)):this.isEmpty?(this.$element.html(this.options.emptytext),this.options.emptyclass&&this.$element.addClass(this.options.emptyclass)):this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass))},show:function(e){if(!this.options.disabled){if(this.container){if(this.container.tip().is(":visible"))return}else{var i=t.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(i),this.$element.on("save.internal",t.proxy(this.save,this)),this.container=this.$element.data("editableContainer")}this.container.show(e)}},hide:function(){this.container&&this.container.hide()},toggle:function(t){this.container&&this.container.tip().is(":visible")?this.hide():this.show(t)},save:function(t,e){if(this.options.unsavedclass){var i=!1;(i=(i=(i=(i=i||"function"==typeof this.options.url)||!1===this.options.display)||e.response!==undefined)||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(e.newValue))?this.$element.removeClass(this.options.unsavedclass):this.$element.addClass(this.options.unsavedclass)}if(this.options.highlight){var n=this.$element,o=n.css("background-color");n.css("background-color",this.options.highlight),setTimeout(function(){"transparent"===o&&(o=""),n.css("background-color",o),n.addClass("editable-bg-transition"),setTimeout(function(){n.removeClass("editable-bg-transition")},1700)},10)}this.setValue(e.newValue,!1,e.response)},validate:function(){if("function"==typeof this.options.validate)return this.options.validate.call(this,this.value)},setValue:function(e,i,n){this.value=i?this.input.str2value(e):e,this.container&&this.container.option("value",this.value),t.when(this.render(n)).then(t.proxy(function(){this.handleEmpty()},this))},activate:function(){this.container&&this.container.activate()},destroy:function(){this.disable(),this.container&&this.container.destroy(),this.input.destroy(),"manual"!==this.options.toggle&&(this.$element.removeClass("editable-click"),this.$element.off(this.options.toggle+".editable")),this.$element.off("save.internal"),this.$element.removeClass("editable editable-open editable-disabled"),this.$element.removeData("editable")}},t.fn.editable=function(i){var n={},o=arguments,a="editable";switch(i){case"validate":return this.each(function(){var e,i=t(this).data(a);i&&(e=i.validate())&&(n[i.options.name]=e)}),n;case"getValue":return 2===arguments.length&&!0===arguments[1]?n=this.eq(0).data(a).value:this.each(function(){var e=t(this).data(a);e&&e.value!==undefined&&null!==e.value&&(n[e.options.name]=e.input.value2submit(e.value))}),n;case"submit":var r=arguments[1]||{},s=this,l=this.editable("validate");if(t.isEmptyObject(l)){var c={};if(1===s.length){var u=s.data("editable"),d={name:u.options.name||"",value:u.input.value2submit(u.value),pk:"function"==typeof u.options.pk?u.options.pk.call(u.options.scope):u.options.pk};"function"==typeof u.options.params?d=u.options.params.call(u.options.scope,d):(u.options.params=t.fn.editableutils.tryParseJson(u.options.params,!0),t.extend(d,u.options.params)),c={url:u.options.url,data:d,type:"POST"},r.success=r.success||u.options.success,r.error=r.error||u.options.error}else{var p=this.editable("getValue");c={url:r.url,data:p,type:"POST"}}c.success="function"==typeof r.success?function(t){r.success.call(s,t,r)}:t.noop,c.error="function"==typeof r.error?function(){r.error.apply(s,arguments)}:t.noop,r.ajaxOptions&&t.extend(c,r.ajaxOptions),r.data&&t.extend(c.data,r.data),t.ajax(c)}else"function"==typeof r.error&&r.error.call(s,l);return this}return this.each(function(){var n=t(this),r=n.data(a),s="object"==typeof i&&i;s&&s.selector?r=new e(this,s):(r||n.data(a,r=new e(this,s)),"string"==typeof i&&r[i].apply(r,Array.prototype.slice.call(o,1)))})},t.fn.editable.defaults={type:"text",disabled:!1,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}}(window.jQuery),function(t){"use strict";t.fn.editabletypes={};var e=function(){};e.prototype={init:function(e,i,n){this.type=e,this.options=t.extend({},n,i)},prerender:function(){this.$tpl=t(this.options.tpl),this.$input=this.$tpl,this.$clear=null,this.error=null},render:function(){},value2html:function(e,i){t(i)[this.options.escape?"text":"html"](t.trim(e))},html2value:function(e){return t("<div>").html(e).text()},value2str:function(t){return t},str2value:function(t){return t},value2submit:function(t){return t},value2input:function(t){this.$input.val(t)},input2value:function(){return this.$input.val()},activate:function(){this.$input.is(":visible")&&this.$input.focus()},clear:function(){this.$input.val(null)},escape:function(e){return t("<div>").text(e).html()},autosubmit:function(){},destroy:function(){},setClass:function(){this.options.inputclass&&this.$input.addClass(this.options.inputclass)},setAttr:function(t){this.options[t]!==undefined&&null!==this.options[t]&&this.$input.attr(t,this.options[t])},option:function(t,e){this.options[t]=e}},e.defaults={tpl:"",inputclass:null,escape:!0,scope:null,showbuttons:!0},t.extend(t.fn.editabletypes,{abstractinput:e})}(window.jQuery),function(t){"use strict";var e=function(){};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){var e=t.Deferred();return this.error=null,this.onSourceReady(function(){this.renderList(),e.resolve()},function(){this.error=this.options.sourceError,e.resolve()}),e.promise()},html2value:function(){return null},value2html:function(e,i,n,o){var a=t.Deferred(),r=function(){"function"==typeof n?n.call(i,e,this.sourceData,o):this.value2htmlFinal(e,i),a.resolve()};return null===e?r.call(this):this.onSourceReady(r,function(){a.resolve()}),a.promise()},onSourceReady:function(e,i){var n;if(t.isFunction(this.options.source)?(n=this.options.source.call(this.options.scope),this.sourceData=null):n=this.options.source,this.options.sourceCache&&t.isArray(this.sourceData))e.call(this);else{try{n=t.fn.editableutils.tryParseJson(n,!1)}catch(s){return void i.call(this)}if("string"==typeof n){if(this.options.sourceCache){var o,a=n;if(t(document).data(a)||t(document).data(a,{}),!1===(o=t(document).data(a)).loading&&o.sourceData)return this.sourceData=o.sourceData,this.doPrepend(),void e.call(this);if(!0===o.loading)return o.callbacks.push(t.proxy(function(){this.sourceData=o.sourceData,this.doPrepend(),e.call(this)},this)),void o.err_callbacks.push(t.proxy(i,this));o.loading=!0,o.callbacks=[],o.err_callbacks=[]}var r=t.extend({url:n,type:"get",cache:!1,dataType:"json",success:t.proxy(function(n){o&&(o.loading=!1),this.sourceData=this.makeArray(n),t.isArray(this.sourceData)?(o&&(o.sourceData=this.sourceData,t.each(o.callbacks,function(){this.call()})),this.doPrepend(),e.call(this)):(i.call(this),o&&t.each(o.err_callbacks,function(){this.call()}))},this),error:t.proxy(function(){i.call(this),o&&(o.loading=!1,t.each(o.err_callbacks,function(){this.call()}))},this)},this.options.sourceOptions);t.ajax(r)}else this.sourceData=this.makeArray(n),t.isArray(this.sourceData)?(this.doPrepend(),e.call(this)):i.call(this)}},doPrepend:function(){null!==this.options.prepend&&this.options.prepend!==undefined&&(t.isArray(this.prependData)||(t.isFunction(this.options.prepend)&&(this.options.prepend=this.options.prepend.call(this.options.scope)),this.options.prepend=t.fn.editableutils.tryParseJson(this.options.prepend,!0),"string"==typeof this.options.prepend&&(this.options.prepend={"":this.options.prepend}),this.prependData=this.makeArray(this.options.prepend)),t.isArray(this.prependData)&&t.isArray(this.sourceData)&&(this.sourceData=this.prependData.concat(this.sourceData)))},renderList:function(){},value2htmlFinal:function(){},makeArray:function(e){var i,n,o,a,r=[];if(!e||"string"==typeof e)return null;if(t.isArray(e)){a=function(t,e){if(n={value:t,text:e},i++>=2)return!1};for(var s=0;s<e.length;s++)"object"==typeof(o=e[s])?(i=0,t.each(o,a),1===i?r.push(n):i>1&&(o.children&&(o.children=this.makeArray(o.children)),r.push(o))):r.push({value:o,text:o})}else t.each(e,function(t,e){r.push({value:t,text:e})});return r},option:function(t,e){this.options[t]=e,"source"===t&&(this.sourceData=null),"prepend"===t&&(this.prependData=null)}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{source:null,prepend:!1,sourceError:"Error when loading list",sourceCache:!0,sourceOptions:null}),t.fn.editabletypes.list=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("text",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.renderClear(),this.setClass(),this.setAttr("placeholder")},activate:function(){this.$input.is(":visible")&&(this.$input.focus(),this.$input.is("input,textarea")&&!this.$input.is('[type="checkbox"],[type="range"]')&&t.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length),this.toggleClear&&this.toggleClear())},renderClear:function(){this.options.clear&&(this.$clear=t('<span class="editable-clear-x"></span>'),this.$input.after(this.$clear).css("padding-right",24).keyup(t.proxy(function(e){if(!~t.inArray(e.keyCode,[40,38,9,13,27])){clearTimeout(this.t);var i=this;this.t=setTimeout(function(){i.toggleClear(e)},100)}},this)).parent().css("position","relative"),this.$clear.click(t.proxy(this.clear,this)))},postrender:function(){},toggleClear:function(){if(this.$clear){var t=this.$input.val().length,e=this.$clear.is(":visible");t&&!e&&this.$clear.show(),!t&&e&&this.$clear.hide()}},clear:function(){this.$clear.hide(),this.$input.val("").focus()}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:!0}),t.fn.editabletypes.text=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("textarea",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass(),this.setAttr("placeholder"),this.setAttr("rows"),this.$input.keydown(function(e){e.ctrlKey&&13===e.which&&t(this).closest("form").submit()})},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7}),t.fn.editabletypes.textarea=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("select",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.list),t.extend(e.prototype,{renderList:function(){this.$input.empty();var e=this.options.escape,i=function(n,o){var a;if(t.isArray(o))for(var r=0;r<o.length;r++)if(a={},o[r].children)a.label=o[r].text,n.append(i(t("<optgroup>",a),o[r].children));else{a.value=o[r].value,o[r].disabled&&(a.disabled=!0);var s=t("<option>",a);s[e?"text":"html"](o[r].text),n.append(s)}return n};i(this.$input,this.sourceData),this.setClass(),this.$input.on("keydown.editable",function(e){13===e.which&&t(this).closest("form").submit()})},value2htmlFinal:function(e,i){var n="",o=t.fn.editableutils.itemsByValue(e,this.sourceData);o.length&&(n=o[0].text),t.fn.editabletypes.abstractinput.prototype.value2html.call(this,n,i)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){t(this).closest("form").submit()})}}),e.defaults=t.extend({},t.fn.editabletypes.list.defaults,{tpl:"<select></select>"}),t.fn.editabletypes.select=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("checklist",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.list),t.extend(e.prototype,{renderList:function(){var e;if(this.$tpl.empty(),t.isArray(this.sourceData)){for(var i=0;i<this.sourceData.length;i++){e=t("<label>").append(t("<input>",{type:"checkbox",value:this.sourceData[i].value}));var n=t("<span>");n[this.options.escape?"text":"html"](" "+this.sourceData[i].text),e.append(n),t("<div>").append(e).appendTo(this.$tpl)}this.$input=this.$tpl.find('input[type="checkbox"]'),this.setClass()}},value2str:function(e){return t.isArray(e)?e.sort().join(t.trim(this.options.separator)):""},str2value:function(e){var i,n=null;return"string"==typeof e&&e.length?(i=new RegExp("\\s*"+t.trim(this.options.separator)+"\\s*"),n=e.split(i)):n=t.isArray(e)?e:[e],n},value2input:function(e){this.$input.prop("checked",!1),t.isArray(e)&&e.length&&this.$input.each(function(i,n){var o=t(n);t.each(e,function(t,e){o.val()==e&&o.prop("checked",!0)})})},input2value:function(){var e=[];return this.$input.filter(":checked").each(function(i,n){e.push(t(n).val())}),e},value2htmlFinal:function(e,i){var n=[],o=t.fn.editableutils.itemsByValue(e,this.sourceData),a=this.options.escape;o.length?(t.each(o,function(e,i){var o=a?t.fn.editableutils.escape(i.text):i.text;n.push(o)}),t(i).html(n.join("<br>"))):t(i).empty()},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(e){13===e.which&&t(this).closest("form").submit()})}}),e.defaults=t.extend({},t.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","}),t.fn.editabletypes.checklist=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("password",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),t.extend(e.prototype,{value2html:function(e,i){e?t(i).text("[hidden]"):t(i).empty()},html2value:function(){return null}}),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="password">'}),t.fn.editabletypes.password=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("email",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="email">'}),t.fn.editabletypes.email=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("url",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="url">'}),t.fn.editabletypes.url=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("tel",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'}),t.fn.editabletypes.tel=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("number",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),t.extend(e.prototype,{render:function(){e.superclass.render.call(this),this.setAttr("min"),this.setAttr("max"),this.setAttr("step")},postrender:function(){this.$clear&&this.$clear.css({right:24})}}),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null}),t.fn.editabletypes.number=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("range",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.number),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.filter("input"),this.setClass(),this.setAttr("min"),this.setAttr("max"),this.setAttr("step"),this.$input.on("input",function(){t(this).siblings("output").text(t(this).val())})},activate:function(){this.$input.focus()}}),e.defaults=t.extend({},t.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"}),t.fn.editabletypes.range=e}(window.jQuery),function(t){
"use strict";var e=function(t){this.init("time",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass()}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'}),t.fn.editabletypes.time=e}(window.jQuery),function(t){"use strict";var e=function(i){if(this.init("select2",i,e.defaults),i.select2=i.select2||{},this.sourceData=null,i.placeholder&&(i.select2.placeholder=i.placeholder),!i.select2.tags&&i.source){var n=i.source;t.isFunction(i.source)&&(n=i.source.call(i.scope)),"string"==typeof n?(i.select2.ajax=i.select2.ajax||{},i.select2.ajax.dataType||(i.select2.ajax.dataType="json"),i.select2.ajax.data||(i.select2.ajax.data=function(t){return{query:t}}),i.select2.ajax.processResults||(i.select2.ajax.processResults=function(t){return{results:t}}),i.select2.ajax.url=n):(this.sourceData=this.convertSource(n),i.select2.data=this.sourceData)}if(this.options.select2=t.extend({},e.defaults.select2,i.select2),this.isMultiple=this.options.select2.tags||this.options.select2.multiple,this.isRemote="ajax"in this.options.select2,this.idFunc=this.options.select2.id,"function"!=typeof this.idFunc){var o=this.idFunc||"id";this.idFunc=function(t){return t[o]}}this.formatSelection=this.options.select2.formatSelection,"function"!=typeof this.formatSelection&&(this.formatSelection=function(t){return t.text})};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass(),this.isRemote&&this.$input.on("select2-loaded",t.proxy(function(t){this.sourceData=t.items.results},this)),this.isMultiple&&this.$input.on("change",function(){t(this).closest("form").parent().triggerHandler("resize")})},value2html:function(i,n){var o,a="",r=this;this.options.select2.tags?o=i:this.sourceData&&(o=t.fn.editableutils.itemsByValue(i,this.sourceData,this.idFunc)),t.isArray(o)?(a=[],t.each(o,function(t,e){a.push(e&&"object"==typeof e?r.formatSelection(e):e)})):o&&(a=r.formatSelection(o)),a=t.isArray(a)?a.join(this.options.viewseparator):a,e.superclass.value2html.call(this,a,n)},html2value:function(t){return this.options.select2.tags?this.str2value(t,this.options.viewseparator):null},value2input:function(e){if(t.isArray(e)&&(e=e.join(this.getSeparator())),this.$input.data("select2")?this.$input.val(e).trigger("change",!0):(this.$input.val(e),this.$input.select2(this.options.select2)),this.isRemote&&!this.isMultiple&&!this.options.select2.initSelection){var i=this.options.select2.id,n=this.options.select2.formatSelection;if(!i&&!n){var o=t(this.options.scope);if(!o.data("editable").isEmpty){var a={id:e,text:o.text()};this.$input.select2("data",a)}}}},input2value:function(){return this.$input.select2("val")},str2value:function(e,i){if("string"!=typeof e||!this.isMultiple)return e;var n,o,a;if(i=i||this.getSeparator(),null===e||e.length<1)return null;for(o=0,a=(n=e.split(i)).length;o<a;o+=1)n[o]=t.trim(n[o]);return n},autosubmit:function(){this.$input.on("change",function(e,i){i||t(this).closest("form").submit()})},getSeparator:function(){return this.options.select2.separator||t.fn.select2.defaults.separator},convertSource:function(e){if(t.isArray(e)&&e.length&&e[0].value!==undefined)for(var i=0;i<e.length;i++)e[i].value!==undefined&&(e[i].id=e[i].value,delete e[i].value);return e},destroy:function(){this.$input.data("select2")&&this.$input.select2("destroy")}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "}),t.fn.editabletypes.select2=e}(window.jQuery),
/**
* Combodate - 1.0.5
* Dropdown date and time picker.
* Converts text input into dropdowns to pick day, month, year, hour, minute and second.
* Uses momentjs as datetime library http://momentjs.com.
* For i18n include corresponding file from https://github.com/timrwood/moment/tree/master/lang
*
* Confusion at noon and midnight - see http://en.wikipedia.org/wiki/12-hour_clock#Confusion_at_noon_and_midnight
* In combodate:
* 12:00 pm --> 12:00 (24-h format, midday)
* 12:00 am --> 00:00 (24-h format, midnight, start of day)
*
* Differs from momentjs parse rules:
* 00:00 pm, 12:00 pm --> 12:00 (24-h format, day not change)
* 00:00 am, 12:00 am --> 00:00 (24-h format, day not change)
*
*
* Author: Vitaliy Potapov
* Project page: http://github.com/vitalets/combodate
* Copyright (c) 2012 Vitaliy Potapov. Released under MIT License.
**/
function(t){var e=function(e,i){this.$element=t(e),this.$element.is("input")?(this.options=t.extend({},t.fn.combodate.defaults,i,this.$element.data()),this.init()):t.error("Combodate should be applied to INPUT element")};e.prototype={constructor:e,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=t('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.$widget.on("change","select",t.proxy(function(e){this.$element.val(this.getValue()).change(),this.options.smartDays&&(t(e.target).is(".month")||t(e.target).is(".year"))&&this.fillCombo("day")},this)),this.$widget.find("select").css("width","auto"),this.$element.hide().after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var e=this.options.template;return t.each(this.map,function(t,i){i=i[0];var n=new RegExp(i+"+"),o=i.length>1?i.substring(1,2):i;e=e.replace(n,"{"+o+"}")}),e=e.replace(/ /g,"&nbsp;"),t.each(this.map,function(t,i){var n=(i=i[0]).length>1?i.substring(1,2):i;e=e.replace("{"+n+"}",'<select class="'+t+'"></select>')}),e},initCombos:function(){for(var t in this.map){var e=this.$widget.find("."+t);this["$"+t]=e.length?e:null,this.fillCombo(t)}},fillCombo:function(t){var e=this["$"+t];if(e){var i=this["fill"+t.charAt(0).toUpperCase()+t.slice(1)](),n=e.val();e.empty();for(var o=0;o<i.length;o++)e.append('<option value="'+i[o][0]+'">'+i[o][1]+"</option>");e.val(n)}},fillCommon:function(t){var e,i=[];if("name"===this.options.firstItem){var n="function"==typeof(e=moment.relativeTime||moment.langData()._relativeTime)[t]?e[t](1,!0,t,!1):e[t];n=n.split(" ").reverse()[0],i.push(["",n])}else"empty"===this.options.firstItem&&i.push(["",""]);return i},fillDay:function(){var t,e,i=this.fillCommon("d"),n=-1!==this.options.template.indexOf("DD"),o=31;if(this.options.smartDays&&this.$month&&this.$year){var a=parseInt(this.$month.val(),10),r=parseInt(this.$year.val(),10);isNaN(a)||isNaN(r)||(o=moment([r,a]).daysInMonth())}for(e=1;e<=o;e++)t=n?this.leadZero(e):e,i.push([e,t]);return i},fillMonth:function(){var t,e,i=this.fillCommon("M"),n=-1!==this.options.template.indexOf("MMMM"),o=-1!==this.options.template.indexOf("MMM"),a=-1!==this.options.template.indexOf("MM");for(e=0;e<=11;e++)t=n?moment().date(1).month(e).format("MMMM"):o?moment().date(1).month(e).format("MMM"):a?this.leadZero(e+1):e+1,i.push([e,t]);return i},fillYear:function(){var t,e,i=[],n=-1!==this.options.template.indexOf("YYYY");for(e=this.options.maxYear;e>=this.options.minYear;e--)t=n?e:(e+"").substring(2),i[this.options.yearDescending?"push":"unshift"]([e,t]);return i=this.fillCommon("y").concat(i)},fillHour:function(){var t,e,i=this.fillCommon("h"),n=-1!==this.options.template.indexOf("h"),o=(this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),a=n?12:23;for(e=n?1:0;e<=a;e++)t=o?this.leadZero(e):e,i.push([e,t]);return i},fillMinute:function(){var t,e,i=this.fillCommon("m"),n=-1!==this.options.template.indexOf("mm");for(e=0;e<=59;e+=this.options.minuteStep)t=n?this.leadZero(e):e,i.push([e,t]);return i},fillSecond:function(){var t,e,i=this.fillCommon("s"),n=-1!==this.options.template.indexOf("ss");for(e=0;e<=59;e+=this.options.secondStep)t=n?this.leadZero(e):e,i.push([e,t]);return i},fillAmpm:function(){var t=-1!==this.options.template.indexOf("a");this.options.template.indexOf("A");return[["am",t?"am":"AM"],["pm",t?"pm":"PM"]]},getValue:function(e){var i,n={},o=this,a=!1;return t.each(this.map,function(t){if("ampm"!==t){var e="day"===t?1:0;return n[t]=o["$"+t]?parseInt(o["$"+t].val(),10):e,isNaN(n[t])?(a=!0,!1):void 0}}),a?"":(this.$ampm&&(12===n.hour?n.hour="am"===this.$ampm.val()?0:12:n.hour="am"===this.$ampm.val()?n.hour:n.hour+12),i=moment([n.year,n.month,n.day,n.hour,n.minute,n.second]),this.highlight(i),null===(e=e===undefined?this.options.format:e)?i.isValid()?i:null:i.isValid()?i.format(e):"")},setValue:function(e){function i(e,i){var n={};return e.children("option").each(function(e,o){var a,r=t(o).attr("value");""!==r&&(a=Math.abs(r-i),("undefined"==typeof n.distance||a<n.distance)&&(n={value:r,distance:a}))}),n.value}if(e){var n="string"==typeof e?moment(e,this.options.format):moment(e),o=this,a={};n.isValid()&&(t.each(this.map,function(t,e){"ampm"!==t&&(a[t]=n[e[1]]())}),this.$ampm&&(a.hour>=12?(a.ampm="pm",a.hour>12&&(a.hour-=12)):(a.ampm="am",0===a.hour&&(a.hour=12))),t.each(a,function(t,e){o["$"+t]&&("minute"===t&&o.options.minuteStep>1&&o.options.roundTime&&(e=i(o["$"+t],e)),"second"===t&&o.options.secondStep>1&&o.options.roundTime&&(e=i(o["$"+t],e)),o["$"+t].val(e))}),this.options.smartDays&&this.fillCombo("day"),this.$element.val(n.format(this.options.format)).change())}},highlight:function(t){t.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(t){return t<=9?"0"+t:t},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},t.fn.combodate=function(i){var n,o=Array.apply(null,arguments);return o.shift(),"getValue"===i&&this.length&&(n=this.eq(0).data("combodate"))?n.getValue.apply(n,o):this.each(function(){var n=t(this),a=n.data("combodate"),r="object"==typeof i&&i;a||n.data("combodate",a=new e(this,r)),"string"==typeof i&&"function"==typeof a[i]&&a[i].apply(a,o)})},t.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:2e3,maxYear:(new Date).getFullYear()+5,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:!0,smartDays:!1}}(window.jQuery),function(t){"use strict";var e=function(i){this.init("combodate",i,e.defaults),this.options.viewformat||(this.options.viewformat=this.options.format),i.combodate=t.fn.editableutils.tryParseJson(i.combodate,!0),this.options.combodate=t.extend({},e.defaults.combodate,i.combodate,{format:this.options.format,template:this.options.template})};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.$input.combodate(this.options.combodate),"bs3"===t.fn.editableform.engine&&this.$input.siblings().find("select").addClass("form-control"),this.options.inputclass&&this.$input.siblings().find("select").addClass(this.options.inputclass)},value2html:function(t,i){var n=t?t.format(this.options.viewformat):"";e.superclass.value2html.call(this,n,i)},html2value:function(t){return t?moment(t,this.options.viewformat):null},value2str:function(t){return t?t.format(this.options.format):""},str2value:function(t){return t?moment(t,this.options.format):null},value2submit:function(t){return this.value2str(t)},value2input:function(t){this.$input.combodate("setValue",t)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"DD/MM/YYYY",viewformat:null,template:"D / MMM / YYYY",combodate:null}),t.fn.editabletypes.combodate=e}(window.jQuery),function(t){"use strict";var e=t.fn.editableform.Constructor.prototype.initInput;t.extend(t.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=t(t.fn.editableform.template),this.$form.find(".control-group").addClass("form-group"),this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){e.apply(this);var i=null===this.input.options.inputclass||!1===this.input.options.inputclass,n="input-sm",o="text,select,textarea,password,email,url,tel,number,range,time,typeaheadjs".split(",");~t.inArray(this.input.type,o)&&(this.input.$input.addClass("form-control"),i&&(this.input.options.inputclass=n,this.input.$input.addClass(n)));for(var a=this.$form.find(".editable-buttons"),r=i?[n]:this.input.options.inputclass.split(" "),s=0;s<r.length;s++)"input-lg"===r[s].toLowerCase()&&a.find("button").removeClass("btn-sm").addClass("btn-lg")}}),t.fn.editableform.buttons='<button type="submit" class="btn btn-primary btn-sm editable-submit"><i class="glyphicon glyphicon-ok"></i></button><button type="button" class="btn btn-default btn-sm editable-cancel"><i class="glyphicon glyphicon-remove"></i></button>',t.fn.editableform.errorGroupClass="has-error",t.fn.editableform.errorBlockClass=null,t.fn.editableform.engine="bs3"}(window.jQuery),function(t){"use strict";t.extend(t.fn.editableContainer.Popup.prototype,{containerName:"popover",containerDataName:"bs.popover",innerCss:".popover-content",defaults:t.fn.popover.Constructor.DEFAULTS,initContainer:function(){var e;t.extend(this.containerOptions,{trigger:"manual",selector:!1,content:" ",template:this.defaults.template}),this.$element.data("template")&&(e=this.$element.data("template"),this.$element.removeData("template")),this.call(this.containerOptions),e&&this.$element.data("template",e)},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(t,e){this.container().options[t]=e},setPosition:function(){(function(){var t=this.tip(),e="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,n=i.test(e);n&&(e=e.replace(i,"")||"top");var o=this.getPosition(),a=t[0].offsetWidth,r=t[0].offsetHeight;if(n){var s=this.$element.parent(),l=e,c=document.documentElement.scrollTop||document.body.scrollTop,u="body"==this.options.container?window.innerWidth:s.outerWidth(),d="body"==this.options.container?window.innerHeight:s.outerHeight(),p="body"==this.options.container?0:s.offset().left;e="bottom"==e&&o.top+o.height+r-c>d?"top":"top"==e&&o.top-c-r<0?"bottom":"right"==e&&o.right+a>u?"left":"left"==e&&o.left-a<p?"right":e,t.removeClass(l).addClass(e)}var h=this.getCalculatedOffset(e,o,a,r);this.applyPlacement(h,e)}).call(this.container())}})}(window.jQuery),
/* =========================================================
 * bootstrap-datepicker.js
 * http://www.eyecon.ro/bootstrap-datepicker
 * =========================================================
 * Copyright 2012 Stefan Petre
 * Improvements by Andrew Rowls
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
function(t){function e(){return new Date(Date.UTC.apply(Date,arguments))}function i(e,i){var n=t(e).data(),o={},a=new RegExp("^"+i.toLowerCase()+"([A-Z])");i=new RegExp("^"+i.toLowerCase());for(var r in n)i.test(r)&&(o[r.replace(a,function(t,e){return e.toLowerCase()})]=n[r]);return o}function n(e){var i={};if(u[e]||(e=e.split("-")[0],u[e])){var n=u[e];return t.each(c,function(t,e){e in n&&(i[e]=n[e])}),i}}var o=function(e,i){this._process_options(i),this.element=t(e),this.isInline=!1,this.isInput=this.element.is("input"),this.component=!!this.element.is(".date")&&this.element.find(".add-on, .btn"),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=t(d.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this.o.startDate),this.setEndDate(this.o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};o.prototype={constructor:o,_process_options:function(e){this._o=t.extend({},this._o,e);var i=this.o=t.extend({},this._o),n=i.language;switch(u[n]||(n=n.split("-")[0],u[n]||(n=l.language)),i.language=n,i.startView){case 2:case"decade":i.startView=2;break;case 1:case"year":i.startView=1;break;default:i.startView=0}switch(i.minViewMode){case 1:case"months":i.minViewMode=1;break;case 2:case"years":i.minViewMode=2;break;default:i.minViewMode=0}i.startView=Math.max(i.startView,i.minViewMode),i.weekStart%=7,i.weekEnd=(i.weekStart+6)%7;var o=d.parseFormat(i.format);i.startDate!==-Infinity&&(i.startDate=d.parseDate(i.startDate,o,i.language)),i.endDate!==Infinity&&(i.endDate=d.parseDate(i.endDate,o,i.language)),i.daysOfWeekDisabled=i.daysOfWeekDisabled||[],t.isArray(i.daysOfWeekDisabled)||(i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/)),i.daysOfWeekDisabled=t.map(i.daysOfWeekDisabled,function(t){return parseInt(t,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var e,i,n=0;n<t.length;n++)e=t[n][0],i=t[n][1],e.on(i)},_unapplyEvents:function(t){for(var e,i,n=0;n<t.length;n++)e=t[n][0],i=t[n][1],e.off(i)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{mousedown:t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).size()||this.picker.is(t.target)||this.picker.find(t.target).size()||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,i){var n=i||this.date,o=new Date(n.getTime()+6e4*n.getTimezoneOffset());this.element.trigger({type:e,date:o,format:t.proxy(function(t){var e=t||this.o.format;return d.formatDate(n,e,this.o.language)},this)})},show:function(t){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),this._attachSecondaryEvents(),t&&t.preventDefault(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},getDate:function(){var t=this.getUTCDate();return new Date(t.getTime()+6e4*t.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(t){this.setUTCDate(new Date(t.getTime()-6e4*t.getTimezoneOffset()))},setUTCDate:function(t){this.date=t,this.setValue()},setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t):this.component&&this.element.find("input").val(t)},getFormattedDate:function(t){return t===undefined&&(t=this.o.format),d.formatDate(this.date,t,this.o.language)},setStartDate:function(t){this._process_options({startDate:t}),this.update(),this.updateNavArrows()},setEndDate:function(t){this._process_options({endDate:t}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(t){this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=parseInt(this.element.parents().filter(function(){return"auto"!=t(this).css("z-index")}).first().css("z-index"))+10,i=this.component?this.component.parent().offset():this.element.offset(),n=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:i.top+n,left:i.left,zIndex:e})}},_allow_update:!0,update:function(){if(this._allow_update){var t,e=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(t=arguments[0],e=!0):(t=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date),this.date=d.parseDate(t,this.o.format,this.o.language),e&&this.setValue(),this.date<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.date>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=new Date(this.date),this.fill()}},fillDow:function(){var t=this.o.weekStart,e="<tr>";if(this.o.calendarWeeks){var i='<th class="cw">&nbsp;</th>';e+=i,this.picker.find(".datepicker-days thead tr:first-child").prepend(i)}for(;t<this.o.weekStart+7;)e+='<th class="dow">'+u[this.o.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;e<12;)t+='<span class="month">'+u[this.o.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var i=[],n=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),a=this.date.valueOf(),r=new Date;return e.getUTCFullYear()<n||e.getUTCFullYear()==n&&e.getUTCMonth()<o?i.push("old"):(e.getUTCFullYear()>n||e.getUTCFullYear()==n&&e.getUTCMonth()>o)&&i.push("new"),this.o.todayHighlight&&e.getUTCFullYear()==r.getFullYear()&&e.getUTCMonth()==r.getMonth()&&e.getUTCDate()==r.getDate()&&i.push("today"),a&&e.valueOf()==a&&i.push("active"),(e.valueOf()<this.o.startDate||e.valueOf()>this.o.endDate||-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled))&&i.push("disabled"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&i.push("range"),-1!=t.inArray(e.valueOf(),this.range)&&i.push("selected")),i},fill:function(){var i,n=new Date(this.viewDate),o=n.getUTCFullYear(),a=n.getUTCMonth(),r=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,s=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,l=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,c=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity;this.date&&this.date.valueOf();this.picker.find(".datepicker-days thead th.datepicker-switch").text(u[this.o.language].months[a]+" "+o),this.picker.find("tfoot th.today").text(u[this.o.language].today).toggle(!1!==this.o.todayBtn),this.picker.find("tfoot th.clear").text(u[this.o.language].clear).toggle(!1!==this.o.clearBtn),this.updateNavArrows(),this.fillMonths();var p=e(o,a-1,28,0,0,0,0),h=d.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(h),p.setUTCDate(h-(p.getUTCDay()-this.o.weekStart+7)%7);var f=new Date(p);f.setUTCDate(f.getUTCDate()+42),f=f.valueOf();for(var m,g=[];p.valueOf()<f;){if(p.getUTCDay()==this.o.weekStart&&(g.push("<tr>"),this.o.calendarWeeks)){var v=new Date(+p+(this.o.weekStart-p.getUTCDay()-7)%7*864e5),_=new Date(+v+(11-v.getUTCDay())%7*864e5),b=new Date(+(b=e(_.getUTCFullYear(),0,1))+(11-b.getUTCDay())%7*864e5),y=(_-b)/864e5/7+1;g.push('<td class="cw">'+y+"</td>")}(m=this.getClassNames(p)).push("day");var w=this.o.beforeShowDay(p);w===undefined?w={}:"boolean"==typeof w?w={enabled:w}:"string"==typeof w&&(w={classes:w}),!1===w.enabled&&m.push("disabled"),w.classes&&(m=m.concat(w.classes.split(/\s+/))),w.tooltip&&(i=w.tooltip),m=t.unique(m),g.push('<td class="'+m.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+p.getUTCDate()+"</td>"),p.getUTCDay()==this.o.weekEnd&&g.push("</tr>"),p.setUTCDate(p.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(g.join(""));var $=this.date&&this.date.getUTCFullYear(),x=this.picker.find(".datepicker-months").find("th:eq(1)").text(o).end().find("span").removeClass("active");$&&$==o&&x.eq(this.date.getUTCMonth()).addClass("active"),(o<r||o>l)&&x.addClass("disabled"),o==r&&x.slice(0,s).addClass("disabled"),o==l&&x.slice(c+1).addClass("disabled"),g="",o=10*parseInt(o/10,10);var k=this.picker.find(".datepicker-years").find("th:eq(1)").text(o+"-"+(o+9)).end().find("td");o-=1;for(var C=-1;C<11;C++)g+='<span class="year'+(-1==C?" old":10==C?" new":"")+($==o?" active":"")+(o<r||o>l?" disabled":"")+'">'+o+"</span>",o+=1;k.html(g)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-Infinity&&e<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&e>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-Infinity&&e<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&e>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(i){i.preventDefault();var n=t(i.target).closest("span, td, th");if(1==n.length)switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var o=d.modes[this.viewMode].navStep*("prev"==n[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,o);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,o)}this.fill();break;case"today":var a=new Date;a=e(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0),this.showMode(-2);var r="linked"==this.o.todayBtn?null:"view";this._setDate(a,r);break;case"clear":var s;this.isInput?s=this.element:this.component&&(s=this.element.find("input")),s&&s.val("").change(),this._trigger("changeDate"),this.update(),this.o.autoclose&&this.hide()}break;case"span":if(!n.is(".disabled")){if(this.viewDate.setUTCDate(1),n.is(".month")){var l=1,c=n.parent().find("span").index(n),u=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(c),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(e(u,c,l,0,0,0,0))}else{u=parseInt(n.text(),10)||0,l=1,c=0;this.viewDate.setUTCFullYear(u),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(e(u,c,l,0,0,0,0))}this.showMode(-1),this.fill()}break;case"td":if(n.is(".day")&&!n.is(".disabled")){l=parseInt(n.text(),10)||1,u=this.viewDate.getUTCFullYear(),c=this.viewDate.getUTCMonth();n.is(".old")?0===c?(c=11,u-=1):c-=1:n.is(".new")&&(11==c?(c=0,u+=1):c+=1),this._setDate(e(u,c,l,0,0,0,0))}}},_setDate:function(t,e){var i;e&&"date"!=e||(this.date=new Date(t)),e&&"view"!=e||(this.viewDate=new Date(t)),this.fill(),this.setValue(),this._trigger("changeDate"),this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&(i.change(),!this.o.autoclose||e&&"date"!=e||this.hide())},moveMonth:function(t,e){if(!e)return t;var i,n,o=new Date(t.valueOf()),a=o.getUTCDate(),r=o.getUTCMonth(),s=Math.abs(e);if(e=e>0?1:-1,1==s)n=-1==e?function(){return o.getUTCMonth()==r}:function(){return o.getUTCMonth()!=i},i=r+e,o.setUTCMonth(i),(i<0||i>11)&&(i=(i+12)%12);else{for(var l=0;l<s;l++)o=this.moveMonth(o,e);i=o.getUTCMonth(),o.setUTCDate(a),n=function(){return i!=o.getUTCMonth()}}for(;n();)o.setUTCDate(--a),o.setUTCMonth(i);return o},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))27==t.keyCode&&this.show();else{var e,i,n,o,a=!1;switch(t.keyCode){case 27:this.hide(),t.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;e=37==t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.date,e),n=this.moveYear(this.viewDate,e)):t.shiftKey?(i=this.moveMonth(this.date,e),n=this.moveMonth(this.viewDate,e)):((i=new Date(this.date)).setUTCDate(this.date.getUTCDate()+e),(n=new Date(this.viewDate)).setUTCDate(this.viewDate.getUTCDate()+e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),t.preventDefault(),a=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;e=38==t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.date,e),n=this.moveYear(this.viewDate,e)):t.shiftKey?(i=this.moveMonth(this.date,e),n=this.moveMonth(this.viewDate,e)):((i=new Date(this.date)).setUTCDate(this.date.getUTCDate()+7*e),(n=new Date(this.viewDate)).setUTCDate(this.viewDate.getUTCDate()+7*e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),t.preventDefault(),a=!0);break;case 13:this.hide(),t.preventDefault();break;case 9:this.hide()}if(a)this._trigger("changeDate"),this.isInput?o=this.element:this.component&&(o=this.element.find("input")),o&&o.change()}},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+d.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var a=function(e,i){this.element=t(e),this.inputs=t.map(i.inputs,function(t){return t.jquery?t[0]:t}),delete i.inputs,t(this.inputs).datepicker(i).bind("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")}),this.updateDates()};a.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.date}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,i){i.setRange(e)})},dateUpdated:function(e){var i=t(e.target).data("datepicker").getUTCDate(),n=t.inArray(e.target,this.inputs),o=this.inputs.length;if(-1!=n){if(i<this.dates[n])for(;n>=0&&i<this.dates[n];)this.pickers[n--].setUTCDate(i);else if(i>this.dates[n])for(;n<o&&i>this.dates[n];)this.pickers[n++].setUTCDate(i);this.updateDates()}},remove:function(){t.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var r=t.fn.datepicker,s=t.fn.datepicker=function(e){var r,s=Array.apply(null,arguments);return s.shift(),this.each(function(){var c=t(this),u=c.data("datepicker"),d="object"==typeof e&&e;if(!u){var p=i(this,"date"),h=n(t.extend({},l,p,d).language),f=t.extend({},l,h,p,d);if(c.is(".input-daterange")||f.inputs){var m={inputs:f.inputs||c.find("input").toArray()};c.data("datepicker",u=new a(this,t.extend(f,m)))}else c.data("datepicker",u=new o(this,f))}if("string"==typeof e&&"function"==typeof u[e]&&(r=u[e].apply(u,s))!==undefined)return!1}),r!==undefined?r:this},l=t.fn.datepicker.defaults={autoclose:!1,beforeShowDay:t.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},c=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=o;var u=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},d={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},getDaysInMonth:function(t,e){return[31,d.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\0").split("\0"),i=t.match(this.validParts);if(!e||!e.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:e,parts:i}},parseDate:function(i,n,a){if(i instanceof Date)return i;if("string"==typeof n&&(n=d.parseFormat(n)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){var r,s=/([\-+]\d+)([dmwy])/,l=i.match(/([\-+]\d+)([dmwy])/g);i=new Date;for(var c=0;c<l.length;c++)switch(f=s.exec(l[c]),r=parseInt(f[1]),f[2]){case"d":i.setUTCDate(i.getUTCDate()+r);break;case"m":i=o.prototype.moveMonth.call(o.prototype,i,r);break;case"w":i.setUTCDate(i.getUTCDate()+7*r);break;case"y":i=o.prototype.moveYear.call(o.prototype,i,r)}return e(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}l=i&&i.match(this.nonpunctuation)||[],i=new Date;var p,h,f,m={},g=["yyyy","yy","M","MM","m","mm","d","dd"],v={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){for(e-=1;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!=e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};v.M=v.MM=v.mm=v.m,v.dd=v.d,i=e(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var _=n.parts.slice();if(l.length!=_.length&&(_=t(_).filter(function(e,i){return-1!==t.inArray(i,g)}).toArray()),l.length==_.length){c=0;for(var b=_.length;c<b;c++){if(p=parseInt(l[c],10),f=_[c],isNaN(p))switch(f){case"MM":h=t(u[a].months).filter(function(){var t=this.slice(0,l[c].length);return t==l[c].slice(0,t.length)}),p=t.inArray(h[0],u[a].months)+1;break;case"M":h=t(u[a].monthsShort).filter(function(){var t=this.slice(0,l[c].length);return t==l[c].slice(0,t.length)}),p=t.inArray(h[0],u[a].monthsShort)+1}m[f]=p}var y;for(c=0;c<g.length;c++)(y=g[c])in m&&!isNaN(m[y])&&v[y](i,m[y])}return i},formatDate:function(e,i,n){"string"==typeof i&&(i=d.parseFormat(i));var o={d:e.getUTCDate(),D:u[n].daysShort[e.getUTCDay()],DD:u[n].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:u[n].monthsShort[e.getUTCMonth()],MM:u[n].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};o.dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m;e=[];for(var a=t.extend([],i.separators),r=0,s=i.parts.length;r<=s;r++)a.length&&e.push(a.shift()),e.push(o[i.parts[r]]);return e.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};d.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+d.headTemplate+"<tbody></tbody>"+d.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=d,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=r,this},t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var i=t(this);i.data("datepicker")||(e.preventDefault(),s.call(i,"show"))}),t(function(){s.call(t('[data-provide="datepicker-inline"]'))})}(window.jQuery),function(t){"use strict";t.fn.bdatepicker=t.fn.datepicker.noConflict(),t.fn.datepicker||(t.fn.datepicker=t.fn.bdatepicker);var e=function(t){this.init("date",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{initPicker:function(e,i){this.options.viewformat||(this.options.viewformat=this.options.format),e.datepicker=t.fn.editableutils.tryParseJson(e.datepicker,!0),this.options.datepicker=t.extend({},i.datepicker,e.datepicker,{format:this.options.viewformat}),this.options.datepicker.language=this.options.datepicker.language||"en",this.dpg=t.fn.bdatepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker),this.options.clear&&(this.$clear=t('<a href="#"></a>').html(this.options.clear).click(t.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(t('<div class="editable-clear">').append(this.$clear)))},value2html:function(t,i){var n=t?this.dpg.formatDate(t,this.parsedViewFormat,this.options.datepicker.language):"";e.superclass.value2html.call(this,n,i)},html2value:function(t){return this.parseDate(t,this.parsedViewFormat)},value2str:function(t){return t?this.dpg.formatDate(t,this.parsedFormat,this.options.datepicker.language):""},str2value:function(t){return this.parseDate(t,this.parsedFormat)},value2submit:function(t){return this.value2str(t)},value2input:function(t){this.$input.bdatepicker("update",t)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".day",function(e){if(!t(e.currentTarget).is(".old")&&!t(e.currentTarget).is(".new")){var i=t(this).closest("form");setTimeout(function(){i.submit()},200)}})},parseDate:function(t,e){var i=null;return t&&(i=this.dpg.parseDate(t,e,this.options.datepicker.language),"string"==typeof t&&t!==this.dpg.formatDate(i,e,this.options.datepicker.language)&&(i=null)),i}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!1},clear:"&times; clear"}),t.fn.editabletypes.date=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("datefield",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.date),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.bdatepicker(this.options.datepicker),this.$input.off("focus keydown"),this.$input.keyup(t.proxy(function(){this.$tpl.removeData("date"),this.$tpl.bdatepicker("update")},this))},value2input:function(t){this.$input.val(t?this.dpg.formatDate(t,this.parsedViewFormat,this.options.datepicker.language):""),this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!0}}),t.fn.editabletypes.datefield=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("datetime",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{initPicker:function(e,i){this.options.viewformat||(this.options.viewformat=this.options.format),e.datetimepicker=t.fn.editableutils.tryParseJson(e.datetimepicker,!0),this.options.datetimepicker=t.extend({},i.datetimepicker,e.datetimepicker,{format:this.options.viewformat}),this.options.datetimepicker.language=this.options.datetimepicker.language||"en",this.dpg=t.fn.datetimepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker),this.$input.on("changeMode",function(){var e=t(this).closest("form").parent();setTimeout(function(){e.triggerHandler("resize")},0)}),this.options.clear&&(this.$clear=t('<a href="#"></a>').html(this.options.clear).click(t.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(t('<div class="editable-clear">').append(this.$clear)))},value2html:function(t,i){var n=t?this.dpg.formatDate(this.toUTC(t),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";if(!i)return n;e.superclass.value2html.call(this,n,i)},html2value:function(t){var e=this.parseDate(t,this.parsedViewFormat);return e?this.fromUTC(e):null},value2str:function(t){return t?this.dpg.formatDate(this.toUTC(t),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(t){var e=this.parseDate(t,this.parsedFormat);return e?this.fromUTC(e):null},value2submit:function(t){return this.value2str(t)},value2input:function(t){t&&this.$input.data("datetimepicker").setDate(t)},input2value:function(){var t=this.$input.data("datetimepicker");return t.date?t.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".minute",function(){var e=t(this).closest("form");setTimeout(function(){e.submit()},200)})},toUTC:function(t){return t?new Date(t.valueOf()-6e4*t.getTimezoneOffset()):t},fromUTC:function(t){return t?new Date(t.valueOf()+6e4*t.getTimezoneOffset()):t},parseDate:function(t,e){var i=null;return t&&(i=this.dpg.parseDate(t,e,this.options.datetimepicker.language,this.options.formatType),"string"==typeof t&&t!==this.dpg.formatDate(i,e,this.options.datetimepicker.language,this.options.formatType)&&(i=null)),i}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:!1,autoclose:!1},clear:"&times; clear"}),t.fn.editabletypes.datetime=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("datetimefield",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.datetime),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.datetimepicker(this.options.datetimepicker),this.$input.off("focus keydown"),this.$input.keyup(t.proxy(function(){this.$tpl.removeData("date"),this.$tpl.datetimepicker("update")},this))},value2input:function(t){this.$input.val(this.value2html(t)),this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:!1,autoclose:!0}}),t.fn.editabletypes.datetimefield=e}(window.jQuery),function(){var t;t||((t=$.fn.editableform.Constructor).prototype.saveWithUrlHook=function(t){var e,i,n,o,a,r;return a=this.options.url,e=this.options.model,o=this.options.nested,i=this.options.nid,n=this.options.locale,this.options.url=(r=this,function(t){var s,l,c,u;return"function"==typeof a?a.call(r.options.scope,t):null!=a&&"never"!==r.options.send?(s=t.name,l=t.value,"[object Array]"===Object.prototype.toString.call(t.value)&&0===t.value.length&&t.value.push(""),u={},o?((c={})[s]=l,c.id=i,n&&(c.locale=n),u[o+"_attributes"]=c):u[s]=l,t[e]=u,delete t.name,delete t.value,delete t.pk,$.ajax($.extend({url:a,data:t,type:"PUT",dataType:"json"},r.options.ajaxOptions))):void 0}),this.saveWithoutUrlHook(t)},t.prototype.saveWithoutUrlHook=t.prototype.save,t.prototype.save=t.prototype.saveWithUrlHook)}.call(this),function(){jQuery(function(t){return t("[data-classes]").on("save",function(e,i){var n,o,a,r,s;for(r in s=i.newValue,o=(a=t(this)).data("classes")||{})n=o[r],a.removeClass(n);return a.addClass(o[s]),a.css("background-color","")})})}.call(this),function(){$.fn.editable.defaults.error=function(t){var e;return e=$(this).data("name"),t.responseJSON.errors[e].join("; ")}}.call(this),function(){}.call(this),String.prototype.titleize=function(){for(var t=this.split(" "),e=t.length,i=0;i<e;i++)0!=i&&is_article(t[i])||(t[i]=t[i].capitalize());return t.join(" ")},String.prototype.capitalize=function(){var t=this;if(t[0]&&t.toUpperCase)return t[0].toUpperCase()+t.slice(1)},aplicaChosenSelect(),$(".selectize_ajax").each(function(){var t=$(this).data("autocomplete-source"),e=$(this).data("campo-id");isBlank(e)&&(e="id"),$(this).selectize({preload:!0,valueField:e,labelField:"label",searchField:["label","campos_busca"],render:{option:function(t,e){return"<div><span>"+e(t.label)+"</span></div>"}},createFilter:!1,load:function(e,i){$.ajax({url:t,data:{term:e},type:"GET",error:function(){i()},success:function(t){i(t)}})}})}),$(".selectize_stakeholder").each(function(){var t=$(this).data("autocomplete-source"),e=$(this).data("tipo"),i=$(this).data("limite");$(this).selectize({preload:!0,valueField:"id",labelField:"label",searchField:"label",plugins:["clear_button"],render:{option:function(t,e){return"<div><span>"+e(t.label)+"</span></div>"}},load:function(n,o){$.ajax({url:t,data:{busca_rapida:n,tipo:e,limite:i,nao_salvar_filtro:!0},type:"GET",error:function(){o()},success:function(t){o(t.stakeholders)}})}})}),$('[data-toggle="tooltip"]').tooltip(),$('[data-toggle="switch"]').bootstrapSwitch(),$(document).on("click",".image-preview-clear",function(){var t=$(this).closest(check_image_preview()),e=$(t).find(".image-preview-input-title").data("text")||"Buscar XML";$(t).attr("data-content","").popover("hide"),$(t).find(".image-preview-filename").val(""),$(t).find(".image-preview-clear").hide(),$(t).find(".image-preview-input input:file").val(""),$(t).find(".image-preview-input-title").text(e)}),$(document).on("change",".image-preview-input input:file",function(){var t=this.files[0],e=$(this).closest(check_image_preview());$(e).find(".image-preview-input-title").text("Trocar"),$(e).find(".image-preview-clear").show(),$(e).find(".image-preview-filename").val(t.name)}),function e(t,i,n){function o(r,s){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[r]={exports:{}};t[r][0].call(u.exports,function(e){var i=t[r][1][e];return o(i||e)},u,u.exports,e,t,i,n)}return i[r].exports}
for(var a="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}var i=e(t("./class")),n=t("./constants");$.fn.resizableColumns=function(t){for(var e=arguments.length,o=Array(e>1?e-1:0),a=1;a<e;a++)o[a-1]=arguments[a];return this.each(function(){var e=$(this),a=e.data(n.DATA_API);if(a){if("string"==typeof t)return a[t].apply(a,o)}else a=new i["default"](e,t),e.data(n.DATA_API,a)})},$.resizableColumns=i["default"]},{"./class":2,"./constants":3}],2:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("./constants"),r=function(){function t(e,i){n(this,t),this.ns=".rc"+this.count++,this.options=$.extend({},t.defaults,i),this.$window=$(window),this.$ownerDocument=$(e[0].ownerDocument),this.$table=e,this.refreshHeaders(),this.restoreColumnWidths(),this.syncHandleWidths(),this.bindEvents(this.$window,"resize",this.syncHandleWidths.bind(this)),this.options.start&&this.bindEvents(this.$table,a.EVENT_RESIZE_START,this.options.start),this.options.resize&&this.bindEvents(this.$table,a.EVENT_RESIZE,this.options.resize),this.options.stop&&this.bindEvents(this.$table,a.EVENT_RESIZE_STOP,this.options.stop)}return o(t,[{key:"refreshHeaders",value:function(){var t=this.options.selector;"function"==typeof t&&(t=t.call(this,this.$table)),this.$tableHeaders=this.$table.find(t),this.assignPercentageWidths(),this.createHandles()}},{key:"createHandles",value:function(){var t=this,e=this.$handleContainer;null!=e&&e.remove(),this.$handleContainer=$("<div class='"+a.CLASS_HANDLE_CONTAINER+"' />"),this.$table.before(this.$handleContainer),this.$tableHeaders.each(function(e,i){var n=t.$tableHeaders.eq(e),o=t.$tableHeaders.eq(e+1);if(0!==o.length&&!n.is(a.SELECTOR_UNRESIZABLE)&&!o.is(a.SELECTOR_UNRESIZABLE))$("<div class='"+a.CLASS_HANDLE+"' />").data(a.DATA_TH,$(i)).appendTo(t.$handleContainer)}),this.bindEvents(this.$handleContainer,["mousedown","touchstart"],"."+a.CLASS_HANDLE,this.onPointerDown.bind(this))}},{key:"assignPercentageWidths",value:function(){var t=this;this.$tableHeaders.each(function(e,i){var n=$(i);t.setWidth(n[0],n.outerWidth()/t.$table.width()*100)})}},{key:"syncHandleWidths",value:function(){var t=this,e=this.$handleContainer;e.width(this.$table.width()),e.find("."+a.CLASS_HANDLE).each(function(e,i){var n=$(i),o=t.options.resizeFromBody?t.$table.height():t.$table.find("thead").height(),r=n.data(a.DATA_TH).outerWidth()+(n.data(a.DATA_TH).offset().left-t.$handleContainer.offset().left);n.css({left:r,height:o})})}},{key:"saveColumnWidths",value:function(){var t=this;this.$tableHeaders.each(function(e,i){var n=$(i);t.options.store&&!n.is(a.SELECTOR_UNRESIZABLE)&&t.options.store.set(t.generateColumnId(n),t.parseWidth(i))})}},{key:"restoreColumnWidths",value:function(){var t=this;this.$tableHeaders.each(function(e,i){var n=$(i);if(t.options.store&&!n.is(a.SELECTOR_UNRESIZABLE)){var o=t.options.store.get(t.generateColumnId(n));null!=o&&t.setWidth(i,o)}})}},{key:"onPointerDown",value:function(t){if(1===t.which){this.operation&&this.onPointerUp(t);var e=$(t.currentTarget);if(!e.is(a.SELECTOR_UNRESIZABLE)){var i=e.index(),n=this.$tableHeaders.eq(i).not(a.SELECTOR_UNRESIZABLE),o=this.$tableHeaders.eq(i+1).not(a.SELECTOR_UNRESIZABLE),r=this.parseWidth(n[0]),s=this.parseWidth(o[0]);this.operation={$leftColumn:n,$rightColumn:o,$currentGrip:e,startX:this.getPointerX(t),widths:{left:r,right:s},newWidths:{left:r,right:s}},this.bindEvents(this.$ownerDocument,["mousemove","touchmove"],this.onPointerMove.bind(this)),this.bindEvents(this.$ownerDocument,["mouseup","touchend"],this.onPointerUp.bind(this)),this.$handleContainer.add(this.$table).addClass(a.CLASS_TABLE_RESIZING),n.add(o).add(e).addClass(a.CLASS_COLUMN_RESIZING),this.triggerEvent(a.EVENT_RESIZE_START,[n,o,r,s],t),t.preventDefault()}}}},{key:"onPointerMove",value:function(t){var e=this.operation;if(this.operation){var i=(this.getPointerX(t)-e.startX)/this.$table.width()*100;if(0!==i){var n=e.$leftColumn[0],o=e.$rightColumn[0],r=undefined,s=undefined;return i>0?(r=this.constrainWidth(e.widths.left+(e.widths.right-e.newWidths.right)),s=this.constrainWidth(e.widths.right-i)):i<0&&(r=this.constrainWidth(e.widths.left+i),s=this.constrainWidth(e.widths.right+(e.widths.left-e.newWidths.left))),n&&this.setWidth(n,r),o&&this.setWidth(o,s),e.newWidths.left=r,e.newWidths.right=s,this.triggerEvent(a.EVENT_RESIZE,[e.$leftColumn,e.$rightColumn,r,s],t)}}}},{key:"onPointerUp",value:function(t){var e=this.operation;if(this.operation)return this.unbindEvents(this.$ownerDocument,["mouseup","touchend","mousemove","touchmove"]),this.$handleContainer.add(this.$table).removeClass(a.CLASS_TABLE_RESIZING),e.$leftColumn.add(e.$rightColumn).add(e.$currentGrip).removeClass(a.CLASS_COLUMN_RESIZING),this.syncHandleWidths(),this.saveColumnWidths(),this.operation=null,this.triggerEvent(a.EVENT_RESIZE_STOP,[e.$leftColumn,e.$rightColumn,e.newWidths.left,e.newWidths.right],t)}},{key:"destroy",value:function(){var t=this.$table,e=this.$handleContainer.find("."+a.CLASS_HANDLE);return this.unbindEvents(this.$window.add(this.$ownerDocument).add(this.$table).add(e)),e.removeData(a.DATA_TH),t.removeData(a.DATA_API),this.$handleContainer.remove(),this.$handleContainer=null,this.$tableHeaders=null,this.$table=null,t}},{key:"bindEvents",value:function(t,e,i,n){"string"==typeof e?e+=this.ns:e=e.join(this.ns+" ")+this.ns,arguments.length>3?t.on(e,i,n):t.on(e,i)}},{key:"unbindEvents",value:function(t,e){"string"==typeof e?e+=this.ns:e=null!=e?e.join(this.ns+" ")+this.ns:this.ns,t.off(e)}},{key:"triggerEvent",value:function(t,e,i){var n=$.Event(t);return n.originalEvent&&(n.originalEvent=$.extend({},i)),this.$table.trigger(n,[this].concat(e||[]))}},{key:"generateColumnId",value:function(t){return this.$table.data(a.DATA_COLUMNS_ID)+"-"+t.data(a.DATA_COLUMN_ID)}},{key:"parseWidth",value:function(t){return t?parseFloat(t.style.width.replace("%","")):0}},{key:"setWidth",value:function(t,e){e=(e=e.toFixed(2))>0?e:0,t.style.width=e+"%"}},{key:"constrainWidth",value:function(t){return this.options.minWidth!=undefined&&(t=Math.max(this.options.minWidth,t)),this.options.maxWidth!=undefined&&(t=Math.min(this.options.maxWidth,t)),t}},{key:"getPointerX",value:function(t){return 0===t.type.indexOf("touch")?(t.originalEvent.touches[0]||t.originalEvent.changedTouches[0]).pageX:t.pageX}}]),t}();i["default"]=r,r.defaults={selector:function(t){return t.find("thead").length?a.SELECTOR_TH:a.SELECTOR_TD},store:window.store,syncHandlers:!0,resizeFromBody:!0,maxWidth:null,minWidth:.01},r.count=0,e.exports=i["default"]},{"./constants":3}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n="resizableColumns";i.DATA_API=n;var o="resizable-columns-id";i.DATA_COLUMNS_ID=o;var a="resizable-column-id";i.DATA_COLUMN_ID=a;var r="th";i.DATA_TH=r;var s="rc-table-resizing";i.CLASS_TABLE_RESIZING=s;var l="rc-column-resizing";i.CLASS_COLUMN_RESIZING=l;var c="rc-handle";i.CLASS_HANDLE=c;var u="rc-handle-container";i.CLASS_HANDLE_CONTAINER=u;var d="column:resize:start";i.EVENT_RESIZE_START=d;var p="column:resize";i.EVENT_RESIZE=p;var h="column:resize:stop";i.EVENT_RESIZE_STOP=h;var f="tr:first > th:visible";i.SELECTOR_TH=f;var m="tr:first > td:visible";i.SELECTOR_TD=m;var g="[data-noresize]";i.SELECTOR_UNRESIZABLE=g},{}],4:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var o=n(t("./class"));n(t("./adapter"));i["default"]=o["default"],e.exports=i["default"]},{"./adapter":1,"./class":2}]},{},[4]),$("#list").click(function(t){t.preventDefault(),$("#emissores .item").addClass("list-group-item"),$("#emissores .item").addClass("grid-group-item"),$("#emissores .header-emissor").removeClass("esconde"),$("#emissores .item .empresa-cnpj").removeClass("esconde"),$("#emissores .item .empresa-nome").removeClass("empresa-nome-left col-md-9"),$("#emissores .emissor-container").removeClass("col-xs-4 col-lg-4-custom"),$("#emissores .emissor-container").addClass("col-xs-6 col-lg-6"),$("#emissores .emissor-container .acessar-empresa").removeClass("col-md-3"),$("#emissores").removeClass("row-custom"),$("#emissores .emissor-container .empresa-status").removeClass("empresa-status-grid")}),$("#grid").click(function(t){t.preventDefault(),$("#emissores .item").removeClass("list-group-item"),$("#emissores .item").addClass("grid-group-item"),$("#emissores .header-emissor").addClass("esconde"),$("#emissores .item .empresa-cnpj").addClass("esconde"),$("#emissores .item .empresa-nome").addClass("empresa-nome-left col-md-9"),$("#emissores .emissor-container").removeClass("col-xs-6 col-lg-6"),$("#emissores .emissor-container").addClass("col-xs-4 col-lg-4-custom"),$("#emissores .emissor-container .acessar-empresa").addClass("col-md-3"),$("#emissores").addClass("row-custom"),$("#emissores .emissor-container .empresa-status").addClass("empresa-status-grid")}),$("p.progresso_leitura").length>0&&setInterval(function(){$.ajax({context:$("p.progresso_leitura"),url:"/extrato_bancarios/"+$("p.progresso_leitura").data("extrato")+"/progresso_leitura",success:function(t){"processado"===t.progresso&&location.reload()}})},1e3);const modalContaAReceber=$("#modalContaAReceber"),modalContaAPagar=$("#modalContaAPagar");modalContaAReceber.on("shown.bs.modal",function(t){listenEventModal(t)}),modalContaAPagar.on("shown.bs.modal",function(t){listenEventModal(t)}),$("#linha_extrato_receita_fornecedor").keyup(function(){""===$(this).val()&&$("#linha_extrato_receita_fornecedor").val("")}),function(){$(function(){if($(".pagination").length&&$("#linhas-extrato-bancario").length&&($(window).scroll(function(){var t;if((t=$(".pagination .next_page a").attr("href"))&&$(window).scrollTop()>$(document).height()-$(window).height()-50)return $(".pagination").text("Carregando mais linhas..."),$.getScript(t)}),$(window).scroll()),$(".pagination").length&&$("#escrituracao-dicionarios").length&&($(window).scroll(function(){var t;if((t=$(".pagination .next_page a").attr("href"))&&$(window).scrollTop()>$(document).height()-$(window).height()-50)return $(".pagination").text("Carregando mais registros..."),$.getScript(t)}),$(window).scroll()),$(".pagination").length&&$("#transacoes-realizadas").length&&($(window).scroll(function(){var t,e;if(e=$(".pagination .next_page a").attr("href"),t=$(".saldo").last().val(),e&&$(window).scrollTop()>$(document).height()-$(window).height()-50)return $(".pagination").text("Carregando mais registros..."),e+="&saldo_ultima_pagina="+t,$.getScript(e)}),$(window).scroll()),$(".pagination").length&&($("#lista-remessa").length||$("#lista-retorno").length)&&($(window).scroll(function(){var t;if((t=$(".pagination .next_page a").attr("href"))&&$(window).scrollTop()>$(document).height()-$(window).height()-50)return $(".pagination").text("Carregando mais arquivos..."),$.getScript(t)}),$(window).scroll()),$("#transacoes-aprovadas-pjbank > table > tbody > tr").length&&($("#transacoes-aprovadas-pjbank").scroll(function(){var t,e,i;if((e=$("#transacoes-aprovadas-pjbank").data("proximaPagina"))&&$("#transacoes-aprovadas-pjbank").scrollTop()+$("#transacoes-aprovadas-pjbank").innerHeight()>=$("#transacoes-aprovadas-pjbank")[0].scrollHeight)return i=(t=window.location.href).includes("?")?t+"&page="+e:t+"?page="+e,$("#transacoes-aprovadas-pjbank").data("proximaPagina",""),$("#transacoes-aprovadas-pjbank .pagination").show(),$.getScript(i)}),$("#transacoes-aprovadas-pjbank").scroll()),$("#transacoes-pendentes-pjbank > table > tbody > tr").length)return $("#transacoes-pendentes-pjbank").scroll(function(){var t,e,i;if((e=$("#transacoes-pendentes-pjbank").data("proximaPagina"))&&$("#transacoes-pendentes-pjbank").scrollTop()+$("#transacoes-pendentes-pjbank").innerHeight()>=$("#transacoes-pendentes-pjbank")[0].scrollHeight)return i=(t=window.location.href).includes("?")?t+"&page="+e:t+"?page="+e,$("#transacoes-pendentes-pjbank").data("proximaPagina",""),$("#transacoes-pendentes-pjbank .pagination").show(),$.getScript(i)}),$("#transacoes-pendentes-pjbank").scroll()})}.call(this),$("#linhas-extrato-bancario").on("click",".botao-modal-transferencia",function(){$(this).data("id"),$("#transferencia_linha_extrato_bancario_id").val($(this).data("id"))}),$("#linhas-extrato-bancario").on("click",".botao-modal-conta-receber",function(){$(this).data("id"),$(this).data("descricao"),$("#linha_extrato_bancario_conta_receber_id").val($(this).data("id")),$("#descricao-receber").val($(this).data("descricao"))}),$("#linhas-extrato-bancario").on("click",".botao-modal-conta-pagar",function(){$(this).data("id"),$(this).data("descricao"),$("#linha_extrato_bancario_id").val($(this).data("id")),$("#descricao").val($(this).data("descricao"))}),$(document).on("click",".botao-modal-conta-receber-conciliacao-massa",function(){var t=$(this).data("id");$("#modalConciliacaoEmMassa").modal("hide"),$("#linha_extrato_referencia_conta_receber").val(t),$("#modalContaAReceberSemLinha").find("#modal-texto-conciliacao").html($("#texto-conciliacao").html())}),$(document).on("click",".botao-modal-conta-pagar-conciliacao-massa",function(){var t=$(this).data("transacao"),e=$(this).data("id");$("#modalConciliacaoEmMassa").modal("hide"),$("#data_vencimento").val(moment(t).format("L")),$("#linha_extrato_referencia").val(e),$("#modalContaAPagarSemLinha").find("#modal-texto-conciliacao").html($("#texto-conciliacao").html())}),$(document).on("change","#selecionar_todas_as_sugestoes",function(){const t=$('#body-conciliacao-debito tr:not([style^="display"]), #body-conciliacao-credito tr:not([style^="display"])');t.find(".selecionar-conta").prop("checked",$(this).is(":checked")),t.find(".selecionar-conta").trigger("change")}),$(document).on("change",".selecionar-transferencia, .input_valor_liquido",function(){$(".selecionar-transferencia:checked").length>0?($(".selecionar-transferencia").not(this).prop("checked",!1),$(".selecionar-transferencia:not(:checked)").attr("disabled",!0),$(".selecionar-conta").prop("checked",!1),$(".selecionar-conta").attr("disabled",!0)):($(".selecionar-transferencia").removeAttr("disabled"),$(".selecionar-conta").removeAttr("disabled")),calculaValorFaltante()}),$(document).on("change",".selecionar-conta, .input_valor_liquido",function(){$(".selecionar-conta:checked").length>0?($(".selecionar-transferencia").prop("checked",!1),$(".selecionar-transferencia").attr("disabled",!0)):$(".selecionar-transferencia").removeAttr("disabled"),calculaValorFaltante()}),$(document).on("change",".input_juros, .input_desconto, .input_valor_liquido",function(){calculaOutrosInputsExtrato($(this).closest("tr"))}),$(document).on("ajax:success",".modal-lancamentos",function(){$(".input_juros").trigger("change")}),$(".link-acoes-em-massa").on("click",function(){var t=[];$('input[name="seleciona_linha[]"]:checked').each(function(){t.push(this.value)}),t=t.join(),Cookies.set("linhas_selecionadas_ids",t)}),$("#link-restauracao-em-massa").on("click",function(){var t=[];$('input[name="seleciona_linha_excluida[]"]:checked').each(function(){t.push(this.value)}),t=t.join(),Cookies.set("linhas_selecionadas_ids",t)}),$("#seleciona_todos").on("change",function(){$('input[name="seleciona_linha[]"]:enabled').prop("checked",$(this).is(":checked"))}),$("#linhas_excluidas .table #seleciona_todos").on("change",function(){$('input[name="seleciona_linha_excluida[]"]:enabled').prop("checked",$(this).is(":checked"))}),$("#link-restauracao-em-massa").hide(),$("#tab-linhas-excluidas").on("click",function(){$("#link-restauracao-em-massa").show(),$(".link-acoes-em-massa").hide()}),$("#tab-linhas-ativas").on("click",function(){$(".link-acoes-em-massa").show(),$("#link-restauracao-em-massa").hide()}),$("#modalConciliacaoEmMassa").on("hidden.bs.modal",function(t){$(t.target).find(".modal-content").html("")}),$(document).on("ajaxStart",function(){location.search.includes("extrato_bancario_id")&&$("#modalConciliacaoEmMassa .modal-content").html('<div class="modal-body text-center"><div class="spinner-border text-maino-blue" role="status"><span class="sr-only"></span></div></div>')}),$("#form-relatorio-superlogica").submit(function(){$("#loading-totals").show()}),function(t,e,i,n){function o(e,i){this.settings=null,this.options=t.extend({},o.Defaults,i),this.$element=t(e),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},t.each(["onResize","onThrottledResize"],t.proxy(function(e,i){this._handlers[i]=t.proxy(this[i],this)},this)),t.each(o.Plugins,t.proxy(function(t,e){this._plugins[t.charAt(0).toLowerCase()+t.slice(1)]=new e(this)},this)),t.each(o.Workers,t.proxy(function(e,i){this._pipe.push({filter:i.filter,run:t.proxy(i.run,this)})},this)),this.setup(),this.initialize()}o.Defaults={items:3,loop:!1,center:!1,rewind:!1,checkVisibility:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:e,fallbackEasing:"swing",slideTransition:"",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},o.Width={Default:"default",Inner:"inner",Outer:"outer"},o.Type={Event:"event",State:"state"},o.Plugins={},o.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(t){t.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(t){var e=this.settings.margin||"",i=!this.settings.autoWidth,n=this.settings.rtl,o={width:"auto","margin-left":n?e:"","margin-right":n?"":e};!i&&this.$stage.children().css(o),t.css=o}},{filter:["width","items","settings"],run:function(t){var e=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,i=null,n=this._items.length,o=!this.settings.autoWidth,a=[];for(t.items={merge:!1,width:e};n--;)i=this._mergers[n],i=this.settings.mergeFit&&Math.min(i,this.settings.items)||i,t.items.merge=i>1||t.items.merge,a[n]=o?e*i:this._items[n].width();this._widths=a}},{filter:["items","settings"],run:function(){var e=[],i=this._items,n=this.settings,o=Math.max(2*n.items,4),a=2*Math.ceil(i.length/2),r=n.loop&&i.length?n.rewind?o:Math.max(o,a):0,s="",l="";for(r/=2;r>0;)e.push(this.normalize(e.length/2,!0)),s+=i[e[e.length-1]][0].outerHTML,e.push(this.normalize(i.length-1-(e.length-1)/2,!0)),l=i[e[e.length-1]][0].outerHTML+l,r-=1;this._clones=e,t(s).addClass("cloned").appendTo(this.$stage),t(l).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var t=this.settings.rtl?1:-1,e=this._clones.length+this._items.length,i=-1,n=0,o=0,a=[];++i<e;)n=a[i-1]||0,o=this._widths[this.relative(i)]+this.settings.margin,a.push(n+o*t);this._coordinates=a}},{filter:["width","items","settings"],run:function(){var t=this.settings.stagePadding,e=this._coordinates,i={width:Math.ceil(Math.abs(e[e.length-1]))+2*t,"padding-left":t||"","padding-right":t||""};this.$stage.css(i)}},{filter:["width","items","settings"],run:function(t){var e=this._coordinates.length,i=!this.settings.autoWidth,n=this.$stage.children();if(i&&t.items.merge)for(;e--;)t.css.width=this._widths[this.relative(e)],n.eq(e).css(t.css);else i&&(t.css.width=t.items.width,n.css(t.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(t){t.current=t.current?this.$stage.children().index(t.current):0,t.current=Math.max(this.minimum(),Math.min(this.maximum(),t.current)),this.reset(t.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var t,e,i,n,o=this.settings.rtl?1:-1,a=2*this.settings.stagePadding,r=this.coordinates(this.current())+a,s=r+this.width()*o,l=[];for(i=0,n=this._coordinates.length;i<n;i++)t=this._coordinates[i-1]||0,e=Math.abs(this._coordinates[i])+a*o,(this.op(t,"<=",r)&&this.op(t,">",s)||this.op(e,"<",r)&&this.op(e,">",s))&&l.push(i);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+l.join("), :eq(")+")").addClass("active"),this.$stage.children(".center").removeClass("center"),this.settings.center&&this.$stage.children().eq(this.current()).addClass("center")}}],o.prototype.initializeStage=function(){this.$stage=this.$element.find("."+this.settings.stageClass),this.$stage.length||(this.$element.addClass(this.options.loadingClass),this.$stage=t("<"+this.settings.stageElement+">",{"class":this.settings.stageClass}).wrap(t("<div/>",{"class":this.settings.stageOuterClass})),this.$element.append(this.$stage.parent()))},o.prototype.initializeItems=function(){var e=this.$element.find(".owl-item");if(e.length)return this._items=e.get().map(function(e){return t(e)}),this._mergers=this._items.map(function(){return 1}),void this.refresh();this.replace(this.$element.children().not(this.$stage.parent())),this.isVisible()?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass)},o.prototype.initialize=function(){var t,e,i;(this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading"))&&(t=this.$element.find("img"),e=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:n,i=this.$element.children(e).width(),t.length&&i<=0&&this.preloadAutoWidthImages(t));this.initializeStage(),this.initializeItems(),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},o.prototype.isVisible=function(){return!this.settings.checkVisibility||this.$element.is(":visible")},o.prototype.setup=function(){var e=this.viewport(),i=this.options.responsive,n=-1,o=null;i?(t.each(i,function(t){t<=e&&t>n&&(n=Number(t))}),"function"==typeof(o=t.extend({},this.options,i[n])).stagePadding&&(o.stagePadding=o.stagePadding()),delete o.responsive,o.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+n))):o=t.extend({},this.options),this.trigger("change",{property:{name:"settings",value:o}}),this._breakpoint=n,this.settings=o,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},o.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},o.prototype.prepare=function(e){var i=this.trigger("prepare",{content:e});return i.data||(i.data=t("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(e)),this.trigger("prepared",{content:i.data}),i.data},o.prototype.update=function(){for(var e=0,i=this._pipe.length,n=t.proxy(function(t){return this[t]},this._invalidated),o={};e<i;)(this._invalidated.all||t.grep(this._pipe[e].filter,n).length>0)&&this._pipe[e].run(o),e++;this._invalidated={},!this.is("valid")&&this.enter("valid")},o.prototype.width=function(t){switch(t=t||o.Width.Default){case o.Width.Inner:case o.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},o.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},o.prototype.onThrottledResize=function(){e.clearTimeout(this.resizeTimer),this.resizeTimer=e.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},o.prototype.onResize=function(){return!!this._items.length&&this._width!==this.$element.width()&&!!this.isVisible()&&(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized")))},o.prototype.registerEventHandlers=function(){t.support.transition&&this.$stage.on(t.support.transition.end+".owl.core",t.proxy(this.onTransitionEnd,this)),!1!==this.settings.responsive&&this.on(e,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",t.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",function(){return!1})),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",t.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",t.proxy(this.onDragEnd,this)))},o.prototype.onDragStart=function(e){var n=null;3!==e.which&&(t.support.transform?n={x:(n=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","))[16===n.length?12:4],y:n[16===n.length?13:5]}:(n=this.$stage.position(),n={x:this.settings.rtl?n.left+this.$stage.width()-this.width()+this.settings.margin:n.left,y:n.top}),this.is("animating")&&(t.support.transform?this.animate(n.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===e.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=t(e.target),this._drag.stage.start=n,this._drag.stage.current=n,this._drag.pointer=this.pointer(e),t(i).on("mouseup.owl.core touchend.owl.core",t.proxy(this.onDragEnd,this)),t(i).one("mousemove.owl.core touchmove.owl.core",t.proxy(function(e){var n=this.difference(this._drag.pointer,this.pointer(e));t(i).on("mousemove.owl.core touchmove.owl.core",t.proxy(this.onDragMove,this)),Math.abs(n.x)<Math.abs(n.y)&&this.is("valid")||(e.preventDefault(),this.enter("dragging"),this.trigger("drag"))},this)))},o.prototype.onDragMove=function(t){var e=null,i=null,n=null,o=this.difference(this._drag.pointer,this.pointer(t)),a=this.difference(this._drag.stage.start,o);this.is("dragging")&&(t.preventDefault(),this.settings.loop?(e=this.coordinates(this.minimum()),i=this.coordinates(this.maximum()+1)-e,a.x=((a.x-e)%i+i)%i+e):(e=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum()),i=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum()),n=this.settings.pullDrag?-1*o.x/5:0,a.x=Math.max(Math.min(a.x,e+n),i+n)),this._drag.stage.current=a,this.animate(a.x))},o.prototype.onDragEnd=function(e){var n=this.difference(this._drag.pointer,this.pointer(e)),o=this._drag.stage.current,a=n.x>0^this.settings.rtl?"left":"right";t(i).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==n.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(o.x,0!==n.x?a:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=a,(Math.abs(n.x)>3||(new Date).getTime()-this._drag.time>300)&&this._drag.target.one("click.owl.core",function(){return!1})),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},o.prototype.closest=function(e,i){var o=-1,a=30,r=this.width(),s=this.coordinates();return this.settings.freeDrag||t.each(s,t.proxy(function(t,l){return"left"===i&&e>l-a&&e<l+a?o=t:"right"===i&&e>l-r-a&&e<l-r+a?o=t+1:this.op(e,"<",l)&&this.op(e,">",s[t+1]!==n?s[t+1]:l-r)&&(o="left"===i?t+1:t),-1===o},this)),this.settings.loop||(this.op(e,">",s[this.minimum()])?o=e=this.minimum():this.op(e,"<",s[this.maximum()])&&(o=e=this.maximum())),o},o.prototype.animate=function(e){var i=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),i&&(this.enter("animating"),this.trigger("translate")),t.support.transform3d&&t.support.transition?this.$stage.css({transform:"translate3d("+e+"px,0px,0px)",transition:this.speed()/1e3+"s"+(this.settings.slideTransition?" "+this.settings.slideTransition:"")}):i?this.$stage.animate({left:e+"px"},this.speed(),this.settings.fallbackEasing,t.proxy(this.onTransitionEnd,this)):this.$stage.css({left:e+"px"})},o.prototype.is=function(t){return this._states.current[t]&&this._states.current[t]>0},o.prototype.current=function(t){if(t===n)return this._current;if(0===this._items.length)return n;if(t=this.normalize(t),this._current!==t){var e=this.trigger("change",{property:{name:"position",value:t}});e.data!==n&&(t=this.normalize(e.data)),this._current=t,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},o.prototype.invalidate=function(e){return"string"===t.type(e)&&(this._invalidated[e]=!0,this.is("valid")&&this.leave("valid")),t.map(this._invalidated,function(t,e){return e})},o.prototype.reset=function(t){(t=this.normalize(t))!==n&&(this._speed=0,this._current=t,this.suppress(["translate","translated"]),this.animate(this.coordinates(t)),this.release(["translate","translated"]))},o.prototype.normalize=function(t,e){var i=this._items.length,o=e?0:this._clones.length;return!this.isNumeric(t)||i<1?t=n:(t<0||t>=i+o)&&(t=((t-o/2)%i+i)%i+o/2),t},o.prototype.relative=function(t){return t-=this._clones.length/2,this.normalize(t,!0)},o.prototype.maximum=function(t){var e,i,n,o=this.settings,a=this._coordinates.length;if(o.loop)a=this._clones.length/2+this._items.length-1;else if(o.autoWidth||o.merge){if(e=this._items.length)for(i=this._items[--e].width(),n=this.$element.width();e--&&!((i+=this._items[e].width()+this.settings.margin)>n););a=e+1}else a=o.center?this._items.length-1:this._items.length-o.items;return t&&(a-=this._clones.length/2),Math.max(a,0)},o.prototype.minimum=function(t){return t?0:this._clones.length/2},o.prototype.items=function(t){return t===n?this._items.slice():(t=this.normalize(t,!0),this._items[t])},o.prototype.mergers=function(t){return t===n?this._mergers.slice():(t=this.normalize(t,!0),this._mergers[t])},o.prototype.clones=function(e){var i=this._clones.length/2,o=i+this._items.length,a=function(t){return t%2==0?o+t/2:i-(t+1)/2};return e===n?t.map(this._clones,function(t,e){return a(e)}):t.map(this._clones,function(t,i){return t===e?a(i):null})},o.prototype.speed=function(t){return t!==n&&(this._speed=t),this._speed},o.prototype.coordinates=function(e){var i,o=1,a=e-1;return e===n?t.map(this._coordinates,t.proxy(function(t,e){return this.coordinates(e)},this)):(this.settings.center?(this.settings.rtl&&(o=-1,a=e+1),i=this._coordinates[e],i+=(this.width()-i+(this._coordinates[a]||0))/2*o):i=this._coordinates[a]||0,i=Math.ceil(i))},o.prototype.duration=function(t,e,i){return 0===i?0:Math.min(Math.max(Math.abs(e-t),1),6)*Math.abs(i||this.settings.smartSpeed)},o.prototype.to=function(t,e){var i=this.current(),n=null,o=t-this.relative(i),a=(o>0)-(o<0),r=this._items.length,s=this.minimum(),l=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(o)>r/2&&(o+=-1*a*r),(n=(((t=i+o)-s)%r+r)%r+s)!==t&&n-o<=l&&n-o>0&&(i=n-o,t=n,this.reset(i))):this.settings.rewind?t=(t%(l+=1)+l)%l:t=Math.max(s,Math.min(l,t)),this.speed(this.duration(i,t,e)),this.current(t),this.isVisible()&&this.update()},o.prototype.next=function(t){t=t||!1,this.to(this.relative(this.current())+1,t)},o.prototype.prev=function(t){t=t||!1,this.to(this.relative(this.current())-1,t)},o.prototype.onTransitionEnd=function(t){if(t!==n&&(t.stopPropagation(),(t.target||t.srcElement||t.originalTarget)!==this.$stage.get(0)))return!1;this.leave("animating"),this.trigger("translated")},o.prototype.viewport=function(){var n;return this.options.responsiveBaseElement!==e?n=t(this.options.responsiveBaseElement).width():e.innerWidth?n=e.innerWidth:i.documentElement&&i.documentElement.clientWidth?n=i.documentElement.clientWidth:console.warn("Can not detect viewport width."),n},o.prototype.replace=function(e){this.$stage.empty(),this._items=[],
e&&(e=e instanceof jQuery?e:t(e)),this.settings.nestedItemSelector&&(e=e.find("."+this.settings.nestedItemSelector)),e.filter(function(){return 1===this.nodeType}).each(t.proxy(function(t,e){e=this.prepare(e),this.$stage.append(e),this._items.push(e),this._mergers.push(1*e.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)},this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},o.prototype.add=function(e,i){var o=this.relative(this._current);i=i===n?this._items.length:this.normalize(i,!0),e=e instanceof jQuery?e:t(e),this.trigger("add",{content:e,position:i}),e=this.prepare(e),0===this._items.length||i===this._items.length?(0===this._items.length&&this.$stage.append(e),0!==this._items.length&&this._items[i-1].after(e),this._items.push(e),this._mergers.push(1*e.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[i].before(e),this._items.splice(i,0,e),this._mergers.splice(i,0,1*e.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[o]&&this.reset(this._items[o].index()),this.invalidate("items"),this.trigger("added",{content:e,position:i})},o.prototype.remove=function(t){(t=this.normalize(t,!0))!==n&&(this.trigger("remove",{content:this._items[t],position:t}),this._items[t].remove(),this._items.splice(t,1),this._mergers.splice(t,1),this.invalidate("items"),this.trigger("removed",{content:null,position:t}))},o.prototype.preloadAutoWidthImages=function(e){e.each(t.proxy(function(e,i){this.enter("pre-loading"),i=t(i),t(new Image).one("load",t.proxy(function(t){i.attr("src",t.target.src),i.css("opacity",1),this.leave("pre-loading"),!this.is("pre-loading")&&!this.is("initializing")&&this.refresh()},this)).attr("src",i.attr("src")||i.attr("data-src")||i.attr("data-src-retina"))},this))},o.prototype.destroy=function(){for(var n in this.$element.off(".owl.core"),this.$stage.off(".owl.core"),t(i).off(".owl.core"),!1!==this.settings.responsive&&(e.clearTimeout(this.resizeTimer),this.off(e,"resize",this._handlers.onThrottledResize)),this._plugins)this._plugins[n].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.remove(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},o.prototype.op=function(t,e,i){var n=this.settings.rtl;switch(e){case"<":return n?t>i:t<i;case">":return n?t<i:t>i;case">=":return n?t<=i:t>=i;case"<=":return n?t>=i:t<=i}},o.prototype.on=function(t,e,i,n){t.addEventListener?t.addEventListener(e,i,n):t.attachEvent&&t.attachEvent("on"+e,i)},o.prototype.off=function(t,e,i,n){t.removeEventListener?t.removeEventListener(e,i,n):t.detachEvent&&t.detachEvent("on"+e,i)},o.prototype.trigger=function(e,i,n){var a={item:{count:this._items.length,index:this.current()}},r=t.camelCase(t.grep(["on",e,n],function(t){return t}).join("-").toLowerCase()),s=t.Event([e,"owl",n||"carousel"].join(".").toLowerCase(),t.extend({relatedTarget:this},a,i));return this._supress[e]||(t.each(this._plugins,function(t,e){e.onTrigger&&e.onTrigger(s)}),this.register({type:o.Type.Event,name:e}),this.$element.trigger(s),this.settings&&"function"==typeof this.settings[r]&&this.settings[r].call(this,s)),s},o.prototype.enter=function(e){t.each([e].concat(this._states.tags[e]||[]),t.proxy(function(t,e){this._states.current[e]===n&&(this._states.current[e]=0),this._states.current[e]++},this))},o.prototype.leave=function(e){t.each([e].concat(this._states.tags[e]||[]),t.proxy(function(t,e){this._states.current[e]--},this))},o.prototype.register=function(e){if(e.type===o.Type.Event){if(t.event.special[e.name]||(t.event.special[e.name]={}),!t.event.special[e.name].owl){var i=t.event.special[e.name]._default;t.event.special[e.name]._default=function(t){return!i||!i.apply||t.namespace&&-1!==t.namespace.indexOf("owl")?t.namespace&&t.namespace.indexOf("owl")>-1:i.apply(this,arguments)},t.event.special[e.name].owl=!0}}else e.type===o.Type.State&&(this._states.tags[e.name]?this._states.tags[e.name]=this._states.tags[e.name].concat(e.tags):this._states.tags[e.name]=e.tags,this._states.tags[e.name]=t.grep(this._states.tags[e.name],t.proxy(function(i,n){return t.inArray(i,this._states.tags[e.name])===n},this)))},o.prototype.suppress=function(e){t.each(e,t.proxy(function(t,e){this._supress[e]=!0},this))},o.prototype.release=function(e){t.each(e,t.proxy(function(t,e){delete this._supress[e]},this))},o.prototype.pointer=function(t){var i={x:null,y:null};return(t=(t=t.originalEvent||t||e.event).touches&&t.touches.length?t.touches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t).pageX?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),i},o.prototype.isNumeric=function(t){return!isNaN(parseFloat(t))},o.prototype.difference=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},t.fn.owlCarousel=function(e){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=t(this),a=n.data("owl.carousel");a||(a=new o(this,"object"==typeof e&&e),n.data("owl.carousel",a),t.each(["next","prev","to","destroy","refresh","replace","add","remove"],function(e,i){a.register({type:o.Type.Event,name:i}),a.$element.on(i+".owl.carousel.core",t.proxy(function(t){t.namespace&&t.relatedTarget!==this&&(this.suppress([i]),a[i].apply(this,[].slice.call(arguments,1)),this.release([i]))},a))})),"string"==typeof e&&"_"!==e.charAt(0)&&a[e].apply(a,i)})},t.fn.owlCarousel.Constructor=o}(window.Zepto||window.jQuery,window,document),function(t,e){var i=function(e){this._core=e,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.autoRefresh&&this.watch()},this)},this._core.options=t.extend({},i.Defaults,this._core.options),this._core.$element.on(this._handlers)};i.Defaults={autoRefresh:!0,autoRefreshInterval:500},i.prototype.watch=function(){this._interval||(this._visible=this._core.isVisible(),this._interval=e.setInterval(t.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},i.prototype.refresh=function(){this._core.isVisible()!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},i.prototype.destroy=function(){var t,i;for(t in e.clearInterval(this._interval),this._handlers)this._core.$element.off(t,this._handlers[t]);for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},t.fn.owlCarousel.Constructor.Plugins.AutoRefresh=i}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){var o=function(e){this._core=e,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":t.proxy(function(e){if(e.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(e.property&&"position"==e.property.name||"initialized"==e.type)){var i=this._core.settings,o=i.center&&Math.ceil(i.items/2)||i.items,a=i.center&&-1*o||0,r=(e.property&&e.property.value!==n?e.property.value:this._core.current())+a,s=this._core.clones().length,l=t.proxy(function(t,e){this.load(e)},this);for(i.lazyLoadEager>0&&(o+=i.lazyLoadEager,i.loop&&(r-=i.lazyLoadEager,o++));a++<o;)this.load(s/2+this._core.relative(r)),s&&t.each(this._core.clones(this._core.relative(r)),l),r++}},this)},this._core.options=t.extend({},o.Defaults,this._core.options),this._core.$element.on(this._handlers)};o.Defaults={lazyLoad:!1,lazyLoadEager:0},o.prototype.load=function(i){var n=this._core.$stage.children().eq(i),o=n&&n.find(".owl-lazy");!o||t.inArray(n.get(0),this._loaded)>-1||(o.each(t.proxy(function(i,n){var o,a=t(n),r=e.devicePixelRatio>1&&a.attr("data-src-retina")||a.attr("data-src")||a.attr("data-srcset");this._core.trigger("load",{element:a,url:r},"lazy"),a.is("img")?a.one("load.owl.lazy",t.proxy(function(){a.css("opacity",1),this._core.trigger("loaded",{element:a,url:r},"lazy")},this)).attr("src",r):a.is("source")?a.one("load.owl.lazy",t.proxy(function(){this._core.trigger("loaded",{element:a,url:r},"lazy")},this)).attr("srcset",r):((o=new Image).onload=t.proxy(function(){a.css({"background-image":'url("'+r+'")',opacity:"1"}),this._core.trigger("loaded",{element:a,url:r},"lazy")},this),o.src=r)},this)),this._loaded.push(n.get(0)))},o.prototype.destroy=function(){var t,e;for(t in this.handlers)this._core.$element.off(t,this.handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.Lazy=o}(window.Zepto||window.jQuery,window,document),function(t,e){var i=function(n){this._core=n,this._previousHeight=null,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.autoHeight&&"position"===t.property.name&&this.update()},this),"loaded.owl.lazy":t.proxy(function(t){t.namespace&&this._core.settings.autoHeight&&t.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()},this)},this._core.options=t.extend({},i.Defaults,this._core.options),this._core.$element.on(this._handlers),this._intervalId=null;var o=this;t(e).on("load",function(){o._core.settings.autoHeight&&o.update()}),t(e).resize(function(){o._core.settings.autoHeight&&(null!=o._intervalId&&clearTimeout(o._intervalId),o._intervalId=setTimeout(function(){o.update()},250))})};i.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},i.prototype.update=function(){var e=this._core._current,i=e+this._core.settings.items,n=this._core.settings.lazyLoad,o=this._core.$stage.children().toArray().slice(e,i),a=[],r=0;t.each(o,function(e,i){a.push(t(i).height())}),(r=Math.max.apply(null,a))<=1&&n&&this._previousHeight&&(r=this._previousHeight),this._previousHeight=r,this._core.$stage.parent().height(r).addClass(this._core.settings.autoHeightClass)},i.prototype.destroy=function(){var t,e;for(t in this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.AutoHeight=i}(window.Zepto||window.jQuery,window,document),function(t,e,i){var n=function(e){this._core=e,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":t.proxy(function(t){t.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})},this),"resize.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.video&&this.isInFullScreen()&&t.preventDefault()},this),"refreshed.owl.carousel":t.proxy(function(t){t.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()},this),"changed.owl.carousel":t.proxy(function(t){t.namespace&&"position"===t.property.name&&this._playing&&this.stop()},this),"prepared.owl.carousel":t.proxy(function(e){if(e.namespace){var i=t(e.content).find(".owl-video");i.length&&(i.css("display","none"),this.fetch(i,t(e.content)))}},this)},this._core.options=t.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",t.proxy(function(t){this.play(t)},this))};n.Defaults={video:!1,videoHeight:!1,videoWidth:!1},n.prototype.fetch=function(t,e){var i=t.attr("data-vimeo-id")?"vimeo":t.attr("data-vzaar-id")?"vzaar":"youtube",n=t.attr("data-vimeo-id")||t.attr("data-youtube-id")||t.attr("data-vzaar-id"),o=t.attr("data-width")||this._core.settings.videoWidth,a=t.attr("data-height")||this._core.settings.videoHeight,r=t.attr("href");if(!r)throw new Error("Missing video URL.");if((n=r.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com|be\-nocookie\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/))[3].indexOf("youtu")>-1)i="youtube";else if(n[3].indexOf("vimeo")>-1)i="vimeo";else{if(!(n[3].indexOf("vzaar")>-1))throw new Error("Video URL not supported.");i="vzaar"}n=n[6],this._videos[r]={type:i,id:n,width:o,height:a},e.attr("data-video",r),this.thumbnail(t,this._videos[r])},n.prototype.thumbnail=function(e,i){var n,o,a,r=i.width&&i.height?"width:"+i.width+"px;height:"+i.height+"px;":"",s=e.find("img"),l="src",c="",u=this._core.settings,d=function(i){o='<div class="owl-video-play-icon"></div>',n=u.lazyLoad?t("<div/>",{"class":"owl-video-tn "+c,srcType:i}):t("<div/>",{"class":"owl-video-tn",style:"opacity:1;background-image:url("+i+")"}),e.after(n),e.after(o)};if(e.wrap(t("<div/>",{"class":"owl-video-wrapper",style:r})),this._core.settings.lazyLoad&&(l="data-src",c="owl-lazy"),s.length)return d(s.attr(l)),s.remove(),!1;"youtube"===i.type?(a="//img.youtube.com/vi/"+i.id+"/hqdefault.jpg",d(a)):"vimeo"===i.type?t.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(t){a=t[0].thumbnail_large,d(a)}}):"vzaar"===i.type&&t.ajax({type:"GET",url:"//vzaar.com/api/videos/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(t){a=t.framegrab_url,d(a)}})},n.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},n.prototype.play=function(e){var i,n=t(e.target).closest("."+this._core.settings.itemClass),o=this._videos[n.attr("data-video")],a=o.width||"100%",r=o.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),n=this._core.items(this._core.relative(n.index())),this._core.reset(n.index()),(i=t('<iframe frameborder="0" allowfullscreen mozallowfullscreen webkitAllowFullScreen ></iframe>')).attr("height",r),i.attr("width",a),"youtube"===o.type?i.attr("src","//www.youtube.com/embed/"+o.id+"?autoplay=1&rel=0&v="+o.id):"vimeo"===o.type?i.attr("src","//player.vimeo.com/video/"+o.id+"?autoplay=1"):"vzaar"===o.type&&i.attr("src","//view.vzaar.com/"+o.id+"/player?autoplay=true"),t(i).wrap('<div class="owl-video-frame" />').insertAfter(n.find(".owl-video")),this._playing=n.addClass("owl-video-playing"))},n.prototype.isInFullScreen=function(){var e=i.fullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement;return e&&t(e).parent().hasClass("owl-video-frame")},n.prototype.destroy=function(){var t,e;for(t in this._core.$element.off("click.owl.video"),this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.Video=n}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){var o=function(e){this.core=e,this.core.options=t.extend({},o.Defaults,this.core.options),this.swapping=!0,this.previous=n,this.next=n,this.handlers={"change.owl.carousel":t.proxy(function(t){t.namespace&&"position"==t.property.name&&(this.previous=this.core.current(),this.next=t.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":t.proxy(function(t){t.namespace&&(this.swapping="translated"==t.type)},this),"translate.owl.carousel":t.proxy(function(t){t.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};o.Defaults={animateOut:!1,animateIn:!1},o.prototype.swap=function(){if(1===this.core.settings.items&&t.support.animation&&t.support.transition){this.core.speed(0);var e,i=t.proxy(this.clear,this),n=this.core.$stage.children().eq(this.previous),o=this.core.$stage.children().eq(this.next),a=this.core.settings.animateIn,r=this.core.settings.animateOut;this.core.current()!==this.previous&&(r&&(e=this.core.coordinates(this.previous)-this.core.coordinates(this.next),n.one(t.support.animation.end,i).css({left:e+"px"}).addClass("animated owl-animated-out").addClass(r)),a&&o.one(t.support.animation.end,i).addClass("animated owl-animated-in").addClass(a))}},o.prototype.clear=function(e){t(e.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},o.prototype.destroy=function(){var t,e;for(t in this.handlers)this.core.$element.off(t,this.handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.Animate=o}(window.Zepto||window.jQuery,window,document),function(t,e,i){var n=function(e){this._core=e,this._call=null,this._time=0,this._timeout=0,this._paused=!0,this._handlers={"changed.owl.carousel":t.proxy(function(t){t.namespace&&"settings"===t.property.name?this._core.settings.autoplay?this.play():this.stop():t.namespace&&"position"===t.property.name&&this._paused&&(this._time=0)},this),"initialized.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.autoplay&&this.play()},this),"play.owl.autoplay":t.proxy(function(t,e,i){t.namespace&&this.play(e,i)},this),"stop.owl.autoplay":t.proxy(function(t){t.namespace&&this.stop()},this),"mouseover.owl.autoplay":t.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"mouseleave.owl.autoplay":t.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()},this),"touchstart.owl.core":t.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"touchend.owl.core":t.proxy(function(){this._core.settings.autoplayHoverPause&&this.play()},this)},this._core.$element.on(this._handlers),this._core.options=t.extend({},n.Defaults,this._core.options)};n.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},n.prototype._next=function(n){this._call=e.setTimeout(t.proxy(this._next,this,n),this._timeout*(Math.round(this.read()/this._timeout)+1)-this.read()),this._core.is("interacting")||i.hidden||this._core.next(n||this._core.settings.autoplaySpeed)},n.prototype.read=function(){return(new Date).getTime()-this._time},n.prototype.play=function(i,n){var o;this._core.is("rotating")||this._core.enter("rotating"),i=i||this._core.settings.autoplayTimeout,o=Math.min(this._time%(this._timeout||i),i),this._paused?(this._time=this.read(),this._paused=!1):e.clearTimeout(this._call),this._time+=this.read()%i-o,this._timeout=i,this._call=e.setTimeout(t.proxy(this._next,this,n),i-o)},n.prototype.stop=function(){this._core.is("rotating")&&(this._time=0,this._paused=!0,e.clearTimeout(this._call),this._core.leave("rotating"))},n.prototype.pause=function(){this._core.is("rotating")&&!this._paused&&(this._time=this.read(),this._paused=!0,e.clearTimeout(this._call))},n.prototype.destroy=function(){var t,e;for(t in this.stop(),this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.autoplay=n}(window.Zepto||window.jQuery,window,document),function(t){"use strict";var e=function(i){this._core=i,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":t.proxy(function(e){e.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+t(e.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")},this),"added.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.dotsData&&this._templates.splice(t.position,0,this._templates.pop())},this),"remove.owl.carousel":t.proxy(function(t){t.namespace&&this._core.settings.dotsData&&this._templates.splice(t.position,1)},this),"changed.owl.carousel":t.proxy(function(t){t.namespace&&"position"==t.property.name&&this.draw()},this),"initialized.owl.carousel":t.proxy(function(t){t.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))},this),"refreshed.owl.carousel":t.proxy(function(t){t.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))},this)},this._core.options=t.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers)};e.Defaults={nav:!1,navText:['<span aria-label="Previous">&#x2039;</span>','<span aria-label="Next">&#x203a;</span>'],navSpeed:!1,navElement:'button type="button" role="presentation"',navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},e.prototype.initialize=function(){var e,i=this._core.settings;for(e in this._controls.$relative=(i.navContainer?t(i.navContainer):t("<div>").addClass(i.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=t("<"+i.navElement+">").addClass(i.navClass[0]).html(i.navText[0]).prependTo(this._controls.$relative).on("click",t.proxy(function(){this.prev(i.navSpeed)},this)),this._controls.$next=t("<"+i.navElement+">").addClass(i.navClass[1]).html(i.navText[1]).appendTo(this._controls.$relative).on("click",t.proxy(function(){this.next(i.navSpeed)},this)),i.dotsData||(this._templates=[t('<button role="button">').addClass(i.dotClass).append(t("<span>")).prop("outerHTML")]),this._controls.$absolute=(i.dotsContainer?t(i.dotsContainer):t("<div>").addClass(i.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","button",t.proxy(function(e){var n=t(e.target).parent().is(this._controls.$absolute)?t(e.target).index():t(e.target).parent().index();e.preventDefault(),this.to(n,i.dotsSpeed)},this)),this._overrides)this._core[e]=t.proxy(this[e],this)},e.prototype.destroy=function(){var t,e,i,n,o;for(t in o=this._core.settings,this._handlers)this.$element.off(t,this._handlers[t]);for(e in this._controls)"$relative"===e&&o.navContainer?this._controls[e].html(""):this._controls[e].remove();for(n in this.overides)this._core[n]=this._overrides[n];for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},e.prototype.update=function(){var t,e,i=this._core.clones().length/2,n=i+this._core.items().length,o=this._core.maximum(!0),a=this._core.settings,r=a.center||a.autoWidth||a.dotsData?1:a.dotsEach||a.items;if("page"!==a.slideBy&&(a.slideBy=Math.min(a.slideBy,a.items)),a.dots||"page"==a.slideBy)for(this._pages=[],t=i,e=0,0;t<n;t++){if(e>=r||0===e){if(this._pages.push({start:Math.min(o,t-i),end:t-i+r-1}),Math.min(o,t-i)===o)break;e=0,0}e+=this._core.mergers(this._core.relative(t))}},e.prototype.draw=function(){var e,i=this._core.settings,n=this._core.items().length<=i.items,o=this._core.relative(this._core.current()),a=i.loop||i.rewind;this._controls.$relative.toggleClass("disabled",!i.nav||n),i.nav&&(this._controls.$previous.toggleClass("disabled",!a&&o<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!a&&o>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!i.dots||n),i.dots&&(e=this._pages.length-this._controls.$absolute.children().length,i.dotsData&&0!==e?this._controls.$absolute.html(this._templates.join("")):e>0?this._controls.$absolute.append(new Array(e+1).join(this._templates[0])):e<0&&this._controls.$absolute.children().slice(e).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(t.inArray(this.current(),this._pages)).addClass("active"))},e.prototype.onTrigger=function(e){var i=this._core.settings;e.page={index:t.inArray(this.current(),this._pages),count:this._pages.length,size:i&&(i.center||i.autoWidth||i.dotsData?1:i.dotsEach||i.items)}},e.prototype.current=function(){var e=this._core.relative(this._core.current());return t.grep(this._pages,t.proxy(function(t){return t.start<=e&&t.end>=e},this)).pop()},e.prototype.getPosition=function(e){var i,n,o=this._core.settings;return"page"==o.slideBy?(i=t.inArray(this.current(),this._pages),n=this._pages.length,e?++i:--i,i=this._pages[(i%n+n)%n].start):(i=this._core.relative(this._core.current()),n=this._core.items().length,e?i+=o.slideBy:i-=o.slideBy),i},e.prototype.next=function(e){t.proxy(this._overrides.to,this._core)(this.getPosition(!0),e)},e.prototype.prev=function(e){t.proxy(this._overrides.to,this._core)(this.getPosition(!1),e)},e.prototype.to=function(e,i,n){var o;!n&&this._pages.length?(o=this._pages.length,t.proxy(this._overrides.to,this._core)(this._pages[(e%o+o)%o].start,i)):t.proxy(this._overrides.to,this._core)(e,i)},t.fn.owlCarousel.Constructor.Plugins.Navigation=e}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){"use strict";var o=function(i){this._core=i,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":t.proxy(function(i){i.namespace&&"URLHash"===this._core.settings.startPosition&&t(e).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":t.proxy(function(e){if(e.namespace){var i=t(e.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");if(!i)return;this._hashes[i]=e.content}},this),"changed.owl.carousel":t.proxy(function(i){if(i.namespace&&"position"===i.property.name){var n=this._core.items(this._core.relative(this._core.current())),o=t.map(this._hashes,function(t,e){return t===n?e:null}).join();if(!o||e.location.hash.slice(1)===o)return;e.location.hash=o}},this)},this._core.options=t.extend({},o.Defaults,this._core.options),this.$element.on(this._handlers),t(e).on("hashchange.owl.navigation",t.proxy(function(){var t=e.location.hash.substring(1),i=this._core.$stage.children(),o=this._hashes[t]&&i.index(this._hashes[t]);o!==n&&o!==this._core.current()&&this._core.to(this._core.relative(o),!1,!0)},this))};o.Defaults={URLhashListener:!1},o.prototype.destroy=function(){var i,n;for(i in t(e).off("hashchange.owl.navigation"),this._handlers)this._core.$element.off(i,this._handlers[i]);for(n in Object.getOwnPropertyNames(this))"function"!=typeof this[n]&&(this[n]=null)},t.fn.owlCarousel.Constructor.Plugins.Hash=o}(window.Zepto||window.jQuery,window,document),function(t,e,i,n){function o(e,i){var o=!1,a=e.charAt(0).toUpperCase()+e.slice(1);return t.each((e+" "+s.join(a+" ")+a).split(" "),function(t,e){if(r[e]!==n)return o=!i||e,!1}),o}function a(t){return o(t,!0)}var r=t("<support>").get(0).style,s="Webkit Moz O ms".split(" "),l={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},c={csstransforms:function(){return!!o("transform")},csstransforms3d:function(){return!!o("perspective")},csstransitions:function(){return!!o("transition")},cssanimations:function(){return!!o("animation")}};c.csstransitions()&&(t.support.transition=new String(a("transition")),t.support.transition.end=l.transition.end[t.support.transition]),c.cssanimations()&&(t.support.animation=new String(a("animation")),t.support.animation.end=l.animation.end[t.support.animation]),c.csstransforms()&&(t.support.transform=new String(a("transform")),t.support.transform3d=c.csstransforms3d())}(window.Zepto||window.jQuery,window,document),$(document).ready(()=>{ativandoCarouselParceirosDestaque(),ativandoCarouselParceirosNormais(),$(".btn-parceiro-categoria").each(function(){$(this).on("click",function(){$("#listagem-parceiros #loader").show(),$(".btn-parceiro-categoria").removeClass("btn-parceiro-categoria-selecionado"),$(this).addClass("btn-parceiro-categoria-selecionado")})})}),$(document).on("ready",()=>{function t(){$("#area-cliente-super-logica").length>0&&$.ajax({url:"/planos_superlogica/gera_url_area_do_cliente",method:"GET",dataType:"json",success(t){o=!0,n=t.link_area_do_cliente,$(".link-area-cliente").attr("href",n),e()}})}function e(){let t=encodeURIComponent(document.location.href),e=document.createElement("iframe");e.setAttribute("frameborder",0),e.setAttribute("width","100%"),e.setAttribute("height",900),e.setAttribute("allowtransparency",!0),e.src=n+"id=6&url="+t,document.getElementById("superlogica_planos_script").appendChild(e),i.hide(),$(".link-area-cliente-externo").show()}const i=$(".loading-area-cliente");let n,o=!1;i.show(),setInterval(function(){!1===o&&t()},3e3)}),$(document).on("ready",()=>{$("#produto_estoque_nome_armazem").autocomplete({autoFocus:!0,source:$("#produto_estoque_nome_armazem").data("autocomplete-source"),delay:1e3,minLength:3,response:function(t,e){0===$.grep(e.content,function(t){return t.value==$("#produto_estoque_nome_armazem").val()}).length&&""!==$(this).val()&&e.content.unshift({id:0,label:$(this).val()+" (criar novo)",value:$(this).val()})},select:function(t,e){0===e.item.id&&$.ajax({url:"/armazems",type:"POST",dataType:"json",data:{nome:$(this).val()},success:function(t){$("#produto_estoque_armazem_id").val(t.id)},error:function(t){swal("Ops",t.responseJSON.mensagem)}}),$("#produto_estoque_armazem_id").val(e.item.id)}}),$("#produto_estoque_nome_armazem").keyup(function(){""===$(this).val()&&$("#produto_estoque_armazem_id").val("")})}),$(".panel-filtro-custom .panel-heading").click(function(){$("#body-filtro").slideToggle("fast");const t=$(this).parent();filtroEscondido()?(mostraFiltro("fast"),t.addClass("open")):(escondeFiltro("fast"),t.removeClass("open")),t.hasClass("custom-heading-filter")&&salvaEstadoDoFiltro(!1)}),$("#prende_filtro").on("click",function(){salvaEstadoDoFiltro()}),$(document).on("ready",function(){Cookies.get(nomeDoCookie())==statusEscondido()?(escondeFiltro(),animaAposFixarFiltroFechado()):Cookies.get(nomeDoCookie())==statusAparecendo()?(mostraFiltro(),animaAposFixarFiltroAberto()):exibirFiltroPorConfiguracao()&&(mostraFiltro(),animaAposFixarFiltroAberto())}),$(".row-hidden-filters").on("shown.bs.collapse hidden.bs.collapse",behaviorBtnExpandFilter);const container_list=document.querySelectorAll("#filters-order-list > li > a");if(container_list){const field_ordem=document.querySelector("#ordem"),form_filter=document.querySelector("#wrapper-filter > form");container_list.forEach(t=>{t.addEventListener("click",t=>{t.preventDefault();const e=t.target.dataset.orderBy||"";field_ordem.value=e,form_filter.submit()})})}if($(".remove-filter").on("click",removeCampoDofiltro),$("#fecha_banner_dashboard").click(function(){Cookies.set(nomeDoCookieBanner(),statusEscondido()),$(".b-dashboard-container").hide()}),Cookies.get(nomeDoCookieBanner())!==statusEscondido()&&$(".b-dashboard-container").show(),document.addEventListener("DOMContentLoaded",function(){const t={show:!0,backdrop:"static",keyboard:!1},e=$("#modal_marketing");Cookies.get(nomeDoCookieCortina())!==statusEscondido()&&e.modal(t),$("#exibe_cortina").click(function(){Cookies.set(nomeDoCookieCortina(),statusExibindo()),e.modal(t)}),$("#fecha_cortina").click(function(){e.modal("hide")}),e.on("hidden.bs.modal",function(){Cookies.set(nomeDoCookieCortina(),statusEscondido())})}),$("#side-menu > li > a").hover(function(){$(this).hasClass("nav-item-hover")?$(this).removeClass("nav-item-hover"):$(this).addClass("nav-item-hover")}),$(".main-menu > li > a").hover(function(){$(this).hasClass("nav-item-hover")?$(this).removeClass("nav-item-hover"):$(this).addClass("nav-item-hover")}),$(".nav-second-level > li > a").hover(function(){$(this).parent().parent().siblings("a").hasClass("nav-item-hover")?$(this).parent().parent().siblings("a").removeClass("nav-item-hover"):$(this).parent().parent().siblings("a").addClass("nav-item-hover")}),$("#menu-transmissao-marketing").length>0){var dataInicialAoVivo=Date.parse($("#menu-transmissao-marketing").data("dataInicial")),dataFinalAoVivo=Date.parse($("#menu-transmissao-marketing").data("dataFinal"));Date.now()>=dataInicialAoVivo&&Date.now()<=dataFinalAoVivo?($("#menu-transmissao-marketing").show(),$("#menu-parceiros").hide(),$("#presentinho").hide()):($("#menu-transmissao-marketing").hide(),$("#menu-parceiros").show(),$("#presentinho").show())}$(document).ready(function(){$(".items-menu > li").removeClass("menu-ativo"),
$('a[href="'+window.location.pathname+'"]').closest(".nav-second-level").closest("li").addClass("menu-ativo")}),
/*
Trix 1.3.1
Copyright  2020 Basecamp, LLC
http://trix-editor.org/
 */
function(){}.call(this),function(){null==window.Set&&(window.Set=function(){function t(){this.clear()}return t.prototype.clear=function(){return this.values=[]},t.prototype.has=function(t){return-1!==this.values.indexOf(t)},t.prototype.add=function(t){return this.has(t)||this.values.push(t),this},t.prototype["delete"]=function(t){var e;return-1!==(e=this.values.indexOf(t))&&(this.values.splice(e,1),!0)},t.prototype.forEach=function(){var t;return(t=this.values).forEach.apply(t,arguments)},t}())}.call(this),function(t){function e(){}function i(t,e){return function(){t.apply(e,arguments)}}function n(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(t,this)}function o(t,e){for(;3===t._state;)t=t._value;return 0===t._state?void t._deferreds.push(e):(t._handled=!0,void d(function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null!==i){var n;try{n=i(t._value)}catch(o){return void r(e.promise,o)}a(e.promise,n)}else(1===t._state?a:r)(e.promise,t._value)}))}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var o=e.then;if(e instanceof n)return t._state=3,t._value=e,void s(t);if("function"==typeof o)return void c(i(o,e),t)}t._state=1,t._value=e,s(t)}catch(a){r(t,a)}}function r(t,e){t._state=2,t._value=e,s(t)}function s(t){2===t._state&&0===t._deferreds.length&&setTimeout(function(){t._handled||p(t._value)},1);for(var e=0,i=t._deferreds.length;i>e;e++)o(t,t._deferreds[e]);t._deferreds=null}function l(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}function c(t,e){var i=!1;try{t(function(t){i||(i=!0,a(e,t))},function(t){i||(i=!0,r(e,t))})}catch(n){if(i)return;i=!0,r(e,n)}}var u=setTimeout,d="function"==typeof setImmediate&&setImmediate||function(t){u(t,1)},p=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};n.prototype["catch"]=function(t){return this.then(null,t)},n.prototype.then=function(t,i){var a=new n(e);return o(this,new l(t,i,a)),a},n.all=function(t){var e=Array.prototype.slice.call(t);return new n(function(t,i){function n(a,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,function(t){n(a,t)},i)}e[a]=r,0==--o&&t(e)}catch(l){i(l)}}if(0===e.length)return t([]);for(var o=e.length,a=0;a<e.length;a++)n(a,e[a])})},n.resolve=function(t){return t&&"object"==typeof t&&t.constructor===n?t:new n(function(e){e(t)})},n.reject=function(t){return new n(function(e,i){i(t)})},n.race=function(t){return new n(function(e,i){for(var n=0,o=t.length;o>n;n++)t[n].then(e,i)})},n._setImmediateFn=function(t){d=t},n._setUnhandledRejectionFn=function(t){p=t},"undefined"!=typeof module&&module.exports?module.exports=n:t.Promise||(t.Promise=n)}(this),function(){var t="object"==typeof window.customElements,e="function"==typeof document.registerElement;t||e||(
/**
  * @license
  * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
  * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
  * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
  * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
  * Code distributed by Google as part of the polymer project is also
  * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
  */
"undefined"==typeof WeakMap&&function(){var t=Object.defineProperty,e=Date.now()%1e9,i=function(){this.name="__st"+(1e9*Math.random()>>>0)+e+++"__"};i.prototype={set:function(e,i){var n=e[this.name];return n&&n[0]===e?n[1]=i:t(e,this.name,{value:[e,i],writable:!0}),this},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:void 0},"delete":function(t){var e=t[this.name];return!(!e||e[0]!==t)&&(e[0]=e[1]=void 0,!0)},has:function(t){var e=t[this.name];return!!e&&e[0]===t}},window.WeakMap=i}(),function(t){function e(t){$.push(t),w||(w=!0,m(n))}function i(t){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(t)||t}function n(){w=!1;var t=$;$=[],t.sort(function(t,e){return t.uid_-e.uid_});var e=!1;t.forEach(function(t){var i=t.takeRecords();o(t),i.length&&(t.callback_(i,t),e=!0)}),e&&n()}function o(t){t.nodes_.forEach(function(e){var i=g.get(e);i&&i.forEach(function(e){e.observer===t&&e.removeTransientObservers()})})}function a(t,e){for(var i=t;i;i=i.parentNode){var n=g.get(i);if(n)for(var o=0;o<n.length;o++){var a=n[o],r=a.options;if(i===t||r.subtree){var s=e(r);s&&a.enqueue(s)}}}}function r(t){this.callback_=t,this.nodes_=[],this.records_=[],this.uid_=++x}function s(t,e){this.type=t,this.target=e,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function l(t){var e=new s(t.type,t.target);return e.addedNodes=t.addedNodes.slice(),e.removedNodes=t.removedNodes.slice(),e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,e.attributeName=t.attributeName,e.attributeNamespace=t.attributeNamespace,e.oldValue=t.oldValue,e}function c(t,e){return b=new s(t,e)}function u(t){return y||((y=l(b)).oldValue=t,y)}function d(){b=y=void 0}function p(t){return t===y||t===b}function h(t,e){return t===e?t:y&&p(t)?y:null}function f(t,e,i){this.observer=t,this.target=e,this.options=i,this.transientObservedNodes=[]}if(!t.JsMutationObserver){var m,g=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))m=setTimeout;else if(window.setImmediate)m=window.setImmediate;else{var v=[],_=String(Math.random());window.addEventListener("message",function(t){if(t.data===_){var e=v;v=[],e.forEach(function(t){t()})}}),m=function(t){v.push(t),window.postMessage(_,"*")}}var b,y,w=!1,$=[],x=0;r.prototype={observe:function(t,e){if(t=i(t),!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var n=g.get(t);n||g.set(t,n=[]);for(var o,a=0;a<n.length;a++)if(n[a].observer===this){(o=n[a]).removeListeners(),o.options=e;break}o||(o=new f(this,t,e),n.push(o),this.nodes_.push(t)),o.addListeners()},disconnect:function(){this.nodes_.forEach(function(t){for(var e=g.get(t),i=0;i<e.length;i++){var n=e[i];if(n.observer===this){n.removeListeners(),e.splice(i,1);break}}},this),this.records_=[]},takeRecords:function(){var t=this.records_;return this.records_=[],t}},f.prototype={enqueue:function(t){var i=this.observer.records_,n=i.length;if(i.length>0){var o=h(i[n-1],t);if(o)return void(i[n-1]=o)}else e(this.observer);i[n]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var e=this.options;e.attributes&&t.addEventListener("DOMAttrModified",this,!0),e.characterData&&t.addEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.addEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var e=this.options;e.attributes&&t.removeEventListener("DOMAttrModified",this,!0),e.characterData&&t.removeEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.removeEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(t){if(t!==this.target){this.addListeners_(t),this.transientObservedNodes.push(t);var e=g.get(t);e||g.set(t,e=[]),e.push(this)}},removeTransientObservers:function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(t){this.removeListeners_(t);for(var e=g.get(t),i=0;i<e.length;i++)if(e[i]===this){e.splice(i,1);break}},this)},handleEvent:function(t){switch(t.stopImmediatePropagation(),t.type){case"DOMAttrModified":var e=t.attrName,i=t.relatedNode.namespaceURI,n=t.target;(r=new c("attributes",n)).attributeName=e,r.attributeNamespace=i;var o=t.attrChange===MutationEvent.ADDITION?null:t.prevValue;a(n,function(t){return!t.attributes||t.attributeFilter&&t.attributeFilter.length&&-1===t.attributeFilter.indexOf(e)&&-1===t.attributeFilter.indexOf(i)?void 0:t.attributeOldValue?u(o):r});break;case"DOMCharacterDataModified":var r=c("characterData",n=t.target);o=t.prevValue;a(n,function(t){return t.characterData?t.characterDataOldValue?u(o):r:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(t.target);case"DOMNodeInserted":var s,l,p=t.target;"DOMNodeInserted"===t.type?(s=[p],l=[]):(s=[],l=[p]);var h=p.previousSibling,f=p.nextSibling;(r=c("childList",t.target.parentNode)).addedNodes=s,r.removedNodes=l,r.previousSibling=h,r.nextSibling=f,a(t.relatedNode,function(t){return t.childList?r:void 0})}d()}},t.JsMutationObserver=r,t.MutationObserver||(t.MutationObserver=r,r._isPolyfilled=!0)}}(self),function(){"use strict";if(!window.performance||!window.performance.now){var t=Date.now();window.performance={now:function(){return Date.now()-t}}}if(window.requestAnimationFrame||(window.requestAnimationFrame=function(){var t=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return t?function(e){return t(function(){e(performance.now())})}:function(t){return window.setTimeout(t,1e3/60)}}()),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}),!function(){var t=document.createEvent("Event");return t.initEvent("foo",!0,!0),t.preventDefault(),t.defaultPrevented}()){var e=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(e.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var i=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||i&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(t,e){e=e||{};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,Boolean(e.bubbles),Boolean(e.cancelable),e.detail),i},window.CustomEvent.prototype=window.Event.prototype),!window.Event||i&&"function"!=typeof window.Event){var n=window.Event;window.Event=function(t,e){e=e||{};var i=document.createEvent("Event");return i.initEvent(t,Boolean(e.bubbles),Boolean(e.cancelable)),i},window.Event.prototype=n.prototype}}(window.WebComponents),window.CustomElements=window.CustomElements||{flags:{}},function(t){var e=t.flags,i=[],n=function(t){i.push(t)},o=function(){i.forEach(function(e){e(t)})};t.addModule=n,t.initializeModules=o,t.hasNative=Boolean(document.registerElement),t.isIE=/Trident/.test(navigator.userAgent),t.useNative=!e.register&&t.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule(function(t){function e(t,e){i(t,function(t){return!!e(t)||void n(t,e)}),n(t,e)}function i(t,e,n){var o=t.firstElementChild;if(!o)for(o=t.firstChild;o&&o.nodeType!==Node.ELEMENT_NODE;)o=o.nextSibling;for(;o;)!0!==e(o,n)&&i(o,e,n),o=o.nextElementSibling;return null}function n(t,i){for(var n=t.shadowRoot;n;)e(n,i),n=n.olderShadowRoot}function o(t,e){a(t,e,[])}function a(t,e,i){if(t=window.wrap(t),!(i.indexOf(t)>=0)){i.push(t);for(var n,o=t.querySelectorAll("link[rel="+r+"]"),s=0,l=o.length;l>s&&(n=o[s]);s++)n["import"]&&a(n["import"],e,i);e(t)}}var r=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";t.forDocumentTree=o,t.forSubtree=e}),window.CustomElements.addModule(function(t){function e(t,e){return i(t,e)||n(t,e)}function i(e,i){return!!t.upgrade(e,i)||void(i&&r(e))}function n(t,e){b(t,function(t){return!!i(t,e)||void 0})}function o(t){x.push(t),$||($=!0,setTimeout(a))}function a(){$=!1;for(var t,e=x,i=0,n=e.length;n>i&&(t=e[i]);i++)t();x=[]}function r(t){w?o(function(){s(t)}):s(t)}function s(t){t.__upgraded__&&!t.__attached&&(t.__attached=!0,t.attachedCallback&&t.attachedCallback())}function l(t){c(t),b(t,function(t){c(t)})}function c(t){w?o(function(){u(t)}):u(t)}function u(t){t.__upgraded__&&t.__attached&&(t.__attached=!1,t.detachedCallback&&t.detachedCallback())}function d(t){for(var e=t,i=window.wrap(document);e;){if(e==i)return!0;e=e.parentNode||e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host}}function p(t){if(t.shadowRoot&&!t.shadowRoot.__watched){_.dom&&console.log("watching shadow-root for: ",t.localName);for(var e=t.shadowRoot;e;)m(e),e=e.olderShadowRoot}}function h(t,i){if(_.dom){var n=i[0];if(n&&"childList"===n.type&&n.addedNodes&&n.addedNodes){for(var o=n.addedNodes[0];o&&o!==document&&!o.host;)o=o.parentNode;var a=o&&(o.URL||o._URL||o.host&&o.host.localName)||"";a=a.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",i.length,a||"")}var r=d(t);i.forEach(function(t){"childList"===t.type&&(k(t.addedNodes,function(t){t.localName&&e(t,r)}),k(t.removedNodes,function(t){t.localName&&l(t)}))}),_.dom&&console.groupEnd()}function f(t){for((t=window.wrap(t))||(t=window.wrap(document));t.parentNode;)t=t.parentNode;var e=t.__observer;e&&(h(t,e.takeRecords()),a())}function m(t){if(!t.__observer){var e=new MutationObserver(h.bind(this,t));e.observe(t,{childList:!0,subtree:!0}),t.__observer=e}}function g(t){t=window.wrap(t),_.dom&&console.group("upgradeDocument: ",t.baseURI.split("/").pop()),e(t,t===window.wrap(document)),m(t),_.dom&&console.groupEnd()}function v(t){y(t,g)}var _=t.flags,b=t.forSubtree,y=t.forDocumentTree,w=window.MutationObserver._isPolyfilled&&_["throttle-attached"];t.hasPolyfillMutations=w,t.hasThrottledAttached=w;var $=!1,x=[],k=Array.prototype.forEach.call.bind(Array.prototype.forEach),C=Element.prototype.createShadowRoot;C&&(Element.prototype.createShadowRoot=function(){var t=C.call(this);return window.CustomElements.watchShadow(this),t}),t.watchShadow=p,t.upgradeDocumentTree=v,t.upgradeDocument=g,t.upgradeSubtree=n,t.upgradeAll=e,t.attached=r,t.takeRecords=f}),window.CustomElements.addModule(function(t){function e(e,n){if("template"===e.localName&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(e),!e.__upgraded__&&e.nodeType===Node.ELEMENT_NODE){var o=e.getAttribute("is"),a=t.getRegisteredDefinition(e.localName)||t.getRegisteredDefinition(o);if(a&&(o&&a.tag==e.localName||!o&&!a["extends"]))return i(e,a,n)}}function i(e,i,o){return r.upgrade&&console.group("upgrade:",e.localName),i.is&&e.setAttribute("is",i.is),n(e,i),e.__upgraded__=!0,a(e),o&&t.attached(e),t.upgradeSubtree(e,o),r.upgrade&&console.groupEnd(),e}function n(t,e){Object.__proto__?t.__proto__=e.prototype:(o(t,e.prototype,e.native),t.__proto__=e.prototype)}function o(t,e,i){for(var n={},o=e;o!==i&&o!==HTMLElement.prototype;){for(var a,r=Object.getOwnPropertyNames(o),s=0;a=r[s];s++)n[a]||(Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(o,a)),n[a]=1);o=Object.getPrototypeOf(o)}}function a(t){t.createdCallback&&t.createdCallback()}var r=t.flags;t.upgrade=e,t.upgradeWithDefinition=i,t.implementPrototype=n}),window.CustomElements.addModule(function(t){function e(e,n){var l=n||{};if(!e)throw new Error("document.registerElement: first argument `name` must not be empty");if(e.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(e)+"'.");if(o(e))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(e)+"'. The type name is invalid.");if(c(e))throw new Error("DuplicateDefinitionError: a type with name '"+String(e)+"' is already registered");return l.prototype||(l.prototype=Object.create(HTMLElement.prototype)),l.__name=e.toLowerCase(),l["extends"]&&(l["extends"]=l["extends"].toLowerCase()),l.lifecycle=l.lifecycle||{},l.ancestry=a(l["extends"]),r(l),s(l),i(l.prototype),u(l.__name,l),l.ctor=d(l),l.ctor.prototype=l.prototype,l.prototype.constructor=l.ctor,t.ready&&g(document),l.ctor}function i(t){if(!t.setAttribute._polyfilled){var e=t.setAttribute;t.setAttribute=function(t,i){n.call(this,t,i,e)};var i=t.removeAttribute;t.removeAttribute=function(t){n.call(this,t,null,i)},t.setAttribute._polyfilled=!0}}function n(t,e,i){t=t.toLowerCase();var n=this.getAttribute(t);i.apply(this,arguments);var o=this.getAttribute(t);this.attributeChangedCallback&&o!==n&&this.attributeChangedCallback(t,n,o)}function o(t){for(var e=0;e<w.length;e++)if(t===w[e])return!0}function a(t){var e=c(t);return e?a(e["extends"]).concat([e]):[]}function r(t){for(var e,i=t["extends"],n=0;e=t.ancestry[n];n++)i=e.is&&e.tag;t.tag=i||t.__name,i&&(t.is=t.__name)}function s(t){if(!Object.__proto__){var e=HTMLElement.prototype;if(t.is){var i=document.createElement(t.tag);e=Object.getPrototypeOf(i)}for(var n,o=t.prototype,a=!1;o;)o==e&&(a=!0),(n=Object.getPrototypeOf(o))&&(o.__proto__=n),o=n;a||console.warn(t.tag+" prototype not found in prototype chain for "+t.is),t.native=e}}function l(t){return _(k(t.tag),t)}function c(t){return t?$[t.toLowerCase()]:void 0}function u(t,e){$[t]=e}function d(t){return function(){return l(t)}}function p(t,e,i){return t===x?h(e,i):C(t,e)}function h(t,e){t&&(t=t.toLowerCase()),e&&(e=e.toLowerCase());var i,n=c(e||t);if(n){if(t==n.tag&&e==n.is)return new n.ctor;if(!e&&!n.is)return new n.ctor}return e?((i=h(t)).setAttribute("is",e),i):(i=k(t),t.indexOf("-")>=0&&b(i,HTMLElement),i)}function f(t,e){var i=t[e];t[e]=function(){var t=i.apply(this,arguments);return v(t),t}}var m,g=(t.isIE,t.upgradeDocumentTree),v=t.upgradeAll,_=t.upgradeWithDefinition,b=t.implementPrototype,y=t.useNative,w=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],$={},x="http://www.w3.org/1999/xhtml",k=document.createElement.bind(document),C=document.createElementNS.bind(document);m=Object.__proto__||y?function(t,e){return t instanceof e}:function(t,e){if(t instanceof e)return!0;for(var i=t;i;){if(i===e.prototype)return!0;i=i.__proto__}return!1},f(Node.prototype,"cloneNode"),f(document,"importNode"),document.registerElement=e,document.createElement=h,document.createElementNS=p,t.registry=$,t["instanceof"]=m,t.reservedTagList=w,t.getRegisteredDefinition=c,document.register=document.registerElement}),function(t){function e(){a(window.wrap(document)),window.CustomElements.ready=!0,(window.requestAnimationFrame||function(t){setTimeout(t,16)})(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}var i=t.useNative,n=t.initializeModules;if(t.isIE,i){var o=function(){};t.watchShadow=o,t.upgrade=o,t.upgradeAll=o,t.upgradeDocumentTree=o,t.upgradeSubtree=o,t.takeRecords=o,t["instanceof"]=function(t,e){return t instanceof e}}else n();var a=t.upgradeDocumentTree,r=t.upgradeDocument;if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(t){return t}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(t){t["import"]&&r(wrap(t["import"]))}),"complete"===document.readyState||t.flags.eager)e();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var s=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(s,e)}else e()}(window.CustomElements))}.call(this),function(){}.call(this),function(){var t=this;(function(){(function(){this.Trix={VERSION:"1.3.1",ZERO_WIDTH_SPACE:"\ufeff",NON_BREAKING_SPACE:"\xa0",OBJECT_REPLACEMENT_CHARACTER:"\ufffc",browser:{composesExistingText:/Android.*Chrome/.test(navigator.userAgent),forcesObjectResizing:/Trident.*rv:11/.test(navigator.userAgent),supportsInputEvents:function(){var t,e,i;if("undefined"==typeof InputEvent)return!1;for(t=0,e=(i=["data","getTargetRanges","inputType"]).length;e>t;t++)if(!(i[t]in InputEvent.prototype))return!1;return!0}()},config:{}}}).call(this)}).call(t);var e=t.Trix;(function(){(function(){e.BasicObject=function(){function t(){}var e,i,n;return t.proxyMethod=function(t){var n,o,a,r,s;return a=i(t),n=a.name,r=a.toMethod,s=a.toProperty,o=a.optional,this.prototype[n]=function(){var t,i;return t=null!=r?o?"function"==typeof this[r]?this[r]():void 0:this[r]():null!=s?this[s]:void 0,o?null!=(i=null!=t?t[n]:void 0)?e.call(i,t,arguments):void 0:(i=t[n],e.call(i,t,arguments))}},i=function(t){var e,i;if(!(i=t.match(n)))throw new Error("can't parse @proxyMethod expression: "+t);return e={name:i[4]},null!=i[2]?e.toMethod=i[1]:e.toProperty=i[1],null!=i[3]&&(e.optional=!0),e},e=Function.prototype.apply,n=/^(.+?)(\(\))?(\?)?\.(.+?)$/,t}()}).call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.Object=function(i){function n(){this.id=++o}var o;return t(n,i),o=0,n.fromJSONString=function(t){return this.fromJSON(JSON.parse(t))},n.prototype.hasSameConstructorAs=function(t){return this.constructor===(null!=t?t.constructor:void 0)},n.prototype.isEqualTo=function(t){return this===t},n.prototype.inspect=function(){var t,e,i;return t=function(){var t,n,o;for(e in o=[],n=null!=(t=this.contentsForInspection())?t:{})i=n[e],o.push(e+"="+i);return o}.call(this),"#<"+this.constructor.name+":"+this.id+(t.length?" "+t.join(", "):"")+">"},n.prototype.contentsForInspection=function(){},n.prototype.toJSONString=function(){return JSON.stringify(this)},n.prototype.toUTF16String=function(){return e.UTF16String.box(this)},n.prototype.getCacheKey=function(){return this.id.toString()},n}(e.BasicObject)}.call(this),function(){e.extend=function(t){var e,i;for(e in t)i=t[e],this[e]=i;return this}}.call(this),function(){e.extend({defer:function(t){return setTimeout(t,1)}})}.call(this),function(){var t,i;e.extend({normalizeSpaces:function(t){return t.replace(RegExp(""+e.ZERO_WIDTH_SPACE,"g"),"").replace(RegExp(""+e.NON_BREAKING_SPACE,"g")," ")},normalizeNewlines:function(t){return t.replace(/\r\n/g,"\n")},breakableWhitespacePattern:RegExp("[^\\S"+e.NON_BREAKING_SPACE+"]"),squishBreakableWhitespace:function(t){return t.replace(RegExp(""+e.breakableWhitespacePattern.source,"g")," ").replace(/\ {2,}/g," ")},summarizeStringChange:function(t,n){var o,a,r,s;return t=e.UTF16String.box(t),(n=e.UTF16String.box(n)).length<t.length?(s=(a=i(t,n))[0],o=a[1]):(o=(r=i(n,t))[0],s=r[1]),{added:o,removed:s}}}),i=function(i,n){var o,a,r,s,l;return i.isEqualTo(n)?["",""]:(r=(s=(a=t(i,n)).utf16String.length)?(l=a.offset,o=i.codepoints.slice(0,l).concat(i.codepoints.slice(l+s)),t(n,e.UTF16String.fromCodepoints(o))):t(n,i),[a.utf16String.toString(),r.utf16String.toString()])},t=function(t,e){var i,n,o;for(i=0,n=t.length,o=e.length;n>i&&t.charAt(i).isEqualTo(e.charAt(i));)i++;for(;n>i+1&&t.charAt(n-1).isEqualTo(e.charAt(o-1));)n--,o--;return{utf16String:t.slice(i,n),offset:i}}}.call(this),function(){e.extend({copyObject:function(t){var e,i,n;for(e in null==t&&(t={}),i={},t)n=t[e],i[e]=n;return i},objectsAreEqual:function(t,e){var i;if(null==t&&(t={}),null==e&&(e={}),Object.keys(t).length!==Object.keys(e).length)return!1;for(i in t)if(t[i]!==e[i])return!1;return!0}})}.call(this),function(){var t=[].slice;e.extend({arraysAreEqual:function(t,e){var i,n,o;if(null==t&&(t=[]),null==e&&(e=[]),t.length!==e.length)return!1;for(n=i=0,o=t.length;o>i;n=++i)if(t[n]!==e[n])return!1;return!0},arrayStartsWith:function(t,i){return null==t&&(t=[]),null==i&&(i=[]),e.arraysAreEqual(t.slice(0,i.length),i)},spliceArray:function(){var e,i,n;return i=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],(n=i.slice(0)).splice.apply(n,e),n},summarizeArrayChange:function(t,e){var i,n,o,a,r,s,l,c,u,d,p;for(null==t&&(t=[]),null==e&&(e=[]),i=[],d=[],o=new Set,a=0,l=t.length;l>a;a++)p=t[a],o.add(p);for(n=new Set,r=0,c=e.length;c>r;r++)p=e[r],n.add(p),o.has(p)||i.push(p);for(s=0,u=t.length;u>s;s++)p=t[s],n.has(p)||d.push(p);return{added:i,removed:d}}})}.call(this),function(){var t,i,n,o;t=null,i=null,o=null,n=null,e.extend({getAllAttributeNames:function(){return null!=t?t:t=e.getTextAttributeNames().concat(e.getBlockAttributeNames())},getBlockConfig:function(t){return e.config.blockAttributes[t]},getBlockAttributeNames:function(){return null!=i?i:i=Object.keys(e.config.blockAttributes)},getTextConfig:function(t){return e.config.textAttributes[t]},getTextAttributeNames:function(){return null!=o?o:o=Object.keys(e.config.textAttributes)},getListAttributeNames:function(){var t,i;return null!=n?n:n=function(){var n,o;for(t in o=[],n=e.config.blockAttributes)null!=(i=n[t].listAttribute)&&o.push(i);return o}()}})}.call(this),function(){var t,i,n,o,a,r=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};t=document.documentElement,i=null!=(n=null!=(o=null!=(a=t.matchesSelector)?a:t.webkitMatchesSelector)?o:t.msMatchesSelector)?n:t.mozMatchesSelector,e.extend({handleEvent:function(i,n){var o,a,r,s,l,c,u,d,p,h,f;return l=(u=null!=n?n:{}).onElement,s=u.matchingSelector,f=u.withCallback,r=u.inPhase,c=u.preventDefault,p=u.times,o=null!=l?l:t,d=s,f,h="capturing"===r,(a=function(t){var i;return null!=p&&0==--p&&a.destroy(),null!=(i=e.findClosestElementFromNode(t.target,{matchingSelector:d}))&&(null!=f&&f.call(i,t,i),c)?t.preventDefault():void 0}).destroy=function(){return o.removeEventListener(i,a,h)},o.addEventListener(i,a,h),a},handleEventOnce:function(t,i){return null==i&&(i={}),i.times=1,e.handleEvent(t,i)},triggerEvent:function(i,n){var o,a,r,s,l,c,u;return c=(u=null!=n?n:{}).onElement,a=u.bubbles,r=u.cancelable,o=u.attributes,s=null!=c?c:t,a=!1!==a,r=!1!==r,(l=document.createEvent("Events")).initEvent(i,a,r),null!=o&&e.extend.call(l,o),s.dispatchEvent(l)},elementMatchesSelector:function(t,e){return 1===(null!=t?t.nodeType:void 0)?i.call(t,e):void 0},findClosestElementFromNode:function(t,i){var n,o,a;for(n=(o=null!=i?i:{}).matchingSelector,a=o.untilNode;null!=t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.parentNode;if(null!=t){if(null==n)return t;if(t.closest&&null==a)return t.closest(n);for(;t&&t!==a;){if(e.elementMatchesSelector(t,n))return t;t=t.parentNode}}},findInnerElement:function(t){for(;null!=t?t.firstElementChild:void 0;)t=t.firstElementChild;return t},innerElementIsActive:function(t){return document.activeElement!==t&&e.elementContainsNode(t,document.activeElement)},elementContainsNode:function(t,e){if(t&&e)for(;e;){if(e===t)return!0;e=e.parentNode}},findNodeFromContainerAndOffset:function(t,e){var i;if(t)return t.nodeType===Node.TEXT_NODE?t:0===e?null!=(i=t.firstChild)?i:t:t.childNodes.item(e-1)},findElementFromContainerAndOffset:function(t,i){var n;return n=e.findNodeFromContainerAndOffset(t,i),e.findClosestElementFromNode(n)},findChildIndexOfNode:function(t){var e;if(null!=t?t.parentNode:void 0){for(e=0;t=t.previousSibling;)e++;return e}},removeNode:function(t){var e;return null!=t&&null!=(e=t.parentNode)?e.removeChild(t):void 0},walkTree:function(t,e){var i,n,o,a,r;return n=(o=null!=e?e:{}).onlyNodesOfType,a=o.usingFilter,i=o.expandEntityReferences,r=function(){switch(n){case"element":return NodeFilter.SHOW_ELEMENT;case"text":return NodeFilter.SHOW_TEXT;case"comment":return NodeFilter.SHOW_COMMENT;default:return NodeFilter.SHOW_ALL}}(),document.createTreeWalker(t,r,null!=a?a:null,!0===i)},tagName:function(t){var e;return null!=t&&null!=(e=t.tagName)?e.toLowerCase():void 0},makeElement:function(t,e){var i,n,o,a,r,s,l,c,u,d,p,h,f,m;if(null==e&&(e={}),"object"==typeof t?t=(e=t).tagName:e={attributes:e},o=document.createElement(t),null!=e.editable&&(null==e.attributes&&(e.attributes={}),e.attributes.contenteditable=e.editable),e.attributes)for(s in u=e.attributes)m=u[s],o.setAttribute(s,m);if(e.style)for(s in d=e.style)m=d[s],o.style[s]=m;if(e.data)for(s in p=e.data)m=p[s],o.dataset[s]=m;if(e.className)for(a=0,l=(h=e.className.split(" ")).length;l>a;a++)n=h[a],o.classList.add(n);if(e.textContent&&(o.textContent=e.textContent),e.childNodes)for(r=0,c=(f=[].concat(e.childNodes)).length;c>r;r++)i=f[r],o.appendChild(i);return o},getBlockTagNames:function(){var t,i;return null!=e.blockTagNames?e.blockTagNames:e.blockTagNames=function(){var n,o;for(t in o=[],n=e.config.blockAttributes)(i=n[t].tagName)&&o.push(i);return o}()},nodeIsBlockContainer:function(t){return e.nodeIsBlockStartComment(null!=t?t.firstChild:void 0)},nodeProbablyIsBlockContainer:function(t){var i,n;return i=e.tagName(t),r.call(e.getBlockTagNames(),i)>=0&&(n=e.tagName(t.firstChild),r.call(e.getBlockTagNames(),n)<0)},nodeIsBlockStart:function(t,i){return(null!=i?i:{strict:!0}).strict?e.nodeIsBlockStartComment(t):e.nodeIsBlockStartComment(t)||!e.nodeIsBlockStartComment(t.firstChild)&&e.nodeProbablyIsBlockContainer(t)},nodeIsBlockStartComment:function(t){return e.nodeIsCommentNode(t)&&"block"===(null!=t?t.data:void 0)},nodeIsCommentNode:function(t){return(null!=t?t.nodeType:void 0)===Node.COMMENT_NODE},nodeIsCursorTarget:function(t,i){var n;return n=(null!=i?i:{}).name,t?e.nodeIsTextNode(t)?t.data===e.ZERO_WIDTH_SPACE?!n||t.parentNode.dataset.trixCursorTarget===n:void 0:e.nodeIsCursorTarget(t.firstChild):void 0},nodeIsAttachmentElement:function(t){return e.elementMatchesSelector(t,e.AttachmentView.attachmentSelector)},nodeIsEmptyTextNode:function(t){return e.nodeIsTextNode(t)&&""===(null!=t?t.data:void 0)},nodeIsTextNode:function(t){return(null!=t?t.nodeType:void 0)===Node.TEXT_NODE}})}.call(this),function(){var t,i,n,o,a;t=e.copyObject,o=e.objectsAreEqual,e.extend({normalizeRange:n=function(t){var e;if(null!=t)return Array.isArray(t)||(t=[t,t]),[i(t[0]),i(null!=(e=t[1])?e:t[0])]},rangeIsCollapsed:function(t){var e,i,o;if(null!=t)return o=(i=n(t))[0],e=i[1],a(o,e)},rangesAreEqual:function(t,e){var i,o,r,s,l,c;if(null!=t&&null!=e)return o=(r=n(t))[0],i=r[1],c=(s=n(e))[0],l=s[1],a(o,c)&&a(i,l)}}),i=function(e){return"number"==typeof e?e:t(e)},a=function(t,e){return"number"==typeof t?t===e:o(t,e)}}.call(this),function(){var t,i,n,o,a,r,s;e.registerElement=function(t,e){var i,n;return null==e&&(e={}),t=t.toLowerCase(),e=s(e),(i=(n=r(e)).defaultCSS)&&(delete n.defaultCSS,o(i,t)),a(t,n)},o=function(t,e){return n(e).textContent=t.replace(/%t/g,e)},n=function(e){var i,n;return(i=document.createElement("style")).setAttribute("type","text/css"),i.setAttribute("data-tag-name",e.toLowerCase()),(n=t())&&i.setAttribute("nonce",n),document.head.insertBefore(i,document.head.firstChild),i},t=function(){var t;return(t=i("trix-csp-nonce")||i("csp-nonce"))?t.getAttribute("content"):void 0},i=function(t){return document.head.querySelector("meta[name="+t+"]")},r=function(t){var e,i,n;for(e in i={},t)n=t[e],i[e]="function"==typeof n?{value:n}:n;return i},s=function(){var t;return t=function(t){var e,i,n,o,a;for(e={},i=0,o=(a=["initialize","connect","disconnect"]).length;o>i;i++)e[n=a[i]]=t[n],delete t[n];return e},window.customElements?function(e){var i,n,o,a,r;return r=t(e),o=r.initialize,i=r.connect,n=r.disconnect,o&&(a=i,i=function(){return this.initialized||(this.initialized=!0,o.call(this)),null!=a?a.call(this):void 0}),i&&(e.connectedCallback=i),n&&(e.disconnectedCallback=n),e}:function(e){var i,n,o,a;return o=(a=t(e)).initialize,i=a.connect,n=a.disconnect,o&&(e.createdCallback=o),i&&(e.attachedCallback=i),n&&(e.detachedCallback=n),e}}(),a=window.customElements?function(t,e){var i;return i=function(){return"object"==typeof Reflect?Reflect.construct(HTMLElement,[],i):HTMLElement.apply(this)},Object.setPrototypeOf(i.prototype,HTMLElement.prototype),Object.setPrototypeOf(i,HTMLElement),Object.defineProperties(i.prototype,e),window.customElements.define(t,i),i}:function(t,e){var i,n;return n=Object.create(HTMLElement.prototype,e),i=document.registerElement(t,{prototype:n}),Object.defineProperty(n,"constructor",{value:i}),i}}.call(this),function(){var t,i;e.extend({getDOMSelection:function(){var t;return(t=window.getSelection()).rangeCount>0?t:void 0},getDOMRange:function(){var i,n;return(i=null!=(n=e.getDOMSelection())?n.getRangeAt(0):void 0)&&!t(i)?i:void 0},setDOMRange:function(t){var i;return(i=window.getSelection()).removeAllRanges(),i.addRange(t),e.selectionChangeObserver.update()}}),t=function(t){return i(t.startContainer)||i(t.endContainer)},i=function(t){return!Object.getPrototypeOf(t)}}.call(this),function(){var t;t={"application/x-trix-feature-detection":"test"},e.extend({dataTransferIsPlainText:function(t){var e,i,n;return n=t.getData("text/plain"),i=t.getData("text/html"),n&&i?(e=(new DOMParser).parseFromString(i,"text/html").body).textContent===n?!e.querySelector("*"):void 0:null!=n?n.length:void 0},dataTransferIsWritable:function(e){var i,n;if(null!=(null!=e?e.setData:void 0)){for(i in t)if(n=t[i],!function(){try{return e.setData(i,n),e.getData(i)===n}catch(t){}}())return;return!0}},keyEventIsKeyboardCommand:/Mac|^iP/.test(navigator.platform)?function(t){return t.metaKey}:function(t){return t.ctrlKey}})}.call(this),function(){var t,i,n,o;e.extend({RTL_PATTERN:/[\u05BE\u05C0\u05C3\u05D0-\u05EA\u05F0-\u05F4\u061B\u061F\u0621-\u063A\u0640-\u064A\u066D\u0671-\u06B7\u06BA-\u06BE\u06C0-\u06CE\u06D0-\u06D5\u06E5\u06E6\u200F\u202B\u202E\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE72\uFE74\uFE76-\uFEFC]/,getDirection:(i=e.makeElement("input",{dir:"auto",name:"x",dirName:"x.dir"}),(t=e.makeElement("form")).appendChild(i),n=function(){try{return new FormData(t).has(i.dirName)}catch(e){}}(),o=function(){try{return i.matches(":dir(ltr),:dir(rtl)")}catch(t){}}(),n?function(e){return i.value=e,new FormData(t).get(i.dirName)}:o?function(t){return i.value=t,i.matches(":dir(rtl)")?"rtl":"ltr"}:function(t){var i;return i=t.trim().charAt(0),e.RTL_PATTERN.test(i)?"rtl":"ltr"})})}.call(this),function(){}.call(this),function(){var t,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=e.arraysAreEqual,e.Hash=function(n){function o(t){null==t&&(t={}),this.values=r(t),o.__super__.constructor.apply(this,arguments)}var a,r,s,l,c;return i(o,n),o.fromCommonAttributesOfObjects=function(t){var e,i,n,o,r,s;if(null==t&&(t=[]),!t.length)return new this;for(n=(e=a(t[0])).getKeys(),i=0,o=(s=t.slice(1)).length;o>i;i++)r=s[i],n=e.getKeysCommonToHash(a(r)),e=e.slice(n);return e},o.box=function(t){return a(t)},o.prototype.add=function(t,e){return this.merge(l(t,e))},o.prototype.remove=function(t){return new e.Hash(r(this.values,t))},o.prototype.get=function(t){return this.values[t]},o.prototype.has=function(t){return t in this.values},o.prototype.merge=function(t){return new e.Hash(s(this.values,c(t)))},o.prototype.slice=function(t){var i,n,o,a;for(a={},i=0,o=t.length;o>i;i++)n=t[i],this.has(n)&&(a[n]=this.values[n]);return new e.Hash(a)},o.prototype.getKeys=function(){return Object.keys(this.values)},o.prototype.getKeysCommonToHash=function(t){var e,i,n,o,r;for(t=a(t),r=[],e=0,n=(o=this.getKeys()).length;n>e;e++)i=o[e],this.values[i]===t.values[i]&&r.push(i);return r},o.prototype.isEqualTo=function(e){return t(this.toArray(),a(e).toArray())},o.prototype.isEmpty=function(){return 0===this.getKeys().length},o.prototype.toArray=function(){var t,e,i;return(null!=this.array?this.array:this.array=function(){var n;for(t in e=[],n=this.values)i=n[t],e.push(t,i);return e}.call(this)).slice(0)},o.prototype.toObject=function(){return r(this.values)},o.prototype.toJSON=function(){return this.toObject()},o.prototype.contentsForInspection=function(){return{values:JSON.stringify(this.values)}},l=function(t,e){var i;return(i={})[t]=e,i},s=function(t,e){var i,n,o;for(i in n=r(t),e)o=e[i],n[i]=o;return n},r=function(t,e){var i,n,o,a,r;for(a={},i=0,o=(r=Object.keys(t).sort()).length;o>i;i++)(n=r[i])!==e&&(a[n]=t[n]);return a},a=function(t){return t instanceof e.Hash?t:new e.Hash(t)},c=function(t){return t instanceof e.Hash?t.values:t},o}(e.Object)}.call(this),function(){e.ObjectGroup=function(){function t(t,e){var i,n
;this.objects=null!=t?t:[],n=e.depth,(i=e.asTree)&&(this.depth=n,this.objects=this.constructor.groupObjects(this.objects,{asTree:i,depth:this.depth+1}))}return t.groupObjects=function(t,e){var i,n,o,a,r,s,l,c,u;for(null==t&&(t=[]),o=(u=null!=e?e:{}).depth,(i=u.asTree)&&null==o&&(o=0),c=[],r=0,s=t.length;s>r;r++){if(l=t[r],a){if(("function"==typeof l.canBeGrouped?l.canBeGrouped(o):void 0)&&("function"==typeof(n=a[a.length-1]).canBeGroupedWith?n.canBeGroupedWith(l,o):void 0)){a.push(l);continue}c.push(new this(a,{depth:o,asTree:i})),a=null}("function"==typeof l.canBeGrouped?l.canBeGrouped(o):void 0)?a=[l]:c.push(l)}return a&&c.push(new this(a,{depth:o,asTree:i})),c},t.prototype.getObjects=function(){return this.objects},t.prototype.getDepth=function(){return this.depth},t.prototype.getCacheKey=function(){var t,e,i,n,o;for(e=["objectGroup"],t=0,i=(o=this.getObjects()).length;i>t;t++)n=o[t],e.push(n.getCacheKey());return e.join("/")},t}()}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.ObjectMap=function(e){function i(t){var e,i,n,o,a;for(null==t&&(t=[]),this.objects={},n=0,o=t.length;o>n;n++)a=t[n],i=JSON.stringify(a),null==(e=this.objects)[i]&&(e[i]=a)}return t(i,e),i.prototype.find=function(t){var e;return e=JSON.stringify(t),this.objects[e]},i}(e.BasicObject)}.call(this),function(){e.ElementStore=function(){function t(t){this.reset(t)}var e;return t.prototype.add=function(t){var i;return i=e(t),this.elements[i]=t},t.prototype.remove=function(t){var i,n;return i=e(t),(n=this.elements[i])?(delete this.elements[i],n):void 0},t.prototype.reset=function(t){var e,i,n;for(null==t&&(t=[]),this.elements={},i=0,n=t.length;n>i;i++)e=t[i],this.add(e);return t},e=function(t){return t.dataset.trixStoreKey},t}()}.call(this),function(){}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.Operation=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.isPerforming=function(){return!0===this.performing},i.prototype.hasPerformed=function(){return!0===this.performed},i.prototype.hasSucceeded=function(){return this.performed&&this.succeeded},i.prototype.hasFailed=function(){return this.performed&&!this.succeeded},i.prototype.getPromise=function(){return null!=this.promise?this.promise:this.promise=new Promise((t=this,function(e,i){return t.performing=!0,t.perform(function(n,o){return t.succeeded=n,t.performing=!1,t.performed=!0,t.succeeded?e(o):i(o)})}));var t},i.prototype.perform=function(t){return t(!1)},i.prototype.release=function(){var t;return null!=(t=this.promise)&&"function"==typeof t.cancel&&t.cancel(),this.promise=null,this.performing=null,this.performed=null,this.succeeded=null},i.proxyMethod("getPromise().then"),i.proxyMethod("getPromise().catch"),i}(e.BasicObject)}.call(this),function(){var t,i,n,o,a,r=function(t,e){function i(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},s={}.hasOwnProperty;e.UTF16String=function(t){function e(t,e){this.ucs2String=t,this.codepoints=e,this.length=this.codepoints.length,this.ucs2Length=this.ucs2String.length}return r(e,t),e.box=function(t){return null==t&&(t=""),t instanceof this?t:this.fromUCS2String(null!=t?t.toString():void 0)},e.fromUCS2String=function(t){return new this(t,o(t))},e.fromCodepoints=function(t){return new this(a(t),t)},e.prototype.offsetToUCS2Offset=function(t){return a(this.codepoints.slice(0,Math.max(0,t))).length},e.prototype.offsetFromUCS2Offset=function(t){return o(this.ucs2String.slice(0,Math.max(0,t))).length},e.prototype.slice=function(){var t;return this.constructor.fromCodepoints((t=this.codepoints).slice.apply(t,arguments))},e.prototype.charAt=function(t){return this.slice(t,t+1)},e.prototype.isEqualTo=function(t){return this.constructor.box(t).ucs2String===this.ucs2String},e.prototype.toJSON=function(){return this.ucs2String},e.prototype.getCacheKey=function(){return this.ucs2String},e.prototype.toString=function(){return this.ucs2String},e}(e.BasicObject),t=1===("function"==typeof Array.from?Array.from("\ud83d\udc7c").length:void 0),i=null!=("function"==typeof" ".codePointAt?" ".codePointAt(0):void 0),n=" \ud83d\udc7c"===("function"==typeof String.fromCodePoint?String.fromCodePoint(32,128124):void 0),o=t&&i?function(t){return Array.from(t).map(function(t){return t.codePointAt(0)})}:function(t){var e,i,n,o,a;for(o=[],e=0,n=t.length;n>e;)(a=t.charCodeAt(e++))>=55296&&56319>=a&&n>e&&(56320==(64512&(i=t.charCodeAt(e++)))?a=((1023&a)<<10)+(1023&i)+65536:e--),o.push(a);return o},a=n?function(t){return String.fromCodePoint.apply(String,t)}:function(t){var e,i;return function(){var n,o,a;for(a=[],n=0,o=t.length;o>n;n++)i=t[n],e="",i>65535&&(i-=65536,e+=String.fromCharCode(i>>>10&1023|55296),i=56320|1023&i),a.push(e+String.fromCharCode(i));return a}().join("")}}.call(this),function(){}.call(this),function(){}.call(this),function(){e.config.lang={attachFiles:"Attach Files",bold:"Bold",bullets:"Bullets",byte:"Byte",bytes:"Bytes",captionPlaceholder:"Add a caption\u2026",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",url:"URL",urlPlaceholder:"Enter a URL\u2026",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"}}.call(this),function(){e.config.css={attachment:"attachment",attachmentCaption:"attachment__caption",attachmentCaptionEditor:"attachment__caption-editor",attachmentMetadata:"attachment__metadata",attachmentMetadataContainer:"attachment__metadata-container",attachmentName:"attachment__name",attachmentProgress:"attachment__progress",attachmentSize:"attachment__size",attachmentToolbar:"attachment__toolbar",attachmentGallery:"attachment-gallery"}}.call(this),function(){var t;e.config.blockAttributes=t={"default":{tagName:"div",parse:!1},quote:{tagName:"blockquote",nestable:!0},heading1:{tagName:"h1",terminal:!0,breakOnReturn:!0,group:!1},code:{tagName:"pre",terminal:!0,text:{plaintext:!0}},bulletList:{tagName:"ul",parse:!1},bullet:{tagName:"li",listAttribute:"bulletList",group:!1,nestable:!0,test:function(i){return e.tagName(i.parentNode)===t[this.listAttribute].tagName}},numberList:{tagName:"ol",parse:!1},number:{tagName:"li",listAttribute:"numberList",group:!1,nestable:!0,test:function(i){return e.tagName(i.parentNode)===t[this.listAttribute].tagName}},attachmentGallery:{tagName:"div",exclusive:!0,terminal:!0,parse:!1,group:!1}}}.call(this),function(){var t,i;t=e.config.lang,i=[t.bytes,t.KB,t.MB,t.GB,t.TB,t.PB],e.config.fileSize={prefix:"IEC",precision:2,formatter:function(e){var n,o;switch(e){case 0:return"0 "+t.bytes;case 1:return"1 "+t.byte;default:return n=function(){switch(this.prefix){case"SI":return 1e3;case"IEC":return 1024}}.call(this),o=Math.floor(Math.log(e)/Math.log(n)),(e/Math.pow(n,o)).toFixed(this.precision).replace(/0*$/,"").replace(/\.$/,"")+" "+i[o]}}}}.call(this),function(){e.config.textAttributes={bold:{tagName:"strong",inheritable:!0,parser:function(t){var e;return"bold"===(e=window.getComputedStyle(t)).fontWeight||e.fontWeight>=600}},italic:{tagName:"em",inheritable:!0,parser:function(t){return"italic"===window.getComputedStyle(t).fontStyle}},href:{groupTagName:"a",parser:function(t){var i,n;return n="a:not("+e.AttachmentView.attachmentSelector+")",(i=e.findClosestElementFromNode(t,{matchingSelector:n}))?i.getAttribute("href"):void 0}},strike:{tagName:"del",inheritable:!0},frozen:{style:{backgroundColor:"highlight"}}}}.call(this),function(){var t,i,n,o,a;a="[data-trix-serialize=false]",o=["contenteditable","data-trix-id","data-trix-store-key","data-trix-mutable","data-trix-placeholder","tabindex"],n="["+(i="data-trix-serialized-attributes")+"]",t=new RegExp("<!--block-->","g"),e.extend({serializers:{"application/json":function(t){var i;if(t instanceof e.Document)i=t;else{if(!(t instanceof HTMLElement))throw new Error("unserializable object");i=e.Document.fromHTML(t.innerHTML)}return i.toSerializableDocument().toJSONString()},"text/html":function(r){var s,l,c,u,d,p,h,f,m,g,v,_,b,y,w,$,x;if(r instanceof e.Document)u=e.DocumentView.render(r);else{if(!(r instanceof HTMLElement))throw new Error("unserializable object");u=r.cloneNode(!0)}for(d=0,m=(y=u.querySelectorAll(a)).length;m>d;d++)c=y[d],e.removeNode(c);for(p=0,g=o.length;g>p;p++)for(s=o[p],h=0,v=(w=u.querySelectorAll("["+s+"]")).length;v>h;h++)(c=w[h]).removeAttribute(s);for(f=0,_=($=u.querySelectorAll(n)).length;_>f;f++){c=$[f];try{for(b in l=JSON.parse(c.getAttribute(i)),c.removeAttribute(i),l)x=l[b],c.setAttribute(b,x)}catch(k){}}return u.innerHTML.replace(t,"")}},deserializers:{"application/json":function(t){return e.Document.fromJSONString(t)},"text/html":function(t){return e.Document.fromHTML(t)}},serializeToContentType:function(t,i){var n;if(n=e.serializers[i])return n(t);throw new Error("unknown content type: "+i)},deserializeFromContentType:function(t,i){var n;if(n=e.deserializers[i])return n(t);throw new Error("unknown content type: "+i)}})}.call(this),function(){var t;t=e.config.lang,e.config.toolbar={getDefaultHTML:function(){return'<div class="trix-button-row">\n  <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="'+t.bold+'" tabindex="-1">'+t.bold+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="'+t.italic+'" tabindex="-1">'+t.italic+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="'+t.strike+'" tabindex="-1">'+t.strike+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="'+t.link+'" tabindex="-1">'+t.link+'</button>\n  </span>\n\n  <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-heading-1" data-trix-attribute="heading1" title="'+t.heading1+'" tabindex="-1">'+t.heading1+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="'+t.quote+'" tabindex="-1">'+t.quote+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="'+t.code+'" tabindex="-1">'+t.code+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="'+t.bullets+'" tabindex="-1">'+t.bullets+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="'+t.numbers+'" tabindex="-1">'+t.numbers+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="'+t.outdent+'" tabindex="-1">'+t.outdent+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="'+t.indent+'" tabindex="-1">'+t.indent+'</button>\n  </span>\n\n  <span class="trix-button-group trix-button-group--file-tools" data-trix-button-group="file-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-attach" data-trix-action="attachFiles" title="'+t.attachFiles+'" tabindex="-1">'+t.attachFiles+'</button>\n  </span>\n\n  <span class="trix-button-group-spacer"></span>\n\n  <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="'+t.undo+'" tabindex="-1">'+t.undo+'</button>\n    <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="'+t.redo+'" tabindex="-1">'+t.redo+'</button>\n  </span>\n</div>\n\n<div class="trix-dialogs" data-trix-dialogs>\n  <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">\n    <div class="trix-dialog__link-fields">\n      <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="'+t.urlPlaceholder+'" aria-label="'+t.url+'" required data-trix-input>\n      <div class="trix-button-group">\n        <input type="button" class="trix-button trix-button--dialog" value="'+t.link+'" data-trix-method="setAttribute">\n        <input type="button" class="trix-button trix-button--dialog" value="'+t.unlink+'" data-trix-method="removeAttribute">\n      </div>\n    </div>\n  </div>\n</div>'}}}.call(this),function(){e.config.undoInterval=5e3}.call(this),function(){e.config.attachments={preview:{presentation:"gallery",caption:{name:!0,size:!0}},file:{caption:{size:!0}}}}.call(this),function(){e.config.keyNames={8:"backspace",9:"tab",13:"return",27:"escape",37:"left",39:"right",46:"delete",68:"d",72:"h",79:"o"}}.call(this),function(){e.config.input={level2Enabled:!0,getLevel:function(){return this.level2Enabled&&e.browser.supportsInputEvents?2:0},pickFiles:function(t){var i;return(i=e.makeElement("input",{type:"file",multiple:!0,hidden:!0,id:this.fileInputId})).addEventListener("change",function(){return t(i.files),e.removeNode(i)}),e.removeNode(document.getElementById(this.fileInputId)),document.body.appendChild(i),i.click()},fileInputId:"trix-file-input-"+Date.now().toString(16)}}.call(this),function(){}.call(this),function(){e.registerElement("trix-toolbar",{defaultCSS:"%t {\n  display: block;\n}\n\n%t {\n  white-space: nowrap;\n}\n\n%t [data-trix-dialog] {\n  display: none;\n}\n\n%t [data-trix-dialog][data-trix-active] {\n  display: block;\n}\n\n%t [data-trix-dialog] [data-trix-validate]:invalid {\n  background-color: #ffdddd;\n}",initialize:function(){return""===this.innerHTML?this.innerHTML=e.config.toolbar.getDefaultHTML():void 0}})}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty,n=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};e.ObjectView=function(i){function o(t,e){this.object=t,this.options=null!=e?e:{},this.childViews=[],this.rootView=this}return t(o,i),o.prototype.getNodes=function(){var t,e,i,n,o;for(null==this.nodes&&(this.nodes=this.createNodes()),o=[],t=0,e=(n=this.nodes).length;e>t;t++)i=n[t],o.push(i.cloneNode(!0));return o},o.prototype.invalidate=function(){var t;return this.nodes=null,this.childViews=[],null!=(t=this.parentView)?t.invalidate():void 0},o.prototype.invalidateViewForObject=function(t){var e;return null!=(e=this.findViewForObject(t))?e.invalidate():void 0},o.prototype.findOrCreateCachedChildView=function(t,e){var i;return(i=this.getCachedViewForObject(e))?this.recordChildView(i):(i=this.createChildView.apply(this,arguments),this.cacheViewForObject(i,e)),i},o.prototype.createChildView=function(t,i,n){var o;return null==n&&(n={}),i instanceof e.ObjectGroup&&(n.viewClass=t,t=e.ObjectGroupView),o=new t(i,n),this.recordChildView(o)},o.prototype.recordChildView=function(t){return t.parentView=this,t.rootView=this.rootView,this.childViews.push(t),t},o.prototype.getAllChildViews=function(){var t,e,i,n,o;for(o=[],e=0,i=(n=this.childViews).length;i>e;e++)t=n[e],o.push(t),o=o.concat(t.getAllChildViews());return o},o.prototype.findElement=function(){return this.findElementForObject(this.object)},o.prototype.findElementForObject=function(t){var e;return(e=null!=t?t.id:void 0)?this.rootView.element.querySelector("[data-trix-id='"+e+"']"):void 0},o.prototype.findViewForObject=function(t){var e,i,n,o;for(e=0,i=(n=this.getAllChildViews()).length;i>e;e++)if((o=n[e]).object===t)return o},o.prototype.getViewCache=function(){return this.rootView!==this?this.rootView.getViewCache():this.isViewCachingEnabled()?null!=this.viewCache?this.viewCache:this.viewCache={}:void 0},o.prototype.isViewCachingEnabled=function(){return!1!==this.shouldCacheViews},o.prototype.enableViewCaching=function(){return this.shouldCacheViews=!0},o.prototype.disableViewCaching=function(){return this.shouldCacheViews=!1},o.prototype.getCachedViewForObject=function(t){var e;return null!=(e=this.getViewCache())?e[t.getCacheKey()]:void 0},o.prototype.cacheViewForObject=function(t,e){var i;return null!=(i=this.getViewCache())?i[e.getCacheKey()]=t:void 0},o.prototype.garbageCollectCachedViews=function(){var t,e,i,o,a,r;if(t=this.getViewCache()){for(e in r=this.getAllChildViews().concat(this),i=function(){var t,e,i;for(i=[],t=0,e=r.length;e>t;t++)a=r[t],i.push(a.object.getCacheKey());return i}(),o=[],t)n.call(i,e)<0&&o.push(delete t[e]);return o}},o}(e.BasicObject)}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.ObjectGroupView=function(e){function i(){i.__super__.constructor.apply(this,arguments),this.objectGroup=this.object,this.viewClass=this.options.viewClass,delete this.options.viewClass}return t(i,e),i.prototype.getChildViews=function(){var t,e,i,n;if(!this.childViews.length)for(t=0,e=(n=this.objectGroup.getObjects()).length;e>t;t++)i=n[t],this.findOrCreateCachedChildView(this.viewClass,i,this.options);return this.childViews},i.prototype.createNodes=function(){var t,e,i,n,o,a,r,s;for(t=this.createContainerElement(),e=0,n=(r=this.getChildViews()).length;n>e;e++)for(i=0,o=(s=r[e].getNodes()).length;o>i;i++)a=s[i],t.appendChild(a);return[t]},i.prototype.createContainerElement=function(t){return null==t&&(t=this.objectGroup.getDepth()),this.getChildViews()[0].createContainerElement(t)},i}(e.ObjectView)}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.Controller=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i}(e.BasicObject)}.call(this),function(){var t,i,n,o,a,r,s=function(t,e){return function(){return t.apply(e,arguments)}},l=function(t,e){function i(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};t=e.findClosestElementFromNode,n=e.nodeIsEmptyTextNode,i=e.nodeIsBlockStartComment,o=e.normalizeSpaces,a=e.summarizeStringChange,r=e.tagName,e.MutationObserver=function(e){function c(t){this.element=t,this.didMutate=s(this.didMutate,this),this.observer=new window.MutationObserver(this.didMutate),this.start()}var d,p,h,f;return l(c,e),h="["+(p="data-trix-mutable")+"]",f={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},c.prototype.start=function(){return this.reset(),this.observer.observe(this.element,f)},c.prototype.stop=function(){return this.observer.disconnect()},c.prototype.didMutate=function(t){var e,i;return(e=this.mutations).push.apply(e,this.findSignificantMutations(t)),this.mutations.length?(null!=(i=this.delegate)&&"function"==typeof i.elementDidMutate&&i.elementDidMutate(this.getMutationSummary()),this.reset()):void 0},c.prototype.reset=function(){return this.mutations=[]},c.prototype.findSignificantMutations=function(t){var e,i,n,o;for(o=[],e=0,i=t.length;i>e;e++)n=t[e],this.mutationIsSignificant(n)&&o.push(n);return o},c.prototype.mutationIsSignificant=function(t){var e,i,n,o;if(this.nodeIsMutable(t.target))return!1;for(e=0,i=(o=this.nodesModifiedByMutation(t)).length;i>e;e++)if(n=o[e],this.nodeIsSignificant(n))return!0;return!1},c.prototype.nodeIsSignificant=function(t){return t!==this.element&&!this.nodeIsMutable(t)&&!n(t)},c.prototype.nodeIsMutable=function(e){return t(e,{matchingSelector:h})},c.prototype.nodesModifiedByMutation=function(t){var e;switch(e=[],t.type){case"attributes":t.attributeName!==p&&e.push(t.target);break;case"characterData":e.push(t.target.parentNode),e.push(t.target);break;case"childList":e.push.apply(e,t.addedNodes),e.push.apply(e,t.removedNodes)}return e},c.prototype.getMutationSummary=function(){return this.getTextMutationSummary()},c.prototype.getTextMutationSummary=function(){var t,e,i,n,o,a,r,s,l,c,d;for(i=(s=this.getTextChangesFromCharacterData()).additions,o=s.deletions,a=0,r=(l=(d=this.getTextChangesFromChildList()).additions).length;r>a;a++)e=l[a],u.call(i,e)<0&&i.push(e);return o.push.apply(o,d.deletions),c={},(t=i.join(""))&&(c.textAdded=t),(n=o.join(""))&&(c.textDeleted=n),c},c.prototype.getMutationsByType=function(t){var e,i,n,o,a;for(a=[],e=0,i=(o=this.mutations).length;i>e;e++)(n=o[e]).type===t&&a.push(n);return a},c.prototype.getTextChangesFromChildList=function(){var t,e,n,a,r,s,l,c,u,p;for(t=[],l=[],e=0,a=(s=this.getMutationsByType("childList")).length;a>e;e++)r=s[e],t.push.apply(t,r.addedNodes),l.push.apply(l,r.removedNodes);return 0===t.length&&1===l.length&&i(l[0])?(u=[],p=["\n"]):(u=d(t),p=d(l)),{additions:function(){var t,e,i;for(i=[],n=t=0,e=u.length;e>t;n=++t)(c=u[n])!==p[n]&&i.push(o(c));return i}(),deletions:function(){var t,e,i;for(i=[],n=t=0,e=p.length;e>t;n=++t)(c=p[n])!==u[n]&&i.push(o(c));return i}()}},c.prototype.getTextChangesFromCharacterData=function(){var t,e,i,n,r,s,l,c;return(e=this.getMutationsByType("characterData")).length&&(c=e[0],i=e[e.length-1],r=o(c.oldValue),n=o(i.target.data),t=(s=a(r,n)).added,l=s.removed),{additions:t?[t]:[],deletions:l?[l]:[]}},d=function(t){var e,i,n,o;for(null==t&&(t=[]),o=[],e=0,i=t.length;i>e;e++)switch(n=t[e],n.nodeType){case Node.TEXT_NODE:o.push(n.data);break;case Node.ELEMENT_NODE:"br"===r(n)?o.push("\n"):o.push.apply(o,d(n.childNodes))}return o},c}(e.BasicObject)}.call(this),function(){var t=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.FileVerificationOperation=function(e){function n(t){this.file=t}return t(n,e),n.prototype.perform=function(t){var e,n;return(e=new FileReader).onerror=function(){return t(!1)},e.onload=(n=this,function(){e.onerror=null;try{e.abort()}catch(i){}return t(!0,n.file)}),e.readAsArrayBuffer(this.file)},n}(e.Operation)}.call(this),function(){var t,i,n=function(t,e){function i(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=e.handleEvent,i=e.innerElementIsActive,e.InputController=function(o){function a(i){var n;for(n in this.element=i,this.mutationObserver=new e.MutationObserver(this.element),this.mutationObserver.delegate=this,this.events)t(n,{onElement:this.element,withCallback:this.handlerFor(n)})}return n(a,o),a.prototype.events={},a.prototype.elementDidMutate=function(){},a.prototype.editorWillSyncDocumentView=function(){return this.mutationObserver.stop()},a.prototype.editorDidSyncDocumentView=function(){return this.mutationObserver.start()},a.prototype.requestRender=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidRequestRender?t.inputControllerDidRequestRender():void 0},a.prototype.requestReparse=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidRequestReparse&&t.inputControllerDidRequestReparse(),this.requestRender()},a.prototype.attachFiles=function(t){var i,n;return n=function(){var n,o,a;for(a=[],n=0,o=t.length;o>n;n++)i=t[n],a.push(new e.FileVerificationOperation(i));return a}(),Promise.all(n).then(function(t){return function(e){return t.handleInput(function(){var t,i;return null!=(t=this.delegate)&&t.inputControllerWillAttachFiles(),null!=(i=this.responder)&&i.insertFiles(e),this.requestRender()})}}(this))},a.prototype.handlerFor=function(t){return e=this,function(n){return n.defaultPrevented?void 0:e.handleInput(function(){return i(this.element)?void 0:(this.eventName=t,this.events[t].call(this,n))})};var e},a.prototype.handleInput=function(t){var e,i;try{return null!=(e=this.delegate)&&e.inputControllerWillHandleInput(),t.call(this)}finally{null!=(i=this.delegate)&&i.inputControllerDidHandleInput()}},a.prototype.createLinkHTML=function(t,e){var i;return(i=document.createElement("a")).href=t,i.textContent=null!=e?e:t,i.outerHTML},a}(e.BasicObject)}.call(this),function(){var t,i,n,o,a,r,s,l,c,u,d,p,h=function(t,e){function i(){this.constructor=t}for(var n in e)f.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},f={}.hasOwnProperty,m=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};c=e.makeElement,u=e.objectsAreEqual,e.tagName,i=e.browser,s=e.keyEventIsKeyboardCommand,o=e.dataTransferIsWritable,n=e.dataTransferIsPlainText,l=e.config.keyNames,e.Level0InputController=function(i){function r(){r.__super__.constructor.apply(this,arguments),this.resetInputSummary()}var f;return h(r,i),f=0,r.prototype.setInputSummary=function(t){var e,i;for(e in null==t&&(t={}),this.inputSummary.eventName=this.eventName,t)i=t[e],this.inputSummary[e]=i;return this.inputSummary},r.prototype.resetInputSummary=function(){return this.inputSummary={}},r.prototype.reset=function(){return this.resetInputSummary(),e.selectionChangeObserver.reset()},r.prototype.elementDidMutate=function(t){var e;return this.isComposing()?null!=(e=this.delegate)&&"function"==typeof e.inputControllerDidAllowUnhandledInput?e.inputControllerDidAllowUnhandledInput():void 0:this.handleInput(function(){return this.mutationIsSignificant(t)&&(this.mutationIsExpected(t)?this.requestRender():this.requestReparse()),this.reset()})},r.prototype.mutationIsExpected=function(t){var e,i,n,o,a,r,s,l,c;return r=t.textAdded,s=t.textDeleted,!!this.inputSummary.preferDocument||(e=null!=r?r===this.inputSummary.textAdded:!this.inputSummary.textAdded,i=null!=s?this.inputSummary.didDelete:!this.inputSummary.didDelete,c="\n"===s&&!i,!!(((l=("\n"===r||" \n"===r)&&!e)&&!c||c&&!l)&&(o=this.getSelectedRange())&&(n=l?r.replace(/\n$/,"").length||-1:(null!=r?r.length:void 0)||1,null!=(a=this.responder)?a.positionIsBlockBreak(o[1]+n):void 0))||e&&i)},r.prototype.mutationIsSignificant=function(t){var e,i,n;return n=Object.keys(t).length>0,e=""===(null!=(i=this.compositionInput)?i.getEndData():void 0),n||!e},r.prototype.events={keydown:function(t){var i,n,o,a,r,c,u,d,p;if(this.isComposing()||this.resetInputSummary(),this.inputSummary.didInput=!0,a=l[t.keyCode]){for(n=this.keys,o=0,c=(d=["ctrl","alt","shift","meta"]).length;c>o;o++)u=d[o],t[u+"Key"]&&("ctrl"===u&&(u="control"),n=null!=n?n[u]:void 0);null!=(null!=n?n[a]:void 0)&&(this.setInputSummary({keyName:a}),e.selectionChangeObserver.reset(),n[a].call(this,t))}return s(t)&&(i=String.fromCharCode(t.keyCode).toLowerCase())&&((r=function(){var e,i,n,o;for(o=[],e=0,i=(n=["alt","shift"]).length;i>e;e++)u=n[e],t[u+"Key"]&&o.push(u);return o}()).push(i),null!=(p=this.delegate)?p.inputControllerDidReceiveKeyboardCommand(r):void 0)?t.preventDefault():void 0},keypress:function(t){var e,i,n;if(null==this.inputSummary.eventName&&!t.metaKey&&(!t.ctrlKey||t.altKey))return(n=p(t))?(null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(i=this.responder)&&i.insertString(n),this.setInputSummary({textAdded:n,didDelete:this.selectionIsExpanded()})):void 0},textInput:function(t){var e,i,n,o;return e=t.data,(o=this.inputSummary.textAdded)&&o!==e&&o.toUpperCase()===e?(i=this.getSelectedRange(),this.setSelectedRange([i[0],i[1]+o.length]),null!=(n=this.responder)&&n.insertString(e),this.setInputSummary({textAdded:e}),this.setSelectedRange(i)):void 0},dragenter:function(t){return t.preventDefault()},dragstart:function(t){var e;return t.target,this.serializeSelectionToDataTransfer(t.dataTransfer),this.draggedRange=this.getSelectedRange(),null!=(e=this.delegate)&&"function"==typeof e.inputControllerDidStartDrag?e.inputControllerDidStartDrag():void 0},dragover:function(t){var e,i;return!this.draggedRange&&!this.canAcceptDataTransfer(t.dataTransfer)||(t.preventDefault(),e={x:t.clientX,y:t.clientY},u(e,this.draggingPoint))?void 0:(this.draggingPoint=e,null!=(i=this.delegate)&&"function"==typeof i.inputControllerDidReceiveDragOverPoint?i.inputControllerDidReceiveDragOverPoint(this.draggingPoint):void 0)},dragend:function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidCancelDrag&&t.inputControllerDidCancelDrag(),this.draggedRange=null,this.draggingPoint=null},drop:function(t){var i,n,o,a,r,s,l,c,u;return t.preventDefault(),o=null!=(r=t.dataTransfer)?r.files:void 0,a={x:t.clientX,y:t.clientY},null!=(s=this.responder)&&s.setLocationRangeFromPointRange(a),(null!=o?o.length:void 0)?this.attachFiles(o):this.draggedRange?(null!=(l=this.delegate)&&l.inputControllerWillMoveText(),null!=(c=this.responder)&&c.moveTextFromRange(this.draggedRange),this.draggedRange=null,this.requestRender()):(n=t.dataTransfer.getData("application/x-trix-document"))&&(i=e.Document.fromJSONString(n),null!=(u=this.responder)&&u.insertDocument(i),this.requestRender()),this.draggedRange=null,this.draggingPoint=null},cut:function(t){var e,i;return(null!=(e=this.responder)?e.selectionIsExpanded():void 0)&&(this.serializeSelectionToDataTransfer(t.clipboardData)&&t.preventDefault(),null!=(i=this.delegate)&&i.inputControllerWillCutText(),this.deleteInDirection("backward"),t.defaultPrevented)?this.requestRender():void 0},copy:function(t){var e;return(null!=(e=this.responder)?e.selectionIsExpanded():void 0)&&this.serializeSelectionToDataTransfer(t.clipboardData)?t.preventDefault():void 0},paste:function(t){var i,o,r,s,l,c,u,p,h,g,v,_,b,y,w,$,x,k,C,D,S,T,A;return i=null!=(p=t.clipboardData)?p:t.testClipboardData,u={clipboard:i},null==i||d(t)?void this.getPastedHTMLUsingHiddenElement(function(t){return function(e){var i,n,o;return u.type="text/html",u.html=e,null!=(i=t.delegate)&&i.inputControllerWillPaste(u),null!=(n=t.responder)&&n.insertHTML(u.html),t.requestRender(),null!=(o=t.delegate)?o.inputControllerDidPaste(u):void 0}}(this)):((s=i.getData("URL"))?(u.type="text/html",A=(c=i.getData("public.url-name"))?e.squishBreakableWhitespace(c).trim():s,u.html=this.createLinkHTML(s,A),null!=(h=this.delegate)&&h.inputControllerWillPaste(u),this.setInputSummary({textAdded:A,didDelete:this.selectionIsExpanded()}),null!=(w=this.responder)&&w.insertHTML(u.html),this.requestRender(),null!=($=this.delegate)&&$.inputControllerDidPaste(u)):n(i)?(u.type="text/plain",u.string=i.getData("text/plain"),null!=(x=this.delegate)&&x.inputControllerWillPaste(u),this.setInputSummary({textAdded:u.string,didDelete:this.selectionIsExpanded()}),null!=(k=this.responder)&&k.insertString(u.string),this.requestRender(),null!=(C=this.delegate)&&C.inputControllerDidPaste(u)):(l=i.getData("text/html"))?(u.type="text/html",u.html=l,null!=(D=this.delegate)&&D.inputControllerWillPaste(u),null!=(S=this.responder)&&S.insertHTML(u.html),this.requestRender(),null!=(T=this.delegate)&&T.inputControllerDidPaste(u)):m.call(i.types,"Files")>=0&&(r=null!=(g=i.items)&&null!=(v=g[0])&&"function"==typeof v.getAsFile?v.getAsFile():void 0)&&(!r.name&&(o=a(r))&&(r.name="pasted-file-"+ ++f+"."+o),u.type="File",u.file=r,null!=(_=this.delegate)&&_.inputControllerWillAttachFiles(),null!=(b=this.responder)&&b.insertFile(u.file),this.requestRender(),null!=(y=this.delegate)&&y.inputControllerDidPaste(u)),t.preventDefault())},compositionstart:function(t){return this.getCompositionInput().start(t.data)},compositionupdate:function(t){return this.getCompositionInput().update(t.data)},compositionend:function(t){return this.getCompositionInput().end(t.data)},beforeinput:function(){return this.inputSummary.didInput=!0},input:function(t){return this.inputSummary.didInput=!0,t.stopPropagation()}},r.prototype.keys={backspace:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),
this.deleteInDirection("backward",t)},"delete":function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",t)},"return":function(){var t,e;return this.setInputSummary({preferDocument:!0}),null!=(t=this.delegate)&&t.inputControllerWillPerformTyping(),null!=(e=this.responder)?e.insertLineBreak():void 0},tab:function(t){var e,i;return(null!=(e=this.responder)?e.canIncreaseNestingLevel():void 0)?(null!=(i=this.responder)&&i.increaseNestingLevel(),this.requestRender(),t.preventDefault()):void 0},left:function(t){var e;return this.selectionIsInCursorTarget()?(t.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("backward"):void 0):void 0},right:function(t){var e;return this.selectionIsInCursorTarget()?(t.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("forward"):void 0):void 0},control:{d:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",t)},h:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",t)},o:function(t){var e,i;return t.preventDefault(),null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(i=this.responder)&&i.insertString("\n",{updatePosition:!1}),this.requestRender()}},shift:{"return":function(t){var e,i;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(i=this.responder)&&i.insertString("\n"),this.requestRender(),t.preventDefault()},tab:function(t){var e,i;return(null!=(e=this.responder)?e.canDecreaseNestingLevel():void 0)?(null!=(i=this.responder)&&i.decreaseNestingLevel(),this.requestRender(),t.preventDefault()):void 0},left:function(t){return this.selectionIsInCursorTarget()?(t.preventDefault(),this.expandSelectionInDirection("backward")):void 0},right:function(t){return this.selectionIsInCursorTarget()?(t.preventDefault(),this.expandSelectionInDirection("forward")):void 0}},alt:{backspace:function(){var t;return this.setInputSummary({preferDocument:!1}),null!=(t=this.delegate)?t.inputControllerWillPerformTyping():void 0}},meta:{backspace:function(){var t;return this.setInputSummary({preferDocument:!1}),null!=(t=this.delegate)?t.inputControllerWillPerformTyping():void 0}}},r.prototype.getCompositionInput=function(){return this.isComposing()?this.compositionInput:this.compositionInput=new t(this)},r.prototype.isComposing=function(){return null!=this.compositionInput&&!this.compositionInput.isEnded()},r.prototype.deleteInDirection=function(t,e){var i;return!1!==(null!=(i=this.responder)?i.deleteInDirection(t):void 0)?this.setInputSummary({didDelete:!0}):e?(e.preventDefault(),this.requestRender()):void 0},r.prototype.serializeSelectionToDataTransfer=function(t){var i,n;if(o(t))return i=null!=(n=this.responder)?n.getSelectedDocument().toSerializableDocument():void 0,t.setData("application/x-trix-document",JSON.stringify(i)),t.setData("text/html",e.DocumentView.render(i).innerHTML),t.setData("text/plain",i.toString().replace(/\n$/,"")),!0},r.prototype.canAcceptDataTransfer=function(t){var e,i,n,o,a;for(a={},e=0,i=(o=null!=(n=null!=t?t.types:void 0)?n:[]).length;i>e;e++)a[o[e]]=!0;return a.Files||a["application/x-trix-document"]||a["text/html"]||a["text/plain"]},r.prototype.getPastedHTMLUsingHiddenElement=function(t){var i,n,o;return n=this.getSelectedRange(),o={position:"absolute",left:window.pageXOffset+"px",top:window.pageYOffset+"px",opacity:0},i=c({style:o,tagName:"div",editable:!0}),document.body.appendChild(i),i.focus(),requestAnimationFrame(function(o){return function(){var a;return a=i.innerHTML,e.removeNode(i),o.setSelectedRange(n),t(a)}}(this))},r.proxyMethod("responder?.getSelectedRange"),r.proxyMethod("responder?.setSelectedRange"),r.proxyMethod("responder?.expandSelectionInDirection"),r.proxyMethod("responder?.selectionIsInCursorTarget"),r.proxyMethod("responder?.selectionIsExpanded"),r}(e.InputController),a=function(t){var e,i;return null!=(e=t.type)&&null!=(i=e.match(/\/(\w+)$/))?i[1]:void 0},r=null!=("function"==typeof" ".codePointAt?" ".codePointAt(0):void 0),p=function(t){var i;return t.key&&r&&t.key.codePointAt(0)===t.keyCode?t.key:(null===t.which?i=t.keyCode:0!==t.which&&0!==t.charCode&&(i=t.charCode),null!=i&&"escape"!==l[i]?e.UTF16String.fromCodepoints([i]).toString():void 0)},d=function(t){var e,i,n,o,a,r,s,l,c;if(s=t.clipboardData){if(m.call(s.types,"text/html")>=0){for(n=0,r=(l=s.types).length;r>n;n++)if(c=l[n],e=/^CorePasteboardFlavorType/.test(c),i=/^dyn\./.test(c)&&s.getData(c),e||i)return!0;return!1}return o=m.call(s.types,"com.apple.webarchive")>=0,a=m.call(s.types,"com.apple.flat-rtfd")>=0,o||a}},t=function(t){function e(t){var e;this.inputController=t,e=this.inputController,this.responder=e.responder,this.delegate=e.delegate,this.inputSummary=e.inputSummary,this.data={}}return h(e,t),e.prototype.start=function(t){var e,i;return this.data.start=t,this.isSignificant()?("keypress"===this.inputSummary.eventName&&this.inputSummary.textAdded&&null!=(e=this.responder)&&e.deleteInDirection("left"),this.selectionIsExpanded()||(this.insertPlaceholder(),this.requestRender()),this.range=null!=(i=this.responder)?i.getSelectedRange():void 0):void 0},e.prototype.update=function(t){var e;return this.data.update=t,this.isSignificant()&&(e=this.selectPlaceholder())?(this.forgetPlaceholder(),this.range=e):void 0},e.prototype.end=function(t){var e,i,n,o;return this.data.end=t,this.isSignificant()?(this.forgetPlaceholder(),this.canApplyToDocument()?(this.setInputSummary({preferDocument:!0,didInput:!1}),null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(i=this.responder)&&i.setSelectedRange(this.range),null!=(n=this.responder)&&n.insertString(this.data.end),null!=(o=this.responder)?o.setSelectedRange(this.range[0]+this.data.end.length):void 0):null!=this.data.start||null!=this.data.update?(this.requestReparse(),this.inputController.reset()):void 0):this.inputController.reset()},e.prototype.getEndData=function(){return this.data.end},e.prototype.isEnded=function(){return null!=this.getEndData()},e.prototype.isSignificant=function(){return!i.composesExistingText||this.inputSummary.didInput},e.prototype.canApplyToDocument=function(){var t,e;return 0===(null!=(t=this.data.start)?t.length:void 0)&&(null!=(e=this.data.end)?e.length:void 0)>0&&null!=this.range},e.proxyMethod("inputController.setInputSummary"),e.proxyMethod("inputController.requestRender"),e.proxyMethod("inputController.requestReparse"),e.proxyMethod("responder?.selectionIsExpanded"),e.proxyMethod("responder?.insertPlaceholder"),e.proxyMethod("responder?.selectPlaceholder"),e.proxyMethod("responder?.forgetPlaceholder"),e}(e.BasicObject)}.call(this),function(){var t,i,n,o=function(t,e){return function(){return t.apply(e,arguments)}},a=function(t,e){function i(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},r={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};t=e.dataTransferIsPlainText,i=e.keyEventIsKeyboardCommand,n=e.objectsAreEqual,e.Level2InputController=function(r){function l(){return this.render=o(this.render,this),l.__super__.constructor.apply(this,arguments)}var c,u,d,p,h,f;return a(l,r),l.prototype.elementDidMutate=function(){var t;return this.scheduledRender?this.composing&&null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidAllowUnhandledInput?t.inputControllerDidAllowUnhandledInput():void 0:this.reparse()},l.prototype.scheduleRender=function(){return null!=this.scheduledRender?this.scheduledRender:this.scheduledRender=requestAnimationFrame(this.render)},l.prototype.render=function(){var t;return cancelAnimationFrame(this.scheduledRender),this.scheduledRender=null,this.composing||null!=(t=this.delegate)&&t.render(),"function"==typeof this.afterRender&&this.afterRender(),this.afterRender=null},l.prototype.reparse=function(){var t;return null!=(t=this.delegate)?t.reparse():void 0},l.prototype.events={keydown:function(t){var e,n,o,a;if(i(t)){if(e=u(t),null!=(a=this.delegate)?a.inputControllerDidReceiveKeyboardCommand(e):void 0)return t.preventDefault()}else if(o=t.key,t.altKey&&(o+="+Alt"),t.shiftKey&&(o+="+Shift"),n=this.keys[o])return this.withEvent(t,n)},paste:function(t){var e,i,n,o,a,r,s,l,c;return d(t)?(t.preventDefault(),this.attachFiles(t.clipboardData.files)):p(t)?(t.preventDefault(),i={type:"text/plain",string:t.clipboardData.getData("text/plain")},null!=(n=this.delegate)&&n.inputControllerWillPaste(i),null!=(o=this.responder)&&o.insertString(i.string),this.render(),null!=(a=this.delegate)?a.inputControllerDidPaste(i):void 0):(e=null!=(r=t.clipboardData)?r.getData("URL"):void 0)?(t.preventDefault(),i={type:"text/html",html:this.createLinkHTML(e)},null!=(s=this.delegate)&&s.inputControllerWillPaste(i),null!=(l=this.responder)&&l.insertHTML(i.html),this.render(),null!=(c=this.delegate)?c.inputControllerDidPaste(i):void 0):void 0},beforeinput:function(t){var e;return(e=this.inputTypes[t.inputType])?(this.withEvent(t,e),this.scheduleRender()):void 0},input:function(){return e.selectionChangeObserver.reset()},dragstart:function(t){var e,i;return(null!=(e=this.responder)?e.selectionContainsAttachments():void 0)?(t.dataTransfer.setData("application/x-trix-dragging",!0),this.dragging={range:null!=(i=this.responder)?i.getSelectedRange():void 0,point:h(t)}):void 0},dragenter:function(t){return c(t)?t.preventDefault():void 0},dragover:function(t){var e,i;if(this.dragging){if(t.preventDefault(),e=h(t),!n(e,this.dragging.point))return this.dragging.point=e,null!=(i=this.responder)?i.setLocationRangeFromPointRange(e):void 0}else if(c(t))return t.preventDefault()},drop:function(t){var e,i,n,o;return this.dragging?(t.preventDefault(),null!=(i=this.delegate)&&i.inputControllerWillMoveText(),null!=(n=this.responder)&&n.moveTextFromRange(this.dragging.range),this.dragging=null,this.scheduleRender()):c(t)?(t.preventDefault(),e=h(t),null!=(o=this.responder)&&o.setLocationRangeFromPointRange(e),this.attachFiles(t.dataTransfer.files)):void 0},dragend:function(){var t;return this.dragging?(null!=(t=this.responder)&&t.setSelectedRange(this.dragging.range),this.dragging=null):void 0},compositionend:function(){return this.composing?(this.composing=!1,this.scheduleRender()):void 0}},l.prototype.keys={ArrowLeft:function(){var t,e;return(null!=(t=this.responder)?t.shouldManageMovingCursorInDirection("backward"):void 0)?(this.event.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("backward"):void 0):void 0},ArrowRight:function(){var t,e;return(null!=(t=this.responder)?t.shouldManageMovingCursorInDirection("forward"):void 0)?(this.event.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("forward"):void 0):void 0},Backspace:function(){var t,e,i;return(null!=(t=this.responder)?t.shouldManageDeletingInDirection("backward"):void 0)?(this.event.preventDefault(),null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(i=this.responder)&&i.deleteInDirection("backward"),this.render()):void 0},Tab:function(){var t,e;return(null!=(t=this.responder)?t.canIncreaseNestingLevel():void 0)?(this.event.preventDefault(),null!=(e=this.responder)&&e.increaseNestingLevel(),this.render()):void 0},"Tab+Shift":function(){var t,e;return(null!=(t=this.responder)?t.canDecreaseNestingLevel():void 0)?(this.event.preventDefault(),null!=(e=this.responder)&&e.decreaseNestingLevel(),this.render()):void 0}},l.prototype.inputTypes={deleteByComposition:function(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteByCut:function(){return this.deleteInDirection("backward")},deleteByDrag:function(){return this.event.preventDefault(),this.withTargetDOMRange(function(){var t;return this.deleteByDragRange=null!=(t=this.responder)?t.getSelectedRange():void 0})},deleteCompositionText:function(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteContent:function(){return this.deleteInDirection("backward")},deleteContentBackward:function(){return this.deleteInDirection("backward")},deleteContentForward:function(){return this.deleteInDirection("forward")},deleteEntireSoftLine:function(){return this.deleteInDirection("forward")},deleteHardLineBackward:function(){return this.deleteInDirection("backward")},deleteHardLineForward:function(){return this.deleteInDirection("forward")},deleteSoftLineBackward:function(){return this.deleteInDirection("backward")},deleteSoftLineForward:function(){return this.deleteInDirection("forward")},deleteWordBackward:function(){return this.deleteInDirection("backward")},deleteWordForward:function(){return this.deleteInDirection("forward")},formatBackColor:function(){return this.activateAttributeIfSupported("backgroundColor",this.event.data)},formatBold:function(){return this.toggleAttributeIfSupported("bold")},formatFontColor:function(){return this.activateAttributeIfSupported("color",this.event.data)},formatFontName:function(){return this.activateAttributeIfSupported("font",this.event.data)},formatIndent:function(){var t;return(null!=(t=this.responder)?t.canIncreaseNestingLevel():void 0)?this.withTargetDOMRange(function(){var t;return null!=(t=this.responder)?t.increaseNestingLevel():void 0}):void 0},formatItalic:function(){return this.toggleAttributeIfSupported("italic")},formatJustifyCenter:function(){return this.toggleAttributeIfSupported("justifyCenter")},formatJustifyFull:function(){return this.toggleAttributeIfSupported("justifyFull")},formatJustifyLeft:function(){return this.toggleAttributeIfSupported("justifyLeft")},formatJustifyRight:function(){return this.toggleAttributeIfSupported("justifyRight")},formatOutdent:function(){var t;return(null!=(t=this.responder)?t.canDecreaseNestingLevel():void 0)?this.withTargetDOMRange(function(){var t;return null!=(t=this.responder)?t.decreaseNestingLevel():void 0}):void 0},formatRemove:function(){return this.withTargetDOMRange(function(){var t,e,i,n;for(t in n=[],null!=(e=this.responder)?e.getCurrentAttributes():void 0)n.push(null!=(i=this.responder)?i.removeCurrentAttribute(t):void 0);return n})},formatSetBlockTextDirection:function(){return this.activateAttributeIfSupported("blockDir",this.event.data)},formatSetInlineTextDirection:function(){return this.activateAttributeIfSupported("textDir",this.event.data)},formatStrikeThrough:function(){return this.toggleAttributeIfSupported("strike")},formatSubscript:function(){return this.toggleAttributeIfSupported("sub")},formatSuperscript:function(){return this.toggleAttributeIfSupported("sup")},formatUnderline:function(){return this.toggleAttributeIfSupported("underline")},historyRedo:function(){var t;return null!=(t=this.delegate)?t.inputControllerWillPerformRedo():void 0},historyUndo:function(){var t;return null!=(t=this.delegate)?t.inputControllerWillPerformUndo():void 0},insertCompositionText:function(){return this.composing=!0,this.insertString(this.event.data)},insertFromComposition:function(){return this.composing=!1,this.insertString(this.event.data)},insertFromDrop:function(){var t,e;return(t=this.deleteByDragRange)?(this.deleteByDragRange=null,null!=(e=this.delegate)&&e.inputControllerWillMoveText(),this.withTargetDOMRange(function(){var e;return null!=(e=this.responder)?e.moveTextFromRange(t):void 0})):void 0},insertFromPaste:function(){var i,n,o,a,r,s,l,c,u,d,p;return i=this.event.dataTransfer,r={dataTransfer:i},(n=i.getData("URL"))?(this.event.preventDefault(),r.type="text/html",p=(a=i.getData("public.url-name"))?e.squishBreakableWhitespace(a).trim():n,r.html=this.createLinkHTML(n,p),null!=(s=this.delegate)&&s.inputControllerWillPaste(r),this.withTargetDOMRange(function(){var t;return null!=(t=this.responder)?t.insertHTML(r.html):void 0}),this.afterRender=function(t){return function(){var e;return null!=(e=t.delegate)?e.inputControllerDidPaste(r):void 0}}(this)):t(i)?(r.type="text/plain",r.string=i.getData("text/plain"),null!=(l=this.delegate)&&l.inputControllerWillPaste(r),this.withTargetDOMRange(function(){var t;return null!=(t=this.responder)?t.insertString(r.string):void 0}),this.afterRender=function(t){return function(){var e;return null!=(e=t.delegate)?e.inputControllerDidPaste(r):void 0}}(this)):(o=i.getData("text/html"))?(this.event.preventDefault(),r.type="text/html",r.html=o,null!=(c=this.delegate)&&c.inputControllerWillPaste(r),this.withTargetDOMRange(function(){var t;return null!=(t=this.responder)?t.insertHTML(r.html):void 0}),this.afterRender=function(t){return function(){var e;return null!=(e=t.delegate)?e.inputControllerDidPaste(r):void 0}}(this)):(null!=(u=i.files)?u.length:void 0)?(r.type="File",r.file=i.files[0],null!=(d=this.delegate)&&d.inputControllerWillPaste(r),this.withTargetDOMRange(function(){var t;return null!=(t=this.responder)?t.insertFile(r.file):void 0}),this.afterRender=function(t){return function(){var e;return null!=(e=t.delegate)?e.inputControllerDidPaste(r):void 0}}(this)):void 0},insertFromYank:function(){return this.insertString(this.event.data)},insertLineBreak:function(){return this.insertString("\n")},insertLink:function(){return this.activateAttributeIfSupported("href",this.event.data)},insertOrderedList:function(){return this.toggleAttributeIfSupported("number")},insertParagraph:function(){var t;return null!=(t=this.delegate)&&t.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var t;return null!=(t=this.responder)?t.insertLineBreak():void 0})},insertReplacementText:function(){return this.insertString(this.event.dataTransfer.getData("text/plain"),{updatePosition:!1})},insertText:function(){var t,e;return this.insertString(null!=(t=this.event.data)?t:null!=(e=this.event.dataTransfer)?e.getData("text/plain"):void 0)},insertTranspose:function(){return this.insertString(this.event.data)},insertUnorderedList:function(){return this.toggleAttributeIfSupported("bullet")}},l.prototype.insertString=function(t,e){var i;return null==t&&(t=""),null!=(i=this.delegate)&&i.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var i;return null!=(i=this.responder)?i.insertString(t,e):void 0})},l.prototype.toggleAttributeIfSupported=function(t){var i;return s.call(e.getAllAttributeNames(),t)>=0?(null!=(i=this.delegate)&&i.inputControllerWillPerformFormatting(t),this.withTargetDOMRange(function(){var e;return null!=(e=this.responder)?e.toggleCurrentAttribute(t):void 0})):void 0},l.prototype.activateAttributeIfSupported=function(t,i){var n;return s.call(e.getAllAttributeNames(),t)>=0?(null!=(n=this.delegate)&&n.inputControllerWillPerformFormatting(t),this.withTargetDOMRange(function(){var e;return null!=(e=this.responder)?e.setCurrentAttribute(t,i):void 0})):void 0},l.prototype.deleteInDirection=function(t,e){var i,n,o;return(null!=e?e:{recordUndoEntry:!0}).recordUndoEntry&&null!=(o=this.delegate)&&o.inputControllerWillPerformTyping(),n=function(e){return function(){var i;return null!=(i=e.responder)?i.deleteInDirection(t):void 0}}(this),(i=this.getTargetDOMRange({minLength:2}))?this.withTargetDOMRange(i,n):n()},l.prototype.withTargetDOMRange=function(t,i){var n;return"function"==typeof t&&(i=t,t=this.getTargetDOMRange()),t?null!=(n=this.responder)?n.withTargetDOMRange(t,i.bind(this)):void 0:(e.selectionChangeObserver.reset(),i.call(this))},l.prototype.getTargetDOMRange=function(t){var e,i,n,o;return n=(null!=t?t:{minLength:0}).minLength,(o="function"==typeof(e=this.event).getTargetRanges?e.getTargetRanges():void 0)&&o.length&&(i=f(o[0]),0===n||i.toString().length>=n)?i:void 0},f=function(t){var e;return(e=document.createRange()).setStart(t.startContainer,t.startOffset),e.setEnd(t.endContainer,t.endOffset),e},l.prototype.withEvent=function(t,e){var i;this.event=t;try{i=e.call(this)}finally{this.event=null}return i},c=function(t){var e,i;return s.call(null!=(e=null!=(i=t.dataTransfer)?i.types:void 0)?e:[],"Files")>=0},d=function(t){var e;return(e=t.clipboardData)?s.call(e.types,"Files")>=0&&1===e.types.length&&e.files.length>=1:void 0},p=function(t){var e;return(e=t.clipboardData)?s.call(e.types,"text/plain")>=0&&1===e.types.length:void 0},u=function(t){var e;return e=[],t.altKey&&e.push("alt"),t.shiftKey&&e.push("shift"),e.push(t.key),e},h=function(t){return{x:t.clientX,y:t.clientY}},l}(e.InputController)}.call(this),function(){var t,i,n,o,a,r,s,l,c=function(t,e){return function(){return t.apply(e,arguments)}},u=function(t,e){function i(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},d={}.hasOwnProperty;i=e.defer,n=e.handleEvent,r=e.makeElement,l=e.tagName,s=e.config,a=s.lang,t=s.css,o=s.keyNames,e.AttachmentEditorController=function(s){function d(t,e,i,n){this.attachmentPiece=t,this.element=e,this.container=i,this.options=null!=n?n:{},this.didBlurCaption=c(this.didBlurCaption,this),this.didChangeCaption=c(this.didChangeCaption,this),this.didInputCaption=c(this.didInputCaption,this),this.didKeyDownCaption=c(this.didKeyDownCaption,this),this.didClickActionButton=c(this.didClickActionButton,this),this.didClickToolbar=c(this.didClickToolbar,this),this.attachment=this.attachmentPiece.attachment,"a"===l(this.element)&&(this.element=this.element.firstChild),this.install()}var p;return u(d,s),p=function(t){return function(){var e;return(e=t.apply(this,arguments))["do"](),null==this.undos&&(this.undos=[]),this.undos.push(e.undo)}},d.prototype.install=function(){return this.makeElementMutable(),this.addToolbar(),this.attachment.isPreviewable()?this.installCaptionEditor():void 0},d.prototype.uninstall=function(){var t,e;for(this.savePendingCaption();e=this.undos.pop();)e();return null!=(t=this.delegate)?t.didUninstallAttachmentEditor(this):void 0},d.prototype.savePendingCaption=function(){var t,e,i;return null!=this.pendingCaption?(t=this.pendingCaption,this.pendingCaption=null,t?null!=(e=this.delegate)&&"function"==typeof e.attachmentEditorDidRequestUpdatingAttributesForAttachment?e.attachmentEditorDidRequestUpdatingAttributesForAttachment({caption:t},this.attachment):void 0:null!=(i=this.delegate)&&"function"==typeof i.attachmentEditorDidRequestRemovingAttributeForAttachment?i.attachmentEditorDidRequestRemovingAttributeForAttachment("caption",this.attachment):void 0):void 0},d.prototype.makeElementMutable=p(function(){return{"do":(t=this,function(){return t.element.dataset.trixMutable=!0}),undo:function(t){return function(){return delete t.element.dataset.trixMutable}}(this)};var t}),d.prototype.addToolbar=p(function(){var i;return i=r({tagName:"div",className:t.attachmentToolbar,data:{trixMutable:!0},childNodes:r({tagName:"div",className:"trix-button-row",childNodes:r({tagName:"span",className:"trix-button-group trix-button-group--actions",childNodes:r({tagName:"button",className:"trix-button trix-button--remove",textContent:a.remove,attributes:{title:a.remove},data:{trixAction:"remove"}})})})}),this.attachment.isPreviewable()&&i.appendChild(r({tagName:"div",className:t.attachmentMetadataContainer,childNodes:r({tagName:"span",className:t.attachmentMetadata,childNodes:[r({tagName:"span",className:t.attachmentName,textContent:this.attachment.getFilename(),attributes:{title:this.attachment.getFilename()}}),r({tagName:"span",className:t.attachmentSize,textContent:this.attachment.getFormattedFilesize()})]})})),n("click",{onElement:i,withCallback:this.didClickToolbar}),n("click",{onElement:i,matchingSelector:"[data-trix-action]",withCallback:this.didClickActionButton}),{"do":function(t){return function(){return t.element.appendChild(i)}}(this),undo:function(){return e.removeNode(i)}}}),d.prototype.installCaptionEditor=p(function(){var o,s,l,c,u;return(c=r({tagName:"textarea",className:t.attachmentCaptionEditor,attributes:{placeholder:a.captionPlaceholder},data:{trixMutable:!0}})).value=this.attachmentPiece.getCaption(),(u=c.cloneNode()).classList.add("trix-autoresize-clone"),u.tabIndex=-1,o=function(){return u.value=c.value,c.style.height=u.scrollHeight+"px"},n("input",{onElement:c,withCallback:o}),n("input",{onElement:c,withCallback:this.didInputCaption}),n("keydown",{onElement:c,withCallback:this.didKeyDownCaption}),n("change",{onElement:c,withCallback:this.didChangeCaption}),n("blur",{onElement:c,withCallback:this.didBlurCaption}),l=this.element.querySelector("figcaption"),s=l.cloneNode(),{"do":function(e){return function(){return l.style.display="none",s.appendChild(c),s.appendChild(u),s.classList.add(t.attachmentCaption+"--editing"),l.parentElement.insertBefore(s,l),o(),e.options.editCaption?i(function(){return c.focus()}):void 0}}(this),undo:function(){return e.removeNode(s),l.style.display=null}}}),d.prototype.didClickToolbar=function(t){return t.preventDefault(),t.stopPropagation()},d.prototype.didClickActionButton=function(t){var e;switch(t.target.getAttribute("data-trix-action")){case"remove":return null!=(e=this.delegate)?e.attachmentEditorDidRequestRemovalOfAttachment(this.attachment):void 0}},d.prototype.didKeyDownCaption=function(t){var e;return"return"===o[t.keyCode]?(t.preventDefault(),this.savePendingCaption(),null!=(e=this.delegate)&&"function"==typeof e.attachmentEditorDidRequestDeselectingAttachment?e.attachmentEditorDidRequestDeselectingAttachment(this.attachment):void 0):void 0},d.prototype.didInputCaption=function(t){return this.pendingCaption=t.target.value.replace(/\s/g," ").trim()},d.prototype.didChangeCaption=function(){return this.savePendingCaption()},d.prototype.didBlurCaption=function(){return this.savePendingCaption()},d}(e.BasicObject)}.call(this),function(){var t,i,n,o=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=e.makeElement,t=e.config.css,e.AttachmentView=function(a){function r(){r.__super__.constructor.apply(this,arguments),this.attachment=this.object,this.attachment.uploadProgressDelegate=this,this.attachmentPiece=this.options.piece}var s;return o(r,a),r.attachmentSelector="[data-trix-attachment]",r.prototype.createContentNodes=function(){return[]},r.prototype.createNodes=function(){var e,i,o,a,r,l,c;if(e=a=n({tagName:"figure",className:this.getClassName(),data:this.getData(),editable:!1}),(i=this.getHref())&&(a=n({tagName:"a",editable:!1,attributes:{href:i,tabindex:-1}}),e.appendChild(a)),this.attachment.hasContent())a.innerHTML=this.attachment.getContent();else for(o=0,r=(c=this.createContentNodes()).length;r>o;o++)l=c[o],a.appendChild(l);return a.appendChild(this.createCaptionElement()),this.attachment.isPending()&&(this.progressElement=n({tagName:"progress",attributes:{"class":t.attachmentProgress,value:this.attachment.getUploadProgress(),max:100},data:{trixMutable:!0,trixStoreKey:["progressElement",this.attachment.id].join("/")}}),e.appendChild(this.progressElement)),[s("left"),e,s("right")]},r.prototype.createCaptionElement=function(){var e,i,o,a,r,s,l;return o=n({tagName:"figcaption",className:t.attachmentCaption}),(e=this.attachmentPiece.getCaption())?(o.classList.add(t.attachmentCaption+"--edited"),o.textContent=e):((i=this.getCaptionConfig()).name&&(a=this.attachment.getFilename()),i.size&&(s=this.attachment.getFormattedFilesize()),a&&(r=n({tagName:"span",className:t.attachmentName,textContent:a}),o.appendChild(r)),s&&(a&&o.appendChild(document.createTextNode(" ")),l=n({tagName:"span",className:t.attachmentSize,textContent:s}),o.appendChild(l))),o},r.prototype.getClassName=function(){var e,i;return i=[t.attachment,t.attachment+"--"+this.attachment.getType()],(e=this.attachment.getExtension())&&i.push(t.attachment+"--"+e),i.join(" ")},r.prototype.getData=function(){var t,e;return e={trixAttachment:JSON.stringify(this.attachment),trixContentType:this.attachment.getContentType(),trixId:this.attachment.id},(t=this.attachmentPiece.attributes).isEmpty()||(e.trixAttributes=JSON.stringify(t)),this.attachment.isPending()&&(e.trixSerialize=!1),e},r.prototype.getHref=function(){return i(this.attachment.getContent(),"a")?void 0:this.attachment.getHref()},r.prototype.getCaptionConfig=function(){var t,i,n;return n=this.attachment.getType(),t=e.copyObject(null!=(i=e.config.attachments[n])?i.caption:void 0),"file"===n&&(t.name=!0),t},r.prototype.findProgressElement=function(){var t;return null!=(t=this.findElement())?t.querySelector("progress"):void 0},s=function(t){return n({tagName:"span",textContent:e.ZERO_WIDTH_SPACE,data:{trixCursorTarget:t,trixSerialize:!1}})},r.prototype.attachmentDidChangeUploadProgress=function(){var t,e;return e=this.attachment.getUploadProgress(),null!=(t=this.findProgressElement())?t.value=e:void 0},r}(e.ObjectView),i=function(t,e){var i;return(i=n("div")).innerHTML=null!=t?t:"",i.querySelector(e)}}.call(this),function(){var t,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=e.makeElement,e.PreviewableAttachmentView=function(n){function o(){o.__super__.constructor.apply(this,arguments),this.attachment.previewDelegate=this}return i(o,n),o.prototype.createContentNodes=function(){return this.image=t({tagName:"img",attributes:{src:""},data:{trixMutable:!0}}),this.refresh(this.image),[this.image]},o.prototype.createCaptionElement=function(){var t;return(t=o.__super__.createCaptionElement.apply(this,arguments)).textContent||t.setAttribute("data-trix-placeholder",e.config.lang.captionPlaceholder),t},o.prototype.refresh=function(t){var e;return null==t&&(t=null!=(e=this.findElement())?e.querySelector("img"):void 0),t?this.updateAttributesForImage(t):void 0},o.prototype.updateAttributesForImage=function(t){var e,i,n,o,a,r;return a=this.attachment.getURL(),i=this.attachment.getPreviewURL(),t.src=i||a,i===a?t.removeAttribute("data-trix-serialized-attributes"):(n=JSON.stringify({src:a}),t.setAttribute("data-trix-serialized-attributes",n)),r=this.attachment.getWidth(),e=this.attachment.getHeight(),null!=r&&(t.width=r),null!=e&&(t.height=e),o=["imageElement",this.attachment.id,t.src,t.width,t.height].join("/"),t.dataset.trixStoreKey=o},o.prototype.attachmentDidChangeAttributes=function(){return this.refresh(this.image),this.refresh()},o}(e.AttachmentView)}.call(this),function(){var t,i,n,o=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=e.makeElement,t=e.findInnerElement,i=e.getTextConfig,e.PieceView=function(a){function r(){var t;r.__super__.constructor.apply(this,arguments),this.piece=this.object,this.attributes=this.piece.getAttributes(),t=this.options,this.textConfig=t.textConfig,this.context=t.context,this.piece.attachment?this.attachment=this.piece.attachment:this.string=this.piece.toString()}var s;return o(r,a),r.prototype.createNodes=function(){var e,i,n,o,a,r;if(r=this.attachment?this.createAttachmentNodes():this.createStringNodes(),e=this.createElement()){for(n=t(e),i=0,o=r.length;o>i;i++)a=r[i],n.appendChild(a);r=[e]}return r},r.prototype.createAttachmentNodes=function(){var t;return t=this.attachment.isPreviewable()?e.PreviewableAttachmentView:e.AttachmentView,this.createChildView(t,this.piece.attachment,{piece:this.piece}).getNodes()},r.prototype.createStringNodes=function(){var t,e,i,o,a,r,s,l,c;if(null!=(s=this.textConfig)?s.plaintext:void 0)return[document.createTextNode(this.string)];for(r=[],i=e=0,o=(l=this.string.split("\n")).length;o>e;i=++e)c=l[i],i>0&&(t=n("br"),r.push(t)),c.length&&(a=document.createTextNode(this.preserveSpaces(c)),r.push(a));return r},r.prototype.createElement=function(){var t,e,o,a,r,s,l,c,u;for(a in c={},s=this.attributes)if(u=s[a],(t=i(a))&&(t.tagName&&(r=n(t.tagName),o?(o.appendChild(r),o=r):e=o=r),t.styleProperty&&(c[t.styleProperty]=u),t.style))for(a in l=t.style)u=l[a],c[a]=u;if(Object.keys(c).length)for(a in null==e&&(e=n("span")),c)u=c[a],e.style[a]=u;return e},r.prototype.createContainerElement=function(){var t,e,o,a,r;for(o in a=this.attributes)if(r=a[o],(e=i(o))&&e.groupTagName)return(t={})[o]=r,n(e.groupTagName,t)},s=e.NON_BREAKING_SPACE,r.prototype.preserveSpaces=function(t){return this.context.isLast&&(t=t.replace(/\ $/,s)),t=t.replace(/(\S)\ {3}(\S)/g,"$1 "+s+" $2").replace(/\ {2}/g,s+" ").replace(/\ {2}/g," "+s),(this.context.isFirst||this.context.followsWhitespace)&&(t=t.replace(/^\ /,s)),t},r}(e.ObjectView)}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.TextView=function(i){function n(){n.__super__.constructor.apply(this,arguments),
this.text=this.object,this.textConfig=this.options.textConfig}var o;return t(n,i),n.prototype.createNodes=function(){var t,i,n,a,r,s,l,c,u,d;for(s=[],a=(c=e.ObjectGroup.groupObjects(this.getPieces())).length-1,n=i=0,r=c.length;r>i;n=++i)l=c[n],t={},0===n&&(t.isFirst=!0),n===a&&(t.isLast=!0),o(u)&&(t.followsWhitespace=!0),d=this.findOrCreateCachedChildView(e.PieceView,l,{textConfig:this.textConfig,context:t}),s.push.apply(s,d.getNodes()),u=l;return s},n.prototype.getPieces=function(){var t,e,i,n,o;for(o=[],t=0,e=(n=this.text.getPieces()).length;e>t;t++)(i=n[t]).hasAttribute("blockBreak")||o.push(i);return o},o=function(t){return/\s$/.test(null!=t?t.toString():void 0)},n}(e.ObjectView)}.call(this),function(){var t,i,n,o=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=e.makeElement,i=e.getBlockConfig,t=e.config.css,e.BlockView=function(a){function r(){r.__super__.constructor.apply(this,arguments),this.block=this.object,this.attributes=this.block.getAttributes()}return o(r,a),r.prototype.createNodes=function(){var t,o,a,r,s,l,c,u,d,p;if(l=[document.createComment("block")],this.block.isEmpty()?l.push(n("br")):(d=null!=(c=i(this.block.getLastAttribute()))?c.text:void 0,p=this.findOrCreateCachedChildView(e.TextView,this.block.text,{textConfig:d}),l.push.apply(l,p.getNodes()),this.shouldAddExtraNewlineElement()&&l.push(n("br"))),this.attributes.length)return l;for(u=e.config.blockAttributes["default"].tagName,this.block.isRTL()&&(t={dir:"rtl"}),o=n({tagName:u,attributes:t}),a=0,r=l.length;r>a;a++)s=l[a],o.appendChild(s);return[o]},r.prototype.createContainerElement=function(e){var o,a,r,s,l;return o=this.attributes[e],l=i(o).tagName,0===e&&this.block.isRTL()&&(a={dir:"rtl"}),"attachmentGallery"===o&&(s=this.block.getBlockBreakPosition(),r=t.attachmentGallery+" "+t.attachmentGallery+"--"+s),n({tagName:l,className:r,attributes:a})},r.prototype.shouldAddExtraNewlineElement=function(){return/\n\n$/.test(this.block.toString())},r}(e.ObjectView)}.call(this),function(){var t,i,n=function(t,e){function i(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=e.defer,i=e.makeElement,e.DocumentView=function(o){function a(){a.__super__.constructor.apply(this,arguments),this.element=this.options.element,this.elementStore=new e.ElementStore,this.setDocument(this.object)}var r,s,l;return n(a,o),a.render=function(t){var e,n;return(n=new this(t,{element:e=i("div")})).render(),n.sync(),e},a.prototype.setDocument=function(t){return t.isEqualTo(this.document)?void 0:this.document=this.object=t},a.prototype.render=function(){var t,n,o,a,r,s,l;if(this.childViews=[],this.shadowElement=i("div"),!this.document.isEmpty()){for(s=[],t=0,n=(r=e.ObjectGroup.groupObjects(this.document.getBlocks(),{asTree:!0})).length;n>t;t++)a=r[t],l=this.findOrCreateCachedChildView(e.BlockView,a),s.push(function(){var t,e,i,n;for(n=[],t=0,e=(i=l.getNodes()).length;e>t;t++)o=i[t],n.push(this.shadowElement.appendChild(o));return n}.call(this));return s}},a.prototype.isSynced=function(){return r(this.shadowElement,this.element)},a.prototype.sync=function(){var t;for(t=this.createDocumentFragmentForSync();this.element.lastChild;)this.element.removeChild(this.element.lastChild);return this.element.appendChild(t),this.didSync()},a.prototype.didSync=function(){return this.elementStore.reset(s(this.element)),t(function(t){return function(){return t.garbageCollectCachedViews()}}(this))},a.prototype.createDocumentFragmentForSync=function(){var t,e,i,n,o,a,r,l,c,u;for(e=document.createDocumentFragment(),i=0,o=(l=this.shadowElement.childNodes).length;o>i;i++)r=l[i],e.appendChild(r.cloneNode(!0));for(n=0,a=(c=s(e)).length;a>n;n++)t=c[n],(u=this.elementStore.remove(t))&&t.parentNode.replaceChild(u,t);return e},s=function(t){return t.querySelectorAll("[data-trix-store-key]")},r=function(t,e){return l(t.innerHTML)===l(e.innerHTML)},l=function(t){return t.replace(/&nbsp;/g," ")},a}(e.ObjectView)}.call(this),function(){var t,i,n,o,a,r=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function i(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=e.findClosestElementFromNode,o=e.handleEvent,a=e.innerElementIsActive,i=e.defer,t=e.AttachmentView.attachmentSelector,e.CompositionController=function(l){function c(i,n){this.element=i,this.composition=n,this.didClickAttachment=r(this.didClickAttachment,this),this.didBlur=r(this.didBlur,this),this.didFocus=r(this.didFocus,this),this.documentView=new e.DocumentView(this.composition.document,{element:this.element}),o("focus",{onElement:this.element,withCallback:this.didFocus}),o("blur",{onElement:this.element,withCallback:this.didBlur}),o("click",{onElement:this.element,matchingSelector:"a[contenteditable=false]",preventDefault:!0}),o("mousedown",{onElement:this.element,matchingSelector:t,withCallback:this.didClickAttachment}),o("click",{onElement:this.element,matchingSelector:"a"+t,preventDefault:!0})}return s(c,l),c.prototype.didFocus=function(){var t,e,i;return t=function(t){return function(){var e;return t.focused?void 0:(t.focused=!0,null!=(e=t.delegate)&&"function"==typeof e.compositionControllerDidFocus?e.compositionControllerDidFocus():void 0)}}(this),null!=(e=null!=(i=this.blurPromise)?i.then(t):void 0)?e:t()},c.prototype.didBlur=function(){return this.blurPromise=new Promise((t=this,function(e){return i(function(){var i;return a(t.element)||(t.focused=null,null!=(i=t.delegate)&&"function"==typeof i.compositionControllerDidBlur&&i.compositionControllerDidBlur()),t.blurPromise=null,e()})}));var t},c.prototype.didClickAttachment=function(t,e){var i,o,a;return i=this.findAttachmentForElement(e),o=null!=n(t.target,{matchingSelector:"figcaption"}),null!=(a=this.delegate)&&"function"==typeof a.compositionControllerDidSelectAttachment?a.compositionControllerDidSelectAttachment(i,{editCaption:o}):void 0},c.prototype.getSerializableElement=function(){return this.isEditingAttachment()?this.documentView.shadowElement:this.element},c.prototype.render=function(){var t,e,i;return this.revision!==this.composition.revision&&(this.documentView.setDocument(this.composition.document),this.documentView.render(),this.revision=this.composition.revision),this.canSyncDocumentView()&&!this.documentView.isSynced()&&(null!=(t=this.delegate)&&"function"==typeof t.compositionControllerWillSyncDocumentView&&t.compositionControllerWillSyncDocumentView(),this.documentView.sync(),null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidSyncDocumentView&&e.compositionControllerDidSyncDocumentView()),null!=(i=this.delegate)&&"function"==typeof i.compositionControllerDidRender?i.compositionControllerDidRender():void 0},c.prototype.rerenderViewForObject=function(t){return this.invalidateViewForObject(t),this.render()},c.prototype.invalidateViewForObject=function(t){return this.documentView.invalidateViewForObject(t)},c.prototype.isViewCachingEnabled=function(){return this.documentView.isViewCachingEnabled()},c.prototype.enableViewCaching=function(){return this.documentView.enableViewCaching()},c.prototype.disableViewCaching=function(){return this.documentView.disableViewCaching()},c.prototype.refreshViewCache=function(){return this.documentView.garbageCollectCachedViews()},c.prototype.isEditingAttachment=function(){return null!=this.attachmentEditor},c.prototype.installAttachmentEditorForAttachment=function(t,i){var n,o,a;if((null!=(a=this.attachmentEditor)?a.attachment:void 0)!==t&&(o=this.documentView.findElementForObject(t)))return this.uninstallAttachmentEditor(),n=this.composition.document.getAttachmentPieceForAttachment(t),this.attachmentEditor=new e.AttachmentEditorController(n,o,this.element,i),this.attachmentEditor.delegate=this},c.prototype.uninstallAttachmentEditor=function(){var t;return null!=(t=this.attachmentEditor)?t.uninstall():void 0},c.prototype.didUninstallAttachmentEditor=function(){return this.attachmentEditor=null,this.render()},c.prototype.attachmentEditorDidRequestUpdatingAttributesForAttachment=function(t,e){var i;return null!=(i=this.delegate)&&"function"==typeof i.compositionControllerWillUpdateAttachment&&i.compositionControllerWillUpdateAttachment(e),this.composition.updateAttributesForAttachment(t,e)},c.prototype.attachmentEditorDidRequestRemovingAttributeForAttachment=function(t,e){var i;return null!=(i=this.delegate)&&"function"==typeof i.compositionControllerWillUpdateAttachment&&i.compositionControllerWillUpdateAttachment(e),this.composition.removeAttributeForAttachment(t,e)},c.prototype.attachmentEditorDidRequestRemovalOfAttachment=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidRequestRemovalOfAttachment?e.compositionControllerDidRequestRemovalOfAttachment(t):void 0},c.prototype.attachmentEditorDidRequestDeselectingAttachment=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidRequestDeselectingAttachment?e.compositionControllerDidRequestDeselectingAttachment(t):void 0},c.prototype.canSyncDocumentView=function(){return!this.isEditingAttachment()},c.prototype.findAttachmentForElement=function(t){return this.composition.document.getAttachmentById(parseInt(t.dataset.trixId,10))},c}(e.BasicObject)}.call(this),function(){var t,i,n,o=function(t,e){return function(){return t.apply(e,arguments)}},a=function(t,e){function i(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},r={}.hasOwnProperty;i=e.handleEvent,n=e.triggerEvent,t=e.findClosestElementFromNode,e.ToolbarController=function(e){function r(t){this.element=t,this.didKeyDownDialogInput=o(this.didKeyDownDialogInput,this),this.didClickDialogButton=o(this.didClickDialogButton,this),this.didClickAttributeButton=o(this.didClickAttributeButton,this),this.didClickActionButton=o(this.didClickActionButton,this),this.attributes={},this.actions={},this.resetDialogInputs(),i("mousedown",{onElement:this.element,matchingSelector:s,withCallback:this.didClickActionButton}),i("mousedown",{onElement:this.element,matchingSelector:c,withCallback:this.didClickAttributeButton}),i("click",{onElement:this.element,matchingSelector:v,preventDefault:!0}),i("click",{onElement:this.element,matchingSelector:u,withCallback:this.didClickDialogButton}),i("keydown",{onElement:this.element,matchingSelector:d,withCallback:this.didKeyDownDialogInput})}var s,l,c,u,d,p,h,f,m,g,v;return a(r,e),v=(c="[data-trix-attribute]")+", "+(s="[data-trix-action]"),l=(p="[data-trix-dialog]")+"[data-trix-active]",u=p+" [data-trix-method]",d=p+" [data-trix-input]",r.prototype.didClickActionButton=function(t,e){var i,n,o;return null!=(n=this.delegate)&&n.toolbarDidClickButton(),t.preventDefault(),i=h(e),this.getDialog(i)?this.toggleDialog(i):null!=(o=this.delegate)?o.toolbarDidInvokeAction(i):void 0},r.prototype.didClickAttributeButton=function(t,e){var i,n,o;return null!=(n=this.delegate)&&n.toolbarDidClickButton(),t.preventDefault(),i=f(e),this.getDialog(i)?this.toggleDialog(i):null!=(o=this.delegate)&&o.toolbarDidToggleAttribute(i),this.refreshAttributeButtons()},r.prototype.didClickDialogButton=function(e,i){var n;return n=t(i,{matchingSelector:p}),this[i.getAttribute("data-trix-method")].call(this,n)},r.prototype.didKeyDownDialogInput=function(t,e){var i,n;return 13===t.keyCode&&(t.preventDefault(),i=e.getAttribute("name"),n=this.getDialog(i),this.setAttribute(n)),27===t.keyCode?(t.preventDefault(),this.hideDialog()):void 0},r.prototype.updateActions=function(t){return this.actions=t,this.refreshActionButtons()},r.prototype.refreshActionButtons=function(){return this.eachActionButton((t=this,function(e,i){return e.disabled=!1===t.actions[i]}));var t},r.prototype.eachActionButton=function(t){var e,i,n,o,a;for(a=[],i=0,n=(o=this.element.querySelectorAll(s)).length;n>i;i++)e=o[i],a.push(t(e,h(e)));return a},r.prototype.updateAttributes=function(t){return this.attributes=t,this.refreshAttributeButtons()},r.prototype.refreshAttributeButtons=function(){return this.eachAttributeButton((t=this,function(e,i){return e.disabled=!1===t.attributes[i],t.attributes[i]||t.dialogIsVisible(i)?(e.setAttribute("data-trix-active",""),e.classList.add("trix-active")):(e.removeAttribute("data-trix-active"),e.classList.remove("trix-active"))}));var t},r.prototype.eachAttributeButton=function(t){var e,i,n,o,a;for(a=[],i=0,n=(o=this.element.querySelectorAll(c)).length;n>i;i++)e=o[i],a.push(t(e,f(e)));return a},r.prototype.applyKeyboardCommand=function(t){var e,i,o,a,r,s;for(a=JSON.stringify(t.sort()),o=0,r=(s=this.element.querySelectorAll("[data-trix-key]")).length;r>o;o++)if(i=(e=s[o]).getAttribute("data-trix-key").split("+"),JSON.stringify(i.sort())===a)return n("mousedown",{onElement:e}),!0;return!1},r.prototype.dialogIsVisible=function(t){var e;return(e=this.getDialog(t))?e.hasAttribute("data-trix-active"):void 0},r.prototype.toggleDialog=function(t){return this.dialogIsVisible(t)?this.hideDialog():this.showDialog(t)},r.prototype.showDialog=function(t){var e,i,n,o,a,r,s,l,c;for(this.hideDialog(),null!=(r=this.delegate)&&r.toolbarWillShowDialog(),(i=this.getDialog(t)).setAttribute("data-trix-active",""),i.classList.add("trix-active"),n=0,a=(s=i.querySelectorAll("input[disabled]")).length;a>n;n++)s[n].removeAttribute("disabled");return(e=f(i))&&(o=g(i,t))&&(o.value=null!=(l=this.attributes[e])?l:"",o.select()),null!=(c=this.delegate)?c.toolbarDidShowDialog(t):void 0},r.prototype.setAttribute=function(t){var e,i,n;return e=f(t),(i=g(t,e)).willValidate&&!i.checkValidity()?(i.setAttribute("data-trix-validate",""),i.classList.add("trix-validate"),i.focus()):(null!=(n=this.delegate)&&n.toolbarDidUpdateAttribute(e,i.value),this.hideDialog())},r.prototype.removeAttribute=function(t){var e,i;return e=f(t),null!=(i=this.delegate)&&i.toolbarDidRemoveAttribute(e),this.hideDialog()},r.prototype.hideDialog=function(){var t,e;return(t=this.element.querySelector(l))?(t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"),this.resetDialogInputs(),null!=(e=this.delegate)?e.toolbarDidHideDialog(m(t)):void 0):void 0},r.prototype.resetDialogInputs=function(){var t,e,i,n,o;for(o=[],t=0,i=(n=this.element.querySelectorAll(d)).length;i>t;t++)(e=n[t]).setAttribute("disabled","disabled"),e.removeAttribute("data-trix-validate"),o.push(e.classList.remove("trix-validate"));return o},r.prototype.getDialog=function(t){return this.element.querySelector("[data-trix-dialog="+t+"]")},g=function(t,e){return null==e&&(e=f(t)),t.querySelector("[data-trix-input][name='"+e+"']")},h=function(t){return t.getAttribute("data-trix-action")},f=function(t){var e;return null!=(e=t.getAttribute("data-trix-attribute"))?e:t.getAttribute("data-trix-dialog-attribute")},m=function(t){return t.getAttribute("data-trix-dialog")},r}(e.BasicObject)}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.ImagePreloadOperation=function(e){function i(t){this.url=t}return t(i,e),i.prototype.perform=function(t){var e,i;return(e=new Image).onload=(i=this,function(){return e.width=i.width=e.naturalWidth,e.height=i.height=e.naturalHeight,t(!0,e)}),e.onerror=function(){return t(!1)},e.src=this.url},i}(e.Operation)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.Attachment=function(n){function o(i){null==i&&(i={}),this.releaseFile=t(this.releaseFile,this),o.__super__.constructor.apply(this,arguments),this.attributes=e.Hash.box(i),this.didChangeAttributes()}return i(o,n),o.previewablePattern=/^image(\/(gif|png|jpe?g)|$)/,o.attachmentForFile=function(t){var e;return(e=new this(this.attributesForFile(t))).setFile(t),e},o.attributesForFile=function(t){return new e.Hash({filename:t.name,filesize:t.size,contentType:t.type})},o.fromJSON=function(t){return new this(t)},o.prototype.getAttribute=function(t){return this.attributes.get(t)},o.prototype.hasAttribute=function(t){return this.attributes.has(t)},o.prototype.getAttributes=function(){return this.attributes.toObject()},o.prototype.setAttributes=function(t){var e,i,n;return null==t&&(t={}),e=this.attributes.merge(t),this.attributes.isEqualTo(e)?void 0:(this.attributes=e,this.didChangeAttributes(),null!=(i=this.previewDelegate)&&"function"==typeof i.attachmentDidChangeAttributes&&i.attachmentDidChangeAttributes(this),null!=(n=this.delegate)&&"function"==typeof n.attachmentDidChangeAttributes?n.attachmentDidChangeAttributes(this):void 0)},o.prototype.didChangeAttributes=function(){return this.isPreviewable()?this.preloadURL():void 0},o.prototype.isPending=function(){return null!=this.file&&!(this.getURL()||this.getHref())},o.prototype.isPreviewable=function(){return this.attributes.has("previewable")?this.attributes.get("previewable"):this.constructor.previewablePattern.test(this.getContentType())},o.prototype.getType=function(){return this.hasContent()?"content":this.isPreviewable()?"preview":"file"},o.prototype.getURL=function(){return this.attributes.get("url")},o.prototype.getHref=function(){return this.attributes.get("href")},o.prototype.getFilename=function(){var t;return null!=(t=this.attributes.get("filename"))?t:""},o.prototype.getFilesize=function(){return this.attributes.get("filesize")},o.prototype.getFormattedFilesize=function(){var t;return"number"==typeof(t=this.attributes.get("filesize"))?e.config.fileSize.formatter(t):""},o.prototype.getExtension=function(){var t;return null!=(t=this.getFilename().match(/\.(\w+)$/))?t[1].toLowerCase():void 0},o.prototype.getContentType=function(){return this.attributes.get("contentType")},o.prototype.hasContent=function(){return this.attributes.has("content")},o.prototype.getContent=function(){return this.attributes.get("content")},o.prototype.getWidth=function(){return this.attributes.get("width")},o.prototype.getHeight=function(){return this.attributes.get("height")},o.prototype.getFile=function(){return this.file},o.prototype.setFile=function(t){return this.file=t,this.isPreviewable()?this.preloadFile():void 0},o.prototype.releaseFile=function(){return this.releasePreloadedFile(),this.file=null},o.prototype.getUploadProgress=function(){var t;return null!=(t=this.uploadProgress)?t:0},o.prototype.setUploadProgress=function(t){var e;return this.uploadProgress!==t?(this.uploadProgress=t,null!=(e=this.uploadProgressDelegate)&&"function"==typeof e.attachmentDidChangeUploadProgress?e.attachmentDidChangeUploadProgress(this):void 0):void 0},o.prototype.toJSON=function(){return this.getAttributes()},o.prototype.getCacheKey=function(){return[o.__super__.getCacheKey.apply(this,arguments),this.attributes.getCacheKey(),this.getPreviewURL()].join("/")},o.prototype.getPreviewURL=function(){return this.previewURL||this.preloadingURL},o.prototype.setPreviewURL=function(t){var e,i;return t!==this.getPreviewURL()?(this.previewURL=t,null!=(e=this.previewDelegate)&&"function"==typeof e.attachmentDidChangeAttributes&&e.attachmentDidChangeAttributes(this),null!=(i=this.delegate)&&"function"==typeof i.attachmentDidChangePreviewURL?i.attachmentDidChangePreviewURL(this):void 0):void 0},o.prototype.preloadURL=function(){return this.preload(this.getURL(),this.releaseFile)},o.prototype.preloadFile=function(){return this.file?(this.fileObjectURL=URL.createObjectURL(this.file),this.preload(this.fileObjectURL)):void 0},o.prototype.releasePreloadedFile=function(){return this.fileObjectURL?(URL.revokeObjectURL(this.fileObjectURL),this.fileObjectURL=null):void 0},o.prototype.preload=function(t,i){return t&&t!==this.getPreviewURL()?(this.preloadingURL=t,new e.ImagePreloadOperation(t).then(function(e){return function(n){var o,a;return a=n.width,o=n.height,e.getWidth()&&e.getHeight()||e.setAttributes({width:a,height:o}),e.preloadingURL=null,e.setPreviewURL(t),"function"==typeof i?i():void 0}}(this))["catch"](function(t){return function(){return t.preloadingURL=null,"function"==typeof i?i():void 0}}(this))):void 0},o}(e.Object)}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.Piece=function(i){function n(t,i){null==i&&(i={}),n.__super__.constructor.apply(this,arguments),this.attributes=e.Hash.box(i)}return t(n,i),n.types={},n.registerType=function(t,e){return e.type=t,this.types[t]=e},n.fromJSON=function(t){var e;return(e=this.types[t.type])?e.fromJSON(t):void 0},n.prototype.copyWithAttributes=function(t){return new this.constructor(this.getValue(),t)},n.prototype.copyWithAdditionalAttributes=function(t){return this.copyWithAttributes(this.attributes.merge(t))},n.prototype.copyWithoutAttribute=function(t){return this.copyWithAttributes(this.attributes.remove(t))},n.prototype.copy=function(){return this.copyWithAttributes(this.attributes)},n.prototype.getAttribute=function(t){return this.attributes.get(t)},n.prototype.getAttributesHash=function(){return this.attributes},n.prototype.getAttributes=function(){return this.attributes.toObject()},n.prototype.getCommonAttributes=function(){var t,e,i;return(i=pieceList.getPieceAtIndex(0))?(t=i.attributes,e=t.getKeys(),pieceList.eachPiece(function(i){return e=t.getKeysCommonToHash(i.attributes),t=t.slice(e)}),t.toObject()):{}},n.prototype.hasAttribute=function(t){return this.attributes.has(t)},n.prototype.hasSameStringValueAsPiece=function(t){return null!=t&&this.toString()===t.toString()},n.prototype.hasSameAttributesAsPiece=function(t){return null!=t&&(this.attributes===t.attributes||this.attributes.isEqualTo(t.attributes))},n.prototype.isBlockBreak=function(){return!1},n.prototype.isEqualTo=function(t){return n.__super__.isEqualTo.apply(this,arguments)||this.hasSameConstructorAs(t)&&this.hasSameStringValueAsPiece(t)&&this.hasSameAttributesAsPiece(t)},n.prototype.isEmpty=function(){return 0===this.length},n.prototype.isSerializable=function(){return!0},n.prototype.toJSON=function(){return{type:this.constructor.type,attributes:this.getAttributes()}},n.prototype.contentsForInspection=function(){return{type:this.constructor.type,attributes:this.attributes.inspect()}},n.prototype.canBeGrouped=function(){return this.hasAttribute("href")},n.prototype.canBeGroupedWith=function(t){return this.getAttribute("href")===t.getAttribute("href")},n.prototype.getLength=function(){return this.length},n.prototype.canBeConsolidatedWith=function(){return!1},n}(e.Object)}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.Piece.registerType("attachment",e.AttachmentPiece=function(i){function n(t){this.attachment=t,n.__super__.constructor.apply(this,arguments),this.length=1,this.ensureAttachmentExclusivelyHasAttribute("href"),this.attachment.hasContent()||this.removeProhibitedAttributes()}return t(n,i),n.fromJSON=function(t){return new this(e.Attachment.fromJSON(t.attachment),t.attributes)},n.permittedAttributes=["caption","presentation"],n.prototype.ensureAttachmentExclusivelyHasAttribute=function(t){return this.hasAttribute(t)?(this.attachment.hasAttribute(t)||this.attachment.setAttributes(this.attributes.slice(t)),this.attributes=this.attributes.remove(t)):void 0},n.prototype.removeProhibitedAttributes=function(){var t;return(t=this.attributes.slice(this.constructor.permittedAttributes)).isEqualTo(this.attributes)?void 0:this.attributes=t},n.prototype.getValue=function(){return this.attachment},n.prototype.isSerializable=function(){return!this.attachment.isPending()},n.prototype.getCaption=function(){var t;return null!=(t=this.attributes.get("caption"))?t:""},n.prototype.isEqualTo=function(t){var e;return n.__super__.isEqualTo.apply(this,arguments)&&this.attachment.id===(null!=t&&null!=(e=t.attachment)?e.id:void 0)},n.prototype.toString=function(){return e.OBJECT_REPLACEMENT_CHARACTER},n.prototype.toJSON=function(){var t;return(t=n.__super__.toJSON.apply(this,arguments)).attachment=this.attachment,t},n.prototype.getCacheKey=function(){return[n.__super__.getCacheKey.apply(this,arguments),this.attachment.getCacheKey()].join("/")},n.prototype.toConsole=function(){return JSON.stringify(this.toString())},n}(e.Piece))}.call(this),function(){var t,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=e.normalizeNewlines,e.Piece.registerType("string",e.StringPiece=function(e){function n(e){n.__super__.constructor.apply(this,arguments),this.string=t(e),this.length=this.string.length}return i(n,e),n.fromJSON=function(t){return new this(t.string,t.attributes)},n.prototype.getValue=function(){return this.string},n.prototype.toString=function(){return this.string.toString()},n.prototype.isBlockBreak=function(){return"\n"===this.toString()&&!0===this.getAttribute("blockBreak")},n.prototype.toJSON=function(){var t;return(t=n.__super__.toJSON.apply(this,arguments)).string=this.string,t},n.prototype.canBeConsolidatedWith=function(t){return null!=t&&this.hasSameConstructorAs(t)&&this.hasSameAttributesAsPiece(t)},n.prototype.consolidateWith=function(t){return new this.constructor(this.toString()+t.toString(),this.attributes)},n.prototype.splitAtOffset=function(t){var e,i;return 0===t?(e=null,i=this):t===this.length?(e=this,i=null):(e=new this.constructor(this.string.slice(0,t),this.attributes),i=new this.constructor(this.string.slice(t),this.attributes)),[e,i]},n.prototype.toConsole=function(){var t;return(t=this.string).length>15&&(t=t.slice(0,14)+"\u2026"),JSON.stringify(t.toString())},n}(e.Piece))}.call(this),function(){var t,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty,o=[].slice;t=e.spliceArray,e.SplittableList=function(e){function n(t){null==t&&(t=[]),n.__super__.constructor.apply(this,arguments),this.objects=t.slice(0),this.length=this.objects.length}var a,r,s;return i(n,e),n.box=function(t){return t instanceof this?t:new this(t)},n.prototype.indexOf=function(t){return this.objects.indexOf(t)},n.prototype.splice=function(){var e;return e=1<=arguments.length?o.call(arguments,0):[],new this.constructor(t.apply(null,[this.objects].concat(o.call(e))))},n.prototype.eachObject=function(t){var e,i,n,o,a,r;for(r=[],i=e=0,n=(a=this.objects).length;n>e;i=++e)o=a[i],r.push(t(o,i));return r},n.prototype.insertObjectAtIndex=function(t,e){return this.splice(e,0,t)},n.prototype.insertSplittableListAtIndex=function(t,e){return this.splice.apply(this,[e,0].concat(o.call(t.objects)))},n.prototype.insertSplittableListAtPosition=function(t,e){var i,n,o;return n=(o=this.splitObjectAtPosition(e))[0],i=o[1],new this.constructor(n).insertSplittableListAtIndex(t,i)},n.prototype.editObjectAtIndex=function(t,e){return this.replaceObjectAtIndex(e(this.objects[t]),t)},n.prototype.replaceObjectAtIndex=function(t,e){return this.splice(e,1,t)},n.prototype.removeObjectAtIndex=function(t){return this.splice(t,1)},n.prototype.getObjectAtIndex=function(t){return this.objects[t]},n.prototype.getSplittableListInRange=function(t){var e,i,n,o;return i=(n=this.splitObjectsAtRange(t))[0],e=n[1],o=n[2],new this.constructor(i.slice(e,o+1))},n.prototype.selectSplittableList=function(t){var e,i;return i=function(){var i,n,o,a;for(a=[],i=0,n=(o=this.objects).length;n>i;i++)e=o[i],t(e)&&a.push(e);return a}.call(this),new this.constructor(i)},n.prototype.removeObjectsInRange=function(t){var e,i,n,o;return i=(n=this.splitObjectsAtRange(t))[0],e=n[1],o=n[2],new this.constructor(i).splice(e,o-e+1)},n.prototype.transformObjectsInRange=function(t,e){var i,n,o,a,r,s,l;return r=this.splitObjectsAtRange(t),a=r[0],n=r[1],s=r[2],l=function(){var t,r,l;for(l=[],i=t=0,r=a.length;r>t;i=++t)o=a[i],l.push(i>=n&&s>=i?e(o):o);return l}(),new this.constructor(l)},n.prototype.splitObjectsAtRange=function(t){var e,i,n,o,r;return i=(o=this.splitObjectAtPosition(s(t)))[0],e=o[1],n=o[2],[i=(r=new this.constructor(i).splitObjectAtPosition(a(t)+n))[0],e,r[1]-1]},n.prototype.getObjectAtPosition=function(t){var e,i;return e=(i=this.findIndexAndOffsetAtPosition(t)).index,i.offset,this.objects[e]},n.prototype.splitObjectAtPosition=function(t){var e,i,n,o,a,r,s,l,c;return e=(a=this.findIndexAndOffsetAtPosition(t)).index,o=a.offset,n=this.objects.slice(0),null!=e?0===o?(l=e,c=0):(i=(r=this.getObjectAtIndex(e).splitAtOffset(o))[0],s=r[1],n.splice(e,1,i,s),l=e+1,c=i.getLength()-o):(l=n.length,c=0),[n,l,c]},n.prototype.consolidate=function(){var t,e,i,n,o,a;for(n=[],o=this.objects[0],t=0,e=(a=this.objects.slice(1)).length;e>t;t++)i=a[t],("function"==typeof o.canBeConsolidatedWith?o.canBeConsolidatedWith(i):void 0)?o=o.consolidateWith(i):(n.push(o),o=i);return null!=o&&n.push(o),new this.constructor(n)},n.prototype.consolidateFromIndexToIndex=function(t,e){var i,n;return n=this.objects.slice(0).slice(t,e+1),i=new this.constructor(n).consolidate().toArray(),this.splice.apply(this,[t,n.length].concat(o.call(i)))},n.prototype.findIndexAndOffsetAtPosition=function(t){var e,i,n,o,a,r;for(e=0,n=i=0,o=(r=this.objects).length;o>i;n=++i){if(a=e+r[n].getLength(),t>=e&&a>t)return{index:n,offset:t-e};e=a}return{index:null,offset:null}},n.prototype.findPositionAtIndexAndOffset=function(t,e){var i,n,o,a,r,s;for(r=0,i=n=0,o=(s=this.objects).length;o>n;i=++n)if(a=s[i],t>i)r+=a.getLength();else if(i===t){r+=e;break}return r},n.prototype.getEndPosition=function(){var t,e;return null!=this.endPosition?this.endPosition:this.endPosition=function(){var i,n,o;for(e=0,i=0,n=(o=this.objects).length;n>i;i++)t=o[i],e+=t.getLength();return e}.call(this)},n.prototype.toString=function(){return this.objects.join("")},n.prototype.toArray=function(){return this.objects.slice(0)},n.prototype.toJSON=function(){return this.toArray()},n.prototype.isEqualTo=function(t){return n.__super__.isEqualTo.apply(this,arguments)||r(this.objects,null!=t?t.objects:void 0)},r=function(t,e){var i,n,o,a,r;if(null==e&&(e=[]),t.length!==e.length)return!1;for(r=!0,n=i=0,o=t.length;o>i;n=++i)a=t[n],r&&!a.isEqualTo(e[n])&&(r=!1);return r},n.prototype.contentsForInspection=function(){var t;return{objects:"["+function(){var e,i,n,o;for(o=[],e=0,i=(n=this.objects).length;i>e;e++)t=n[e],o.push(t.inspect());return o}.call(this).join(", ")+"]"}},s=function(t){return t[0]},a=function(t){return t[1]},n}(e.Object)}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.Text=function(i){function n(t){var i;null==t&&(t=[]),n.__super__.constructor.apply(this,arguments),this.pieceList=new e.SplittableList(function(){var e,n,o;for(o=[],e=0,n=t.length;n>e;e++)(i=t[e]).isEmpty()||o.push(i);return o}())}return t(n,i),n.textForAttachmentWithAttributes=function(t,i){return new this([new e.AttachmentPiece(t,i)])},n.textForStringWithAttributes=function(t,i){return new this([new e.StringPiece(t,i)])},n.fromJSON=function(t){var i;return new this(function(){var n,o,a;for(a=[],n=0,o=t.length;o>n;n++)i=t[n],a.push(e.Piece.fromJSON(i));return a}())},n.prototype.copy=function(){return this.copyWithPieceList(this.pieceList)},n.prototype.copyWithPieceList=function(t){return new this.constructor(t.consolidate().toArray())},n.prototype.copyUsingObjectMap=function(t){var e,i;return i=function(){var i,n,o,a,r;for(r=[],i=0,n=(o=this.getPieces()).length;n>i;i++)e=o[i],r.push(null!=(a=t.find(e))?a:e);return r}.call(this),new this.constructor(i)},n.prototype.appendText=function(t){return this.insertTextAtPosition(t,this.getLength())},n.prototype.insertTextAtPosition=function(t,e){return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(t.pieceList,e))},n.prototype.removeTextAtRange=function(t){return this.copyWithPieceList(this.pieceList.removeObjectsInRange(t))},n.prototype.replaceTextAtRange=function(t,e){return this.removeTextAtRange(e).insertTextAtPosition(t,e[0])},n.prototype.moveTextFromRangeToPosition=function(t,e){var i,n
;if(!(t[0]<=e&&e<=t[1]))return i=(n=this.getTextAtRange(t)).getLength(),t[0]<e&&(e-=i),this.removeTextAtRange(t).insertTextAtPosition(n,e)},n.prototype.addAttributeAtRange=function(t,e,i){var n;return(n={})[t]=e,this.addAttributesAtRange(n,i)},n.prototype.addAttributesAtRange=function(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,function(e){return e.copyWithAdditionalAttributes(t)}))},n.prototype.removeAttributeAtRange=function(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,function(e){return e.copyWithoutAttribute(t)}))},n.prototype.setAttributesAtRange=function(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,function(e){return e.copyWithAttributes(t)}))},n.prototype.getAttributesAtPosition=function(t){var e,i;return null!=(e=null!=(i=this.pieceList.getObjectAtPosition(t))?i.getAttributes():void 0)?e:{}},n.prototype.getCommonAttributes=function(){var t,i;return t=function(){var t,e,n,o;for(o=[],t=0,e=(n=this.pieceList.toArray()).length;e>t;t++)i=n[t],o.push(i.getAttributes());return o}.call(this),e.Hash.fromCommonAttributesOfObjects(t).toObject()},n.prototype.getCommonAttributesAtRange=function(t){var e;return null!=(e=this.getTextAtRange(t).getCommonAttributes())?e:{}},n.prototype.getExpandedRangeForAttributeAtOffset=function(t,e){var i,n,o;for(i=o=e,n=this.getLength();i>0&&this.getCommonAttributesAtRange([i-1,o])[t];)i--;for(;n>o&&this.getCommonAttributesAtRange([e,o+1])[t];)o++;return[i,o]},n.prototype.getTextAtRange=function(t){return this.copyWithPieceList(this.pieceList.getSplittableListInRange(t))},n.prototype.getStringAtRange=function(t){return this.pieceList.getSplittableListInRange(t).toString()},n.prototype.getStringAtPosition=function(t){return this.getStringAtRange([t,t+1])},n.prototype.startsWithString=function(t){return this.getStringAtRange([0,t.length])===t},n.prototype.endsWithString=function(t){var e;return e=this.getLength(),this.getStringAtRange([e-t.length,e])===t},n.prototype.getAttachmentPieces=function(){var t,e,i,n,o;for(o=[],t=0,e=(n=this.pieceList.toArray()).length;e>t;t++)null!=(i=n[t]).attachment&&o.push(i);return o},n.prototype.getAttachments=function(){var t,e,i,n,o;for(o=[],t=0,e=(n=this.getAttachmentPieces()).length;e>t;t++)i=n[t],o.push(i.attachment);return o},n.prototype.getAttachmentAndPositionById=function(t){var e,i,n,o,a,r;for(o=0,e=0,i=(a=this.pieceList.toArray()).length;i>e;e++){if((null!=(r=(n=a[e]).attachment)?r.id:void 0)===t)return{attachment:n.attachment,position:o};o+=n.length}return{attachment:null,position:null}},n.prototype.getAttachmentById=function(t){var e,i;return e=(i=this.getAttachmentAndPositionById(t)).attachment,i.position,e},n.prototype.getRangeOfAttachment=function(t){var e,i;return t=(i=this.getAttachmentAndPositionById(t.id)).attachment,e=i.position,null!=t?[e,e+1]:void 0},n.prototype.updateAttributesForAttachment=function(t,e){var i;return(i=this.getRangeOfAttachment(e))?this.addAttributesAtRange(t,i):this},n.prototype.getLength=function(){return this.pieceList.getEndPosition()},n.prototype.isEmpty=function(){return 0===this.getLength()},n.prototype.isEqualTo=function(t){var e;return n.__super__.isEqualTo.apply(this,arguments)||(null!=t&&null!=(e=t.pieceList)?e.isEqualTo(this.pieceList):void 0)},n.prototype.isBlockBreak=function(){return 1===this.getLength()&&this.pieceList.getObjectAtIndex(0).isBlockBreak()},n.prototype.eachPiece=function(t){return this.pieceList.eachObject(t)},n.prototype.getPieces=function(){return this.pieceList.toArray()},n.prototype.getPieceAtPosition=function(t){return this.pieceList.getObjectAtPosition(t)},n.prototype.contentsForInspection=function(){return{pieceList:this.pieceList.inspect()}},n.prototype.toSerializableText=function(){var t;return t=this.pieceList.selectSplittableList(function(t){return t.isSerializable()}),this.copyWithPieceList(t)},n.prototype.toString=function(){return this.pieceList.toString()},n.prototype.toJSON=function(){return this.pieceList.toJSON()},n.prototype.toConsole=function(){var t;return JSON.stringify(function(){var e,i,n,o;for(o=[],e=0,i=(n=this.pieceList.toArray()).length;i>e;e++)t=n[e],o.push(JSON.parse(t.toConsole()));return o}.call(this))},n.prototype.getDirection=function(){return e.getDirection(this.toString())},n.prototype.isRTL=function(){return"rtl"===this.getDirection()},n}(e.Object)}.call(this),function(){var t,i,n,o,a=function(t,e){function i(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},r={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},l=[].slice;t=e.arraysAreEqual,o=e.spliceArray,i=e.getBlockConfig,e.getBlockAttributeNames,n=e.getListAttributeNames,e.Block=function(r){function c(t,i){null==t&&(t=new e.Text),null==i&&(i=[]),c.__super__.constructor.apply(this,arguments),this.text=d(t),this.attributes=i}var u,d,p,h,f,m,g,v,_;return a(c,r),c.fromJSON=function(t){return new this(e.Text.fromJSON(t.text),t.attributes)},c.prototype.isEmpty=function(){return this.text.isBlockBreak()},c.prototype.isEqualTo=function(e){return c.__super__.isEqualTo.apply(this,arguments)||this.text.isEqualTo(null!=e?e.text:void 0)&&t(this.attributes,null!=e?e.attributes:void 0)},c.prototype.copyWithText=function(t){return new this.constructor(t,this.attributes)},c.prototype.copyWithoutText=function(){return this.copyWithText(null)},c.prototype.copyWithAttributes=function(t){return new this.constructor(this.text,t)},c.prototype.copyWithoutAttributes=function(){return this.copyWithAttributes(null)},c.prototype.copyUsingObjectMap=function(t){var e;return this.copyWithText((e=t.find(this.text))?e:this.text.copyUsingObjectMap(t))},c.prototype.addAttribute=function(t){var e;return e=this.attributes.concat(h(t)),this.copyWithAttributes(e)},c.prototype.removeAttribute=function(t){var e,n;return n=i(t).listAttribute,e=m(m(this.attributes,t),n),this.copyWithAttributes(e)},c.prototype.removeLastAttribute=function(){return this.removeAttribute(this.getLastAttribute())},c.prototype.getLastAttribute=function(){return f(this.attributes)},c.prototype.getAttributes=function(){return this.attributes.slice(0)},c.prototype.getAttributeLevel=function(){return this.attributes.length},c.prototype.getAttributeAtLevel=function(t){return this.attributes[t-1]},c.prototype.hasAttribute=function(t){return s.call(this.attributes,t)>=0},c.prototype.hasAttributes=function(){return this.getAttributeLevel()>0},c.prototype.getLastNestableAttribute=function(){return f(this.getNestableAttributes())},c.prototype.getNestableAttributes=function(){var t,e,n,o,a;for(a=[],e=0,n=(o=this.attributes).length;n>e;e++)t=o[e],i(t).nestable&&a.push(t);return a},c.prototype.getNestingLevel=function(){return this.getNestableAttributes().length},c.prototype.decreaseNestingLevel=function(){var t;return(t=this.getLastNestableAttribute())?this.removeAttribute(t):this},c.prototype.increaseNestingLevel=function(){var t,e,i;return(t=this.getLastNestableAttribute())?(i=this.attributes.lastIndexOf(t),e=o.apply(null,[this.attributes,i+1,0].concat(l.call(h(t)))),this.copyWithAttributes(e)):this},c.prototype.getListItemAttributes=function(){var t,e,n,o,a;for(a=[],e=0,n=(o=this.attributes).length;n>e;e++)t=o[e],i(t).listAttribute&&a.push(t);return a},c.prototype.isListItem=function(){var t;return null!=(t=i(this.getLastAttribute()))?t.listAttribute:void 0},c.prototype.isTerminalBlock=function(){var t;return null!=(t=i(this.getLastAttribute()))?t.terminal:void 0},c.prototype.breaksOnReturn=function(){var t;return null!=(t=i(this.getLastAttribute()))?t.breakOnReturn:void 0},c.prototype.findLineBreakInDirectionFromPosition=function(t,e){var i,n;return n=this.toString(),-1!==(i=function(){switch(t){case"forward":return n.indexOf("\n",e);case"backward":return n.slice(0,e).lastIndexOf("\n")}}())?i:void 0},c.prototype.contentsForInspection=function(){return{text:this.text.inspect(),attributes:this.attributes}},c.prototype.toString=function(){return this.text.toString()},c.prototype.toJSON=function(){return{text:this.text,attributes:this.attributes}},c.prototype.getDirection=function(){return this.text.getDirection()},c.prototype.isRTL=function(){return this.text.isRTL()},c.prototype.getLength=function(){return this.text.getLength()},c.prototype.canBeConsolidatedWith=function(t){return!this.hasAttributes()&&!t.hasAttributes()&&this.getDirection()===t.getDirection()},c.prototype.consolidateWith=function(t){var i,n;return i=e.Text.textForStringWithAttributes("\n"),n=this.getTextWithoutBlockBreak().appendText(i),this.copyWithText(n.appendText(t.text))},c.prototype.splitAtOffset=function(t){var e,i;return 0===t?(e=null,i=this):t===this.getLength()?(e=this,i=null):(e=this.copyWithText(this.text.getTextAtRange([0,t])),i=this.copyWithText(this.text.getTextAtRange([t,this.getLength()]))),[e,i]},c.prototype.getBlockBreakPosition=function(){return this.text.getLength()-1},c.prototype.getTextWithoutBlockBreak=function(){return g(this.text)?this.text.getTextAtRange([0,this.getBlockBreakPosition()]):this.text.copy()},c.prototype.canBeGrouped=function(t){return this.attributes[t]},c.prototype.canBeGroupedWith=function(t,e){var o,a,r,l;return a=(r=t.getAttributes())[e],!((o=this.attributes[e])!==a||!1===i(o).group&&(l=r[e+1],s.call(n(),l)<0)||this.getDirection()!==t.getDirection()&&!t.isEmpty())},d=function(t){return t=_(t),u(t)},_=function(t){var i,n,o,a,r,s;return a=!1,s=t.getPieces(),n=2<=s.length?l.call(s,0,i=s.length-1):(i=0,[]),null==(o=s[i++])?t:(n=function(){var t,e,i;for(i=[],t=0,e=n.length;e>t;t++)(r=n[t]).isBlockBreak()?(a=!0,i.push(v(r))):i.push(r);return i}(),a?new e.Text(l.call(n).concat([o])):t)},p=e.Text.textForStringWithAttributes("\n",{blockBreak:!0}),u=function(t){return g(t)?t:t.appendText(p)},g=function(t){var e;return 0!==(e=t.getLength())&&t.getTextAtRange([e-1,e]).isBlockBreak()},v=function(t){return t.copyWithoutAttribute("blockBreak")},h=function(t){var e;return null!=(e=i(t).listAttribute)?[e,t]:[t]},f=function(t){return t.slice(-1)[0]},m=function(t,e){var i;return-1===(i=t.lastIndexOf(e))?t:o(t,i,1)},c}(e.Object)}.call(this),function(){var t,i,n,o=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty,r=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},s=[].slice;i=e.tagName,n=e.walkTree,t=e.nodeIsAttachmentElement,e.HTMLSanitizer=function(a){function l(t,e){var i;i=null!=e?e:{},this.allowedAttributes=i.allowedAttributes,this.forbiddenProtocols=i.forbiddenProtocols,this.forbiddenElements=i.forbiddenElements,null==this.allowedAttributes&&(this.allowedAttributes=c),null==this.forbiddenProtocols&&(this.forbiddenProtocols=d),null==this.forbiddenElements&&(this.forbiddenElements=u),this.body=p(t)}var c,u,d,p;return o(l,a),c="style href src width height class".split(" "),d="javascript:".split(" "),u="script iframe".split(" "),l.sanitize=function(t,e){var i;return(i=new this(t,e)).sanitize(),i},l.prototype.sanitize=function(){return this.sanitizeElements(),this.normalizeListElementNesting()},l.prototype.getHTML=function(){return this.body.innerHTML},l.prototype.getBody=function(){return this.body},l.prototype.sanitizeElements=function(){var t,i,o,a,r;for(r=n(this.body),a=[];r.nextNode();)switch(o=r.currentNode,o.nodeType){case Node.ELEMENT_NODE:this.elementIsRemovable(o)?a.push(o):this.sanitizeElement(o);break;case Node.COMMENT_NODE:a.push(o)}for(t=0,i=a.length;i>t;t++)o=a[t],e.removeNode(o);return this.body},l.prototype.sanitizeElement=function(t){var e,i,n,o,a;for(t.hasAttribute("href")&&(o=t.protocol,r.call(this.forbiddenProtocols,o)>=0&&t.removeAttribute("href")),e=0,i=(a=s.call(t.attributes)).length;i>e;e++)n=a[e].name,r.call(this.allowedAttributes,n)>=0||0===n.indexOf("data-trix")||t.removeAttribute(n);return t},l.prototype.normalizeListElementNesting=function(){var t,e,n,o,a;for(t=0,e=(a=s.call(this.body.querySelectorAll("ul,ol"))).length;e>t;t++)(o=(n=a[t]).previousElementSibling)&&"li"===i(o)&&o.appendChild(n);return this.body},l.prototype.elementIsRemovable=function(t){return(null!=t?t.nodeType:void 0)===Node.ELEMENT_NODE?this.elementIsForbidden(t)||this.elementIsntSerializable(t):void 0},l.prototype.elementIsForbidden=function(t){var e;return e=i(t),r.call(this.forbiddenElements,e)>=0},l.prototype.elementIsntSerializable=function(e){return"false"===e.getAttribute("data-trix-serialize")&&!t(e)},p=function(t){var e,i,n,o,a;for(null==t&&(t=""),t=t.replace(/<\/html[^>]*>[^]*$/i,"</html>"),(e=document.implementation.createHTMLDocument("")).documentElement.innerHTML=t,n=0,o=(a=e.head.querySelectorAll("style")).length;o>n;n++)i=a[n],e.body.appendChild(i);return e.body},l}(e.BasicObject)}.call(this),function(){var t,i,n,o,a,r,s,l,c,u,d,p=function(t,e){function i(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},h={}.hasOwnProperty,f=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};t=e.arraysAreEqual,r=e.makeElement,u=e.tagName,a=e.getBlockTagNames,d=e.walkTree,o=e.findClosestElementFromNode,n=e.elementContainsNode,s=e.nodeIsAttachmentElement,l=e.normalizeSpaces,i=e.breakableWhitespacePattern,c=e.squishBreakableWhitespace,e.HTMLParser=function(h){function m(t,e){this.html=t,this.referenceElement=(null!=e?e:{}).referenceElement,this.blocks=[],this.blockElements=[],this.processedElements=[]}var g,v,_,b,y,w,$,x,k,C,D,S;return p(m,h),m.parse=function(t,e){var i;return(i=new this(t,e)).parse(),i},m.prototype.getDocument=function(){return e.Document.fromJSON(this.blocks)},m.prototype.parse=function(){var t,i;try{for(this.createHiddenContainer(),t=e.HTMLSanitizer.sanitize(this.html).getHTML(),this.containerElement.innerHTML=t,i=d(this.containerElement,{usingFilter:$});i.nextNode();)this.processNode(i.currentNode);return this.translateBlockElementMarginsToNewlines()}finally{this.removeHiddenContainer()}},m.prototype.createHiddenContainer=function(){return this.referenceElement?(this.containerElement=this.referenceElement.cloneNode(!1),this.containerElement.removeAttribute("id"),this.containerElement.setAttribute("data-trix-internal",""),this.containerElement.style.display="none",this.referenceElement.parentNode.insertBefore(this.containerElement,this.referenceElement.nextSibling)):(this.containerElement=r({tagName:"div",style:{display:"none"}}),document.body.appendChild(this.containerElement))},m.prototype.removeHiddenContainer=function(){return e.removeNode(this.containerElement)},$=function(t){return"style"===u(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},m.prototype.processNode=function(t){switch(t.nodeType){case Node.TEXT_NODE:if(!this.isInsignificantTextNode(t))return this.appendBlockForTextNode(t),this.processTextNode(t);break;case Node.ELEMENT_NODE:return this.appendBlockForElement(t),this.processElement(t)}},m.prototype.appendBlockForTextNode=function(e){var i,n,o;return(n=e.parentNode)===this.currentBlockElement&&this.isBlockElement(e.previousSibling)?this.appendStringWithAttributes("\n"):n!==this.containerElement&&!this.isBlockElement(n)||(i=this.getBlockAttributes(n),t(i,null!=(o=this.currentBlock)?o.attributes:void 0))?void 0:(this.currentBlock=this.appendBlockForAttributesWithElement(i,n),this.currentBlockElement=n)},m.prototype.appendBlockForElement=function(e){var i,o,a,r;if(a=this.isBlockElement(e),o=n(this.currentBlockElement,e),a&&!this.isBlockElement(e.firstChild)){if((!this.isInsignificantTextNode(e.firstChild)||!this.isBlockElement(e.firstElementChild))&&(i=this.getBlockAttributes(e),e.firstChild))return o&&t(i,this.currentBlock.attributes)?this.appendStringWithAttributes("\n"):(this.currentBlock=this.appendBlockForAttributesWithElement(i,e),this.currentBlockElement=e)}else if(this.currentBlockElement&&!o&&!a)return(r=this.findParentBlockElement(e))?this.appendBlockForElement(r):(this.currentBlock=this.appendEmptyBlock(),this.currentBlockElement=null)},m.prototype.findParentBlockElement=function(t){var e;for(e=t.parentElement;e&&e!==this.containerElement;){if(this.isBlockElement(e)&&f.call(this.blockElements,e)>=0)return e;e=e.parentElement}return null},m.prototype.processTextNode=function(t){var e,i;return i=t.data,v(t.parentNode)||(i=c(i),D(null!=(e=t.previousSibling)?e.textContent:void 0)&&(i=y(i))),this.appendStringWithAttributes(i,this.getTextAttributes(t.parentNode))},m.prototype.processElement=function(t){var e,i,n,o,a;if(s(t))return e=x(t,"attachment"),Object.keys(e).length&&(o=this.getTextAttributes(t),this.appendAttachmentWithAttributes(e,o),t.innerHTML=""),this.processedElements.push(t);switch(u(t)){case"br":return this.isExtraBR(t)||this.isBlockElement(t.nextSibling)||this.appendStringWithAttributes("\n",this.getTextAttributes(t)),this.processedElements.push(t);case"img":for(i in e={url:t.getAttribute("src"),contentType:"image"},n=b(t))a=n[i],e[i]=a;return this.appendAttachmentWithAttributes(e,this.getTextAttributes(t)),this.processedElements.push(t);case"tr":if(t.parentNode.firstChild!==t)return this.appendStringWithAttributes("\n");break;case"td":if(t.parentNode.firstChild!==t)return this.appendStringWithAttributes(" | ")}},m.prototype.appendBlockForAttributesWithElement=function(t,e){var i;return this.blockElements.push(e),i=g(t),this.blocks.push(i),i},m.prototype.appendEmptyBlock=function(){return this.appendBlockForAttributesWithElement([],null)},m.prototype.appendStringWithAttributes=function(t,e){return this.appendPiece(C(t,e))},m.prototype.appendAttachmentWithAttributes=function(t,e){return this.appendPiece(k(t,e))},m.prototype.appendPiece=function(t){return 0===this.blocks.length&&this.appendEmptyBlock(),this.blocks[this.blocks.length-1].text.push(t)},m.prototype.appendStringToTextAtIndex=function(t,e){var i,n;return"string"===(null!=(i=(n=this.blocks[e].text)[n.length-1])?i.type:void 0)?i.string+=t:n.push(C(t))},m.prototype.prependStringToTextAtIndex=function(t,e){var i,n;return"string"===(null!=(i=(n=this.blocks[e].text)[0])?i.type:void 0)?i.string=t+i.string:n.unshift(C(t))},C=function(t,e){var i;return null==e&&(e={}),i="string",{string:t=l(t),attributes:e,type:i}},k=function(t,e){return null==e&&(e={}),{attachment:t,attributes:e,type:"attachment"}},g=function(t){return null==t&&(t={}),{text:[],attributes:t}},m.prototype.getTextAttributes=function(t){var i,n,a,r,l,c,u,d,p,h,f,m;for(i in a={},p=e.config.textAttributes)if((l=p[i]).tagName&&o(t,{matchingSelector:l.tagName,untilNode:this.containerElement}))a[i]=!0;else if(l.parser){if(m=l.parser(t)){for(n=!1,c=0,d=(h=this.findBlockElementAncestors(t)).length;d>c;c++)if(r=h[c],l.parser(r)===m){n=!0;break}n||(a[i]=m)}}else l.styleProperty&&(m=t.style[l.styleProperty])&&(a[i]=m);if(s(t))for(u in f=x(t,"attributes"))m=f[u],a[u]=m;return a},m.prototype.getBlockAttributes=function(t){var i,n,o,a;for(n=[];t&&t!==this.containerElement;){for(i in a=e.config.blockAttributes)!1!==(o=a[i]).parse&&u(t)===o.tagName&&(("function"==typeof o.test?o.test(t):void 0)||!o.test)&&(n.push(i),o.listAttribute&&n.push(o.listAttribute));t=t.parentNode}return n.reverse()},m.prototype.findBlockElementAncestors=function(t){var e,i;for(e=[];t&&t!==this.containerElement;)i=u(t),f.call(a(),i)>=0&&e.push(t),t=t.parentNode;return e},x=function(t,e){try{return JSON.parse(t.getAttribute("data-trix-"+e))}catch(i){return{}}},b=function(t){var e,i,n;return n=t.getAttribute("width"),i=t.getAttribute("height"),e={},n&&(e.width=parseInt(n,10)),i&&(e.height=parseInt(i,10)),e},m.prototype.isBlockElement=function(t){var e;if((null!=t?t.nodeType:void 0)===Node.ELEMENT_NODE&&!s(t)&&!o(t,{matchingSelector:"td",untilNode:this.containerElement}))return e=u(t),f.call(a(),e)>=0||"block"===window.getComputedStyle(t).display},m.prototype.isInsignificantTextNode=function(t){var e,i,n;if((null!=t?t.nodeType:void 0)===Node.TEXT_NODE&&S(t.data)&&(i=t.parentNode,n=t.previousSibling,e=t.nextSibling,(!w(i.previousSibling)||this.isBlockElement(i.previousSibling))&&!v(i)))return!n||this.isBlockElement(n)||!e||this.isBlockElement(e)},m.prototype.isExtraBR=function(t){return"br"===u(t)&&this.isBlockElement(t.parentNode)&&t.parentNode.lastChild===t},v=function(t){var e;return"pre"===(e=window.getComputedStyle(t).whiteSpace)||"pre-wrap"===e||"pre-line"===e},w=function(t){return t&&!D(t.textContent)},m.prototype.translateBlockElementMarginsToNewlines=function(){var t,e,i,n,o,a,r;for(t=this.getMarginOfDefaultBlockElement(),r=[],i=e=0,n=(a=this.blocks).length;n>e;i=++e)a[i],(o=this.getMarginOfBlockElementAtIndex(i))&&(o.top>2*t.top&&this.prependStringToTextAtIndex("\n",i),r.push(o.bottom>2*t.bottom?this.appendStringToTextAtIndex("\n",i):void 0));return r},m.prototype.getMarginOfBlockElementAtIndex=function(t){var e,i;return!(e=this.blockElements[t])||!e.textContent||(i=u(e),f.call(a(),i)>=0||f.call(this.processedElements,e)>=0)?void 0:_(e)},m.prototype.getMarginOfDefaultBlockElement=function(){var t;return t=r(e.config.blockAttributes["default"].tagName),this.containerElement.appendChild(t),_(t)},_=function(t){var e;return"block"===(e=window.getComputedStyle(t)).display?{top:parseInt(e.marginTop),bottom:parseInt(e.marginBottom)}:void 0},y=function(t){return t.replace(RegExp("^"+i.source+"+"),"")},S=function(t){return RegExp("^"+i.source+"*$").test(t)},D=function(t){return/\s$/.test(t)},m}(e.BasicObject)}.call(this),function(){var t,i,n,o,a=function(t,e){function i(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},r={}.hasOwnProperty,s=[].slice,l=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};t=e.arraysAreEqual,n=e.normalizeRange,o=e.rangeIsCollapsed,i=e.getBlockConfig,e.Document=function(r){function c(t){null==t&&(t=[]),c.__super__.constructor.apply(this,arguments),0===t.length&&(t=[new e.Block]),this.blockList=e.SplittableList.box(t)}var u;return a(c,r),c.fromJSON=function(t){var i;return new this(function(){var n,o,a;for(a=[],n=0,o=t.length;o>n;n++)i=t[n],a.push(e.Block.fromJSON(i));return a}())},c.fromHTML=function(t,i){return e.HTMLParser.parse(t,i).getDocument()},c.fromString=function(t,i){var n;return n=e.Text.textForStringWithAttributes(t,i),new this([new e.Block(n)])},c.prototype.isEmpty=function(){var t;return 1===this.blockList.length&&((t=this.getBlockAtIndex(0)).isEmpty()&&!t.hasAttributes())},c.prototype.copy=function(t){var e;return null==t&&(t={}),e=t.consolidateBlocks?this.blockList.consolidate().toArray():this.blockList.toArray(),new this.constructor(e)},c.prototype.copyUsingObjectsFromDocument=function(t){var i;return i=new e.ObjectMap(t.getObjects()),this.copyUsingObjectMap(i)},c.prototype.copyUsingObjectMap=function(t){var e,i,n;return i=function(){var i,o,a,r;for(r=[],i=0,o=(a=this.getBlocks()).length;o>i;i++)e=a[i],r.push((n=t.find(e))?n:e.copyUsingObjectMap(t));return r}.call(this),new this.constructor(i)},c.prototype.copyWithBaseBlockAttributes=function(t){var e,i,n;return null==t&&(t=[]),n=function(){var n,o,a,r;for(r=[],n=0,o=(a=this.getBlocks()).length;o>n;n++)i=a[n],e=t.concat(i.getAttributes()),r.push(i.copyWithAttributes(e));return r}.call(this),new this.constructor(n)},c.prototype.replaceBlock=function(t,e){var i;return-1===(i=this.blockList.indexOf(t))?this:new this.constructor(this.blockList.replaceObjectAtIndex(e,i))},c.prototype.insertDocumentAtRange=function(t,e){var i,a,r,s,l,c,u;return a=t.blockList,l=(e=n(e))[0],r=(c=this.locationFromPosition(l)).index,s=c.offset,u=this,i=this.getBlockAtPosition(l),o(e)&&i.isEmpty()&&!i.hasAttributes()?u=new this.constructor(u.blockList.removeObjectAtIndex(r)):i.getBlockBreakPosition()===s&&l++,u=u.removeTextAtRange(e),new this.constructor(u.blockList.insertSplittableListAtPosition(a,l))},c.prototype.mergeDocumentAtRange=function(e,i){var o,a,r,s,l,c,u,d,p,h,f,m;return f=(i=n(i))[0],h=this.locationFromPosition(f),a=this.getBlockAtIndex(h.index).getAttributes(),o=e.getBaseBlockAttributes(),m=a.slice(-o.length),t(o,m)?(u=a.slice(0,-o.length),c=e.copyWithBaseBlockAttributes(u)):c=e.copy({consolidateBlocks:!0}).copyWithBaseBlockAttributes(a),r=c.getBlockCount(),s=c.getBlockAtIndex(0),t(a,s.getAttributes())?(l=s.getTextWithoutBlockBreak(),p=this.insertTextAtRange(l,i),r>1&&(c=new this.constructor(c.getBlocks().slice(1)),d=f+l.getLength(),p=p.insertDocumentAtRange(c,d))):p=this.insertDocumentAtRange(c,i),p},c.prototype.insertTextAtRange=function(t,e){var i,o,a,r,s;return s=(e=n(e))[0],o=(r=this.locationFromPosition(s)).index,a=r.offset,i=this.removeTextAtRange(e),new this.constructor(i.blockList.editObjectAtIndex(o,function(e){return e.copyWithText(e.text.insertTextAtPosition(t,a))}))},c.prototype.removeTextAtRange=function(t){var e,i,a,r,s,l,c,u,d,p,h,f,m,g,v,_,b,y;return u=(p=t=n(t))[0],_=p[1],o(t)?this:(l=(h=this.locationRangeFromRange(t))[0],g=h[1],s=l.index,c=l.offset,r=this.getBlockAtIndex(s),m=g.index,v=g.offset,f=this.getBlockAtIndex(m),_-u==1&&r.getBlockBreakPosition()===c&&f.getBlockBreakPosition()!==v&&"\n"===f.text.getStringAtPosition(v)?a=this.blockList.editObjectAtIndex(m,function(t){return t.copyWithText(t.text.removeTextAtRange([v,v+1]))}):(d=r.text.getTextAtRange([0,c]),b=f.text.getTextAtRange([v,f.getLength()]),y=d.appendText(b),i=s!==m&&0===c&&r.getAttributeLevel()>=f.getAttributeLevel()?f.copyWithText(y):r.copyWithText(y),e=m+1-s,a=this.blockList.splice(s,e,i)),new this.constructor(a))},c.prototype.moveTextFromRangeToPosition=function(t,e){var i,o,a,r,l,c,u,d,p,h;return p=(c=t=n(t))[0],a=c[1],e>=p&&a>=e?this:(o=this.getDocumentAtRange(t),d=this.removeTextAtRange(t),(l=e>p)&&(e-=o.getLength()),r=(u=o.getBlocks())[0],0===(i=2<=u.length?s.call(u,1):[]).length?(h=r.getTextWithoutBlockBreak(),l&&(e+=1)):h=r.text,d=d.insertTextAtRange(h,e),0===i.length?d:(o=new this.constructor(i),e+=h.getLength(),d.insertDocumentAtRange(o,e)))},c.prototype.addAttributeAtRange=function(t,e,n){var o;return o=this.blockList,this.eachBlockAtRange(n,function(n,a,r){return o=o.editObjectAtIndex(r,function(){return i(t)?n.addAttribute(t,e):a[0]===a[1]?n:n.copyWithText(n.text.addAttributeAtRange(t,e,a))})}),new this.constructor(o)},c.prototype.addAttribute=function(t,e){var i;return i=this.blockList,this.eachBlock(function(n,o){return i=i.editObjectAtIndex(o,function(){return n.addAttribute(t,e)})}),new this.constructor(i)},c.prototype.removeAttributeAtRange=function(t,e){var n;return n=this.blockList,this.eachBlockAtRange(e,function(e,o,a){return i(t)?n=n.editObjectAtIndex(a,function(){return e.removeAttribute(t)}):o[0]!==o[1]?n=n.editObjectAtIndex(a,function(){return e.copyWithText(e.text.removeAttributeAtRange(t,o))}):void 0}),new this.constructor(n)},c.prototype.updateAttributesForAttachment=function(t,e){var i,n,o;return n=this.getRangeOfAttachment(e)[0],i=this.locationFromPosition(n).index,o=this.getTextAtIndex(i),new this.constructor(this.blockList.editObjectAtIndex(i,function(i){return i.copyWithText(o.updateAttributesForAttachment(t,e))}))},c.prototype.removeAttributeForAttachment=function(t,e){var i;return i=this.getRangeOfAttachment(e),this.removeAttributeAtRange(t,i)},c.prototype.insertBlockBreakAtRange=function(t){var i,o,a,r;return r=(t=n(t))[0],a=this.locationFromPosition(r).offset,o=this.removeTextAtRange(t),0===a&&(i=[new e.Block]),new this.constructor(o.blockList.insertSplittableListAtPosition(new e.SplittableList(i),r))},c.prototype.applyBlockAttributeAtRange=function(t,e,n){var o,a,r,s;return a=(r=this.expandRangeToLineBreaksAndSplitBlocks(n)).document,n=r.range,(o=i(t)).listAttribute?(a=(s=(a=a.removeLastListAttributeAtRange(n,{exceptAttributeName:t})).convertLineBreaksToBlockBreaksInRange(n)).document,n=s.range):a=o.exclusive?a.removeBlockAttributesAtRange(n):o.terminal?a.removeLastTerminalAttributeAtRange(n):a.consolidateBlocksAtRange(n),a.addAttributeAtRange(t,e,n)},c.prototype.removeLastListAttributeAtRange=function(t,e){var n;return null==e&&(e={}),n=this.blockList,this.eachBlockAtRange(t,function(t,o,a){var r;if((r=t.getLastAttribute())&&i(r).listAttribute&&r!==e.exceptAttributeName)return n=n.editObjectAtIndex(a,function(){return t.removeAttribute(r)})}),new this.constructor(n)},c.prototype.removeLastTerminalAttributeAtRange=function(t){var e;return e=this.blockList,this.eachBlockAtRange(t,function(t,n,o){var a;if((a=t.getLastAttribute())&&i(a).terminal)return e=e.editObjectAtIndex(o,function(){return t.removeAttribute(a)})}),new this.constructor(e)},c.prototype.removeBlockAttributesAtRange=function(t){var e;return e=this.blockList,this.eachBlockAtRange(t,function(t,i,n){return t.hasAttributes()?e=e.editObjectAtIndex(n,function(){return t.copyWithoutAttributes()}):void 0}),new this.constructor(e)},c.prototype.expandRangeToLineBreaksAndSplitBlocks=function(t){var e,i,o,a,r,s,l,c,u;return u=(s=t=n(t))[0],a=s[1],c=this.locationFromPosition(u),o=this.locationFromPosition(a),l=(e=this).getBlockAtIndex(c.index),null!=(c.offset=l.findLineBreakInDirectionFromPosition("backward",c.offset))&&(r=e.positionFromLocation(c),e=e.insertBlockBreakAtRange([r,r+1]),o.index+=1,o.offset-=e.getBlockAtIndex(c.index).getLength(),c.index+=1),c.offset=0,0===o.offset&&o.index>c.index?(o.index-=1,o.offset=e.getBlockAtIndex(o.index).getBlockBreakPosition()):("\n"===(i=e.getBlockAtIndex(o.index)).text.getStringAtRange([o.offset-1,o.offset])?o.offset-=1:o.offset=i.findLineBreakInDirectionFromPosition("forward",o.offset),o.offset!==i.getBlockBreakPosition()&&(r=e.positionFromLocation(o),e=e.insertBlockBreakAtRange([r,r+1]))),u=e.positionFromLocation(c),a=e.positionFromLocation(o),{document:e,range:t=n([u,a])}},c.prototype.convertLineBreaksToBlockBreaksInRange=function(t){var e,i,o;return i=(t=n(t))[0],o=this.getStringAtRange(t).slice(0,-1),e=this,o.replace(/.*?\n/g,function(t){return i+=t.length,e=e.insertBlockBreakAtRange([i-1,i])}),{document:e,range:t}},c.prototype.consolidateBlocksAtRange=function(t){var e,i,o,a,r;return r=(o=t=n(t))[0],i=o[1],a=this.locationFromPosition(r).index,e=this.locationFromPosition(i).index,new this.constructor(this.blockList.consolidateFromIndexToIndex(a,e))},c.prototype.getDocumentAtRange=function(t){var e;return t=n(t),e=this.blockList.getSplittableListInRange(t).toArray(),new this.constructor(e)},c.prototype.getStringAtRange=function(t){var e,i;return(i=t=n(t))[i.length-1]!==this.getLength()&&(e=-1),this.getDocumentAtRange(t).toString().slice(0,e)},c.prototype.getBlockAtIndex=function(t){return this.blockList.getObjectAtIndex(t)},c.prototype.getBlockAtPosition=function(t){var e;return e=this.locationFromPosition(t).index,this.getBlockAtIndex(e)},c.prototype.getTextAtIndex=function(t){var e;return null!=(e=this.getBlockAtIndex(t))?e.text:void 0},c.prototype.getTextAtPosition=function(t){var e;return e=this.locationFromPosition(t).index,this.getTextAtIndex(e)},c.prototype.getPieceAtPosition=function(t){var e,i,n;return e=(n=this.locationFromPosition(t)).index,i=n.offset,this.getTextAtIndex(e).getPieceAtPosition(i)},c.prototype.getCharacterAtPosition=function(t){var e,i,n;return e=(n=this.locationFromPosition(t)).index,i=n.offset,this.getTextAtIndex(e).getStringAtRange([i,i+1])},c.prototype.getLength=function(){return this.blockList.getEndPosition()},c.prototype.getBlocks=function(){return this.blockList.toArray()},c.prototype.getBlockCount=function(){return this.blockList.length},c.prototype.getEditCount=function(){return this.editCount},c.prototype.eachBlock=function(t){return this.blockList.eachObject(t)},c.prototype.eachBlockAtRange=function(t,e){var i,o,a,r,s,l,c,u,d,p,h,f;if(h=(l=t=n(t))[0],a=l[1],p=this.locationFromPosition(h),o=this.locationFromPosition(a),p.index===o.index)return i=this.getBlockAtIndex(p.index),f=[p.offset,o.offset],e(i,f,p.index);for(d=[],s=r=c=p.index,u=o.index;u>=c?u>=r:r>=u;s=u>=c?++r:--r)(i=this.getBlockAtIndex(s))?(f=function(){switch(s){case p.index:return[p.offset,i.text.getLength()];case o.index:return[0,o.offset];default:return[0,i.text.getLength()]}}(),d.push(e(i,f,s))):d.push(void 0);return d},c.prototype.getCommonAttributesAtRange=function(t){var i,a,r;return a=(t=n(t))[0],o(t)?this.getCommonAttributesAtPosition(a):(r=[],i=[],this.eachBlockAtRange(t,function(t,e){return e[0]!==e[1]?(r.push(t.text.getCommonAttributesAtRange(e)),i.push(u(t))):void 0}),e.Hash.fromCommonAttributesOfObjects(r).merge(e.Hash.fromCommonAttributesOfObjects(i)).toObject())},c.prototype.getCommonAttributesAtPosition=function(t){var i,n,o,a,r,s,c,d,p,h;if(r=(p=this.locationFromPosition(t)).index,d=p.offset,!(o=this.getBlockAtIndex(r)))return{};for(c in a=u(o),
i=o.text.getAttributesAtPosition(d),n=o.text.getAttributesAtPosition(d-1),s=function(){var t,i;for(c in i=[],t=e.config.textAttributes)(h=t[c]).inheritable&&i.push(c);return i}(),n)((h=n[c])===i[c]||l.call(s,c)>=0)&&(a[c]=h);return a},c.prototype.getRangeOfCommonAttributeAtPosition=function(t,e){var i,o,a,r,s,l,c,u;return a=(s=this.locationFromPosition(e)).index,r=s.offset,u=(l=this.getTextAtIndex(a).getExpandedRangeForAttributeAtOffset(t,r))[0],o=l[1],c=this.positionFromLocation({index:a,offset:u}),i=this.positionFromLocation({index:a,offset:o}),n([c,i])},c.prototype.getBaseBlockAttributes=function(){var t,e,i,n,o,a,r;for(t=this.getBlockAtIndex(0).getAttributes(),i=n=1,r=this.getBlockCount();r>=1?r>n:n>r;i=r>=1?++n:--n)e=this.getBlockAtIndex(i).getAttributes(),a=Math.min(t.length,e.length),t=function(){var i,n,r;for(r=[],o=i=0,n=a;(n>=0?n>i:i>n)&&e[o]===t[o];o=n>=0?++i:--i)r.push(e[o]);return r}();return t},u=function(t){var e,i;return i={},(e=t.getLastAttribute())&&(i[e]=!0),i},c.prototype.getAttachmentById=function(t){var e,i,n,o;for(i=0,n=(o=this.getAttachments()).length;n>i;i++)if((e=o[i]).id===t)return e},c.prototype.getAttachmentPieces=function(){var t;return t=[],this.blockList.eachObject(function(e){var i;return i=e.text,t=t.concat(i.getAttachmentPieces())}),t},c.prototype.getAttachments=function(){var t,e,i,n,o;for(o=[],t=0,e=(n=this.getAttachmentPieces()).length;e>t;t++)i=n[t],o.push(i.attachment);return o},c.prototype.getRangeOfAttachment=function(t){var e,i,o,a,r,s,l;for(a=0,i=e=0,o=(r=this.blockList.toArray()).length;o>e;i=++e){if(l=(s=r[i].text).getRangeOfAttachment(t))return n([a+l[0],a+l[1]]);a+=s.getLength()}},c.prototype.getLocationRangeOfAttachment=function(t){var e;return e=this.getRangeOfAttachment(t),this.locationRangeFromRange(e)},c.prototype.getAttachmentPieceForAttachment=function(t){var e,i,n,o;for(e=0,i=(o=this.getAttachmentPieces()).length;i>e;e++)if((n=o[e]).attachment===t)return n},c.prototype.findRangesForBlockAttribute=function(t){var e,i,n,o,a,r,s;for(a=0,r=[],i=0,n=(s=this.getBlocks()).length;n>i;i++)o=(e=s[i]).getLength(),e.hasAttribute(t)&&r.push([a,a+o]),a+=o;return r},c.prototype.findRangesForTextAttribute=function(t,e){var i,n,o,a,r,s,l,c,u,d;for(d=(null!=e?e:{}).withValue,s=0,l=[],c=[],a=function(e){return null!=d?e.getAttribute(t)===d:e.hasAttribute(t)},i=0,n=(u=this.getPieces()).length;n>i;i++)o=(r=u[i]).getLength(),a(r)&&(l[1]===s?l[1]=s+o:c.push(l=[s,s+o])),s+=o;return c},c.prototype.locationFromPosition=function(t){var e,i;return null!=(i=this.blockList.findIndexAndOffsetAtPosition(Math.max(0,t))).index?i:{index:(e=this.getBlocks()).length-1,offset:e[e.length-1].getLength()}},c.prototype.positionFromLocation=function(t){return this.blockList.findPositionAtIndexAndOffset(t.index,t.offset)},c.prototype.locationRangeFromPosition=function(t){return n(this.locationFromPosition(t))},c.prototype.locationRangeFromRange=function(t){var e,i,o,a;if(t=n(t))return a=t[0],i=t[1],o=this.locationFromPosition(a),e=this.locationFromPosition(i),n([o,e])},c.prototype.rangeFromLocationRange=function(t){var e,i;return t=n(t),e=this.positionFromLocation(t[0]),o(t)||(i=this.positionFromLocation(t[1])),n([e,i])},c.prototype.isEqualTo=function(t){return this.blockList.isEqualTo(null!=t?t.blockList:void 0)},c.prototype.getTexts=function(){var t,e,i,n,o;for(o=[],e=0,i=(n=this.getBlocks()).length;i>e;e++)t=n[e],o.push(t.text);return o},c.prototype.getPieces=function(){var t,e,i,n,o;for(i=[],t=0,e=(n=this.getTexts()).length;e>t;t++)o=n[t],i.push.apply(i,o.getPieces());return i},c.prototype.getObjects=function(){return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())},c.prototype.toSerializableDocument=function(){var t;return t=[],this.blockList.eachObject(function(e){return t.push(e.copyWithText(e.text.toSerializableText()))}),new this.constructor(t)},c.prototype.toString=function(){return this.blockList.toString()},c.prototype.toJSON=function(){return this.blockList.toJSON()},c.prototype.toConsole=function(){var t;return JSON.stringify(function(){var e,i,n,o;for(o=[],e=0,i=(n=this.blockList.toArray()).length;i>e;e++)t=n[e],o.push(JSON.parse(t.text.toConsole()));return o}.call(this))},c}(e.Object)}.call(this),function(){e.LineBreakInsertion=function(){function t(t){var e;this.composition=t,this.document=this.composition.document,e=this.composition.getSelectedRange(),this.startPosition=e[0],this.endPosition=e[1],this.startLocation=this.document.locationFromPosition(this.startPosition),this.endLocation=this.document.locationFromPosition(this.endPosition),this.block=this.document.getBlockAtIndex(this.endLocation.index),this.breaksOnReturn=this.block.breaksOnReturn(),this.previousCharacter=this.block.text.getStringAtPosition(this.endLocation.offset-1),this.nextCharacter=this.block.text.getStringAtPosition(this.endLocation.offset)}return t.prototype.shouldInsertBlockBreak=function(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?0!==this.startLocation.offset:this.breaksOnReturn&&"\n"!==this.nextCharacter},t.prototype.shouldBreakFormattedBlock=function(){return this.block.hasAttributes()&&!this.block.isListItem()&&(this.breaksOnReturn&&"\n"===this.nextCharacter||"\n"===this.previousCharacter)},t.prototype.shouldDecreaseListLevel=function(){return this.block.hasAttributes()&&this.block.isListItem()&&this.block.isEmpty()},t.prototype.shouldPrependListItem=function(){return this.block.isListItem()&&0===this.startLocation.offset&&!this.block.isEmpty()},t.prototype.shouldRemoveLastBlockAttribute=function(){return this.block.hasAttributes()&&!this.block.isListItem()&&this.block.isEmpty()},t}()}.call(this),function(){var t,i,n,o,a,r,s,l,c,u,d=function(t,e){function i(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},p={}.hasOwnProperty;r=e.normalizeRange,c=e.rangesAreEqual,l=e.rangeIsCollapsed,s=e.objectsAreEqual,t=e.arrayStartsWith,u=e.summarizeArrayChange,n=e.getAllAttributeNames,o=e.getBlockConfig,a=e.getTextConfig,i=e.extend,e.Composition=function(p){function h(){this.document=new e.Document,this.attachments=[],this.currentAttributes={},this.revision=0}var f;return d(h,p),h.prototype.setDocument=function(t){var e;return t.isEqualTo(this.document)?void 0:(this.document=t,this.refreshAttachments(),this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidChangeDocument?e.compositionDidChangeDocument(t):void 0)},h.prototype.getSnapshot=function(){return{document:this.document,selectedRange:this.getSelectedRange()}},h.prototype.loadSnapshot=function(t){var i,n,o,a;return i=t.document,a=t.selectedRange,null!=(n=this.delegate)&&"function"==typeof n.compositionWillLoadSnapshot&&n.compositionWillLoadSnapshot(),this.setDocument(null!=i?i:new e.Document),this.setSelection(null!=a?a:[0,0]),null!=(o=this.delegate)&&"function"==typeof o.compositionDidLoadSnapshot?o.compositionDidLoadSnapshot():void 0},h.prototype.insertText=function(t,e){var i,n,o,a;return a=(null!=e?e:{updatePosition:!0}).updatePosition,n=this.getSelectedRange(),this.setDocument(this.document.insertTextAtRange(t,n)),i=(o=n[0])+t.getLength(),a&&this.setSelection(i),this.notifyDelegateOfInsertionAtRange([o,i])},h.prototype.insertBlock=function(t){var i;return null==t&&(t=new e.Block),i=new e.Document([t]),this.insertDocument(i)},h.prototype.insertDocument=function(t){var i,n,o;return null==t&&(t=new e.Document),n=this.getSelectedRange(),this.setDocument(this.document.insertDocumentAtRange(t,n)),i=(o=n[0])+t.getLength(),this.setSelection(i),this.notifyDelegateOfInsertionAtRange([o,i])},h.prototype.insertString=function(t,i){var n,o;return n=this.getCurrentTextAttributes(),o=e.Text.textForStringWithAttributes(t,n),this.insertText(o,i)},h.prototype.insertBlockBreak=function(){var t,e,i;return e=this.getSelectedRange(),this.setDocument(this.document.insertBlockBreakAtRange(e)),t=(i=e[0])+1,this.setSelection(t),this.notifyDelegateOfInsertionAtRange([i,t])},h.prototype.insertLineBreak=function(){var t,i;return(i=new e.LineBreakInsertion(this)).shouldDecreaseListLevel()?(this.decreaseListLevel(),this.setSelection(i.startPosition)):i.shouldPrependListItem()?(t=new e.Document([i.block.copyWithoutText()]),this.insertDocument(t)):i.shouldInsertBlockBreak()?this.insertBlockBreak():i.shouldRemoveLastBlockAttribute()?this.removeLastBlockAttribute():i.shouldBreakFormattedBlock()?this.breakFormattedBlock(i):this.insertString("\n")},h.prototype.insertHTML=function(t){var i,n,o,a;return i=e.Document.fromHTML(t),o=this.getSelectedRange(),this.setDocument(this.document.mergeDocumentAtRange(i,o)),n=(a=o[0])+i.getLength()-1,this.setSelection(n),this.notifyDelegateOfInsertionAtRange([a,n])},h.prototype.replaceHTML=function(t){var i,n,o;return i=e.Document.fromHTML(t).copyUsingObjectsFromDocument(this.document),n=this.getLocationRange({strict:!1}),o=this.document.rangeFromLocationRange(n),this.setDocument(i),this.setSelection(o)},h.prototype.insertFile=function(t){return this.insertFiles([t])},h.prototype.insertFiles=function(t){var i,n,o,a,r,s;for(n=[],a=0,r=t.length;r>a;a++)o=t[a],(null!=(s=this.delegate)?s.compositionShouldAcceptFile(o):void 0)&&(i=e.Attachment.attachmentForFile(o),n.push(i));return this.insertAttachments(n)},h.prototype.insertAttachment=function(t){return this.insertAttachments([t])},h.prototype.insertAttachments=function(t){var i,n,o,a,r,s,l,c,u;for(c=new e.Text,a=0,r=t.length;r>a;a++)u=(i=t[a]).getType(),s=null!=(l=e.config.attachments[u])?l.presentation:void 0,o=this.getCurrentTextAttributes(),s&&(o.presentation=s),n=e.Text.textForAttachmentWithAttributes(i,o),c=c.appendText(n);return this.insertText(c)},h.prototype.shouldManageDeletingInDirection=function(t){var e;if(e=this.getLocationRange(),l(e)){if("backward"===t&&0===e[0].offset)return!0;if(this.shouldManageMovingCursorInDirection(t))return!0}else if(e[0].index!==e[1].index)return!0;return!1},h.prototype.deleteInDirection=function(t,e){var i,n,o,a,r,s,c,u;return a=(null!=e?e:{}).length,r=this.getLocationRange(),s=this.getSelectedRange(),(c=l(s))?o="backward"===t&&0===r[0].offset:u=r[0].index!==r[1].index,!(o&&this.canDecreaseBlockAttributeLevel()&&(n=this.getBlock(),n.isListItem()?this.decreaseListLevel():this.decreaseBlockAttributeLevel(),this.setSelection(s[0]),n.isEmpty()))&&(c&&(s=this.getExpandedRangeInDirection(t,{length:a}),"backward"===t&&(i=this.getAttachmentAtRange(s))),i?(this.editAttachment(i),!1):(this.setDocument(this.document.removeTextAtRange(s)),this.setSelection(s[0]),!o&&!u&&void 0))},h.prototype.moveTextFromRange=function(t){var e;return e=this.getSelectedRange()[0],this.setDocument(this.document.moveTextFromRangeToPosition(t,e)),this.setSelection(e)},h.prototype.removeAttachment=function(t){var e;return(e=this.document.getRangeOfAttachment(t))?(this.stopEditingAttachment(),this.setDocument(this.document.removeTextAtRange(e)),this.setSelection(e[0])):void 0},h.prototype.removeLastBlockAttribute=function(){var t,e,i,n;return n=(i=this.getSelectedRange())[0],e=i[1],t=this.document.getBlockAtPosition(e),this.removeCurrentAttribute(t.getLastAttribute()),this.setSelection(n)},f=" ",h.prototype.insertPlaceholder=function(){return this.placeholderPosition=this.getPosition(),this.insertString(f)},h.prototype.selectPlaceholder=function(){return null!=this.placeholderPosition?(this.setSelectedRange([this.placeholderPosition,this.placeholderPosition+f.length]),this.getSelectedRange()):void 0},h.prototype.forgetPlaceholder=function(){return this.placeholderPosition=null},h.prototype.hasCurrentAttribute=function(t){var e;return null!=(e=this.currentAttributes[t])&&!1!==e},h.prototype.toggleCurrentAttribute=function(t){var e;return(e=!this.currentAttributes[t])?this.setCurrentAttribute(t,e):this.removeCurrentAttribute(t)},h.prototype.canSetCurrentAttribute=function(t){return o(t)?this.canSetCurrentBlockAttribute(t):this.canSetCurrentTextAttribute(t)},h.prototype.canSetCurrentTextAttribute=function(){var t,e,i,n;if(t=this.getSelectedDocument()){for(e=0,i=(n=t.getAttachments()).length;i>e;e++)if(!n[e].hasContent())return!1;return!0}},h.prototype.canSetCurrentBlockAttribute=function(){var t;if(t=this.getBlock())return!t.isTerminalBlock()},h.prototype.setCurrentAttribute=function(t,e){return o(t)?this.setBlockAttribute(t,e):(this.setTextAttribute(t,e),this.currentAttributes[t]=e,this.notifyDelegateOfCurrentAttributesChange())},h.prototype.setTextAttribute=function(t,i){var n,o;if(n=this.getSelectedRange())return n[0]!==n[1]?this.setDocument(this.document.addAttributeAtRange(t,i,n)):"href"===t?(o=e.Text.textForStringWithAttributes(i,{href:i}),this.insertText(o)):void 0},h.prototype.setBlockAttribute=function(t,e){var i;if(i=this.getSelectedRange())return this.canSetCurrentAttribute(t)?(this.getBlock(),this.setDocument(this.document.applyBlockAttributeAtRange(t,e,i)),this.setSelection(i)):void 0},h.prototype.removeCurrentAttribute=function(t){return o(t)?(this.removeBlockAttribute(t),this.updateCurrentAttributes()):(this.removeTextAttribute(t),delete this.currentAttributes[t],this.notifyDelegateOfCurrentAttributesChange())},h.prototype.removeTextAttribute=function(t){var e;if(e=this.getSelectedRange())return this.setDocument(this.document.removeAttributeAtRange(t,e))},h.prototype.removeBlockAttribute=function(t){var e;if(e=this.getSelectedRange())return this.setDocument(this.document.removeAttributeAtRange(t,e))},h.prototype.canDecreaseNestingLevel=function(){var t;return(null!=(t=this.getBlock())?t.getNestingLevel():void 0)>0},h.prototype.canIncreaseNestingLevel=function(){var e,i,n;if(e=this.getBlock())return null!=(n=o(e.getLastNestableAttribute()))&&n.listAttribute?(i=this.getPreviousBlock())?t(i.getListItemAttributes(),e.getListItemAttributes()):void 0:e.getNestingLevel()>0},h.prototype.decreaseNestingLevel=function(){var t;if(t=this.getBlock())return this.setDocument(this.document.replaceBlock(t,t.decreaseNestingLevel()))},h.prototype.increaseNestingLevel=function(){var t;if(t=this.getBlock())return this.setDocument(this.document.replaceBlock(t,t.increaseNestingLevel()))},h.prototype.canDecreaseBlockAttributeLevel=function(){var t;return(null!=(t=this.getBlock())?t.getAttributeLevel():void 0)>0},h.prototype.decreaseBlockAttributeLevel=function(){var t,e;return(t=null!=(e=this.getBlock())?e.getLastAttribute():void 0)?this.removeCurrentAttribute(t):void 0},h.prototype.decreaseListLevel=function(){var t,e,i,n,o,a;for(a=this.getSelectedRange()[0],i=o=this.document.locationFromPosition(a).index,t=this.getBlock().getAttributeLevel();(e=this.document.getBlockAtIndex(i+1))&&e.isListItem()&&e.getAttributeLevel()>t;)i++;return a=this.document.positionFromLocation({index:o,offset:0}),n=this.document.positionFromLocation({index:i,offset:0}),this.setDocument(this.document.removeLastListAttributeAtRange([a,n]))},h.prototype.updateCurrentAttributes=function(){var t,e,i,o,a,r;if(r=this.getSelectedRange({ignoreLock:!0})){for(e=this.document.getCommonAttributesAtRange(r),i=0,o=(a=n()).length;o>i;i++)e[t=a[i]]||this.canSetCurrentAttribute(t)||(e[t]=!1);if(!s(e,this.currentAttributes))return this.currentAttributes=e,this.notifyDelegateOfCurrentAttributesChange()}},h.prototype.getCurrentAttributes=function(){return i.call({},this.currentAttributes)},h.prototype.getCurrentTextAttributes=function(){var t,e,i,n;for(e in t={},i=this.currentAttributes)!1!==(n=i[e])&&a(e)&&(t[e]=n);return t},h.prototype.freezeSelection=function(){return this.setCurrentAttribute("frozen",!0)},h.prototype.thawSelection=function(){return this.removeCurrentAttribute("frozen")},h.prototype.hasFrozenSelection=function(){return this.hasCurrentAttribute("frozen")},h.proxyMethod("getSelectionManager().getPointRange"),h.proxyMethod("getSelectionManager().setLocationRangeFromPointRange"),h.proxyMethod("getSelectionManager().createLocationRangeFromDOMRange"),h.proxyMethod("getSelectionManager().locationIsCursorTarget"),h.proxyMethod("getSelectionManager().selectionIsExpanded"),h.proxyMethod("delegate?.getSelectionManager"),h.prototype.setSelection=function(t){var e,i;return e=this.document.locationRangeFromRange(t),null!=(i=this.delegate)?i.compositionDidRequestChangingSelectionToLocationRange(e):void 0},h.prototype.getSelectedRange=function(){var t;return(t=this.getLocationRange())?this.document.rangeFromLocationRange(t):void 0},h.prototype.setSelectedRange=function(t){var e;return e=this.document.locationRangeFromRange(t),this.getSelectionManager().setLocationRange(e)},h.prototype.getPosition=function(){var t;return(t=this.getLocationRange())?this.document.positionFromLocation(t[0]):void 0},h.prototype.getLocationRange=function(t){var e,i;return null!=(e=null!=(i=this.targetLocationRange)?i:this.getSelectionManager().getLocationRange(t))?e:r({index:0,offset:0})},h.prototype.withTargetLocationRange=function(t,e){var i;this.targetLocationRange=t;try{i=e()}finally{this.targetLocationRange=null}return i},h.prototype.withTargetRange=function(t,e){var i;return i=this.document.locationRangeFromRange(t),this.withTargetLocationRange(i,e)},h.prototype.withTargetDOMRange=function(t,e){var i;return i=this.createLocationRangeFromDOMRange(t,{strict:!1}),this.withTargetLocationRange(i,e)},h.prototype.getExpandedRangeInDirection=function(t,e){var i,n,o,a;return n=(null!=e?e:{}).length,a=(o=this.getSelectedRange())[0],i=o[1],"backward"===t?n?a-=n:a=this.translateUTF16PositionFromOffset(a,-1):n?i+=n:i=this.translateUTF16PositionFromOffset(i,1),r([a,i])},h.prototype.shouldManageMovingCursorInDirection=function(t){var e;return!!this.editingAttachment||(e=this.getExpandedRangeInDirection(t),null!=this.getAttachmentAtRange(e))},h.prototype.moveCursorInDirection=function(t){var e,i,n,o;return this.editingAttachment?n=this.document.getRangeOfAttachment(this.editingAttachment):(o=this.getSelectedRange(),n=this.getExpandedRangeInDirection(t),i=!c(o,n)),this.setSelectedRange("backward"===t?n[0]:n[1]),i&&(e=this.getAttachmentAtRange(n))?this.editAttachment(e):void 0},h.prototype.expandSelectionInDirection=function(t,e){var i,n;return i=(null!=e?e:{}).length,n=this.getExpandedRangeInDirection(t,{length:i}),this.setSelectedRange(n)},h.prototype.expandSelectionForEditing=function(){return this.hasCurrentAttribute("href")?this.expandSelectionAroundCommonAttribute("href"):void 0},h.prototype.expandSelectionAroundCommonAttribute=function(t){var e,i;return e=this.getPosition(),i=this.document.getRangeOfCommonAttributeAtPosition(t,e),this.setSelectedRange(i)},h.prototype.selectionContainsAttachments=function(){var t;return(null!=(t=this.getSelectedAttachments())?t.length:void 0)>0},h.prototype.selectionIsInCursorTarget=function(){return this.editingAttachment||this.positionIsCursorTarget(this.getPosition())},h.prototype.positionIsCursorTarget=function(t){var e;return(e=this.document.locationFromPosition(t))?this.locationIsCursorTarget(e):void 0},h.prototype.positionIsBlockBreak=function(t){var e;return null!=(e=this.document.getPieceAtPosition(t))?e.isBlockBreak():void 0},h.prototype.getSelectedDocument=function(){var t;return(t=this.getSelectedRange())?this.document.getDocumentAtRange(t):void 0},h.prototype.getSelectedAttachments=function(){var t;return null!=(t=this.getSelectedDocument())?t.getAttachments():void 0},h.prototype.getAttachments=function(){return this.attachments.slice(0)},h.prototype.refreshAttachments=function(){var t,e,i,n,o,a,r,s,l,c,d,p;for(i=this.document.getAttachments(),t=(s=u(this.attachments,i)).added,d=s.removed,this.attachments=i,n=0,a=d.length;a>n;n++)(e=d[n]).delegate=null,null!=(l=this.delegate)&&"function"==typeof l.compositionDidRemoveAttachment&&l.compositionDidRemoveAttachment(e);for(p=[],o=0,r=t.length;r>o;o++)(e=t[o]).delegate=this,p.push(null!=(c=this.delegate)&&"function"==typeof c.compositionDidAddAttachment?c.compositionDidAddAttachment(e):void 0);return p},h.prototype.attachmentDidChangeAttributes=function(t){var e;return this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidEditAttachment?e.compositionDidEditAttachment(t):void 0},h.prototype.attachmentDidChangePreviewURL=function(t){var e;return this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidChangeAttachmentPreviewURL?e.compositionDidChangeAttachmentPreviewURL(t):void 0},h.prototype.editAttachment=function(t,e){var i;if(t!==this.editingAttachment)return this.stopEditingAttachment(),this.editingAttachment=t,null!=(i=this.delegate)&&"function"==typeof i.compositionDidStartEditingAttachment?i.compositionDidStartEditingAttachment(this.editingAttachment,e):void 0},h.prototype.stopEditingAttachment=function(){var t;if(this.editingAttachment)return null!=(t=this.delegate)&&"function"==typeof t.compositionDidStopEditingAttachment&&t.compositionDidStopEditingAttachment(this.editingAttachment),this.editingAttachment=null},h.prototype.updateAttributesForAttachment=function(t,e){return this.setDocument(this.document.updateAttributesForAttachment(t,e))},h.prototype.removeAttributeForAttachment=function(t,e){return this.setDocument(this.document.removeAttributeForAttachment(t,e))},h.prototype.breakFormattedBlock=function(t){var i,n,o,a,r;return n=t.document,i=t.block,r=[(a=t.startPosition)-1,a],i.getBlockBreakPosition()===t.startLocation.offset?(i.breaksOnReturn()&&"\n"===t.nextCharacter?a+=1:n=n.removeTextAtRange(r),r=[a,a]):"\n"===t.nextCharacter?"\n"===t.previousCharacter?r=[a-1,a+1]:(r=[a,a+1],a+=1):t.startLocation.offset-1!=0&&(a+=1),o=new e.Document([i.removeLastAttribute().copyWithoutText()]),this.setDocument(n.insertDocumentAtRange(o,r)),this.setSelection(a)},h.prototype.getPreviousBlock=function(){var t,e;return(e=this.getLocationRange())&&(t=e[0].index)>0?this.document.getBlockAtIndex(t-1):void 0},h.prototype.getBlock=function(){var t;return(t=this.getLocationRange())?this.document.getBlockAtIndex(t[0].index):void 0},h.prototype.getAttachmentAtRange=function(t){var i;return(i=this.document.getDocumentAtRange(t)).toString()===e.OBJECT_REPLACEMENT_CHARACTER+"\n"?i.getAttachments()[0]:void 0},h.prototype.notifyDelegateOfCurrentAttributesChange=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.compositionDidChangeCurrentAttributes?t.compositionDidChangeCurrentAttributes(this.currentAttributes):void 0},h.prototype.notifyDelegateOfInsertionAtRange=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionDidPerformInsertionAtRange?e.compositionDidPerformInsertionAtRange(t):void 0},h.prototype.translateUTF16PositionFromOffset=function(t,e){var i,n;return i=(n=this.document.toUTF16String()).offsetFromUCS2Offset(t),n.offsetToUCS2Offset(i+e)},h}(e.BasicObject)}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.UndoManager=function(e){function i(t){this.composition=t,this.undoEntries=[],this.redoEntries=[]}var n;return t(i,e),i.prototype.recordUndoEntry=function(t,e){var i,o,a,r,s;return o=(r=null!=e?e:{}).context,i=r.consolidatable,a=this.undoEntries.slice(-1)[0],i&&n(a,t,o)?void 0:(s=this.createEntry({description:t,context:o}),this.undoEntries.push(s),this.redoEntries=[])},i.prototype.undo=function(){var t,e;return(e=this.undoEntries.pop())?(t=this.createEntry(e),this.redoEntries.push(t),this.composition.loadSnapshot(e.snapshot)):void 0},i.prototype.redo=function(){var t,e;return(t=this.redoEntries.pop())?(e=this.createEntry(t),this.undoEntries.push(e),this.composition.loadSnapshot(t.snapshot)):void 0},i.prototype.canUndo=function(){return this.undoEntries.length>0},i.prototype.canRedo=function(){return this.redoEntries.length>0},i.prototype.createEntry=function(t){var e,i,n;return i=(n=null!=t?t:{}).description,e=n.context,{description:null!=i?i.toString():void 0,context:JSON.stringify(e),snapshot:this.composition.getSnapshot()}},n=function(t,e,i){return(null!=t?t.description:void 0)===(null!=e?e.toString():void 0)&&(null!=t?t.context:void 0)===JSON.stringify(i)},i}(e.BasicObject)}.call(this),function(){var t;e.attachmentGalleryFilter=function(e){var i;return(i=new t(e)).perform(),i.getSnapshot()},t=function(){function t(t){this.document=t.document,this.selectedRange=t.selectedRange}var e,i,n;return e="attachmentGallery",i="presentation",n="gallery",t.prototype.perform=function(){return this.removeBlockAttribute(),this.applyBlockAttribute()},t.prototype.getSnapshot=function(){return{document:this.document,selectedRange:this.selectedRange}},t.prototype.removeBlockAttribute=function(){var t,i,n,o,a;for(a=[],t=0,i=(o=this.findRangesOfBlocks()).length;i>t;t++)n=o[t],a.push(this.document=this.document.removeAttributeAtRange(e,n));return a},t.prototype.applyBlockAttribute=function(){var t,i,n,o,a,r;for(n=0,r=[],t=0,i=(a=this.findRangesOfPieces()).length;i>t;t++)(o=a[t])[1]-o[0]>1&&(o[0]+=n,o[1]+=n,"\n"!==this.document.getCharacterAtPosition(o[1])&&(this.document=this.document.insertBlockBreakAtRange(o[1]),o[1]<this.selectedRange[1]&&this.moveSelectedRangeForward(),o[1]++,n++),0!==o[0]&&"\n"!==this.document.getCharacterAtPosition(o[0]-1)&&(this.document=this.document.insertBlockBreakAtRange(o[0]),o[0]<this.selectedRange[0]&&this.moveSelectedRangeForward(),o[0]++,n++),r.push(this.document=this.document.applyBlockAttributeAtRange(e,!0,o)));return r},t.prototype.findRangesOfBlocks=function(){return this.document.findRangesForBlockAttribute(e)},t.prototype.findRangesOfPieces=function(){return this.document.findRangesForTextAttribute(i,{withValue:n})},t.prototype.moveSelectedRangeForward=function(){return this.selectedRange[0]+=1,this.selectedRange[1]+=1},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.Editor=function(){function i(i,o,a){this.composition=i,this.selectionManager=o,this.element=a,this.insertFiles=t(this.insertFiles,this),this.undoManager=new e.UndoManager(this.composition),this.filters=n.slice(0)}var n;return n=[e.attachmentGalleryFilter],i.prototype.loadDocument=function(t){return this.loadSnapshot({document:t,selectedRange:[0,0]})},i.prototype.loadHTML=function(t){return null==t&&(t=""),this.loadDocument(e.Document.fromHTML(t,{referenceElement:this.element}))},i.prototype.loadJSON=function(t){var i,n;return i=t.document,n=t.selectedRange,i=e.Document.fromJSON(i),this.loadSnapshot({document:i,selectedRange:n})},i.prototype.loadSnapshot=function(t){return this.undoManager=new e.UndoManager(this.composition),this.composition.loadSnapshot(t)},i.prototype.getDocument=function(){return this.composition.document},i.prototype.getSelectedDocument=function(){return this.composition.getSelectedDocument()},i.prototype.getSnapshot=function(){return this.composition.getSnapshot()},i.prototype.toJSON=function(){return this.getSnapshot()},i.prototype.deleteInDirection=function(t){return this.composition.deleteInDirection(t)},i.prototype.insertAttachment=function(t){return this.composition.insertAttachment(t)},i.prototype.insertAttachments=function(t){return this.composition.insertAttachments(t)},i.prototype.insertDocument=function(t){return this.composition.insertDocument(t)},i.prototype.insertFile=function(t){return this.composition.insertFile(t)},i.prototype.insertFiles=function(t){return this.composition.insertFiles(t)},i.prototype.insertHTML=function(t){return this.composition.insertHTML(t)},i.prototype.insertString=function(t){return this.composition.insertString(t)},i.prototype.insertText=function(t){return this.composition.insertText(t)},i.prototype.insertLineBreak=function(){return this.composition.insertLineBreak()},i.prototype.getSelectedRange=function(){return this.composition.getSelectedRange()},i.prototype.getPosition=function(){return this.composition.getPosition()},i.prototype.getClientRectAtPosition=function(t){var e;return e=this.getDocument().locationRangeFromRange([t,t+1]),this.selectionManager.getClientRectAtLocationRange(e)},i.prototype.expandSelectionInDirection=function(t){return this.composition.expandSelectionInDirection(t)},i.prototype.moveCursorInDirection=function(t){return this.composition.moveCursorInDirection(t)},i.prototype.setSelectedRange=function(t){return this.composition.setSelectedRange(t)},i.prototype.activateAttribute=function(t,e){return null==e&&(e=!0),this.composition.setCurrentAttribute(t,e)},i.prototype.attributeIsActive=function(t){return this.composition.hasCurrentAttribute(t)},i.prototype.canActivateAttribute=function(t){return this.composition.canSetCurrentAttribute(t)},i.prototype.deactivateAttribute=function(t){return this.composition.removeCurrentAttribute(t)},i.prototype.canDecreaseNestingLevel=function(){return this.composition.canDecreaseNestingLevel()},i.prototype.canIncreaseNestingLevel=function(){return this.composition.canIncreaseNestingLevel()},i.prototype.decreaseNestingLevel=function(){return this.canDecreaseNestingLevel()?this.composition.decreaseNestingLevel():void 0},i.prototype.increaseNestingLevel=function(){return this.canIncreaseNestingLevel()?this.composition.increaseNestingLevel():void 0},i.prototype.canRedo=function(){return this.undoManager.canRedo()},i.prototype.canUndo=function(){return this.undoManager.canUndo()},i.prototype.recordUndoEntry=function(t,e){var i,n,o;return n=(o=null!=e?e:{}).context,i=o.consolidatable,this.undoManager.recordUndoEntry(t,{context:n,consolidatable:i})},i.prototype.redo=function(){return this.canRedo()?this.undoManager.redo():void 0},i.prototype.undo=function(){return this.canUndo()?this.undoManager.undo():void 0},i}()}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.ManagedAttachment=function(e){function i(t,e){var i;this.attachmentManager=t,this.attachment=e,i=this.attachment,this.id=i.id,this.file=i.file}return t(i,e),i.prototype.remove=function(){return this.attachmentManager.requestRemovalOfAttachment(this.attachment)},i.proxyMethod("attachment.getAttribute"),i.proxyMethod("attachment.hasAttribute"),i.proxyMethod("attachment.setAttribute"),i.proxyMethod("attachment.getAttributes"),i.proxyMethod("attachment.setAttributes"),i.proxyMethod("attachment.isPending"),i.proxyMethod("attachment.isPreviewable"),i.proxyMethod("attachment.getURL"),i.proxyMethod("attachment.getHref"),i.proxyMethod("attachment.getFilename"),i.proxyMethod("attachment.getFilesize"),i.proxyMethod("attachment.getFormattedFilesize"),i.proxyMethod("attachment.getExtension"),i.proxyMethod("attachment.getContentType"),i.proxyMethod("attachment.getFile"),i.proxyMethod("attachment.setFile"),i.proxyMethod("attachment.releaseFile"),i.proxyMethod("attachment.getUploadProgress"),i.proxyMethod("attachment.setUploadProgress"),i}(e.BasicObject)}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.AttachmentManager=function(i){function n(t){var e,i,n;for(null==t&&(t=[]),this.managedAttachments={},i=0,n=t.length;n>i;i++)e=t[i],this.manageAttachment(e)}return t(n,i),n.prototype.getAttachments=function(){var t,e,i,n;for(e in n=[],i=this.managedAttachments)t=i[e],n.push(t);return n},n.prototype.manageAttachment=function(t){var i,n;return null!=(i=this.managedAttachments)[n=t.id]?i[n]:i[n]=new e.ManagedAttachment(this,t)},n.prototype.attachmentIsManaged=function(t){return t.id in this.managedAttachments},n.prototype.requestRemovalOfAttachment=function(t){var e;return this.attachmentIsManaged(t)&&null!=(e=this.delegate)&&"function"==typeof e.attachmentManagerDidRequestRemovalOfAttachment?e.attachmentManagerDidRequestRemovalOfAttachment(t):void 0},n.prototype.unmanageAttachment=function(t){var e;return e=this.managedAttachments[t.id],delete this.managedAttachments[t.id],e},n}(e.BasicObject)}.call(this),function(){var t,i,n,o,a,r,s,l,c,u,d;t=e.elementContainsNode,i=e.findChildIndexOfNode,a=e.nodeIsBlockStart,r=e.nodeIsBlockStartComment,o=e.nodeIsBlockContainer,s=e.nodeIsCursorTarget,l=e.nodeIsEmptyTextNode,c=e.nodeIsTextNode,n=e.nodeIsAttachmentElement,u=e.tagName,d=e.walkTree,e.LocationMapper=function(){function e(t){this.element=t}var p,h,f,m;return e.prototype.findLocationFromContainerAndOffset=function(e,n,o){var r,l,u,p,m,g,v;for(g=(null!=o?o:{strict:!0}).strict,l=0,u=!1,p={index:0,offset:0},(r=this.findAttachmentElementParentForNode(e))&&(e=r.parentNode,n=i(r)),v=d(this.element,{usingFilter:f});v.nextNode();){if((m=v.currentNode)===e&&c(e)){s(m)||(p.offset+=n);break}if(m.parentNode===e){if(l++===n)break}else if(!t(e,m)&&l>0)break;a(m,{strict:g})?(u&&p.index++,p.offset=0,u=!0):p.offset+=h(m)}return p},
e.prototype.findContainerAndOffsetFromLocation=function(t){var e,n,r,l,u;if(0===t.index&&0===t.offset){for(e=this.element,l=0;e.firstChild;)if(e=e.firstChild,o(e)){l=1;break}return[e,l]}if(n=(u=this.findNodeAndOffsetFromLocation(t))[0],r=u[1],n){if(c(n))0===h(n)?(e=n.parentNode.parentNode,l=i(n.parentNode),s(n,{name:"right"})&&l++):(e=n,l=t.offset-r);else{if(e=n.parentNode,!a(n.previousSibling)&&!o(e))for(;n===e.lastChild&&(n=e,e=e.parentNode,!o(e)););l=i(n),0!==t.offset&&l++}return[e,l]}},e.prototype.findNodeAndOffsetFromLocation=function(t){var e,i,n,o,a,r,l,u;for(l=0,i=0,n=(u=this.getSignificantNodesForIndex(t.index)).length;n>i;i++){if(e=u[i],o=h(e),t.offset<=l+o)if(c(e)){if(a=e,r=l,t.offset===r&&s(a))break}else a||(a=e,r=l);if((l+=o)>t.offset)break}return[a,r]},e.prototype.findAttachmentElementParentForNode=function(t){for(;t&&t!==this.element;){if(n(t))return t;t=t.parentNode}},e.prototype.getSignificantNodesForIndex=function(t){var e,i,n,o,a;for(n=[],a=d(this.element,{usingFilter:p}),o=!1;a.nextNode();)if(i=a.currentNode,r(i)){if(null!=e?e++:e=0,e===t)o=!0;else if(o)break}else o&&n.push(i);return n},h=function(t){return t.nodeType===Node.TEXT_NODE?s(t)?0:t.textContent.length:"br"===u(t)||n(t)?1:0},p=function(t){return m(t)===NodeFilter.FILTER_ACCEPT?f(t):NodeFilter.FILTER_REJECT},m=function(t){return l(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},f=function(t){return n(t.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},e}()}.call(this),function(){var t,i,n=[].slice;t=e.getDOMRange,i=e.setDOMRange,e.PointMapper=function(){function e(){}return e.prototype.createDOMRangeFromPoint=function(e){var n,o,a,r,s,l,c,u;if(c=e.x,u=e.y,document.caretPositionFromPoint)return a=(s=document.caretPositionFromPoint(c,u)).offsetNode,o=s.offset,(n=document.createRange()).setStart(a,o),n;if(document.caretRangeFromPoint)return document.caretRangeFromPoint(c,u);if(document.body.createTextRange){r=t();try{(l=document.body.createTextRange()).moveToPoint(c,u),l.select()}catch(d){}return n=t(),i(r),n}},e.prototype.getClientRectsForDOMRange=function(t){var e;return[(e=n.call(t.getClientRects()))[0],e[e.length-1]]},e}()}.call(this),function(){var t,i=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function i(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},o={}.hasOwnProperty,a=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};t=e.getDOMRange,e.SelectionChangeObserver=function(e){function o(){this.run=i(this.run,this),this.update=i(this.update,this),this.selectionManagers=[]}var r;return n(o,e),o.prototype.start=function(){return this.started?void 0:(this.started=!0,"onselectionchange"in document?document.addEventListener("selectionchange",this.update,!0):this.run())},o.prototype.stop=function(){return this.started?(this.started=!1,document.removeEventListener("selectionchange",this.update,!0)):void 0},o.prototype.registerSelectionManager=function(t){return a.call(this.selectionManagers,t)<0?(this.selectionManagers.push(t),this.start()):void 0},o.prototype.unregisterSelectionManager=function(t){var e;return this.selectionManagers=function(){var i,n,o,a;for(a=[],i=0,n=(o=this.selectionManagers).length;n>i;i++)(e=o[i])!==t&&a.push(e);return a}.call(this),0===this.selectionManagers.length?this.stop():void 0},o.prototype.notifySelectionManagersOfSelectionChange=function(){var t,e,i,n,o;for(n=[],t=0,e=(i=this.selectionManagers).length;e>t;t++)o=i[t],n.push(o.selectionDidChange());return n},o.prototype.update=function(){var e;return e=t(),r(e,this.domRange)?void 0:(this.domRange=e,this.notifySelectionManagersOfSelectionChange())},o.prototype.reset=function(){return this.domRange=null,this.update()},o.prototype.run=function(){return this.started?(this.update(),requestAnimationFrame(this.run)):void 0},r=function(t,e){return(null!=t?t.startContainer:void 0)===(null!=e?e.startContainer:void 0)&&(null!=t?t.startOffset:void 0)===(null!=e?e.startOffset:void 0)&&(null!=t?t.endContainer:void 0)===(null!=e?e.endContainer:void 0)&&(null!=t?t.endOffset:void 0)===(null!=e?e.endOffset:void 0)},o}(e.BasicObject),null==e.selectionChangeObserver&&(e.selectionChangeObserver=new e.SelectionChangeObserver)}.call(this),function(){var t,i,n,o,a,r,s,l,c,u,d=function(t,e){return function(){return t.apply(e,arguments)}},p=function(t,e){function i(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},h={}.hasOwnProperty;n=e.getDOMSelection,i=e.getDOMRange,u=e.setDOMRange,t=e.elementContainsNode,r=e.nodeIsCursorTarget,a=e.innerElementIsActive,o=e.handleEvent,s=e.normalizeRange,l=e.rangeIsCollapsed,c=e.rangesAreEqual,e.SelectionManager=function(h){function f(t){this.element=t,this.selectionDidChange=d(this.selectionDidChange,this),this.didMouseDown=d(this.didMouseDown,this),this.locationMapper=new e.LocationMapper(this.element),this.pointMapper=new e.PointMapper,this.lockCount=0,o("mousedown",{onElement:this.element,withCallback:this.didMouseDown})}return p(f,h),f.prototype.getLocationRange=function(t){var e;return null==t&&(t={}),!1===t.strict?this.createLocationRangeFromDOMRange(i(),{strict:!1}):t.ignoreLock?this.currentLocationRange:null!=(e=this.lockedLocationRange)?e:this.currentLocationRange},f.prototype.setLocationRange=function(t){var e;if(!this.lockedLocationRange)return t=s(t),(e=this.createDOMRangeFromLocationRange(t))?(u(e),this.updateCurrentLocationRange(t)):void 0},f.prototype.setLocationRangeFromPointRange=function(t){var e,i;return t=s(t),i=this.getLocationAtPoint(t[0]),e=this.getLocationAtPoint(t[1]),this.setLocationRange([i,e])},f.prototype.getClientRectAtLocationRange=function(t){var e;return(e=this.createDOMRangeFromLocationRange(t))?this.getClientRectsForDOMRange(e)[1]:void 0},f.prototype.locationIsCursorTarget=function(t){var e,i;return e=(i=this.findNodeAndOffsetFromLocation(t))[0],i[1],r(e)},f.prototype.lock=function(){return 0==this.lockCount++?(this.updateCurrentLocationRange(),this.lockedLocationRange=this.getLocationRange()):void 0},f.prototype.unlock=function(){var t;return 0==--this.lockCount&&(t=this.lockedLocationRange,this.lockedLocationRange=null,null!=t)?this.setLocationRange(t):void 0},f.prototype.clearSelection=function(){var t;return null!=(t=n())?t.removeAllRanges():void 0},f.prototype.selectionIsCollapsed=function(){var t;return!0===(null!=(t=i())?t.collapsed:void 0)},f.prototype.selectionIsExpanded=function(){return!this.selectionIsCollapsed()},f.prototype.createLocationRangeFromDOMRange=function(t,e){var i,n;if(null!=t&&this.domRangeWithinElement(t)&&(n=this.findLocationFromContainerAndOffset(t.startContainer,t.startOffset,e)))return t.collapsed||(i=this.findLocationFromContainerAndOffset(t.endContainer,t.endOffset,e)),s([n,i])},f.proxyMethod("locationMapper.findLocationFromContainerAndOffset"),f.proxyMethod("locationMapper.findContainerAndOffsetFromLocation"),f.proxyMethod("locationMapper.findNodeAndOffsetFromLocation"),f.proxyMethod("pointMapper.createDOMRangeFromPoint"),f.proxyMethod("pointMapper.getClientRectsForDOMRange"),f.prototype.didMouseDown=function(){return this.pauseTemporarily()},f.prototype.pauseTemporarily=function(){var e,i,n,a;return this.paused=!0,i=function(e){return function(){var i,o;for(e.paused=!1,clearTimeout(a),i=0,o=n.length;o>i;i++)n[i].destroy();return t(document,e.element)?e.selectionDidChange():void 0}}(this),a=setTimeout(i,200),n=function(){var t,n,a,r;for(r=[],t=0,n=(a=["mousemove","keydown"]).length;n>t;t++)e=a[t],r.push(o(e,{onElement:document,withCallback:i}));return r}()},f.prototype.selectionDidChange=function(){return this.paused||a(this.element)?void 0:this.updateCurrentLocationRange()},f.prototype.updateCurrentLocationRange=function(t){var e;return(null!=t?t:t=this.createLocationRangeFromDOMRange(i()))&&!c(t,this.currentLocationRange)?(this.currentLocationRange=t,null!=(e=this.delegate)&&"function"==typeof e.locationRangeDidChange?e.locationRangeDidChange(this.currentLocationRange.slice(0)):void 0):void 0},f.prototype.createDOMRangeFromLocationRange=function(t){var e,i,n,o;return n=this.findContainerAndOffsetFromLocation(t[0]),i=l(t)?n:null!=(o=this.findContainerAndOffsetFromLocation(t[1]))?o:n,null!=n&&null!=i?((e=document.createRange()).setStart.apply(e,n),e.setEnd.apply(e,i),e):void 0},f.prototype.getLocationAtPoint=function(t){var e,i;return(e=this.createDOMRangeFromPoint(t))&&null!=(i=this.createLocationRangeFromDOMRange(e))?i[0]:void 0},f.prototype.domRangeWithinElement=function(e){return e.collapsed?t(this.element,e.startContainer):t(this.element,e.startContainer)&&t(this.element,e.endContainer)},f}(e.BasicObject)}.call(this),function(){var t,i,n,o,a=function(t,e){function i(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},r={}.hasOwnProperty,s=[].slice;n=e.rangeIsCollapsed,o=e.rangesAreEqual,i=e.objectsAreEqual,t=e.getBlockConfig,e.EditorController=function(r){function l(t){var i,n;this.editorElement=t.editorElement,i=t.document,n=t.html,this.selectionManager=new e.SelectionManager(this.editorElement),this.selectionManager.delegate=this,this.composition=new e.Composition,this.composition.delegate=this,this.attachmentManager=new e.AttachmentManager(this.composition.getAttachments()),this.attachmentManager.delegate=this,this.inputController=new(e["Level"+e.config.input.getLevel()+"InputController"])(this.editorElement),this.inputController.delegate=this,this.inputController.responder=this.composition,this.compositionController=new e.CompositionController(this.editorElement,this.composition),this.compositionController.delegate=this,this.toolbarController=new e.ToolbarController(this.editorElement.toolbarElement),this.toolbarController.delegate=this,this.editor=new e.Editor(this.composition,this.selectionManager,this.editorElement),null!=i?this.editor.loadDocument(i):this.editor.loadHTML(n)}var c;return a(l,r),l.prototype.registerSelectionManager=function(){return e.selectionChangeObserver.registerSelectionManager(this.selectionManager)},l.prototype.unregisterSelectionManager=function(){return e.selectionChangeObserver.unregisterSelectionManager(this.selectionManager)},l.prototype.render=function(){return this.compositionController.render()},l.prototype.reparse=function(){return this.composition.replaceHTML(this.editorElement.innerHTML)},l.prototype.compositionDidChangeDocument=function(){return this.notifyEditorElement("document-change"),this.handlingInput?void 0:this.render()},l.prototype.compositionDidChangeCurrentAttributes=function(t){return this.currentAttributes=t,this.toolbarController.updateAttributes(this.currentAttributes),this.updateCurrentActions(),this.notifyEditorElement("attributes-change",{attributes:this.currentAttributes})},l.prototype.compositionDidPerformInsertionAtRange=function(t){return this.pasting?this.pastedRange=t:void 0},l.prototype.compositionShouldAcceptFile=function(t){return this.notifyEditorElement("file-accept",{file:t})},l.prototype.compositionDidAddAttachment=function(t){var e;return e=this.attachmentManager.manageAttachment(t),this.notifyEditorElement("attachment-add",{attachment:e})},l.prototype.compositionDidEditAttachment=function(t){var e;return this.compositionController.rerenderViewForObject(t),e=this.attachmentManager.manageAttachment(t),this.notifyEditorElement("attachment-edit",{attachment:e}),this.notifyEditorElement("change")},l.prototype.compositionDidChangeAttachmentPreviewURL=function(t){return this.compositionController.invalidateViewForObject(t),this.notifyEditorElement("change")},l.prototype.compositionDidRemoveAttachment=function(t){var e;return e=this.attachmentManager.unmanageAttachment(t),this.notifyEditorElement("attachment-remove",{attachment:e})},l.prototype.compositionDidStartEditingAttachment=function(t,e){return this.attachmentLocationRange=this.composition.document.getLocationRangeOfAttachment(t),this.compositionController.installAttachmentEditorForAttachment(t,e),this.selectionManager.setLocationRange(this.attachmentLocationRange)},l.prototype.compositionDidStopEditingAttachment=function(){return this.compositionController.uninstallAttachmentEditor(),this.attachmentLocationRange=null},l.prototype.compositionDidRequestChangingSelectionToLocationRange=function(t){return!this.loadingSnapshot||this.isFocused()?(this.requestedLocationRange=t,this.compositionRevisionWhenLocationRangeRequested=this.composition.revision,this.handlingInput?void 0:this.render()):void 0},l.prototype.compositionWillLoadSnapshot=function(){return this.loadingSnapshot=!0},l.prototype.compositionDidLoadSnapshot=function(){return this.compositionController.refreshViewCache(),this.render(),this.loadingSnapshot=!1},l.prototype.getSelectionManager=function(){return this.selectionManager},l.proxyMethod("getSelectionManager().setLocationRange"),l.proxyMethod("getSelectionManager().getLocationRange"),l.prototype.attachmentManagerDidRequestRemovalOfAttachment=function(t){return this.removeAttachment(t)},l.prototype.compositionControllerWillSyncDocumentView=function(){return this.inputController.editorWillSyncDocumentView(),this.selectionManager.lock(),this.selectionManager.clearSelection()},l.prototype.compositionControllerDidSyncDocumentView=function(){return this.inputController.editorDidSyncDocumentView(),this.selectionManager.unlock(),this.updateCurrentActions(),this.notifyEditorElement("sync")},l.prototype.compositionControllerDidRender=function(){return null!=this.requestedLocationRange&&(this.compositionRevisionWhenLocationRangeRequested===this.composition.revision&&this.selectionManager.setLocationRange(this.requestedLocationRange),this.requestedLocationRange=null,this.compositionRevisionWhenLocationRangeRequested=null),this.renderedCompositionRevision!==this.composition.revision&&(this.runEditorFilters(),this.composition.updateCurrentAttributes(),this.notifyEditorElement("render")),this.renderedCompositionRevision=this.composition.revision},l.prototype.compositionControllerDidFocus=function(){return this.isFocusedInvisibly()&&this.setLocationRange({index:0,offset:0}),this.toolbarController.hideDialog(),this.notifyEditorElement("focus")},l.prototype.compositionControllerDidBlur=function(){return this.notifyEditorElement("blur")},l.prototype.compositionControllerDidSelectAttachment=function(t,e){return this.toolbarController.hideDialog(),this.composition.editAttachment(t,e)},l.prototype.compositionControllerDidRequestDeselectingAttachment=function(t){var e,i;return e=null!=(i=this.attachmentLocationRange)?i:this.composition.document.getLocationRangeOfAttachment(t),this.selectionManager.setLocationRange(e[1])},l.prototype.compositionControllerWillUpdateAttachment=function(t){return this.editor.recordUndoEntry("Edit Attachment",{context:t.id,consolidatable:!0})},l.prototype.compositionControllerDidRequestRemovalOfAttachment=function(t){return this.removeAttachment(t)},l.prototype.inputControllerWillHandleInput=function(){return this.handlingInput=!0,this.requestedRender=!1},l.prototype.inputControllerDidRequestRender=function(){return this.requestedRender=!0},l.prototype.inputControllerDidHandleInput=function(){return this.handlingInput=!1,this.requestedRender?(this.requestedRender=!1,this.render()):void 0},l.prototype.inputControllerDidAllowUnhandledInput=function(){return this.notifyEditorElement("change")},l.prototype.inputControllerDidRequestReparse=function(){return this.reparse()},l.prototype.inputControllerWillPerformTyping=function(){return this.recordTypingUndoEntry()},l.prototype.inputControllerWillPerformFormatting=function(t){return this.recordFormattingUndoEntry(t)},l.prototype.inputControllerWillCutText=function(){return this.editor.recordUndoEntry("Cut")},l.prototype.inputControllerWillPaste=function(t){return this.editor.recordUndoEntry("Paste"),this.pasting=!0,this.notifyEditorElement("before-paste",{paste:t})},l.prototype.inputControllerDidPaste=function(t){return t.range=this.pastedRange,this.pastedRange=null,this.pasting=null,this.notifyEditorElement("paste",{paste:t})},l.prototype.inputControllerWillMoveText=function(){return this.editor.recordUndoEntry("Move")},l.prototype.inputControllerWillAttachFiles=function(){return this.editor.recordUndoEntry("Drop Files")},l.prototype.inputControllerWillPerformUndo=function(){return this.editor.undo()},l.prototype.inputControllerWillPerformRedo=function(){return this.editor.redo()},l.prototype.inputControllerDidReceiveKeyboardCommand=function(t){return this.toolbarController.applyKeyboardCommand(t)},l.prototype.inputControllerDidStartDrag=function(){return this.locationRangeBeforeDrag=this.selectionManager.getLocationRange()},l.prototype.inputControllerDidReceiveDragOverPoint=function(t){return this.selectionManager.setLocationRangeFromPointRange(t)},l.prototype.inputControllerDidCancelDrag=function(){return this.selectionManager.setLocationRange(this.locationRangeBeforeDrag),this.locationRangeBeforeDrag=null},l.prototype.locationRangeDidChange=function(t){return this.composition.updateCurrentAttributes(),this.updateCurrentActions(),this.attachmentLocationRange&&!o(this.attachmentLocationRange,t)&&this.composition.stopEditingAttachment(),this.notifyEditorElement("selection-change")},l.prototype.toolbarDidClickButton=function(){return this.getLocationRange()?void 0:this.setLocationRange({index:0,offset:0})},l.prototype.toolbarDidInvokeAction=function(t){return this.invokeAction(t)},l.prototype.toolbarDidToggleAttribute=function(t){return this.recordFormattingUndoEntry(t),this.composition.toggleCurrentAttribute(t),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},l.prototype.toolbarDidUpdateAttribute=function(t,e){return this.recordFormattingUndoEntry(t),this.composition.setCurrentAttribute(t,e),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},l.prototype.toolbarDidRemoveAttribute=function(t){return this.recordFormattingUndoEntry(t),this.composition.removeCurrentAttribute(t),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},l.prototype.toolbarWillShowDialog=function(){return this.composition.expandSelectionForEditing(),this.freezeSelection()},l.prototype.toolbarDidShowDialog=function(t){return this.notifyEditorElement("toolbar-dialog-show",{dialogName:t})},l.prototype.toolbarDidHideDialog=function(t){return this.thawSelection(),this.editorElement.focus(),this.notifyEditorElement("toolbar-dialog-hide",{dialogName:t})},l.prototype.freezeSelection=function(){return this.selectionFrozen?void 0:(this.selectionManager.lock(),this.composition.freezeSelection(),this.selectionFrozen=!0,this.render())},l.prototype.thawSelection=function(){return this.selectionFrozen?(this.composition.thawSelection(),this.selectionManager.unlock(),this.selectionFrozen=!1,this.render()):void 0},l.prototype.actions={undo:{test:function(){return this.editor.canUndo()},perform:function(){return this.editor.undo()}},redo:{test:function(){return this.editor.canRedo()},perform:function(){return this.editor.redo()}},link:{test:function(){return this.editor.canActivateAttribute("href")}},increaseNestingLevel:{test:function(){return this.editor.canIncreaseNestingLevel()},perform:function(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseNestingLevel:{test:function(){return this.editor.canDecreaseNestingLevel()},perform:function(){return this.editor.decreaseNestingLevel()&&this.render()}},attachFiles:{test:function(){return!0},perform:function(){return e.config.input.pickFiles(this.editor.insertFiles)}}},l.prototype.canInvokeAction=function(t){var e,i;return!!this.actionIsExternal(t)||!!(null!=(e=this.actions[t])&&null!=(i=e.test)?i.call(this):void 0)},l.prototype.invokeAction=function(t){var e,i;return this.actionIsExternal(t)?this.notifyEditorElement("action-invoke",{actionName:t}):null!=(e=this.actions[t])&&null!=(i=e.perform)?i.call(this):void 0},l.prototype.actionIsExternal=function(t){return/^x-./.test(t)},l.prototype.getCurrentActions=function(){var t,e;for(t in e={},this.actions)e[t]=this.canInvokeAction(t);return e},l.prototype.updateCurrentActions=function(){var t;return t=this.getCurrentActions(),i(t,this.currentActions)?void 0:(this.currentActions=t,this.toolbarController.updateActions(this.currentActions),this.notifyEditorElement("actions-change",{actions:this.currentActions}))},l.prototype.runEditorFilters=function(){var t,e,i,n,o,a,r,s;for(s=this.composition.getSnapshot(),i=0,n=(o=this.editor.filters).length;n>i;i++)e=o[i],t=s.document,r=s.selectedRange,null==(s=null!=(a=e.call(this.editor,s))?a:{}).document&&(s.document=t),null==s.selectedRange&&(s.selectedRange=r);return c(s,this.composition.getSnapshot())?void 0:this.composition.loadSnapshot(s)},c=function(t,e){return o(t.selectedRange,e.selectedRange)&&t.document.isEqualTo(e.document)},l.prototype.updateInputElement=function(){var t,i;return t=this.compositionController.getSerializableElement(),i=e.serializeToContentType(t,"text/html"),this.editorElement.setInputElementValue(i)},l.prototype.notifyEditorElement=function(t,e){switch(t){case"document-change":this.documentChangedSinceLastRender=!0;break;case"render":this.documentChangedSinceLastRender&&(this.documentChangedSinceLastRender=!1,this.notifyEditorElement("change"));break;case"change":case"attachment-add":case"attachment-edit":case"attachment-remove":this.updateInputElement()}return this.editorElement.notify(t,e)},l.prototype.removeAttachment=function(t){return this.editor.recordUndoEntry("Delete Attachment"),this.composition.removeAttachment(t),this.render()},l.prototype.recordFormattingUndoEntry=function(e){var i,o;return i=t(e),o=this.selectionManager.getLocationRange(),i||!n(o)?this.editor.recordUndoEntry("Formatting",{context:this.getUndoContext(),consolidatable:!0}):void 0},l.prototype.recordTypingUndoEntry=function(){return this.editor.recordUndoEntry("Typing",{context:this.getUndoContext(this.currentAttributes),consolidatable:!0})},l.prototype.getUndoContext=function(){var t;return t=1<=arguments.length?s.call(arguments,0):[],[this.getLocationContext(),this.getTimeContext()].concat(s.call(t))},l.prototype.getLocationContext=function(){var t;return t=this.selectionManager.getLocationRange(),n(t)?t[0].index:t},l.prototype.getTimeContext=function(){return e.config.undoInterval>0?Math.floor((new Date).getTime()/e.config.undoInterval):0},l.prototype.isFocused=function(){var t;return this.editorElement===(null!=(t=this.editorElement.ownerDocument)?t.activeElement:void 0)},l.prototype.isFocusedInvisibly=function(){return this.isFocused()&&!this.getLocationRange()},l}(e.Controller)}.call(this),function(){var t,i,n,o,a,r,s,l,c,u,d,p,h,f,m,g,v=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};i=e.browser,r=e.makeElement,s=e.triggerEvent,o=e.handleEvent,a=e.handleEventOnce,n=e.findClosestElementFromNode,t=e.AttachmentView.attachmentSelector,e.registerElement("trix-editor",(f=0,c=function(t){return!document.querySelector(":focus")&&t.hasAttribute("autofocus")&&document.querySelector("[autofocus]")===t?t.focus():void 0},m=function(t){return t.hasAttribute("contenteditable")?void 0:(t.setAttribute("contenteditable",""),a("focus",{onElement:t,withCallback:function(){return u(t)}}))},u=function(t){return p(t),g(t)},p=function(t){return("function"==typeof document.queryCommandSupported?document.queryCommandSupported("enableObjectResizing"):void 0)?(document.execCommand("enableObjectResizing",!1,!1),o("mscontrolselect",{onElement:t,preventDefault:!0})):void 0},g=function(){var t;return("function"==typeof document.queryCommandSupported?document.queryCommandSupported("DefaultParagraphSeparator"):void 0)&&("div"===(t=e.config.blockAttributes["default"].tagName)||"p"===t)?document.execCommand("DefaultParagraphSeparator",!1,t):void 0},l=function(t){return t.hasAttribute("role")?void 0:t.setAttribute("role","textbox")},h=function(t){var e;if(!t.hasAttribute("aria-label")&&!t.hasAttribute("aria-labelledby"))return(e=function(){var e,i,n;return n=function(){var i,n,o,a;for(a=[],i=0,n=(o=t.labels).length;n>i;i++)(e=o[i]).contains(t)||a.push(e.textContent);return a}(),(i=n.join(" "))?t.setAttribute("aria-label",i):t.removeAttribute("aria-label")})(),o("focus",{onElement:t,withCallback:e})},d=i.forcesObjectResizing?{display:"inline",width:"auto"}:{display:"inline-block",width:"1px"},{defaultCSS:"%t {\n  display: block;\n}\n\n%t:empty:not(:focus)::before {\n  content: attr(placeholder);\n  color: graytext;\n  cursor: text;\n  pointer-events: none;\n}\n\n%t a[contenteditable=false] {\n  cursor: text;\n}\n\n%t img {\n  max-width: 100%;\n  height: auto;\n}\n\n%t "+t+" figcaption textarea {\n  resize: none;\n}\n\n%t "+t+" figcaption textarea.trix-autoresize-clone {\n  position: absolute;\n  left: -9999px;\n  max-height: 0px;\n}\n\n%t "+t+" figcaption[data-trix-placeholder]:empty::before {\n  content: attr(data-trix-placeholder);\n  color: graytext;\n}\n\n%t [data-trix-cursor-target] {\n  display: "+d.display+" !important;\n  width: "+d.width+" !important;\n  padding: 0 !important;\n  margin: 0 !important;\n  border: none !important;\n}\n\n%t [data-trix-cursor-target=left] {\n  vertical-align: top !important;\n  margin-left: -1px !important;\n}\n\n%t [data-trix-cursor-target=right] {\n  vertical-align: bottom !important;\n  margin-right: -1px !important;\n}",trixId:{get:function(){return this.hasAttribute("trix-id")?this.getAttribute("trix-id"):(this.setAttribute("trix-id",++f),this.trixId)}},labels:{get:function(){var t,e,i;return e=[],this.id&&this.ownerDocument&&e.push.apply(e,this.ownerDocument.querySelectorAll("label[for='"+this.id+"']")),(t=n(this,{matchingSelector:"label"}))&&((i=t.control)===this||null===i)&&e.push(t),e}},toolbarElement:{get:function(){var t,e,i;return this.hasAttribute("toolbar")?null!=(e=this.ownerDocument)?e.getElementById(this.getAttribute("toolbar")):void 0:this.parentNode?(i="trix-toolbar-"+this.trixId,this.setAttribute("toolbar",i),t=r("trix-toolbar",{id:i}),this.parentNode.insertBefore(t,this),t):void 0}},inputElement:{get:function(){var t,e,i;return this.hasAttribute("input")?null!=(i=this.ownerDocument)?i.getElementById(this.getAttribute("input")):void 0:this.parentNode?(e="trix-input-"+this.trixId,this.setAttribute("input",e),t=r("input",{type:"hidden",id:e}),this.parentNode.insertBefore(t,this.nextElementSibling),t):void 0}},editor:{get:function(){var t;return null!=(t=this.editorController)?t.editor:void 0}},name:{get:function(){var t;return null!=(t=this.inputElement)?t.name:void 0}},value:{get:function(){var t;return null!=(t=this.inputElement)?t.value:void 0},set:function(t){var e;return this.defaultValue=t,null!=(e=this.editor)?e.loadHTML(this.defaultValue):void 0}},notify:function(t,e){return this.editorController?s("trix-"+t,{onElement:this,attributes:e}):void 0},setInputElementValue:function(t){var e;return null!=(e=this.inputElement)?e.value=t:void 0},initialize:function(){return this.hasAttribute("data-trix-internal")?void 0:(m(this),l(this),h(this))},connect:function(){return this.hasAttribute("data-trix-internal")?void 0:(this.editorController||(s("trix-before-initialize",{onElement:this}),this.editorController=new e.EditorController({editorElement:this,html:this.defaultValue=this.value}),requestAnimationFrame((t=this,function(){return s("trix-initialize",{onElement:t})}))),this.editorController.registerSelectionManager(),this.registerResetListener(),this.registerClickListener(),c(this));var t},disconnect:function(){var t;return null!=(t=this.editorController)&&t.unregisterSelectionManager(),this.unregisterResetListener(),this.unregisterClickListener()},registerResetListener:function(){return this.resetListener=this.resetBubbled.bind(this),window.addEventListener("reset",this.resetListener,!1)},unregisterResetListener:function(){return window.removeEventListener("reset",this.resetListener,!1)},registerClickListener:function(){return this.clickListener=this.clickBubbled.bind(this),window.addEventListener("click",this.clickListener,!1)},unregisterClickListener:function(){return window.removeEventListener("click",this.clickListener,!1)},resetBubbled:function(t){var e;if(!t.defaultPrevented&&t.target===(null!=(e=this.inputElement)?e.form:void 0))return this.reset()},clickBubbled:function(t){var e;if(!(t.defaultPrevented||this.contains(t.target)||!(e=n(t.target,{matchingSelector:"label"}))||v.call(this.labels,e)<0))return this.focus()},reset:function(){return this.value=this.defaultValue}}))}.call(this),function(){}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd&&define(e)}.call(this),document.addEventListener("trix-file-accept",function(t){t.preventDefault()}),$(document).on("change",".selecionar-conta-para-abatimento",()=>{calculateAvailableAmount()}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Sweetalert2=e()}(this,function(){"use strict";var t={title:"",titleText:"",text:"",html:"",type:null,customClass:"",target:"body",animation:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,showConfirmButton:!0,showCancelButton:!1,preConfirm:null,confirmButtonText:"OK",confirmButtonColor:"#3085d6",confirmButtonClass:null,cancelButtonText:"Cancel",cancelButtonColor:"#aaa",cancelButtonClass:null,buttonsStyling:!0,reverseButtons:!1,focusCancel:!1,showCloseButton:!1,showLoaderOnConfirm:!1,imageUrl:null,imageWidth:null,imageHeight:null,imageClass:null,timer:null,width:500,padding:20,background:"#fff",input:null,inputPlaceholder:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputClass:null,inputAttributes:{},inputValidator:null,progressSteps:[],currentProgressStep:null,progressStepsDistance:"40px",onOpen:null,onClose:null,useRejections:!0},e=function(t){var e={};for(var i in t)e[t[i]]="swal2-"+t[i];return e},i=e(["container","shown","iosfix","modal","overlay","fade","show","hide","noanimation","close","title","content","buttonswrapper","confirm","cancel","icon","image","input","file","range","select","radio","checkbox","textarea","inputerror","validationerror","progresssteps","activeprogressstep","progresscircle","progressline","loading","styled"]),n=e(["success","warning","info","question","error"]),o=function(t,e){(t=String(t).replace(/[^0-9a-f]/gi,"")).length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),e=e||0;for(var i="#",n=0;n<3;n++){var o=parseInt(t.substr(2*n,2),16);i+=("00"+(o=Math.round(Math.min(Math.max(0,o+o*e),255)).toString(16))).substr(o.length)}return i},a=function(t){var e=[];for(var i in t)-1===e.indexOf(t[i])&&e.push(t[i]);return e},r={previousWindowKeyDown:null,previousActiveElement:null,previousBodyPadding:null},s=function(t){if("undefined"!=typeof document){var e=document.createElement("div");e.className=i.container,e.innerHTML=l;var n=document.querySelector(t.target);n||(console.warn("SweetAlert2: Can't find the target \""+t.target+'"'),n=document.body),n.appendChild(e);var o=u(),a=S(o,i.input),r=S(o,i.file),s=o.querySelector("."+i.range+" input"),c=o.querySelector("."+i.range+" output"),d=S(o,i.select),p=o.querySelector("."+i.checkbox+" input"),h=S(o,i.textarea);return a.oninput=function(){K.resetValidationError()},a.onkeydown=function(e){setTimeout(function(){13===e.keyCode&&t.allowEnterKey&&(e.stopPropagation(),K.clickConfirm())},0)},r.onchange=function(){K.resetValidationError()},s.oninput=function(){K.resetValidationError(),c.value=s.value},s.onchange=function(){K.resetValidationError(),s.previousSibling.value=s.value},d.onchange=function(){K.resetValidationError()},p.onchange=function(){K.resetValidationError()},h.oninput=function(){K.resetValidationError()},o}console.error("SweetAlert2 requires document to initialize")
},l=('\n <div role="dialog" aria-labelledby="'+i.title+'" aria-describedby="'+i.content+'" class="'+i.modal+'" tabindex="-1">\n   <ul class="'+i.progresssteps+'"></ul>\n   <div class="'+i.icon+" "+n.error+'">\n     <span class="swal2-x-mark"><span class="swal2-x-mark-line-left"></span><span class="swal2-x-mark-line-right"></span></span>\n   </div>\n   <div class="'+i.icon+" "+n.question+'">?</div>\n   <div class="'+i.icon+" "+n.warning+'">!</div>\n   <div class="'+i.icon+" "+n.info+'">i</div>\n   <div class="'+i.icon+" "+n.success+'">\n     <div class="swal2-success-circular-line-left"></div>\n     <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n     <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n     <div class="swal2-success-circular-line-right"></div>\n   </div>\n   <img class="'+i.image+'">\n   <h2 class="'+i.title+'" id="'+i.title+'"></h2>\n   <div id="'+i.content+'" class="'+i.content+'"></div>\n   <input class="'+i.input+'">\n   <input type="file" class="'+i.file+'">\n   <div class="'+i.range+'">\n     <output></output>\n     <input type="range">\n   </div>\n   <select class="'+i.select+'"></select>\n   <div class="'+i.radio+'"></div>\n   <label for="'+i.checkbox+'" class="'+i.checkbox+'">\n     <input type="checkbox">\n   </label>\n   <textarea class="'+i.textarea+'"></textarea>\n   <div class="'+i.validationerror+'"></div>\n   <div class="'+i.buttonswrapper+'">\n     <button type="button" class="'+i.confirm+'">OK</button>\n     <button type="button" class="'+i.cancel+'">Cancel</button>\n   </div>\n   <button type="button" class="'+i.close+'" aria-label="Close this dialog">&times;</button>\n </div>\n').replace(/(^|\n)\s*/g,""),c=function(){return document.body.querySelector("."+i.container)},u=function(){return c()?c().querySelector("."+i.modal):null},d=function(){return u().querySelectorAll("."+i.icon)},p=function(t){return c()?c().querySelector("."+t):null},h=function(){return p(i.title)},f=function(){return p(i.content)},m=function(){return p(i.image)},g=function(){return p(i.buttonswrapper)},v=function(){return p(i.progresssteps)},_=function(){return p(i.validationerror)},b=function(){return p(i.confirm)},y=function(){return p(i.cancel)},w=function(){return p(i.close)},$=function(t){var e=[b(),y()];t&&e.reverse();var i=e.concat(Array.prototype.slice.call(u().querySelectorAll('button, input:not([type=hidden]), textarea, select, a, *[tabindex]:not([tabindex="-1"])')));return a(i)},x=function(t,e){return!!t.classList&&t.classList.contains(e)},k=function(t){if(t.focus(),"file"!==t.type){var e=t.value;t.value="",t.value=e}},C=function(t,e){t&&e&&e.split(/\s+/).filter(Boolean).forEach(function(e){t.classList.add(e)})},D=function(t,e){t&&e&&e.split(/\s+/).filter(Boolean).forEach(function(e){t.classList.remove(e)})},S=function(t,e){for(var i=0;i<t.childNodes.length;i++)if(x(t.childNodes[i],e))return t.childNodes[i]},T=function(t,e){e||(e="block"),t.style.opacity="",t.style.display=e},A=function(t){t.style.opacity="",t.style.display="none"},E=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},M=function(t){return t.offsetWidth||t.offsetHeight||t.getClientRects().length},O=function(t,e){t.style.removeProperty?t.style.removeProperty(e):t.style.removeAttribute(e)},I=function(t){if(!M(t))return!1;if("function"==typeof MouseEvent){var e=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0});t.dispatchEvent(e)}else if(document.createEvent){var i=document.createEvent("MouseEvents");i.initEvent("click",!1,!1),t.dispatchEvent(i)}else document.createEventObject?t.fireEvent("onclick"):"function"==typeof t.onclick&&t.onclick()},P=function(){var t=document.createElement("div"),e={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd oanimationend",msAnimation:"MSAnimationEnd",animation:"animationend"};for(var i in e)if(e.hasOwnProperty(i)&&void 0!==t.style[i])return e[i];return!1}(),N=function(){if(window.onkeydown=r.previousWindowKeyDown,r.previousActiveElement&&r.previousActiveElement.focus){var t=window.scrollX,e=window.scrollY;r.previousActiveElement.focus(),t&&e&&window.scrollTo(t,e)}},L=function(){if("ontouchstart"in window||navigator.msMaxTouchPoints)return 0;var t=document.createElement("div");t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e},R=function(t,e){var i=void 0;return function(){var n=function(){i=null,t()};clearTimeout(i),i=setTimeout(n,e)}},F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},B=j({},t),q=[],z=void 0,H=function(e){var o=u()||s(e);for(var a in e)t.hasOwnProperty(a)||"extraParams"===a||console.warn('SweetAlert2: Unknown parameter "'+a+'"');o.style.width="number"==typeof e.width?e.width+"px":e.width,o.style.padding=e.padding+"px",o.style.background=e.background;for(var r=o.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),l=0;l<r.length;l++)r[l].style.background=e.background;var c=h(),p=f(),_=g(),$=b(),x=y(),k=w();if(e.titleText?c.innerText=e.titleText:c.innerHTML=e.title.split("\n").join("<br>"),e.text||e.html){if("object"===F(e.html))if(p.innerHTML="",0 in e.html)for(var S=0;S in e.html;S++)p.appendChild(e.html[S].cloneNode(!0));else p.appendChild(e.html.cloneNode(!0));else e.html?p.innerHTML=e.html:e.text&&(p.textContent=e.text);T(p)}else A(p);e.showCloseButton?T(k):A(k),o.className=i.modal,e.customClass&&C(o,e.customClass);var M=v(),I=parseInt(null===e.currentProgressStep?K.getQueueStep():e.currentProgressStep,10);e.progressSteps.length?(T(M),E(M),I>=e.progressSteps.length&&console.warn("SweetAlert2: Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),e.progressSteps.forEach(function(t,n){var o=document.createElement("li");if(C(o,i.progresscircle),o.innerHTML=t,n===I&&C(o,i.activeprogressstep),M.appendChild(o),n!==e.progressSteps.length-1){var a=document.createElement("li");C(a,i.progressline),a.style.width=e.progressStepsDistance,M.appendChild(a)}})):A(M);for(var P=d(),N=0;N<P.length;N++)A(P[N]);if(e.type){var L=!1;for(var R in n)if(e.type===R){L=!0;break}if(!L)return console.error("SweetAlert2: Unknown alert type: "+e.type),!1;var j=o.querySelector("."+i.icon+"."+n[e.type]);if(T(j),e.animation)switch(e.type){case"success":C(j,"swal2-animate-success-icon"),C(j.querySelector(".swal2-success-line-tip"),"swal2-animate-success-line-tip"),C(j.querySelector(".swal2-success-line-long"),"swal2-animate-success-line-long");break;case"error":C(j,"swal2-animate-error-icon"),C(j.querySelector(".swal2-x-mark"),"swal2-animate-x-mark")}}var B=m();e.imageUrl?(B.setAttribute("src",e.imageUrl),T(B),e.imageWidth?B.setAttribute("width",e.imageWidth):B.removeAttribute("width"),e.imageHeight?B.setAttribute("height",e.imageHeight):B.removeAttribute("height"),B.className=i.image,e.imageClass&&C(B,e.imageClass)):A(B),e.showCancelButton?x.style.display="inline-block":A(x),e.showConfirmButton?O($,"display"):A($),e.showConfirmButton||e.showCancelButton?T(_):A(_),$.innerHTML=e.confirmButtonText,x.innerHTML=e.cancelButtonText,e.buttonsStyling&&($.style.backgroundColor=e.confirmButtonColor,x.style.backgroundColor=e.cancelButtonColor),$.className=i.confirm,C($,e.confirmButtonClass),x.className=i.cancel,C(x,e.cancelButtonClass),e.buttonsStyling?(C($,i.styled),C(x,i.styled)):(D($,i.styled),D(x,i.styled),$.style.backgroundColor=$.style.borderLeftColor=$.style.borderRightColor="",x.style.backgroundColor=x.style.borderLeftColor=x.style.borderRightColor=""),!0===e.animation?D(o,i.noanimation):C(o,i.noanimation)},W=function(t,e){var n=c(),o=u();t?(C(o,i.show),C(n,i.fade),D(o,i.hide)):D(o,i.fade),T(o),n.style.overflowY="hidden",P&&!x(o,i.noanimation)?o.addEventListener(P,function a(){o.removeEventListener(P,a),n.style.overflowY="auto"}):n.style.overflowY="auto",C(document.documentElement,i.shown),C(document.body,i.shown),C(n,i.shown),Y(),U(),r.previousActiveElement=document.activeElement,null!==e&&"function"==typeof e&&setTimeout(function(){e(o)})},Y=function(){null===r.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(r.previousBodyPadding=document.body.style.paddingRight,document.body.style.paddingRight=L()+"px")},V=function(){null!==r.previousBodyPadding&&(document.body.style.paddingRight=r.previousBodyPadding,r.previousBodyPadding=null)},U=function(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&!x(document.body,i.iosfix)){var t=document.body.scrollTop;document.body.style.top=-1*t+"px",C(document.body,i.iosfix)}},G=function(){if(x(document.body,i.iosfix)){var t=parseInt(document.body.style.top,10);D(document.body,i.iosfix),document.body.style.top="",document.body.scrollTop=-1*t}},K=function J(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(void 0===e[0])return console.error("SweetAlert2 expects at least 1 attribute!"),!1;var a=j({},B);switch(F(e[0])){case"string":a.title=e[0],a.html=e[1],a.type=e[2];break;case"object":j(a,e[0]),a.extraParams=e[0].extraParams,"email"===a.input&&null===a.inputValidator&&(a.inputValidator=function(t){return new Promise(function(e,i){/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(t)?e():i("Invalid email address")})}),"url"===a.input&&null===a.inputValidator&&(a.inputValidator=function(t){return new Promise(function(e,i){/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)$/.test(t)?e():i("Invalid URL")})});break;default:return console.error('SweetAlert2: Unexpected type of argument! Expected "string" or "object", got '+F(e[0])),!1}H(a);var s=c(),l=u();return new Promise(function(t,e){a.timer&&(l.timeout=setTimeout(function(){J.closeModal(a.onClose),a.useRejections?e("timer"):t({dismiss:"timer"})},a.timer));var n=function(t){if(!(t=t||a.input))return null;switch(t){case"select":case"textarea":case"file":return S(l,i[t]);case"checkbox":return l.querySelector("."+i.checkbox+" input");case"radio":return l.querySelector("."+i.radio+" input:checked")||l.querySelector("."+i.radio+" input:first-child");case"range":return l.querySelector("."+i.range+" input");default:return S(l,i.input)}},d=function(){var t=n();if(!t)return null;switch(a.input){case"checkbox":return t.checked?1:0;case"radio":return t.checked?t.value:null;case"file":return t.files.length?t.files[0]:null;default:return a.inputAutoTrim?t.value.trim():t.value}};a.input&&setTimeout(function(){var t=n();t&&k(t)},0);for(var p=function(e){a.showLoaderOnConfirm&&J.showLoading(),a.preConfirm?a.preConfirm(e,a.extraParams).then(function(i){J.closeModal(a.onClose),t(i||e)},function(t){J.hideLoading(),t&&J.showValidationError(t)}):(J.closeModal(a.onClose),t(a.useRejections?e:{value:e}))},x=function(i){var n=i||window.event,r=n.target||n.srcElement,s=b(),l=y(),c=s&&(s===r||s.contains(r)),u=l&&(l===r||l.contains(r));switch(n.type){case"mouseover":case"mouseup":a.buttonsStyling&&(c?s.style.backgroundColor=o(a.confirmButtonColor,-.1):u&&(l.style.backgroundColor=o(a.cancelButtonColor,-.1)));break;case"mouseout":a.buttonsStyling&&(c?s.style.backgroundColor=a.confirmButtonColor:u&&(l.style.backgroundColor=a.cancelButtonColor));break;case"mousedown":a.buttonsStyling&&(c?s.style.backgroundColor=o(a.confirmButtonColor,-.2):u&&(l.style.backgroundColor=o(a.cancelButtonColor,-.2)));break;case"click":if(c&&J.isVisible())if(J.disableButtons(),a.input){var h=d();a.inputValidator?(J.disableInput(),a.inputValidator(h,a.extraParams).then(function(){J.enableButtons(),J.enableInput(),p(h)},function(t){J.enableButtons(),J.enableInput(),t&&J.showValidationError(t)})):p(h)}else p(!0);else u&&J.isVisible()&&(J.disableButtons(),J.closeModal(a.onClose),a.useRejections?e("cancel"):t({dismiss:"cancel"}))}},E=l.querySelectorAll("button"),O=0;O<E.length;O++)E[O].onclick=x,E[O].onmouseover=x,E[O].onmouseout=x,E[O].onmousedown=x;w().onclick=function(){J.closeModal(a.onClose),a.useRejections?e("close"):t({dismiss:"close"})},s.onclick=function(i){i.target===s&&a.allowOutsideClick&&(J.closeModal(a.onClose),a.useRejections?e("overlay"):t({dismiss:"overlay"}))};var P=g(),N=b(),L=y();a.reverseButtons?N.parentNode.insertBefore(L,N):N.parentNode.insertBefore(N,L);var j=function(t,e){for(var i=$(a.focusCancel),n=0;n<i.length;n++){(t+=e)===i.length?t=0:-1===t&&(t=i.length-1);var o=i[t];if(M(o))return o.focus()}},B=function(i){var n=i||window.event,o=n.keyCode||n.which;if(-1!==[9,13,32,27,37,38,39,40].indexOf(o)){for(var r=n.target||n.srcElement,s=$(a.focusCancel),l=-1,c=0;c<s.length;c++)if(r===s[c]){l=c;break}9===o?(n.shiftKey?j(l,-1):j(l,1),n.stopPropagation(),n.preventDefault()):37===o||38===o||39===o||40===o?document.activeElement===N&&M(L)?L.focus():document.activeElement===L&&M(N)&&N.focus():13===o||32===o?-1===l&&a.allowEnterKey&&(I(a.focusCancel?L:N),n.stopPropagation(),n.preventDefault()):27===o&&!0===a.allowEscapeKey&&(J.closeModal(a.onClose),a.useRejections?e("esc"):t({dismiss:"esc"}))}};window.onkeydown&&window.onkeydown.toString()===B.toString()||(r.previousWindowKeyDown=window.onkeydown,window.onkeydown=B),a.buttonsStyling&&(N.style.borderLeftColor=a.confirmButtonColor,N.style.borderRightColor=a.confirmButtonColor),J.hideLoading=J.disableLoading=function(){a.showConfirmButton||(A(N),a.showCancelButton||A(g())),D(P,i.loading),D(l,i.loading),N.disabled=!1,L.disabled=!1},J.getTitle=function(){return h()},J.getContent=function(){return f()},J.getInput=function(){return n()},J.getImage=function(){return m()},J.getButtonsWrapper=function(){return g()},J.getConfirmButton=function(){return b()},J.getCancelButton=function(){return y()},J.enableButtons=function(){N.disabled=!1,L.disabled=!1},J.disableButtons=function(){N.disabled=!0,L.disabled=!0},J.enableConfirmButton=function(){N.disabled=!1},J.disableConfirmButton=function(){N.disabled=!0},J.enableInput=function(){var t=n();if(!t)return!1;if("radio"===t.type)for(var e=t.parentNode.parentNode.querySelectorAll("input"),i=0;i<e.length;i++)e[i].disabled=!1;else t.disabled=!1},J.disableInput=function(){var t=n();if(!t)return!1;if(t&&"radio"===t.type)for(var e=t.parentNode.parentNode.querySelectorAll("input"),i=0;i<e.length;i++)e[i].disabled=!0;else t.disabled=!0},J.recalculateHeight=R(function(){var t=u();if(t){var e=t.style.display;t.style.minHeight="",T(t),t.style.minHeight=t.scrollHeight+1+"px",t.style.display=e}},50),J.showValidationError=function(t){var e=_();e.innerHTML=t,T(e);var o=n();o&&(k(o),C(o,i.inputerror))},J.resetValidationError=function(){var t=_();A(t),J.recalculateHeight();var e=n();e&&D(e,i.inputerror)},J.getProgressSteps=function(){return a.progressSteps},J.setProgressSteps=function(t){a.progressSteps=t,H(a)},J.showProgressSteps=function(){T(v())},J.hideProgressSteps=function(){A(v())},J.enableButtons(),J.hideLoading(),J.resetValidationError();for(var q=["input","file","range","select","radio","checkbox","textarea"],Y=void 0,V=0;V<q.length;V++){var U=i[q[V]],G=S(l,U);if(Y=n(q[V])){for(var K in Y.attributes)if(Y.attributes.hasOwnProperty(K)){var Q=Y.attributes[K].name;"type"!==Q&&"value"!==Q&&Y.removeAttribute(Q)}for(var X in a.inputAttributes)Y.setAttribute(X,a.inputAttributes[X])}G.className=U,a.inputClass&&C(G,a.inputClass),A(G)}var Z=void 0;switch(a.input){case"text":case"email":case"password":case"number":case"tel":case"url":(Y=S(l,i.input)).value=a.inputValue,Y.placeholder=a.inputPlaceholder,Y.type=a.input,T(Y);break;case"file":(Y=S(l,i.file)).placeholder=a.inputPlaceholder,Y.type=a.input,T(Y);break;case"range":var tt=S(l,i.range),et=tt.querySelector("input"),it=tt.querySelector("output");et.value=a.inputValue,et.type=a.input,it.value=a.inputValue,T(tt);break;case"select":var nt=S(l,i.select);if(nt.innerHTML="",a.inputPlaceholder){var ot=document.createElement("option");ot.innerHTML=a.inputPlaceholder,ot.value="",ot.disabled=!0,ot.selected=!0,nt.appendChild(ot)}Z=function(t){for(var e in t){var i=document.createElement("option");i.value=e,i.innerHTML=t[e],a.inputValue===e&&(i.selected=!0),nt.appendChild(i)}T(nt),nt.focus()};break;case"radio":var at=S(l,i.radio);at.innerHTML="",Z=function(t){for(var e in t){var n=document.createElement("input"),o=document.createElement("label"),r=document.createElement("span");n.type="radio",n.name=i.radio,n.value=e,a.inputValue===e&&(n.checked=!0),r.innerHTML=t[e],o.appendChild(n),o.appendChild(r),o["for"]=n.id,at.appendChild(o)}T(at);var s=at.querySelectorAll("input");s.length&&s[0].focus()};break;case"checkbox":var rt=S(l,i.checkbox),st=n("checkbox");st.type="checkbox",st.value=1,st.id=i.checkbox,st.checked=Boolean(a.inputValue);var lt=rt.getElementsByTagName("span");lt.length&&rt.removeChild(lt[0]),(lt=document.createElement("span")).innerHTML=a.inputPlaceholder,rt.appendChild(lt),T(rt);break;case"textarea":var ct=S(l,i.textarea);ct.value=a.inputValue,ct.placeholder=a.inputPlaceholder,T(ct);break;case null:break;default:console.error('SweetAlert2: Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'+a.input+'"')}"select"!==a.input&&"radio"!==a.input||(a.inputOptions instanceof Promise?(J.showLoading(),a.inputOptions.then(function(t){J.hideLoading(),Z(t)})):"object"===F(a.inputOptions)?Z(a.inputOptions):console.error("SweetAlert2: Unexpected type of inputOptions! Expected object or Promise, got "+F(a.inputOptions))),W(a.animation,a.onOpen),a.allowEnterKey?j(-1,1):document.activeElement&&document.activeElement.blur(),c().scrollTop=0,"undefined"==typeof MutationObserver||z||(z=new MutationObserver(J.recalculateHeight)).observe(l,{childList:!0,characterData:!0,subtree:!0})})};return K.isVisible=function(){return!!u()},K.queue=function(t){q=t;var e=function(){q=[],document.body.removeAttribute("data-swal2-queue-step")},i=[];return new Promise(function(t,n){!function o(a,r){a<q.length?(document.body.setAttribute("data-swal2-queue-step",a),K(q[a]).then(function(t){i.push(t),o(a+1,r)},function(t){e(),n(t)})):(e(),t(i))}(0)})},K.getQueueStep=function(){return document.body.getAttribute("data-swal2-queue-step")},K.insertQueueStep=function(t,e){return e&&e<q.length?q.splice(e,0,t):q.push(t)},K.deleteQueueStep=function(t){void 0!==q[t]&&q.splice(t,1)},K.close=K.closeModal=function(t){var e=c(),n=u();if(n){D(n,i.show),C(n,i.hide),clearTimeout(n.timeout),N();var o=function(){e.parentNode&&e.parentNode.removeChild(e),D(document.documentElement,i.shown),D(document.body,i.shown),V(),G()};P&&!x(n,i.noanimation)?n.addEventListener(P,function a(){n.removeEventListener(P,a),x(n,i.hide)&&o()}):o(),null!==t&&"function"==typeof t&&setTimeout(function(){t(n)})}},K.clickConfirm=function(){return b().click()},K.clickCancel=function(){return y().click()},K.showLoading=K.enableLoading=function(){var t=u();t||K("");var e=g(),n=b(),o=y();T(e),T(n,"inline-block"),C(e,i.loading),C(t,i.loading),n.disabled=!0,o.disabled=!0},K.setDefaults=function(e){if(!e||"object"!==(void 0===e?"undefined":F(e)))return console.error("SweetAlert2: the argument for setDefaults() is required and has to be a object");for(var i in e)t.hasOwnProperty(i)||"extraParams"===i||(console.warn('SweetAlert2: Unknown parameter "'+i+'"'),delete e[i]);j(B,e)},K.resetDefaults=function(){B=j({},t)},K.noop=function(){},K.version="6.6.5",K["default"]=K,K}),window.Sweetalert2&&(window.sweetAlert=window.swal=window.Sweetalert2),$("#dre #loader").hide(),$("#dre").ready(()=>{$("#gerar_insight_link").on("ajax:beforeSend",function(){this.dataset.enableText=this.innerHTML,this.text=this.dataset.disableText,this.setAttribute("disabled","disabled")})});var client=window.ably;if(client){var user_channel=client.channels.get($("body").data("userId")),organization_channel=client.channels.get($("body").data("organizationId"));user_channel.subscribe("novoDownload",function(t){"relatorio_posicao_estoque"==t.data.origem&&window.postMessage(t.data),$("#downloads_disponiveis").text(t.data.count)}),user_channel.subscribe("importacaoAtualizacaoProdutos",function(t){trataWebsocketImportacaoProduto(t.data)}),user_channel.subscribe("importacaoDeInventarioSap",function(t){trataWebsocketImportacaoDeInventarioSap(t.data)}),user_channel.subscribe("importacaoImagensProdutos",function(t){trataWebsocketImportacaoImagens(t.data)}),user_channel.subscribe("remessaGerada",function(t){exibe_mensagem_com_status(t.data,"success")}),user_channel.subscribe("importacaoClassificacaoFiscalNcm",t=>{let{message:e,status:i}=t.data,n=$("#importacao-classificacao-fiscal-ncm-submit");n.prop("disabled",!1),n.text(window.t("interface.import")),exibe_mensagem_com_status(e,i)}),user_channel.subscribe("mensagemUsuario",function(t){exibe_mensagem_com_status(t.data.message,t.data.style)}),user_channel.subscribe("iuguBoleto",function(t){exibe_mensagem_com_status(t.data.text,"error")}),user_channel.subscribe("separaPedidos",function(t){exibe_mensagem_com_status(t.data.data,t.data.status),$.rails.ajax({url:`/pedidos/${t.data.pedido_id}/produtos/edit`,dataType:"jsonp"})}),user_channel.subscribe("duimpCriada",function(t){t.data&&(document.title=`(1) - Duimp importada | ${document.title}`,showNotificacao({titulo:"Duimp",texto:"",html:`<div><p>${t.data.title}</p> Clique <a href="/dis/${t.data.id}/edit">Aqui para editar</a></div>`}))}),organization_channel.subscribe("updateRecords",function(t){$(t.data.id).size()>0&&$.getScript(t.data.url)}),user_channel.subscribe("createRastreamento",function(){location.pathname.match("rastreamento/acompanhamentos")&&location.search.length<1&&window.postMessage("recarrega-lista",[])}),user_channel.subscribe("downloadNfeTerceiros",function(){location.pathname.match("compras")&&location.reload()}),organization_channel.subscribe("inutilizacaoAtualizada",function(t){exibe_mensagem_com_status(t.data.retorno,"success"),$.getScript(t.data.url)}),organization_channel.subscribe("retornoJobEmpresa",function(t){t.data.urlScript&&$.getScript(t.data.urlScript),t.data.message&&exibe_mensagem_com_status(t.data.message.text,t.data.message.style)}),organization_channel.subscribe("compraProcessada",function(t){$("#div_importacao_compra_pendente").length&&location.reload(),$("#tabela-compras").length&&(exibe_mensagem_com_status(`NF-e de terceiros ${t.data.rotulo} atualizada com sucesso.`,"success"),$.rails.ajax({url:"/compras",dataType:"jsonp"}))}),organization_channel.subscribe("updateOrder",function(){location.reload()}),user_channel.subscribe("inteligenciaArtificalCodigoItemDi",handleWebSocketIA),user_channel.subscribe("inteligenciaArtificalProgresso",function(t){updateProgressBarIA(t.data)}),user_channel.subscribe("inteligenciaArtificalInsightDre",handleModalInsightDre),user_channel.subscribe("pedidoPacotePago",handleBoletoPago),user_channel.subscribe("inteligenciaArtificalInsightDre",handleWebSocketIA)}const tokenField=$("#upvoty_sso_token");upVotyIframe(),$(function(){const t="#modal-holder",e="#modalNew";let i=null;const n=function(n,o,a){if("GET"==a.type||a.dataTypes.includes("script"))return!1;const r=o.responseText,s=o.getResponseHeader("Location");return s?window.location=s:($(".modal-backdrop").remove(),$(t).html(r).find(e).modal(),i&&$(e).addClass(i)),!1},o=function(i){$.get(i,(i,n,o)=>{if(o.getResponseHeader("content-type").includes("text/javascript"))return!1;$(e).modal("hide"),$(t).html(i).find(e).modal()})};$(document).on("click",'a[data-modal="true"]',function(){return o($(this).attr("href")),!1}),$(document).on("ajax:success",'form[data-modal="true"]',function(){i=$(this).data("class"),$(document).ajaxSuccess(n)}),$(document).on("ajax:error",'form[data-modal="true"]',function(){i=$(this).data("class"),$(document).ajaxError(function(t,e,i){200==e.status&&n(t,e,i)})}),$(t).on("shown.bs.modal",function(){setTimeout(function(){document.dispatchEvent(new Event("DOMContentLoaded"))},500)}),$(t).on("hidden.bs.modal",function(){$(t).html(""),$("body").removeAttr("style")}),$(document).ready(function(){$("body").data("modal")&&o($("body").data("modal"))})});var ajaxLoadingNotificationMenu=!0;$(".news-menu-class").on("mouseenter",function(){ajaxLoadingNotificationMenu&&$.ajax({url:"/notifications/read_all",type:"PUT",dataType:"json",data:{},suppressErrors:!0,success:function(){$("#news-menu-count").fadeOut(1e3),ajaxLoadingNotificationMenu=!1},error:function(){swal({title:"Ocorreu um erro inesperado.",text:"Tente novamente. Se o problema persistir, entre em contato com o suporte.",icon:"warning"}).then(()=>{})["catch"](()=>{})}})}),$(".editable").editable(),function(){function t(t){i.style.display="none",0==t&&(i.style.display="block")}let e=document.querySelector("#logistics_integration_connector"),i=document.querySelector("#treggo-header");null!=e&&(t(e.value),e.addEventListener("change",function(e){t(e.target.value)}))}(),function(t){let e=t("[name='arquivo_remessa[tipo_remessa]']"),i=t(".change_type_remessa");e.length>0&&t(e).on("change",function(){"change_remessa"===t(this).val()?i.css("display","block"):i.css("display","none")})}(jQuery),(()=>{function t(){let t=$(this).val(),i=$(this)[0].dataset.notaFiscalId;t.length>0&&i?$.ajax({url:`/parametros_genericos/${t}`,data:{nota_fiscal_id:i},suppressErrors:!0,success:t=>{let i=[];for(let n in t){fieldKeys=e(t[n]);for(let t in fieldKeys)i.push(fieldKeys[t])}localStorage.setItem("fields",JSON.stringify(i))}}):s()}function e(t){let e=[];for(let i in t){let s=`[name='parametros_nota_fiscal[${i}]']`,l=$(s);if(t[i]||0===t[i]){let e=l[0]&&"undefined"!=typeof l[0].type?l[0].type:null;"text"===e?a(l,t[i]):"checkbox"===e?o(l,t[i]):n(l,t[i])}else r(l);e.push(s)}return e}function i(t,e){let i=t[0]&&"undefined"!=t[0].options?t[0].options:[];for(let t=0;t<i.length;t++)if(i[t].value==e)return!0;return!1}function n(t,e){i(t,e)&&t.val(e).trigger("change.select2")}function o(t,e){e>0&&(t[0].value=e,t[0].checked=e)}function a(t,e){t[0].value="number"==typeof e?l(e):e}function r(t){let e=t[0]&&"undefined"!=typeof t[0].type?t[0].type:null;"text"===e?a(t,""):"checkbox"===e?o(t,0):n(t,"")}function s(){let t=JSON.parse(localStorage.getItem("fields"));for(let e in t){r($(t[e]))}}function l(t){let e=parseFloat(t);return e%1==0||""===t?t:String(e).replace(".",",")}$("#parametrizacao_generica").change(t)})(),document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementById("filtro-relatorio-notas-fiscais");t&&(handleDashboard(t),$("#btn-filtro-relatorio-nfs").on("click",function(){handleDashboard(t)}))});const warningMonitoramento="Ao ativar o monitoramento de notas fiscais voc\xea autoriza o sistema a buscar as notas emitidas contra o seu CNPJ e \xe9 declarado uma ci\xeancia sobre essa opera\xe7\xe3o, pois ela ainda n\xe3o possui elementos suficientes para apresentar a sua manifesta\xe7\xe3o conclusiva sobre a opera\xe7\xe3o citada. Ap\xf3s um per\xedodo determinado, todas as opera\xe7\xf5es com \u201cCi\xeancia da Emiss\xe3o\u201d dever\xe3o obrigatoriamente ter a manifesta\xe7\xe3o final do destinat\xe1rio declarada em um dos eventos de Confirma\xe7\xe3o da Opera\xe7\xe3o, Desconhecimento ou Opera\xe7\xe3o n\xe3o Realizada.";document.addEventListener("DOMContentLoaded",()=>{switchMonitoramento(),conferirProdutos()}),$("#company-group-select").on("change",function(){let t=this.value;$.rails.ajax({url:"/busca_emissores_por_grupo",type:"GET",dataType:"script",data:{company_gruop_id:t}})}),$(document).ready(function(){$("#option-dropdown").change(function(){const t=$(this).val(),e=$(".dynamic-select");e.hide(),e.removeClass("hide"),$(`#${t}`).show()})});var globaTab=null;document.addEventListener("DOMContentLoaded",function(){document.querySelector("#page-mov-estoque")&&(valorHabilitaCamposInicial&&valorHabilitaCamposInicial.length>0&&habilitaCampos(valorHabilitaCamposInicial),habilitaCamposIpi(ipimenfid,ipitccid,!0)),$('a[data-toggle="tab"]').on("shown.bs.tab",function(t){globaTab=new URL(t.target.href).hash.replace("#",""),t.target.href.match("tab-di")&&(modalDi.abrir(),$.rails.ajax({url:t.target.dataset.url,dataType:"jsonp"})),t.target.href.match("tab-icms")&&($("#mov_estoque_nota_fiscal_csosn_id, #mov_estoque_nota_fiscal_situacao_tributaria_b_id").on("change",habilitaCampos),$("#aplicar_reducao_bc_icms").on("click",aplicarReducaoBcIcms),$("#aplicar_reducao_bc_icms_st").on("click",aplicarReducaoBcIcmsSt)),t.target.href.match("tab-ipi")&&$("#ipi_situacao_tributaria_id").on("change",habilitaCamposIpi),t.target.href.match("tab-pis|tab-cofins")&&(habilitaCamposPis(pismenfid,!0),$("#mov_estoque_nota_fiscal_pis_situacao_tributaria_b_id, #mov_estoque_nota_fiscal_cofins_situacao_tributaria_b_id").on("change",habilitaCamposPis))})});const modalDi=_modalDi();