function cp_init(t){var e=document.getElementById(t);if(e)if(cp_hex2rgb(e.value)){var n=document.createElement("input");n.type="hidden",n.value=e.value,n.name=e.name,e.onchange&&(n.onchange=e.onchange),e.parentNode.insertBefore(n,e),e.parentNode.removeChild(e),n.id=t,e=n;var i=document.createElement("span");i.style.backgroundColor="#"+e.value,i.className="cp",i.label=t,i.onclick=new Function("cp_open(this)"),i.onmouseover=cp_cancelclose,i.onmouseout=cp_closesoon,e.parentNode.insertBefore(i,e)}else alert("Colour picker can't parse colour code in '"+t+"'");else alert("Colour picker can't find '"+t+"'")}function cp_open(t){if(cp_dom)cp_close();else{$(document).on("keyup",this,function(t){27===t.keyCode&&cp_close()}),cp_caller=t,cp_defaultcolour=document.getElementById(t.label).value;for(var e=0,n=t.offsetHeight;t;)e+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent;(cp_dom=document.createElement("div")).setAttribute("class","colorPickerWrapper");var i=document.createElement("table");i.setAttribute("class","colorPicker"),i.setAttribute("style","*width: 180px"),i.style.backgroundColor="#808080",i.style.borderCollapse="collapse",i.onmouseover=cp_cancelclose,i.onmouseout=cp_closesoon;for(var r,o,a=document.createElement("tbody"),s=0;s<cp_grid.length;s++){r=document.createElement("tr"),a.appendChild(r);for(var c=0;c<cp_grid[s].length;c++)o=document.createElement("td"),r.appendChild(o),div=document.createElement("div"),o.appendChild(div),div.style.width="100%",div.style.height="32px",div.style.cursor="pointer",div.style.backgroundColor="#"+cp_grid[s][c],div.label=cp_grid[s][c],div.style.border="2px solid #"+div.label,div.onmouseover=cp_onmouseover,div.onmouseout=cp_onmouseout,div.onclick=cp_onclick,cp_defaultcolour.toLowerCase()===cp_grid[s][c].toLowerCase()&&(div.onmouseover(),div.onmouseout())}i.appendChild(a),cp_dom.appendChild(i),cp_dom.style.position="absolute",cp_dom.style.left="0px",cp_dom.style.top="0px",cp_dom.style.visibility="hidden",document.body.appendChild(cp_dom),e+cp_dom.offsetWidth>document.body.offsetWidth&&(e=document.body.offsetWidth-cp_dom.offsetWidth),cp_dom.style.left=e+"px",cp_dom.style.top=n+"px",cp_dom.style.visibility="visible",cp_dom.style.zIndex="10001"}}function cp_close(){cp_cancelclose(),cp_dom&&document.body.removeChild(cp_dom),cp_dom=null,cp_caller=null}function cp_closesoon(){cp_closePID=window.setTimeout("cp_close()",250)}function cp_cancelclose(){cp_closePID&&window.clearTimeout(cp_closePID)}function cp_onclick(){cp_caller.style.backgroundColor="#"+this.label;var t=document.getElementById(cp_caller.label);t.value=this.label,cp_close(),t.onchange&&t.onchange(),$("body").trigger("color-picker:changed",[$(t)]),$(t).trigger("change")}function cp_onmouseover(){this.style.borderStyle="dotted";var t=cp_hex2rgb(this.label);t[0],t[1],t[2],this.style.borderColor="rgba(0, 0, 0, 0.3)"}function cp_onmouseout(){this.label===cp_defaultcolour?this.style.borderStyle="outset":this.style.border="solid 2px #"+this.label}function cp_hex2rgb(t){var e=t.match(/^([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])$/i);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:null}function convertColors(){return $.each(cp_grid,function(){$.each(this,function(){hex_grid.push(cp_hex2rgb(this))})}),hex_grid}(function(){var t,e,n,i,r,o,a,s,c,l,u,d,h,p,f,g,m,v,_,y,b,w,x,C,k,$,T,S,E,I,D,A,F,O,j,M,L,P,N,R,B,z,H,U,q,W,Y,V,K,Q,X,J,Z,G,tt,et=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},nt=function(t,e){function n(){this.constructor=t}for(var i in e)it.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},it={}.hasOwnProperty,rt=[].slice,ot=function(t,e){return function(){return t.apply(e,arguments)}};F={},d=10,X=!1,P=null,v=null,D=null,B=null,tt=null,i={BEFORE_CHANGE:"page:before-change",FETCH:"page:fetch",RECEIVE:"page:receive",CHANGE:"page:change",UPDATE:"page:update",LOAD:"page:load",RESTORE:"page:restore",BEFORE_UNLOAD:"page:before-unload",EXPIRE:"page:expire"},x=function(t){var e;return t=new n(t),W(),u(),null!=P&&P.start(),X&&(e=J(t.absolute))?(C(e),k(t,null,!1)):k(t,K)},J=function(t){var e;if((e=F[t])&&!e.transitionCacheDisabled)return e},y=function(t){return null==t&&(t=!0),X=t},_=function(t){if(null==t&&(t=!0),c)return t?null!=P?P:P=new o("html"):(null!=P&&P.uninstall(),P=null)},k=function(t,e,n){return null==n&&(n=!0),Z(i.FETCH,{url:t.absolute}),null!=tt&&tt.abort(),(tt=new XMLHttpRequest).open("GET",t.withoutHashForIE10compatibility(),!0),tt.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),tt.setRequestHeader("X-XHR-Referer",B),tt.onload=function(){var n;return Z(i.RECEIVE,{url:t.absolute}),(n=L())?(z(t),H(),h.apply(null,w(n)),A(),"function"==typeof e&&e(),Z(i.LOAD)):document.location.href=m()||t.absolute},P&&n&&(tt.onprogress=function(t){var e;return e=t.lengthComputable?t.loaded/t.total*100:P.value+(100-P.value)/10,P.advanceTo(e)}),tt.onloadend=function(){return tt=null},tt.onerror=function(){return document.location.href=t.absolute},tt.send()},C=function(t){return null!=tt&&tt.abort(),h(t.title,t.body),N(t),Z(i.RESTORE)},u=function(){var t;return t=new n(v.url),F[t.absolute]={url:t.relative,body:document.body,title:document.title,positionY:window.pageYOffset,positionX:window.pageXOffset,cachedAt:(new Date).getTime(),transitionCacheDisabled:null!=document.querySelector("[data-no-transition-cache]")},f(d)},j=function(t){if(null==t&&(t=d),/^[\d]+$/.test(t))return d=parseInt(t)},f=function(t){var e,n,r,o,a,s;for(e=(a=Object.keys(F)).map(function(t){return F[t].cachedAt}).sort(function(t,e){return e-t}),s=[],n=0,o=a.length;n<o;n++)r=a[n],F[r].cachedAt<=e[t]&&(Z(i.EXPIRE,F[r]),s.push(delete F[r]));return s},h=function(e,n,r,o){return Z(i.BEFORE_UNLOAD),document.title=e,document.documentElement.replaceChild(n,document.body),null!=r&&t.update(r),Q(),o&&b(),v=window.history.state,null!=P&&P.done(),Z(i.CHANGE),Z(i.UPDATE)},b=function(){var t,e,n,i,r,o,a,s,c,l,u,d;for(n=0,r=(d=Array.prototype.slice.call(document.body.querySelectorAll('script:not([data-turbolinks-eval="false"])'))).length;n<r;n++)if(""===(c=(u=d[n]).type)||"text/javascript"===c){for(e=document.createElement("script"),i=0,o=(l=u.attributes).length;i<o;i++)t=l[i],e.setAttribute(t.name,t.value);u.hasAttribute("async")||(e.async=!1),e.appendChild(document.createTextNode(u.innerHTML)),s=u.parentNode,a=u.nextSibling,s.removeChild(u),s.insertBefore(e,a)}},Y=function(t){return t.innerHTML=t.innerHTML.replace(/<noscript[\S\s]*?<\/noscript>/gi,""),t},Q=function(){var t,e;if((t=(e=document.querySelectorAll("input[autofocus], textarea[autofocus]"))[e.length-1])&&document.activeElement!==t)return t.focus()},z=function(t){if((t=new n(t)).absolute!==B)return window.history.pushState({turbolinks:!0,url:t.absolute},"",t.absolute)},H=function(){var t,e;if(t=tt.getResponseHeader("X-XHR-Redirected-To"))return e=(t=new n(t)).hasNoHash()?document.location.hash:"",window.history.replaceState(window.history.state,"",t.href+e)},m=function(){var t;if(null!=(t=tt.getResponseHeader("Location"))&&new n(t).crossOrigin())return t},W=function(){return B=document.location.href},q=function(){return window.history.replaceState({turbolinks:!0,url:document.location.href},"",document.location.href)},U=function(){return v=window.history.state},A=function(){var t;if(navigator.userAgent.match(/Firefox/)&&!(t=new n).hasNoHash())return window.history.replaceState(v,"",t.withoutHash()),document.location.hash=t.hash},N=function(t){return window.scrollTo(t.positionX,t.positionY)},K=function(){return document.location.hash?document.location.href=document.location.href:window.scrollTo(0,0)},p=function(t){var e,n,i;if(null==t||"object"!=typeof t)return t;for(n in e=new t.constructor,t)i=t[n],e[n]=p(i);return e},M=function(t){var e,n;return n=(null!=(e=document.cookie.match(new RegExp(t+"=(\\w+)")))?e[1].toUpperCase():void 0)||"",document.cookie=t+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/",n},Z=function(t,e){var n;return"undefined"!=typeof Prototype&&Event.fire(document,t,e,!0),n=document.createEvent("Events"),e&&(n.data=e),n.initEvent(t,!0,!0),document.dispatchEvent(n)},O=function(t){return!Z(i.BEFORE_CHANGE,{url:t})},L=function(){var t,e,n,i,r;if(r=function(){var t;return null!=(t=tt.getResponseHeader("Content-Type"))&&t.match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/)},n=function(t){var e,n,i,r,o;for(o=[],e=0,n=(r=t.querySelector("head").childNodes).length;e<n;e++)null!=("function"==typeof(i=r[e]).getAttribute?i.getAttribute("data-turbolinks-track"):void 0)&&o.push(i.getAttribute("src")||i.getAttribute("href"));return o},t=function(t){var e;return D||(D=n(document)),(e=n(t)).length!==D.length||i(e,D).length!==D.length},i=function(t,e){var n,i,r,o,a;for(t.length>e.length&&(t=(r=[e,t])[0],e=r[1]),o=[],n=0,i=t.length;n<i;n++)a=t[n],et.call(e,a)>=0&&o.push(a);return o},!function(){var t;return 400<=(t=tt.status)&&t<600}()&&r()&&(e=g(tt.responseText))&&!t(e))return e},w=function(e){var n;return[null!=(n=e.querySelector("title"))?n.textContent:void 0,Y(e.querySelector("body")),t.get(e).token,"runScripts"]},t={get:function(t){var e;return null==t&&(t=document),{node:e=t.querySelector('meta[name="csrf-token"]'),token:null!=e&&"function"==typeof e.getAttribute?e.getAttribute("content"):void 0}},update:function(t){var e;if(null!=(e=this.get()).token&&null!=t&&e.token!==t)return e.node.setAttribute("content",t)}},g=function(t){var e;return(e=document.documentElement.cloneNode()).innerHTML=t,e.head=e.querySelector("head"),e.body=e.querySelector("body"),e},n=function(){function t(e){if(this.original=null!=e?e:document.location.href,this.original.constructor===t)return this.original;this._parse()}return t.prototype.withoutHash=function(){return this.href.replace(this.hash,"").replace("#","")},t.prototype.withoutHashForIE10compatibility=function(){return this.withoutHash()},t.prototype.hasNoHash=function(){return 0===this.hash.length},t.prototype.crossOrigin=function(){return this.origin!==(new t).origin},t.prototype._parse=function(){var t;return(null!=this.link?this.link:this.link=document.createElement("a")).href=this.original,t=this.link,this.href=t.href,this.protocol=t.protocol,this.host=t.host,this.hostname=t.hostname,this.port=t.port,this.pathname=t.pathname,this.search=t.search,this.hash=t.hash,this.origin=[this.protocol,"//",this.hostname].join(""),0!==this.port.length&&(this.origin+=":"+this.port),this.relative=[this.pathname,this.search,this.hash].join(""),this.absolute=this.href},t}(),r=function(){function t(e){if(this.link=e,this.link.constructor===t)return this.link;this.original=this.link.href,this.originalElement=this.link,this.link=this.link.cloneNode(!1),t.__super__.constructor.apply(this,arguments)}return nt(t,n),t.HTML_EXTENSIONS=["html"],t.allowExtensions=function(){var e,n,i,r;for(i=0,r=(n=1<=arguments.length?rt.call(arguments,0):[]).length;i<r;i++)e=n[i],t.HTML_EXTENSIONS.push(e);return t.HTML_EXTENSIONS},t.prototype.shouldIgnore=function(){return this.crossOrigin()||this._anchored()||this._nonHtml()||this._optOut()||this._target()},t.prototype._anchored=function(){return(this.hash.length>0||"#"===this.href.charAt(this.href.length-1))&&this.withoutHash()===(new n).withoutHash()},t.prototype._nonHtml=function(){return this.pathname.match(/\.[a-z]+$/g)&&!this.pathname.match(new RegExp("\\.(?:"+t.HTML_EXTENSIONS.join("|")+")?$","g"))},t.prototype._optOut=function(){var t,e;for(e=this.originalElement;!t&&e!==document;)t=null!=e.getAttribute("data-no-turbolink"),e=e.parentNode;return t},t.prototype._target=function(){return 0!==this.link.target.length},t}(),e=function(){function t(t){this.event=t,this.event.defaultPrevented||(this._extractLink(),this._validForTurbolinks()&&(O(this.link.absolute)||G(this.link.href),this.event.preventDefault()))}return t.installHandlerLast=function(e){if(!e.defaultPrevented)return document.removeEventListener("click",t.handle,!1),document.addEventListener("click",t.handle,!1)},t.handle=function(e){return new t(e)},t.prototype._extractLink=function(){var t;for(t=this.event.target;t.parentNode&&"A"!==t.nodeName;)t=t.parentNode;if("A"===t.nodeName&&0!==t.href.length)return this.link=new r(t)},t.prototype._validForTurbolinks=function(){return null!=this.link&&!(this.link.shouldIgnore()||this._nonStandardClick())},t.prototype._nonStandardClick=function(){return this.event.which>1||this.event.metaKey||this.event.ctrlKey||this.event.shiftKey||this.event.altKey},t}(),o=function(){function t(t){this.elementSelector=t,this._trickle=ot(this._trickle,this),this.value=0,this.opacity=1,this.content="",this.speed=300,this.install()}var e;return e="turbolinks-progress-bar",t.prototype.install=function(){return this.element=document.querySelector(this.elementSelector),this.element.classList.add(e),this.styleElement=document.createElement("style"),document.head.appendChild(this.styleElement),this._updateStyle()},t.prototype.uninstall=function(){return this.element.classList.remove(e),document.head.removeChild(this.styleElement)},t.prototype.start=function(){return this.advanceTo(5)},t.prototype.advanceTo=function(t){var e;if(t>(e=this.value)&&e<=100){if(this.value=t,this._updateStyle(),100===this.value)return this._stopTrickle();if(this.value>0)return this._startTrickle()}},t.prototype.done=function(){if(this.value>0)return this.advanceTo(100),this._reset()},t.prototype._reset=function(){var t;return setTimeout((t=this,function(){return t.opacity=0,t._updateStyle()}),this.speed/2),setTimeout(function(t){return function(){return t.value=0,t.opacity=1,t._withSpeed(0,function(){return t._updateStyle(!0)})}}(this),this.speed)},t.prototype._startTrickle=function(){if(!this.trickling)return this.trickling=!0,setTimeout(this._trickle,this.speed)},t.prototype._stopTrickle=function(){return delete this.trickling},t.prototype._trickle=function(){if(this.trickling)return this.advanceTo(this.value+Math.random()/2),setTimeout(this._trickle,this.speed)},t.prototype._withSpeed=function(t,e){var n,i;return n=this.speed,this.speed=t,i=e(),this.speed=n,i},t.prototype._updateStyle=function(t){return null==t&&(t=!1),t&&this._changeContentToForceRepaint(),this.styleElement.textContent=this._createCSSRule()},t.prototype._changeContentToForceRepaint=function(){return this.content=""===this.content?" ":""},t.prototype._createCSSRule=function(){return this.elementSelector+"."+e+"::before {\n  content: '"+this.content+"';\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 2000;\n  background-color: #0076ff;\n  height: 3px;\n  opacity: "+this.opacity+";\n  width: "+this.value+"%;\n  transition: width "+this.speed+"ms ease-out, opacity "+this.speed/2+"ms ease-in;\n  transform: translate3d(0,0,0);\n}"},t}(),l=function(t){return setTimeout(t,500)},S=function(){return document.addEventListener("DOMContentLoaded",function(){return Z(i.CHANGE),Z(i.UPDATE)},!0)},I=function(){if("undefined"!=typeof jQuery)return jQuery(document).on("ajaxSuccess",function(t,e){if(jQuery.trim(e.responseText))return Z(i.UPDATE)})},E=function(t){var e,i;if(null!=(i=t.state)?i.turbolinks:void 0)return(e=F[new n(t.state.url).absolute])?(u(),C(e)):G(t.target.location.href)},T=function(){return q(),U(),document.addEventListener("click",e.installHandlerLast,!0),window.addEventListener("hashchange",function(){return q(),U()},!1),l(function(){return window.addEventListener("popstate",E,!1)})},$=void 0!==window.history.state||navigator.userAgent.match(/Firefox\/2[6|7]/),s=window.history&&window.history.pushState&&window.history.replaceState&&$,a=!navigator.userAgent.match(/CriOS\//),V="GET"===(R=M("request_method"))||""===R,c=s&&a&&V,document.addEventListener&&document.createEvent&&(S(),I()),c?(G=x,T()):G=function(t){return document.location.href=t},this.Turbolinks={visit:G,pagesCached:j,enableTransitionCache:y,enableProgressBar:_,allowLinkExtensions:r.allowExtensions,supported:c,EVENTS:p(i)}}).call(this),function(t,e){"use strict";var n;t.rails!==e&&t.error("jquery-ujs has already been loaded!");var i=t(document);t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return t("meta[name=csrf-token]").attr("content")},csrfParam:function(){return t("meta[name=csrf-param]").attr("content")},CSRFProtection:function(t){var e=n.csrfToken();e&&t.setRequestHeader("X-CSRF-Token",e)},refreshCSRFTokens:function(){t('form input[name="'+n.csrfParam()+'"]').val(n.csrfToken())},fire:function(e,n,i){var r=t.Event(n);return e.trigger(r,i),!1!==r.result},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t[0].href},isRemote:function(t){return t.data("remote")!==e&&!1!==t.data("remote")},handleRemote:function(i){var r,o,a,s,c,l;if(n.fire(i,"ajax:before")){if(s=i.data("with-credentials")||null,c=i.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,i.is("form")){r=i.data("ujs:submit-button-formmethod")||i.attr("method"),o=i.data("ujs:submit-button-formaction")||i.attr("action"),a=t(i[0]).serializeArray();var u=i.data("ujs:submit-button");u&&(a.push(u),i.data("ujs:submit-button",null)),i.data("ujs:submit-button-formmethod",null),i.data("ujs:submit-button-formaction",null)}else i.is(n.inputChangeSelector)?(r=i.data("method"),o=i.data("url"),a=i.serialize(),i.data("params")&&(a=a+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(r=i.data("method")||"get",o=i.data("url"),a=i.serialize(),i.data("params")&&(a=a+"&"+i.data("params"))):(r=i.data("method"),o=n.href(i),a=i.data("params")||null);return l={type:r||"GET",data:a,dataType:c,beforeSend:function(t,r){if(r.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),!n.fire(i,"ajax:beforeSend",[t,r]))return!1;i.trigger("ajax:send",t)},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(e,n){i.parents("html").length>0?i.trigger("ajax:complete",[e,n]):t(document).trigger("ajax:complete",[e,n])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:n.isCrossDomain(o)},s&&(l.xhrFields={withCredentials:s}),o&&(l.url=o),n.ajax(l)}return!1},isCrossDomain:function(t){var e=document.createElement("a");e.href=location.href;var n=document.createElement("a");try{return n.href=t,n.href=n.href,!((!n.protocol||":"===n.protocol)&&!n.host||e.protocol+"//"+e.host==n.protocol+"//"+n.host)}catch(i){return!0}},handleMethod:function(i){var r=n.href(i),o=i.data("method"),a=i.attr("target"),s=n.csrfToken(),c=n.csrfParam(),l=t('<form method="post" action="'+r+'"></form>'),u='<input name="_method" value="'+o+'" type="hidden" />';c===e||s===e||n.isCrossDomain(r)||(u+='<input name="'+c+'" value="'+s+'" type="hidden" />'),a&&l.attr("target",a),l.hide().append(u).appendTo("body"),l.submit()},formElements:function(e,n){return e.is("form")?t(e[0].elements).filter(n):e.find(n)},disableFormElements:function(e){n.formElements(e,n.disableSelector).each(function(){n.disableFormElement(t(this))})},disableFormElement:function(t){var n,i;n=t.is("button")?"html":"val",(i=t.data("disable-with"))!==e&&(t.data("ujs:enable-with",t[n]()),t[n](i)),t.prop("disabled",!0),t.data("ujs:disabled",!0)},enableFormElements:function(e){n.formElements(e,n.enableSelector).each(function(){n.enableFormElement(t(this))})},enableFormElement:function(t){var n=t.is("button")?"html":"val";t.data("ujs:enable-with")!==e&&(t[n](t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.prop("disabled",!1),t.removeData("ujs:disabled")},allowAction:function(t){var e,i=t.data("confirm"),r=!1;if(!i)return!0;if(n.fire(t,"confirm")){try{r=n.confirm(i)}catch(o){(console.error||console.log).call(console,o.stack||o)}e=n.fire(t,"confirm:complete",[r])}return r&&e},blankInputs:function(e,n,i){var r,o,a,s=t(),c=n||"input,textarea",l=e.find(c),u={};return l.each(function(){(r=t(this)).is("input[type=radio]")?(a=r.attr("name"),u[a]||(0===e.find('input[type=radio]:checked[name="'+a+'"]').length&&(o=e.find('input[type=radio][name="'+a+'"]'),s=s.add(o)),u[a]=a)):(r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):!!r.val())===i&&(s=s.add(r))}),!!s.length&&s},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var i=t.data("disable-with");i!==e&&(t.data("ujs:enable-with",t.html()),t.html(i)),t.bind("click.railsDisable",function(t){return n.stopEverything(t)}),t.data("ujs:disabled",!0)},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable"),t.removeData("ujs:disabled")}},n.fire(i,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,i){t.crossDomain||n.CSRFProtection(i)}),t(window).on("pageshow.rails",function(){t(t.rails.enableSelector).each(function(){var e=t(this);e.data("ujs:disabled")&&t.rails.enableFormElement(e)}),t(t.rails.linkDisableSelector).each(function(){var e=t(this);e.data("ujs:disabled")&&t.rails.enableElement(e)})}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(t(this))}),i.delegate(n.buttonDisableSelector,"ajax:complete",function(){n.enableFormElement(t(this))}),i.delegate(n.linkClickSelector,"click.rails",function(e){var i=t(this),r=i.data("method"),o=i.data("params"),a=e.metaKey||e.ctrlKey;if(!n.allowAction(i))return n.stopEverything(e);if(!a&&i.is(n.linkDisableSelector)&&n.disableElement(i),n.isRemote(i)){if(a&&(!r||"GET"===r)&&!o)return!0;var s=n.handleRemote(i);return!1===s?n.enableElement(i):s.fail(function(){n.enableElement(i)}),!1}return r?(n.handleMethod(i),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i)||!n.isRemote(i))return n.stopEverything(e);i.is(n.buttonDisableSelector)&&n.disableFormElement(i);var r=n.handleRemote(i);return!1===r?n.enableFormElement(i):r.fail(function(){n.enableFormElement(i)}),!1}),i.delegate(n.inputChangeSelector,"change.rails",function(e){var i=t(this);return n.allowAction(i)&&n.isRemote(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var r,o,a=t(this),s=n.isRemote(a);if(!n.allowAction(a))return n.stopEverything(i);if(a.attr("novalidate")===e)if(a.data("ujs:formnovalidate-button")===e){if((r=n.blankInputs(a,n.requiredInputSelector,!1))&&n.fire(a,"ajax:aborted:required",[r]))return n.stopEverything(i)}else a.data("ujs:formnovalidate-button",e);if(s){if(o=n.nonBlankInputs(a,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(a)},13);var c=n.fire(a,"ajax:aborted:file",[o]);return c||setTimeout(function(){n.enableFormElements(a)},13),c}return n.handleRemote(a),!1}setTimeout(function(){n.disableFormElements(a)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);var r=i.attr("name"),o=r?{name:r,value:i.val()}:null,a=i.closest("form");0===a.length&&(a=t("#"+i.attr("form"))),a.data("ujs:submit-button",o),a.data("ujs:formnovalidate-button",i.attr("formnovalidate")),a.data("ujs:submit-button-formaction",i.attr("formaction")),a.data("ujs:submit-button-formmethod",i.attr("formmethod"))}),i.delegate(n.formSubmitSelector,"ajax:send.rails",function(e){this===e.target&&n.disableFormElements(t(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(e){this===e.target&&n.enableFormElements(t(this))}),t(function(){n.refreshCSRFTokens()}))}(jQuery),function(){var t=function(t,e){var n=this;n.form=$(t),e||(e={}),n.options=$.extend({name_scope:"",scrollToError:!1},e),n.showErrors=function(t){for(var e in n.removeErrors(),t){var i=t[e];if(i.constructor==Object)for(var r in i){var o;o=""!=n.options.name_scope?n.options.name_scope+"["+e+"]["+r+"]":e+"["+r+"]",n.showErrorFor(o,i[r][0])}else o=""!=n.options.name_scope?n.options.name_scope+"["+e+"]":e,n.showErrorFor(o,i[0])}if(n.options.scrollToError){var a=$("*.error:visible:first",n.form);a.size()&&$.scrollTo(a,{duration:300,easing:"easeOutBack",offset:{top:-60}})}},n.showErrorFor=function(t,e){var i=$('*[name="'+t+'"]:visible, *[data-form-field="'+t+'"]:visible',n.form),r=$('*[data-error="'+t+'"]',n.form);r.size()>0?r.html(e):i.after("<span class='error-message' data-error='"+t+"'>"+e+"</span>"),i.addClass("error"),i.parent().addClass("with-error"),i.off("blur.Form:removeError").on("blur.Form:removeError",function(){$(this).val().length>0&&i.trigger("form:removeError")}),i.off("form:removeError").on("form:removeError",function(){var t=$(this).parents(".with-error:first");$("*[data-error]",t).remove(),t.removeClass("with-error"),$(this).removeClass("error"),$(this).off("blur.removeError")})},n.removeErrors=function(){$("*[data-error]",n.form).remove(),$(".with-error",n.form).removeClass("with-error"),$(".error",n.form).removeClass("error")},n.form.on("submit.Form",function(){n.removeErrors()}),$("*[type=submit][keep-adding]",n.form).on("click.Form:keep-adding",function(){n.form.data("keep-adding",!0)}),n.form.on("ajax:complete.Form:keep-adding",function(){n.form.data("keep-adding",null)}),n.form.on("ajax:error.Form",function(t,e){t.target==n.form[0]&&n.showErrors(e.responseJSON)}),n.form.on("form:removeErrors",function(){n.removeErrors()}).on("form:showErrors",function(t,e){n.showErrors(e)}).on("form:showErrorFor",function(t,e,i){n.showErrorFor(e,i)}),$("input, select, textarea",n.form).on("focus.Form",function(){$(this).parent().addClass("focus")}).on("blur.Form",function(){$(this).parent().removeClass("focus")})};window.Form=t}(),function(){Array.prototype.filter||(Array.prototype.filter=function(t){return _.filter(this,t)}),Array.prototype.each||(Array.prototype.each=function(t){return _.each(this,t)}),Array.prototype.find||(Array.prototype.find=function(t){return _.find(this,t)}),Array.prototype.include||(Array.prototype.include=function(t){return _.include(this,t)}),Array.prototype.map||(Array.prototype.map=function(t){return _.map(this,t)}),Array.prototype.toDict||(Array.prototype.toDict=function(t){var e,n,i,r,o;for(e={},n=0,i=(o=this).length;n<i;n++)null!=(r=o[n])[t]&&(e[r[t]]=r);return e}),Array.prototype.remove||(Array.prototype.remove=function(t){var e,n,i,r,o;for(n=0,o=[],e=0,i=(r=this).length;e<i;e++)r[e]===t&&this.splice(n,1),o.push(n+=1);return o}),Array.prototype.empty||(Array.prototype.empty=function(){return 0===this.length}),Array.prototype.any||(Array.prototype.any=function(){return this.length>0})}.call(this),function(t,e){var n=t.parse,i=[1,4,5,6,7,10,11];t.parse=function(r){var o,a,s=0;if(a=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(r)){for(var c,l=0;c=i[l];++l)a[c]=+a[c]||0;a[2]=(+a[2]||1)-1,a[3]=+a[3]||1,"Z"!==a[8]&&a[9]!==e&&(s=60*a[10]+a[11],"+"===a[9]&&(s=0-s)),o=t.UTC(a[1],a[2],a[3],a[4],a[5]+s,a[6],a[7])}else o=n?n(r):NaN;return o},t.timezoneNormalizedParse=function(e){return new t(t.parse(e+"T12:00Z"))},t.prototype.format=function(){return _day=this.getDate(),_month=this.getMonth()+1,_year=this.getFullYear(),_day+"/"+_month+"/"+_year},t.prototype.toISO=function(){return this.toISOString().split("T")[0]},t.prototype.week_day=function(){return _week_days={0:"domingo",1:"segunda",2:"ter\xe7a",3:"quarta",4:"quinta",5:"sexta",6:"s\xe1bado"},_week_days[this.getDay()]},t.prototype.today=function(){return this.getTime()==t.today.getTime()},t.prototype.special_day=function(){return this.getTime()==t.today.getTime()?"hoje":this.getTime()==t.yesterday.getTime()?"ontem":this.getTime()==t.tomorrow.getTime()&&"amanh\xe3"}}(Date),function(){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.lstrip=function(){return this.replace(/^\s+/g,"")},String.prototype.rstrip=function(){return this.replace(/\s+$/g,"")},String.prototype.capitalize=function(){return this.split(/\s+/).map(function(t){return t[0].toUpperCase()+t.slice(1).toLowerCase()}).join(" ")},String.prototype.camelize=function(){return this.replace(/(?:^|[-|_])(\w)/g,function(t){return t?t.toUpperCase():""}).replace(/_|-/,"")},String.prototype.truncate=function(t){var e,n,i;return e=(n=t||{}).length||20,i=n.sufix||"...",this.length+i.length>e&&e<this.length?this.substring(0,e-3)+i:this.concat()},String.prototype.highlight=function(t){var e;return e=new RegExp(t,"gi"),this.replace(e,function(t){return"<strong class='highlight'>"+t+"</strong>"})}}.call(this),window.TransactionsIndexApp=angular.module("app.transactionsIndex",["service.categories","service.tags","service.accountables","service.currency","ngResource","ngAnimate","ngSanitize","directive.floatingTopBar"]),TransactionsIndexApp.factory("Filters",[function(){var t={};return t.source=window.tmp.filters,t.isFilterEmpty=function(){var e=!0;for(var n in t.source){if(t.source[n].length>0){e=!1;break}}return e},t.findInFilter=function(e,n){return _.find(t.source[e],function(t){return t==n})},t}]),TransactionsIndexApp.factory("FilterAccounts",["Accountables","Accounts","CreditCards","$filter",function(t,e,n,i){var r={accounts:function(){var t=i("orderBy")(e.active(),"name");return _.map(t,function(e,n){e.santized_name=e.name,0===e.kind?e.short_kind="cc":1==e.kind?e.short_kind="cp":e.short_kind="outros";var i=t[n-1];return i&&i.name==e.name&&(e.santized_name=e.name+" ("+e.short_kind+")",i.santized_name=i.name+" ("+i.short_kind+")"),e})},credit_cards:function(){return i("orderBy")(n.active(),"name")}};return r.findBy=t.findBy,r}]),TransactionsIndexApp.controller("filtersCtrl",["$scope","$rootScope","$attrs","Categories","Tags","Context","Filters","FilterAccounts",function(t,e,n,i,r,o,a,s){t.filters=a.source,t.Categories=i,t.Tags=r,t.FilterAccounts=s,e.filterOpen=!a.isFilterEmpty()&&0===a.source.search.length;var c={earnings:"receitas",earnings_paid:"receitas recebidas",earnings_pending:"receitas n\xe3o recebidas",expenses:"despesas",expenses_paid:"despesas pagas",expenses_pending:"despesas n\xe3o pagas",transferences:"transfer\xeancias",transferences_paid:"transfer\xeancias pagas",transferences_pending:"transfer\xeancias n\xe3o pagas",infinite:"lan\xe7amentos fixos",finite:"lan\xe7amentos parcelados"};t.presets={asArray:_.map(c,function(t,e){return{key:e,name:t}}),topLevelText:function(){return 0===t.filters.presets.length?"Tipo":c[t.filters.presets[0]]},toggle:function(e,n){a.findInFilter("presets",e.key)?u("presets",e.key):(t.filters.presets=[],l("presets",e.key)),n.preventDefault()}},t.addClass=function(t){e.filterOpen=!0,t.preventDefault()},t.removeClass=function(n){a.isFilterEmpty()||t.clearAll(n),e.filterOpen=!1,n.preventDefault()},t.accounts={topLevelText:function(){return 0===t.filters.accounts.length?"Contas e cart\xf5es":s.findBy({uuid:t.filters.accounts[0]}).name},toggle:function(e,n){a.findInFilter("accounts",e.uuid)?u("accounts",e.uuid):(t.filters.accounts=[],l("accounts",e.uuid)),n.preventDefault()}},t.categories={topLevelText:function(){return 0===t.filters.categories.length?"Categorias":1==t.filters.categories.length?i.findBy({uuid:t.filters.categories[0]}).name:t.filters.categories.length+" categorias"},toggle:function(e,n){if(a.findInFilter("categories",e.uuid))u("categories",e.uuid);else{var r=[e.uuid];"true"==e.is_root&&(r=r.concat(_.map(i.childrenFor(e),function(t){return t.uuid}))),t.filters.categories=_.uniq(t.filters.categories.concat(r)),d()}n.preventDefault()}},t.tags={topLevelText:function(){return 0===t.filters.tags.length?"Tags":1==t.filters.tags.length?t.filters.tags[0]:t.filters.tags.length+" tags"},toggle:function(e,n){a.findInFilter("tags",e.name)?u("tags",e.name):(t.filters.tags=_.uniq(t.filters.tags.concat([e.name])),d()),n.preventDefault()}},t.clearFilter=function(e,n){t.filters[e]=[],n&&n.preventDefault(),d()},t.clearAll=function(e){$.each(t.filters,function(e){t.filters[e]=[]}),e.preventDefault(),d()},t.inFilter=function(t,e){return!!a.findInFilter(t,e)},t.empty=function(){var e=!0;return $.each(t.filters,function(t,n){n.length>0&&"search"!=t&&(e=!1)}),e};var l=function(e,n){t.filters[e].push(n),d()},u=function(e,n){t.filters[e]=_.reject(t.filters[e],function(t){return t==n}),d()},d=function(){a.source=t.filters,t.$root.$emit("afterFilter",t.filters)}}]),TransactionsIndexApp.directive("floatingDays",["$timeout",function(){var t=function(){var t=function(t){this.table=$("#transactions-table table:first"),this.span=$("span:first",t),this.placeholder=$("span:first",this.span),this.currentDay=null};return t.prototype.onScroll=function(){this.shouldFloat()?(this.track_current_day(),this.placeholder.html(this.currentDay),this.make_it_float()):this.cancel_float()},t.prototype.shouldFloat=function(){return $(window).scrollTop()>this.table.offset().top-47},t.prototype.make_it_float=function(){this.span.css({display:"block"})},t.prototype.cancel_float=function(){this.span.css({display:"none"})},t.prototype.track_current_day=function(){this.currentDay||(this.currentDay=$.trim($("th.day.first:first",this.table).text()));var t=this;$("th.day.first",this.table).each(function(){$(this).offset().top>$(window).scrollTop()+67||(t.currentDay=$(this).find("span:first").html())})},t}();return function(e,n){t.instance=new t(n),$(window).off("scroll.floatingDays").on("scroll.floatingDays",function(){"finance transactions"==$("body").data("section")?t.instance.onScroll():$(window).off("scroll.floatingDays")})}}]),TransactionsIndexApp.directive("paginate",["$rootScope","$http",function(t,e){var n=window.tmp.urls.transaction_list_paginator_url,i=!1,r=100;t.paginating=!1;var o=function(){return $(window).scrollTop()>($(window).data("scrollTop")||0)?($(window).data("scrollTop",$(window).scrollTop()),$(window).scrollTop()+$(window).height()>$(document).height()-800):($(window).data("scrollTop",$(window).scrollTop()),!1)},a=function(o){var a=o.transactions.length;a<r||(t.paginating=!0,e({method:"GET",url:n,params:{offset:a}}).success(function(e){o.$emit("paginate",e),t.paginating=!1,0==e.length&&(i=!0)}))};return t.$watch("transactions_last_loaded_at",function(t,e){t!=e&&(i=!1)}),t.$watch("afterFilter",function(){i=!1}),function(e){$(window).off("scroll.transactionsPaginate").on("scroll.transactionsPaginate",function(){t.shouldPaginate&&!i&&!t.paginating&&o()&&a(e)})}}]),TransactionsIndexApp.factory("DailyBalances",["$rootScope","$http","Context",function(t,e){var n={};n.balances=window.tmp.daily_balances,n.showDetails={},n.details={},n.refresh=function(){for(var t in e.get(tmp.urls.daily_balances_transaction_list_results_url).success(function(t){n.balances=t}),n.showDetails)!0===n.showDetails[t]&&i(t)},n.toggle=function(t,e){n.showDetails[t]=!n.showDetails[t],i(t),e.preventDefault()},n.detailsFor=function(t){return n.details[t]||{predicted_earnings:0,predicted_expenses:0,predicted_balance:0}};var i=function(t){e.get(tmp.urls.day_results_url+"/"+t+".json").success(function(e){n.details[t]=e})};return n}]),TransactionsIndexApp.factory("Results",["Context","$rootScope","$resource",function(t,e,n){var i={},r=n(window.tmp.urls.list_results_url,{},{query:{method:"GET",isArray:!1}});return i.fetch=function(t,n){return e.loadingResults=!0,r.query(t,function(){e.loadingResults=!1,n&&n()})},i.backgroundFetch=function(t,e){return r.query(t,function(){e&&e()})},i}]),TransactionsIndexApp.filter("money",["Currency",function(t){return function(e){return t.symbol+" "+t.format(e/100)}}]),TransactionsIndexApp.animation(".details-transactions",function(){return{enter:function(t,e){$(t).css({height:0,overflow:"hidden"}).animate({height:76},{duration:300,complete:function(){e()}})},leave:function(t,e){$(t).animate({height:0},{duration:300,complete:function(){e()}})}}}),TransactionsIndexApp.controller("resultsCtrl",["$scope","$attrs","Results","DailyBalances","Context","$timeout","$sanitize",function(t,e,n,i,r){t.results=n.fetch({start_date:window.tmp.start_date,end_date:window.tmp.end_date}),t.showDetails=r.preferences.transactions_show_result_details,t.$root.$watch("transactions_last_modified_at",function(e,r){e!=r&&(n.backgroundFetch({start_date:window.tmp.start_date,end_date:window.tmp.end_date}).$promise.then(function(e){t.results=e}),_.isPresent(i.balances)&&i.refresh())}),t.$root.$watch("transactions_last_filtered_at",function(e,r){e!=r&&(n.backgroundFetch({start_date:window.tmp.start_date,end_date:window.tmp.end_date}).$promise.then(function(e){t.results=e}),_.isPresent(i.balances)&&i.refresh())}),t.toggleDetails=function(e,n){t.showDetails=!t.showDetails,r.preferences.transactions_show_result_details=t.showDetails,$.ajax({url:n,type:"PUT"}),e.preventDefault()}}]),TransactionsIndexApp.factory("Search",[function(){var t={highlight:function(t,e){window.setTimeout(function(){e.length>0&&($("td.description",t).data("timer",0).trigger("mouseenter"),$("td.amount",t).data("timer",0).trigger("mouseenter")),$("td.description a",t).unhighlight({element:"em",className:"h"}).textHighlight(e,{element:"em",className:"h"}),$("td.amount",t).unhighlight({element:"em",className:"h"}).textHighlight(e,{element:"em",className:"h"}),$("td.category",t).unhighlight({element:"em",className:"h"}).textHighlight(e,{element:"em",className:"h"})},600)}};return t}]),TransactionsIndexApp.directive("oldSearchWidget",["$timeout",function(){return function(t,e){var n=$(e),i=$("*[data-magnifier]:first",n),r=$("*[data-input]:first",n),o=$("*[data-cancel]:first",n),a=function(){n.addClass("active"),n.animate({width:250},{duration:200,easing:"easeOutQuart",complete:function(){r.focus(),o.show()}})},s=function(){o.hide(),n.removeClass("active"),n.animate({width:30},{duration:200,easing:"easeOutQuart",complete:function(){r.val("").trigger("input"),$(document).off("click.searchWidget:close")}})};i.off("click.searchWidget").on("click.searchWidget",function(t){a(),t.preventDefault()}),o.off("click.searchWidget").on("click.searchWidget",function(t){s(),t.preventDefault()}),r.off("keyup.searchWidget").on("keyup.searchWidget",function(t){27==t.keyCode&&s()})}}]),TransactionsIndexApp.directive("newSearchWidget",["$rootScope","$timeout",function(t){return function(e,n){var i=$(n);$("input[type=text]:first",i).off("keyup.searchWidget").on("keyup.searchWidget",function(e){27==e.keyCode&&(t.searchOpen=!1)})}}]),TransactionsIndexApp.controller("searchCtrl",["$scope","$rootScope","$timeout","Filters","Search",function(t,e,n,i,r){var o;e.searchOpen=i.source.search.length>0,t.toggleSearch=function(r){e.searchOpen=!e.searchOpen,!e.searchOpen&&i.source.search.length>0?t.text="":e.searchOpen&&n(function(){$(".input-search input[type=text]:first").focus()},100),r.preventDefault()},t.addClass=function(t){e.searchOpen=!0,n(function(){$(".input-search input[type=text]:first").focus()},100),t.preventDefault()},t.removeClass=function(n){e.searchOpen=!1,i.source.search.length>0&&(t.text=""),n.preventDefault()};var a=function(){0===t.text.length?i.source.search=[]:i.source.search=[t.text],t.$root.$emit("afterSearch",t.text)};i.source.search.length>0&&(t.text=i.source.search[0],r.highlight("#transactions-table",t.text)),t.$watch("text",function(t,e){if(!_.isUndefined(t)&&t!=e){n.cancel(o);var i=400;""===t&&(i=10),o=n(function(){a()},i)}})}]),TransactionsIndexApp.factory("TransactionFetcher",["Context","$rootScope","$resource",function(t,e,n){var i={},r=n("/:entity_id/transactions.json",{entity_id:t.current_entity.id});return i.fetch=function(t,n){return e.loadingTransactions=!0,r.query(t,function(){e.loadingTransactions=!1,n&&n(),e.transactions_last_loaded_at=new Date})},i}]),TransactionsIndexApp.factory("TransactionUrls",["Context","$filter",function(t,e){var n={"for":function(t){return t.url?t.url:(t.creditCardInvoice?t.url=n.invoiceUrl(t):"CreditCardBillsPayment"==t.type?t.url=n.paymentUrl(t):t.url=n.transactionUrl(t),t.url)},invoiceUrl:function(e){return"/"+t.current_entity.id+"/cartao-de-credito/"+e.credit_card_id+"/faturas/"+e.invoice_id},transactionUrl:function(e){var n="Transference"==e.type?"/transferences/":"/transactions/";return"/"+t.current_entity.id+n+e.id},duplicateTransactionUrl:function(e){var n="Transference"==e.type?"/transferences":"/transactions";return n+="/new?clone_transaction_id="+e.id,"/"+t.current_entity.id+n},invoiceLink:function(t){var i=e("invoiceDateFormat")(t.date);return'<a href="'+n.invoiceUrl(t)+'">fatura de '+i+"</a>"},paymentUrl:function(e){return"/"+t.current_entity.id+"/cartao-de-credito/"+e.credit_card_id+"/faturas/"+e.invoice_id+"/payments/"+e.payment_id},partialPaymentUrl:function(e){return"/"+t.current_entity.id+"/transactions/"+e.id+"/pagamento-parcial/new"}};return n}]),TransactionsIndexApp.filter("dateShort",[function(){return function(t){if(t==Date.today.toISO())return"hoje";var e=t.split("-");return e[2]+"/"+e[1]}}]),TransactionsIndexApp.filter("invoiceDateFormat",["$filter",function(t){return function(e){return t("date")(e,"MMMM 'de' yyyy")}}]),TransactionsIndexApp.filter("humanAmount",["Currency",function(t){return function(e){return t.symbol+" "+t.format(e/100)}}]),TransactionsIndexApp.filter("typeString",[function(){return function(t){return{0:"expense",1:"earning"}[t]}}]),TransactionsIndexApp.filter("extraClass",[function(){return function(t){return t.done||!(Date.timezoneNormalizedParse(t.date)<Date.today)||t.creditCardInvoice&&t.amount_in_cents>0?"":"overdue"}}]),TransactionsIndexApp.filter("categoryFullName",["Categories",function(t){return function(e){return _.isBlank(e)?"":_.isPresent(e.parent_uuid)?t.findBy({uuid:e.parent_uuid}).name+" : "+e.name:e.name}}]),TransactionsIndexApp.filter("categoryName",["Categories",function(t){return function(e){return e.category||(e.category=t.findBy({uuid:e.tag_uuid})),_.isPresent(e.category)?e.category.name:""}}]),TransactionsIndexApp.filter("fullDescription",[function(){return function(t){return t.finite?t.description+" "+t.repeat_index+"/"+t.repeat_total:t.description}}]),TransactionsIndexApp.filter("extraInfo",["CreditCards",function(t){return function(e){if(e.creditCardInvoice||"CreditCardBillsPayment"==e.type)return e.credit_card||(e.credit_card=t.findBy({id:e.credit_card_id})),e.credit_card?e.credit_card.name:""}}]),TransactionsIndexApp.filter("invoiceClass",[function(){return function(t){return t.done&&t.creditCardInvoice?"invoice-done":""}}]),TransactionsIndexApp.controller("tableCtrl",["$scope","TransactionFetcher","TransactionFactory","TransactionUpdater","DailyBalances","$animate","Currency","$filter","Categories","Accounts","CreditCards","Context","$timeout","Filters","Search","TransactionUrls","$http",function(t,e,n,i,r,o,a,s,c,l,u,d,h,p,f,g,m){function v(e){$.ajax({url:e,type:"POST",success:function(){h.cancel(T),T=h(function(){t.$root.transactions_last_modified_at=new Date},300)}})}function y(e){var n;if(_.isArray(e)){var i;t.loadInvoiceAttrs(e[0].invoice);for(var r=0;r<e.length;r++)(i=_.findIndex(t.transactions,{id:e[r].id}))>-1&&t.$apply(function(){t.transactions.splice(i,1),o.addClass($("#transaction-"+e[r].id),"before-destroy")});var a=_.findIndex(t.transactions,{invoice_id:e[0].paid_credit_card_invoice_id,credit_card_id:e[0].paid_credit_card_id});a>-1?(t.transactions[a]=e[0].invoice,h(function(){o.addClass($("#transaction-"+e[0].invoice.id),"just-created")},350)):h(function(){msg=e.length>1?"Pagamentos excluidos com sucesso.":"Pagamento excluido com sucesso",Flash.show(msg)},350)}else if("CreditCardBillsPayment"==e.type){t.loadInvoiceAttrs(e),t.loadInvoiceAttrs(e.invoice);var s={invoice:-1,payment:-1};for(r=0;r<t.transactions.length;r++)t.transactions[r].id==e.id?s.payment=r:t.transactions[r].creditCardInvoice&&t.transactions[r].invoice_id==e.paid_credit_card_invoice_id&&t.transactions[r].credit_card_id==e.paid_credit_card_id&&(s.invoice=r);s.invoice>-1?(t.transactions[s.invoice]=e.invoice,h(function(){o.addClass($("#transaction-"+e.invoice.id),"just-created")},350)):h(function(){Flash.show("Pagamento exclu\xeddo com sucesso")},350),s.payment>-1&&(t.transactions.splice(s.payment,1),o.addClass($("#transaction-"+e.id),"before-destroy"))}else(n=_.findIndex(t.transactions,function(t){return t.id==e.id}))>-1&&(t.transactions.splice(n,1),o.addClass($("#transaction-"+e.id),"before-destroy"));h(function(){t.$root.transactions_last_modified_at=new Date},550)}function b(e){t.loadInvoiceAttrs(e),n["for"](e).call(t),h(function(){t.$root.transactions_last_modified_at=new Date},50)}function w(e){i["for"](e).call(t),h(function(){t.$root.transactions_last_modified_at=new Date},50)}function x(){var e="asc"==d.preferences.transactions_order?null:"reverse";t.transactions=s("orderBy")(t.transactions,"date",e)}function C(t){var e=$("#transaction-"+t.id);o.addClass(e,"just-created")}function k(t){$("#transaction-"+t.id).highlight()}var T;t.TransactionUrls=g,t.DailyBalances=r,t.start_date=window.tmp.start_date,t.end_date=window.tmp.end_date,t.$root.showIntro?t.transactions=[]:(t.transactions=e.fetch({}),t.transactions.$promise.then(function(){100==t.transactions.length&&(t.$root.shouldPaginate=!0)})),t.isFilterEmpty=p.isFilterEmpty,t.$watch("transactions_last_loaded_at",function(t,e){t!=e&&(Transactions.FloatingBalance.position(),window.setTimeout(function(){Transactions.FloatingBalance.position()},300))}),t.$watch("transactions_last_modified_at",function(t,e){t!=e&&Transactions.FloatingBalance.position()}),t.$root.$on("afterFilter",function(n,i){t.transactions=e.fetch({filters:i}),t.transactions.$promise.then(function(){t.$root.transactions_last_filtered_at=new Date,100==t.transactions.length&&(t.$root.shouldPaginate=!0)})}),t.$root.$on("afterSearch",function(n,i){t.transactions=e.fetch({search:i}),t.transactions.$promise.then(function(){t.$root.transactions_last_filtered_at=new Date,f.highlight("#transactions-table",i),100==t.transactions.length&&(t.$root.shouldPaginate=!0)})}),t.$on("paginate",function(e,n){_.each(n,function(e){t.transactions.push(e)})}),$("body").off("transactions:afterCreate.transactionsIndex").on("transactions:afterCreate.transactionsIndex",function(e,n){t.$apply(function(){t.$root.showIntro=!1}),b(n)}),$("body").off("transactions:afterUpdate.transactionsIndex").on("transactions:afterUpdate.transactionsIndex",function(t,e){w(e)}),$("body").off("transactions:afterDestroy.transactionsIndex").on("transactions:afterDestroy.transactionsIndex",function(t,e){y(e)}),t.pay=function(t,e){if("CreditCard"==t.account_type)alert("N\xe3o \xe9 poss\xedvel marcar um lan\xe7amento de cart\xe3o como pago. Acesse a fatura para isso.");else{var n=t.url+"/pay";t.done=!0,$("#transaction-"+t.id).removeClass("overdue"),v(n)}e.preventDefault()},t.unpay=function(t,e){if("CreditCard"==t.account_type)alert("N\xe3o \xe9 poss\xedvel marcar um lan\xe7amento de cart\xe3o como n\xe3o-pago. Acesse a fatura para isso.");else{var n=t.url+"/unpay";t.done=!1,Date.timezoneNormalizedParse(t.date)<Date.today&&$("#transaction-"+t.id).addClass("overdue"),v(n)}e.preventDefault()};var S=!1;t.loadRemoteAttributes=function(e){if(!S){S=!0;var n=e.url+".json";$.ajax({url:n,success:function(n){t.$apply(function(){e.observation=n.observation,e.attachments=n.attachments,S=!1})}})}},t.loadInvoiceAttrs=function(t){t.creditCardInvoice=_.contains(["CreditCardInvoice"],t.type),"CreditCardInvoice"==t.type?(t.invoice_id||(t.invoice_id=t.id),t.id="invoice-"+t.credit_card_id+t.invoice_id):"CreditCardBillsPayment"==t.type&&(t.credit_card_id=t.paid_credit_card_id,t.payment_id||(t.payment_id=t.id),t.invoice_id||(t.invoice_id=t.paid_credit_card_invoice_id))},t.showDay=function(e,n,i){return"deadline"===i?_.isBlank(t.transactions[e-1])||t.transactions[e-1].date!=n:_.isBlank(t.transactions[e-1])||t.transactions[e-1].billing_date!=n},t.showDailyBalance=function(e,n){return _.isBlank(t.transactions[e+1])||t.transactions[e+1].date!=n},t.isEarning=function(t){return"Transaction"===t.type&&1===t.activity_type},t.showPartialPaymentOption=function(t){return"Transaction"==t.type},t.undoConciliation=function(t,e){var n="/"+d.current_entity.id+"/conciliations/"+e.conciliation.account_statement_id+"/conciliations/"+e.conciliation.imported_transaction_id;m["delete"](n).then(function(t){Flash.show("Concilia\xe7\xe3o desfeita."),t.data.transaction?(e.conciliation=null,w(e=t.data.transaction)):y(e)},function(){Flash.show("Ocorreu um erro ao desfazer est\xe1 concilia\xe7\xe3o.","error")}),t&&t.preventDefault()},t.sortTransactions=x,t.animateToTransaction=C,t.highlightTransaction=k}]);var transactionAnimation=function(){return{addClass:function(t,e,n){if("just-created"==e){var i="#"+$(t).attr("id"),r=function(){window.setTimeout(function(){$(i).addClass("highlighting"),$(i).effect("highlight",{duration:800,complete:function(){$(i).removeClass("highlighting").removeClass("just-created"),n()}})},50)};(function(){var t,e,n;return t=$(window).scrollTop(),e=$(window).height()+t-500,0==$(i).length||(n=$(i).offset().top)>t&&n<e})()?r():$.scrollTo($(i),{duration:500,easing:"easeOutQuart",offset:-150,onAfter:function(){r()}})}if("before-destroy"==e){i="#"+$(t).attr("id");window.setTimeout(function(){$(i).fadeOut(600)},300)}return function(t){t&&$(i).stop()}}}};TransactionsIndexApp.animation(".Transaction",transactionAnimation),TransactionsIndexApp.animation(".CreditCardInvoice",transactionAnimation),TransactionsIndexApp.animation(".CreditCardBillsPayment",transactionAnimation),TransactionsIndexApp.animation(".CreditCardTransaction",transactionAnimation),TransactionsIndexApp.animation(".Transference",transactionAnimation),TransactionsIndexApp.factory("TransactionFactory",["Context","TransactionUrls","$timeout",function(t,e,n){function i(e,n){var i=n.transactions[n.transactions.length-1];return e.date<n.start_date||e.date>n.end_date||e.out_of_filter||n.transactions.length>=200&&"asc"==t.preferences.transactions_order&&e.date>i.date||n.transactions.length>=200&&"desc"==t.preferences.transactions_order&&e.date<i.date}var r={"for":function(e){return"CreditCardBillsPayment"==e.type?new s(e):"CreditCardInvoice"==e.type?new InvoiceFactory(e):"CreditCard"==e.account_type&&"operator"!=t.role?new a(e):new o(e)}},o=function(t){var e=this;e.transaction=t,e.call=function(t){i(e.transaction,t)?Flash.show("Movimenta\xe7\xe3o adicionada!"):(t.transactions.unshift(e.transaction),t.sortTransactions(),n(function(){_.isPresent(e.transaction.keep_adding)?Flash.show("Movimenta\xe7\xe3o adicionada!"):t.animateToTransaction(e.transaction)},350))}},a=function(t){var r=this;r.transaction=t,r.call=function(t){t.loadInvoiceAttrs(r.transaction.invoice);var o=_.findIndex(t.transactions,function(t){return t.creditCardInvoice&&t.id==r.transaction.invoice.id&&t.credit_card_id==r.transaction.invoice.credit_card_id});i(r.transaction.invoice,t)?Flash.show("Movimenta\xe7\xe3o lan\xe7ada na "+e.invoiceLink(r.transaction.invoice)):(r.transaction.invoice.done||(o>-1?t.transactions[o]=r.transaction.invoice:(t.transactions.unshift(r.transaction.invoice),t.sortTransactions())),n(function(){_.isPresent(r.transaction.keep_adding)?Flash.show("Movimenta\xe7\xe3o lan\xe7ada na "+e.invoiceLink(r.transaction.invoice)):t.animateToTransaction(r.transaction.invoice)},350))}},s=function(t){var e=this;e.transaction=t,e.call=function(r){i(e.transaction,r)?Flash.show("Pagamento adicionado!"):(r.transactions.unshift(e.transaction),r.sortTransactions());for(var o=-1,a=0;a<r.transactions.length;a++)r.transactions[a].creditCardInvoice&&r.transactions[a].invoice_id==t.invoice_id&&r.transactions[a].credit_card_id==t.credit_card_id&&(o=a);o>-1&&(r.transactions[o]=e.transaction.invoice),i(e.transaction,r)?n(function(){r.animateToTransaction(e.transaction.invoice)},350):n(function(){r.animateToTransaction(e.transaction)},350)}};return r.transactionShouldNotAppendToList=i,r.OrdinaryFactory=o,r.CreditCardTransactionFactory=a,r.InvoicePaymentFactory=s,r}]),TransactionsIndexApp.factory("TransactionUpdater",["Context","TransactionUrls","$timeout","TransactionFactory",function(t,e,n,i){var r={"for":function(t){return"CreditCard"==t.account_type?new o(t):new a(t)}},o=function(t){var r=this;r.transaction=t,r.call=function(t){t.loadInvoiceAttrs(r.transaction.invoice);var o=_.findIndex(t.transactions,function(t){return t.id==r.transaction.id});if(o>-1&&t.transactions.splice(o,1),i.transactionShouldNotAppendToList(r.transaction.invoice,t))Flash.show("Movimenta\xe7\xe3o lan\xe7ada na "+e.invoiceLink(r.transaction.invoice));else{var a=_.findIndex(t.transactions,function(t){return t.creditCardInvoice&&t.id==r.transaction.invoice.id&&t.credit_card_id==r.transaction.invoice.credit_card_id});r.transaction.invoice.done||(a>-1?t.transactions[a]=r.transaction.invoice:(t.transactions.unshift(r.transaction.invoice),t.sortTransactions())),n(function(){t.animateToTransaction(r.transaction.invoice)},350)}}},a=function(t){var e=this;e.transaction=t,e.call=function(r){r.loadInvoiceAttrs(e.transaction);for(var o={invoice:-1,transaction:-1},a=0;a<r.transactions.length;a++)r.transactions[a].id==e.transaction.id?o.transaction=a:r.transactions[a].creditCardInvoice&&r.transactions[a].invoice_id==e.transaction.invoice_id&&r.transactions[a].credit_card_id==t.credit_card_id&&(o.invoice=a);if(i.transactionShouldNotAppendToList(e.transaction,r))return Flash.show("Movimenta\xe7\xe3o atualizada!"),o.invoice>-1&&(r.transactions[o.invoice]=e.transaction.invoice),void(o.transaction>-1&&r.transactions.splice(o.transaction,1));if(o.transaction>-1){var s=r.transactions[o.transaction].date!=e.transaction.date;r.transactions[o.transaction]=e.transaction,s&&r.sortTransactions()}else r.transactions.unshift(e.transaction),r.sortTransactions();o.invoice>-1&&(r.transactions[o.invoice]=e.transaction.invoice),n(function(){r.animateToTransaction(e.transaction)},350)}};return r}]),angular.module("directive.datePicker",[]).directive("datePicker",function(){return function(t,e,n){if($(e).is("input[type=text]")){if(_.isPresent(n.ngModel)){var i=t.$eval(n.ngModel);$(e).val(i)}new UIComponent.DatePicker($(e))}}}),angular.module("directive.floatingTopBar",[]).directive("floatingTopBar",[function(){return function(t,e){function n(){return!r.is(":hidden")&&(s||(s=r.offset().top),$(window).scrollTop()>s)}function i(){n()?o.addClass("floating"):o.removeClass("floating")}var r=$(e),o=$("*[data-inner]:first",r),a=$("body").data("section"),s=null;$(window).off("scroll.floatingTopBar").on("scroll.floatingTopBar",function(){$("body").data("section")==a?i():$(window).off("scroll.floatingTopBar")})}}]),function(){var t=angular.module("directive.inputMasks",[]);t.directive("phoneMask",function(){return function(t,e){$(e).maskedInput("(99) 9999-9999?9").on("keyup",function(){var t=$(e).val().match(/[0-9]/g);_.isBlank(t)||(11==t.length&&$(this).unmaskInput().maskedInput("(99) 99999-9999"),10==t.length&&$(this).unmaskInput().maskedInput("(99) 9999-9999?9"),e.triggerHandler("input"),e.triggerHandler("change"))})}}),t.directive("percentageMask",function(){return function(t,e){var n={symbol:!1,decimal:".",allowZero:!0};$(e).attr("maxlength",6).maskMoney(n).maskMoney("mask"),$(e).on("keyup.money",function(){e.triggerHandler("input"),e.triggerHandler("change")})}})}(),angular.module("directive.institutionIcon",[]).directive("institutionIcon",["$sce",function(t){function e(t){return window.genericIconsSVGs[t]}function n(t){return window.finhubColorsMap[t]}function i(i){i.ngModel.institution.generic?(i.fgColor=n(i.ngModel.color),i.innerIcon=t.trustAsHtml(e(i.ngModel.institution.id))):i.innerIcon=t.trustAsHtml("<img src='"+i.ngModel.institution.logo_url+"' />")}return{restrict:"E",require:"ngModel",scope:{ngModel:"="},replace:!0,template:function(){return'<div class="zze-component_institution-icon fg-color-{{::fgColor}}" style="background-color: #{{::ngModel.color}}" ng-bind-html="::innerIcon" ng-class="{\'credit-card\': ngModel.isCreditCard}"></div>'},link:i}}]),angular.module("directive.money",["service.currency"]).directive("money",["Currency",function(t){return{restrict:"A",require:"ngModel",link:function(e,n,i,r){var o={symbol:!1,thousands:t.thousands_separator,decimal:t.decimal_mark,precision:2,defaultZero:!0,allowZero:!0,allowNegative:i.allowNegative};$(n).before("<small>"+t.symbol+"</small>"),$(n).attr("maxlength",17).maskMoney(o).maskMoney("mask"),$(n).on("keyup.money",function(){n.triggerHandler("input"),n.triggerHandler("change")}),r.$formatters.push(function(e){return t.format(e)}),r.$parsers.push(function(e){return t.parse(e)})}}}]),angular.module("directive.ngAutoFocus",[]).directive("ngAutoFocus",["$timeout",function(t){return{restrict:"A",link:function(e,n){e.$watch(n.attr("ng-auto-focus"),function(e){1==e&&t(function(){$(n).is("textarea")?$(n).focus():$(n).focus().positionCursorRight()},50)})}}}]),angular.module("directive.ngFileUploadLink",[]).directive("ngFileUploadLink",["$timeout",function(){return{restrict:"A",link:function(t,e,n){var i=$(n.ngFileUploadLink);$(e).css({position:"relative",zIndex:1}),i.css({position:"absolute",display:"block",top:0,left:0,opacity:0,cursor:"pointer",zIndex:2,padding:0,margin:0,overflow:"hidden",fontSize:"1px",width:"100%",height:"100%"})}}}]),angular.module("directive.ngKeepAdding",[]).directive("ngKeepAdding",function(){return function(t,e){var n=$(e).parents("form:first"),i=$("<input type='hidden' name='keep_adding' value='true' />");$(e).on("click.ngKeepAdding",function(t){return n.append(i),n.submit(),i.remove(),t.preventDefault(),!1})}}),function(){var t=angular.module("service.accountables",["service.accounts","service.credit_cards"]);t.factory("Accountables",["Context","Accounts","CreditCards","Collections",function(t,e,n,i){return new function(){var r=this;r.filterByName=i.filterByName,r.all=function(){return t.accounts.concat(t.credit_cards)},r.findBy=function(t){return i.findBy(r.all(),t)},r.active=function(){return e.active().concat(n.active())},r.automatic=function(){return e.automatic(!1).concat(n.automatic(!1))}}}]),t.directive("accountablesAutocomplete",["Accountables","AutocompleteService",function(t,e){return{restrict:"EA",scope:{attributeName:"@",object:"=",onChange:"&"},replace:!0,template:"<div class='autocomplete accountables'>                  <input type='text' />                </div>",controller:["$scope","$attrs","$injector","Accountables","Collections",function(t,n,i,r){var o;i.invoke(e.controller,this,{$scope:t}),t.objectAttributeName="account_uuid",t.currentOption=r.findBy({uuid:t.object[t.objectAttributeName]}),t.renderItem=function(e,n){var i=$("<li>"),r=$("<a>");return i.attr("data-value",n.name).addClass("option-item"),r.html("<span class='label'>"+n.name+"</span>"),_.isPresent(t.currentOption)&&t.currentOption.id==n.id&&i.addClass("selected"),i.append(r),_.isBlank(o)?(n.isAccount&&i.prepend("<span class='subtitle'>Contas</span>"),n.isCreditCard&&i.prepend("<span class='subtitle'>Cart\xf5es</span>")):(o.isAccount&&n.isCreditCard&&i.prepend("<span class='subtitle'>Cart\xf5es</span>"),o.isCreditCard&&n.isAccount&&i.prepend("<span class='subtitle'>Contas</span>")),i.appendTo(e),r.attr("title",n.name),o=n,i},t.object&&"CreditCardBillsPayment"==t.object.type?t.source=_.reject(r.automatic(),function(e){return e.id==t.object.paid_credit_card_id}):t.source=r.automatic(),$("body").off("accounts:afterCreate.autocomplete").on("accounts:afterCreate.autocomplete",function(e,n){t.$apply(function(){t.assignOption(n),t.$emit("autocomplete:updateSource",r.automatic()),t.$emit("autocomplete:select",n)})}),$("body").off("credit_cards:afterCreate.autocomplete").on("credit_cards:afterCreate.autocomplete",function(e,n){t.$apply(function(){t.assignOption(n),t.$emit("autocomplete:updateSource",r.automatic()),t.$emit("autocomplete:select",n)})})}],link:e.link}}])}(),function(){var t=angular.module("service.accounts",["service.collections","service.autocomplete","service.context"]);t.factory("Accounts",["Context","Collections",function(t,e){return new function(){var n=this;n.findBy=function(n){return e.findBy(t.accounts,n)},n.findIndexBy=function(n){return e.findIndexBy(t.accounts,n)},n.filterByName=e.filterByName,n.createOrUpdate=function(e){var i=n.findIndexBy({id:e.id});-1==i?t.accounts.push(e):t.accounts[i]=e},n.automatic=function(e){return _.filter(t.accounts,function(t){return 0==t.archived&&t.automatic==e})},n.active=function(){return _.filter(t.accounts,function(t){return 0==t.archived})},n.archived=function(){return _.filter(t.accounts,function(t){return 1==t.archived})}}}]),t.directive("accountAutocomplete",["Accounts","AutocompleteService",function(t,e){return{restrict:"EA",scope:{object:"=",onChange:"&",attributeName:"@"},replace:!0,template:"<div class='autocomplete accounts'>                  <input type='text' />                </div>",controller:["$scope","$attrs","$injector","Accounts",function(t,n,i,r){i.invoke(e.controller,this,{$scope:t}),t.objectAttributeName=t.attributeName||"account_uuid",t.currentOption=r.findBy({uuid:t.object[t.objectAttributeName]}),t.source=r.automatic(!1),t.renderItem=function(e,n){var i=$("<li>"),r=$("<a>");return i.attr("data-value",n.name).addClass("option-item"),r.html("<span class='label'>"+n.name+"</span>"),_.isPresent(t.currentOption)&&t.currentOption.id==n.id&&i.addClass("selected"),i.append(r),i.appendTo(e),r.attr("title",n.name),i},$("body").off("accounts:afterCreate.autocomplete").on("accounts:afterCreate.autocomplete",function(){t.$apply(function(){t.$emit("autocomplete:updateSource",r.automatic(!1))})})}],link:e.link}}])}(),angular.module("service.autocomplete",[]).factory("AutocompleteService",function(){var t={};return t.controller=["$scope",function(t){t.source=[],t.emptyText="Nenhum item adicionado",t.assignOption=function(e){t.currentOption=_.clone(e),t.afterAssignOption()},t.afterAssignOption=function(){t.object[t.objectAttributeName]=t.currentOption.uuid},t.sanitize=function(t){return _.isPresent(t)?encodeURIComponent(t):""},t.renderItem=function(e,n){var i=$("<li>"),r=$("<a>");return i.attr("data-value",n.name).addClass("option-item"),r.html("<span class='label'>"+n.name+"</span>"),t.currentOption&&t.currentOption.id==n.id&&i.addClass("selected"),i.append(r),i.appendTo(e),i}}],t.link=function(t,e,n){var i;n.id&&(e.attr("id",null),$("input[type=text]:first",e).attr("id",n.id)),n.tabindex&&(e.attr("tabindex",null),$("input[type=text]:first",e).attr("tabindex",n.tabindex)),n.autoFocus&&(e.attr("auto-focus",null),$("input[type=text]:first",e).attr("auto-focus",n.autoFocus)),t.newResourceUrl||(t.newResourceUrl=n.newResourceUrl),i=new Autocomplete($(e),{source:t.source,valueMethod:"name",sorted:!1,onSelect:function(e){t.$apply(function(){t.assignOption(e)})},addNewItemUrl:t.newResourceUrl,emptyDataText:t.emptyText,renderItem:t.renderItem,findFunction:t.findFunction}),t.$watch("source",function(t,e){t!=e&&(i.source=t)}),t.$watch("newResourceUrl",function(t,e){t!=e&&(i.settings={notFoundSupport:{url:t}})}),t.$watch("object."+t.objectAttributeName,function(e,n){e!=n&&null==e&&(t.currentOption=null,t.$emit("autocomplete:select",null))}),t.$on("autocomplete:updateSource",function(t,e){i.source=e}),t.$on("autocomplete:select",function(t,e){i.select_without_callback(e)}),_.isPresent(t.currentOption)&&!t.currentOption.archived&&setTimeout(function(){i.select_without_callback(t.currentOption)},100)},t}),function(){function t(){function t(t){t.iconClasName=function(){return t.ngModel.iconClasName||(t.ngModel.fixed||t.ngModel.is_fixed_parent?t.ngModel.iconClasName="icon-category-"+t.ngModel.group_id.replace(/_/g,"-"):t.ngModel.iconClasName="icon-"+t.ngModel.group_id.replace(/exp_|ear_/g,"").replace(/_/g,"-")+" new"),t.ngModel.iconClasName},t.ngStyle=function(){return{backgroundColor:"#"+t.ngModel.color}}}return{restrict:"E",require:"ngModel",scope:{ngModel:"="},replace:!0,template:function(){return'<i class="zze-icon-categories" ng-class="iconClasName()" ng-style="ngStyle()"></i>'},link:t}}var e=angular.module("service.categories",["service.collections","service.autocomplete","service.context"]);e.directive("zzeCategoryIcon",t),e.factory("Categories",["Context","Collections","$filter",function(t,e){return new function(){var n=this;n.isFixedCategories=!0===t.fixed_categories,n.findBy=function(n){return e.findBy(t.categories,n)},n.createOrUpdate=function(i){var r=e.findIndexBy(t.categories,{id:i.id});-1==r?(t.categories.push(i),t.categories=n.orderBy(t.categories)):(t.categories[r]=i,t.categories=n.orderBy(t.categories))},n.orderBy=function(t){return _.sortBy(t,function(t){return t.name.toLowerCase()})},n.parents=function(e){return _.filter(t.categories,function(t){return e?!t.parent_uuid&&t.kind===e&&t.available:!t.parent_uuid&&"none"!==t.kind})},n.childrenFor=function(e){return _.filter(t.categories,function(t){return t.parent_uuid===e.uuid})},n.filterByName=function(t,e){return e=(e||(e="")).toLowerCase(),_.filter(t,function(t){var i=n.childrenFor(t);return(""+t.name).toLowerCase().indexOf(e)>-1||i&&_.any(i,function(t){return(""+t.name).toLowerCase().indexOf(e)>-1})})},n.isBlockedTo=function(e){if(n.isFixedCategories)return!e.fixed&&!e.is_fixed_parent&&t.free},n.getIconClass=function(t){return t.fixed||t.is_fixed_parent?"icon-category-"+t.group_id.replace(/_/g,"-"):"icon-"+t.group_id.replace(/exp_|ear_/g,"").replace(/_/g,"-")},n.orderedForAutocomplete=function(t){var e=[];return _.each(n.parents(t),function(t){e.push(t),e=e.concat(n.childrenFor(t))}),e}}}]),e.directive("categoryAutocomplete",["Categories","AutocompleteService",function(t,e){return{restrict:"EA",scope:{object:"=",onChange:"&",kind:"="},replace:!0,template:function(){return"<div class='autocomplete categories' ng-class='"+'{"zze-icon-categories-legacy": !isFixedCategories}'+"'>                  <input type='text' style='padding-right: 25px' />                </div>"},controller:["$scope","$attrs","$injector","Categories","$timeout",function(t,n,r,o){function a(t){var e="\xe1\xe0\xe3\xe2\xe4\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf3\xf2\xf5\xf4\xf6\xfa\xf9\xfb\xfc\xe7\xc1\xc0\xc3\xc2\xc4\xc9\xc8\xca\xcb\xcd\xcc\xce\xcf\xd3\xd2\xd5\xd6\xd4\xda\xd9\xdb\xdc\xc7\xb4`^\xa8~",n="aaaaaeeeeiiiiooooouuuucAAAAAEEEEIIIIOOOOOUUUUC     ";for(i in t)for(j in e)t[i]==e[j]&&(t=t.replace(t[i],n[j]));return t.toLowerCase()}var s;(t.isFixedCategories=o.isFixedCategories,r.invoke(e.controller,this,{$scope:t}),t.objectAttributeName="category_uuid",t.currentOption=o.findBy({uuid:t.object[t.objectAttributeName]}),t.$watch("object.activity_type",function(e,n){var i;o.isFixedCategories&&e!==n&&(i={1:"earnings",0:"expenses"}[e],t.source=o.orderedForAutocomplete(i),t.object[t.objectAttributeName]=null,t.currentOption=null)}),o.isFixedCategories)?(s={1:"earnings",0:"expenses"}[t.object.activity_type],t.source=o.orderedForAutocomplete(s)):t.source=o.orderedForAutocomplete("none");t.renderItem=function(e,n){var i=$("<li>"),r=$("<a>");if(i.attr("data-value",n.name).addClass("option-item"),n.kind===t.kind||-1===n.kind||t.kind==undefined&&n.available&&!o.isBlockedTo(n)){if(r.html("<span class='label'>"+n.name+"</span>"),_.isPresent(n.parent_uuid))i.addClass("indent");else{var a='<i class="zze-icon-categories '+o.getIconClass(n)+'" style="background: #'+n.color+'"></i>';r.prepend($(a))}t.currentOption&&t.currentOption.id===n.id&&i.addClass("selected"),i.append(r),i.appendTo(e),r.attr("title",n.name)}return i},t.findFunction=function(t,e){var n=a(e)||"";return _.filter(t,function(t){var e=o.childrenFor(t);return(""+a(t.name)).indexOf(n)>-1||e&&_.any(e,function(t){return(""+a(t.name)).indexOf(n)>-1})})},$("body").off("categories:afterCreate.autocomplete").on("categories:afterCreate.autocomplete",function(e,n){t.$apply(function(){t.assignOption(n),t.$emit("autocomplete:updateSource",o.orderedForAutocomplete()),t.$emit("autocomplete:select",n)})})}],link:e.link}}])}(),angular.module("service.collections",[]).factory("Collections",function(){return new function(){function t(t){return _.matches(t)}var e=this;e.filterByName=function(t,e){return e=(e||(e="")).toLowerCase(),_.filter(t,function(t){return(""+t.name).toLowerCase().indexOf(e)>-1})},e.findBy=function(e,n){return _.find(e,t(n))},e.findIndexBy=function(e,n){return _.findIndex(e,t(n))}}}),angular.module("service.context",[]).factory("Context",function(){var t=window.ContextSource;return t.free="free"===t.current_entity.plan_name||"startup"===t.current_entity.plan_name,t.plus="plus"===t.current_entity.plan_name||"startup"!==t.current_entity.plan_name,t}),function(){var t=angular.module("service.credit_cards_invoices",["service.context","service.credit_cards"]);t.factory("CreditCardInvoices",["Context","$http","$filter",function(t,e){return new function(){var n=["2000-01-10","2000-02-10","2000-03-10","2000-04-10","2000-05-10","2000-06-10","2000-07-10","2000-08-10","2000-09-10","2000-10-10","2000-11-10","2000-12-10","2001-01-10","2001-02-10","2001-03-10","2001-04-10","2001-05-10","2001-06-10","2001-07-10","2001-08-10","2001-09-10","2001-10-10","2001-11-10","2001-12-10","2002-01-10","2002-02-10","2002-03-10","2002-04-10","2002-05-10","2002-06-10","2002-07-10","2002-08-10","2002-09-10","2002-10-10","2002-11-10","2002-12-10","2003-01-10","2003-02-10","2003-03-10","2003-04-10","2003-05-10","2003-06-10","2003-07-10","2003-08-10","2003-09-10","2003-10-10","2003-11-10","2003-12-10","2004-01-10","2004-02-10","2004-03-10","2004-04-10","2004-05-10","2004-06-10","2004-07-10","2004-08-10","2004-09-10","2004-10-10","2004-11-10","2004-12-10","2005-01-10","2005-02-10","2005-03-10","2005-04-10","2005-05-10","2005-06-10","2005-07-10","2005-08-10","2005-09-10","2005-10-10","2005-11-10","2005-12-10","2006-01-10","2006-02-10","2006-03-10","2006-04-10","2006-05-10","2006-06-10","2006-07-10","2006-08-10","2006-09-10","2006-10-10","2006-11-10","2006-12-10","2007-01-10","2007-02-10","2007-03-10","2007-04-10","2007-05-10","2007-06-10","2007-07-10","2007-08-10","2007-09-10","2007-10-10","2007-11-10","2007-12-10","2008-01-10","2008-02-10","2008-03-10","2008-04-10","2008-05-10","2008-06-10","2008-07-10","2008-08-10","2008-09-10","2008-10-10","2008-11-10","2008-12-10","2009-01-10","2009-02-10","2009-03-10","2009-04-10","2009-05-10","2009-06-10","2009-07-10","2009-08-10","2009-09-10","2009-10-10","2009-11-10","2009-12-10","2010-01-10","2010-02-10","2010-03-10","2010-04-10","2010-05-10","2010-06-10","2010-07-10","2010-08-10","2010-09-10","2010-10-10","2010-11-10","2010-12-10","2011-01-10","2011-02-10","2011-03-10","2011-04-10","2011-05-10","2011-06-10","2011-07-10","2011-08-10","2011-09-10","2011-10-10","2011-11-10","2011-12-10","2012-01-10","2012-02-10","2012-03-10","2012-04-10","2012-05-10","2012-06-10","2012-07-10","2012-08-10","2012-09-10","2012-10-10","2012-11-10","2012-12-10","2013-01-10","2013-02-10","2013-03-10","2013-04-10","2013-05-10","2013-06-10","2013-07-10","2013-08-10","2013-09-10","2013-10-10","2013-11-10","2013-12-10","2014-01-10","2014-02-10","2014-03-10","2014-04-10","2014-05-10","2014-06-10","2014-07-10","2014-08-10","2014-09-10","2014-10-10","2014-11-10","2014-12-10","2015-01-10","2015-02-10","2015-03-10","2015-04-10","2015-05-10","2015-06-10","2015-07-10","2015-08-10","2015-09-10","2015-10-10","2015-11-10","2015-12-10","2016-01-10","2016-02-10","2016-03-10","2016-04-10","2016-05-10","2016-06-10","2016-07-10","2016-08-10","2016-09-10","2016-10-10","2016-11-10","2016-12-10","2017-01-10","2017-02-10","2017-03-10","2017-04-10","2017-05-10","2017-06-10","2017-07-10","2017-08-10","2017-09-10","2017-10-10","2017-11-10","2017-12-10","2018-01-10","2018-02-10","2018-03-10","2018-04-10","2018-05-10","2018-06-10","2018-07-10","2018-08-10","2018-09-10","2018-10-10","2018-11-10","2018-12-10","2019-01-10","2019-02-10","2019-03-10","2019-04-10","2019-05-10","2019-06-10","2019-07-10","2019-08-10","2019-09-10","2019-10-10","2019-11-10","2019-12-10","2020-01-10","2020-02-10","2020-03-10","2020-04-10","2020-05-10","2020-06-10","2020-07-10","2020-08-10","2020-09-10","2020-10-10","2020-11-10","2020-12-10","2021-01-10","2021-02-10","2021-03-10","2021-04-10","2021-05-10","2021-06-10","2021-07-10","2021-08-10","2021-09-10","2021-10-10","2021-11-10","2021-12-10","2022-01-10","2022-02-10","2022-03-10","2022-04-10","2022-05-10","2022-06-10","2022-07-10","2022-08-10","2022-09-10","2022-10-10","2022-11-10","2022-12-10","2023-01-10","2023-02-10","2023-03-10","2023-04-10","2023-05-10","2023-06-10","2023-07-10","2023-08-10","2023-09-10","2023-10-10","2023-11-10","2023-12-10","2024-01-10","2024-02-10","2024-03-10","2024-04-10","2024-05-10","2024-06-10","2024-07-10","2024-08-10","2024-09-10","2024-10-10","2024-11-10","2024-12-10","2025-01-10","2025-02-10","2025-03-10","2025-04-10","2025-05-10","2025-06-10","2025-07-10","2025-08-10","2025-09-10","2025-10-10","2025-11-10","2025-12-10","2026-01-10","2026-02-10","2026-03-10","2026-04-10","2026-05-10","2026-06-10","2026-07-10","2026-08-10","2026-09-10","2026-10-10","2026-11-10","2026-12-10","2027-01-10","2027-02-10","2027-03-10","2027-04-10","2027-05-10","2027-06-10","2027-07-10","2027-08-10","2027-09-10","2027-10-10","2027-11-10","2027-12-10","2028-01-10","2028-02-10","2028-03-10","2028-04-10","2028-05-10","2028-06-10","2028-07-10","2028-08-10","2028-09-10","2028-10-10","2028-11-10","2028-12-10","2029-01-10","2029-02-10","2029-03-10","2029-04-10","2029-05-10","2029-06-10","2029-07-10","2029-08-10","2029-09-10","2029-10-10","2029-11-10","2029-12-10","2030-01-10","2030-02-10","2030-03-10","2030-04-10","2030-05-10","2030-06-10","2030-07-10","2030-08-10","2030-09-10","2030-10-10","2030-11-10","2030-12-10","2031-01-10","2031-02-10","2031-03-10","2031-04-10","2031-05-10","2031-06-10","2031-07-10","2031-08-10","2031-09-10","2031-10-10","2031-11-10","2031-12-10","2032-01-10","2032-02-10","2032-03-10","2032-04-10","2032-05-10","2032-06-10","2032-07-10","2032-08-10","2032-09-10","2032-10-10","2032-11-10","2032-12-10","2033-01-10","2033-02-10","2033-03-10","2033-04-10","2033-05-10","2033-06-10","2033-07-10","2033-08-10","2033-09-10","2033-10-10","2033-11-10","2033-12-10","2034-01-10","2034-02-10","2034-03-10","2034-04-10","2034-05-10","2034-06-10","2034-07-10","2034-08-10","2034-09-10","2034-10-10","2034-11-10","2034-12-10","2035-01-10","2035-02-10","2035-03-10","2035-04-10","2035-05-10","2035-06-10","2035-07-10","2035-08-10","2035-09-10","2035-10-10","2035-11-10","2035-12-10","2036-01-10","2036-02-10","2036-03-10","2036-04-10","2036-05-10","2036-06-10","2036-07-10","2036-08-10","2036-09-10","2036-10-10","2036-11-10","2036-12-10","2037-01-10","2037-02-10","2037-03-10","2037-04-10","2037-05-10","2037-06-10","2037-07-10","2037-08-10","2037-09-10","2037-10-10","2037-11-10","2037-12-10","2038-01-10","2038-02-10","2038-03-10","2038-04-10","2038-05-10","2038-06-10","2038-07-10","2038-08-10","2038-09-10","2038-10-10","2038-11-10","2038-12-10","2039-01-10","2039-02-10","2039-03-10","2039-04-10","2039-05-10","2039-06-10","2039-07-10","2039-08-10","2039-09-10","2039-10-10","2039-11-10","2039-12-10","2040-01-10","2040-02-10","2040-03-10","2040-04-10","2040-05-10","2040-06-10","2040-07-10","2040-08-10","2040-09-10","2040-10-10","2040-11-10","2040-12-10","2041-01-10","2041-02-10","2041-03-10","2041-04-10","2041-05-10","2041-06-10","2041-07-10","2041-08-10","2041-09-10","2041-10-10","2041-11-10","2041-12-10","2042-01-10","2042-02-10","2042-03-10","2042-04-10","2042-05-10","2042-06-10","2042-07-10","2042-08-10","2042-09-10","2042-10-10","2042-11-10","2042-12-10","2043-01-10","2043-02-10","2043-03-10","2043-04-10","2043-05-10","2043-06-10","2043-07-10","2043-08-10","2043-09-10","2043-10-10","2043-11-10","2043-12-10","2044-01-10","2044-02-10","2044-03-10","2044-04-10","2044-05-10","2044-06-10","2044-07-10","2044-08-10","2044-09-10","2044-10-10","2044-11-10","2044-12-10","2045-01-10","2045-02-10","2045-03-10","2045-04-10","2045-05-10","2045-06-10","2045-07-10","2045-08-10","2045-09-10","2045-10-10","2045-11-10","2045-12-10","2046-01-10","2046-02-10","2046-03-10","2046-04-10","2046-05-10","2046-06-10","2046-07-10","2046-08-10","2046-09-10","2046-10-10","2046-11-10","2046-12-10","2047-01-10","2047-02-10","2047-03-10","2047-04-10","2047-05-10","2047-06-10","2047-07-10","2047-08-10","2047-09-10","2047-10-10","2047-11-10","2047-12-10","2048-01-10","2048-02-10","2048-03-10","2048-04-10","2048-05-10","2048-06-10","2048-07-10","2048-08-10","2048-09-10","2048-10-10","2048-11-10","2048-12-10","2049-01-10","2049-02-10","2049-03-10","2049-04-10","2049-05-10","2049-06-10","2049-07-10","2049-08-10","2049-09-10","2049-10-10","2049-11-10","2049-12-10","2050-01-10","2050-02-10","2050-03-10","2050-04-10","2050-05-10","2050-06-10","2050-07-10","2050-08-10","2050-09-10","2050-10-10","2050-11-10","2050-12-10","2051-01-10","2051-02-10","2051-03-10","2051-04-10","2051-05-10","2051-06-10","2051-07-10","2051-08-10","2051-09-10","2051-10-10","2051-11-10","2051-12-10","2052-01-10","2052-02-10","2052-03-10","2052-04-10","2052-05-10","2052-06-10","2052-07-10","2052-08-10","2052-09-10","2052-10-10","2052-11-10","2052-12-10","2053-01-10","2053-02-10","2053-03-10","2053-04-10","2053-05-10","2053-06-10","2053-07-10","2053-08-10","2053-09-10","2053-10-10","2053-11-10","2053-12-10","2054-01-10","2054-02-10","2054-03-10","2054-04-10","2054-05-10","2054-06-10","2054-07-10","2054-08-10","2054-09-10","2054-10-10","2054-11-10","2054-12-10","2055-01-10","2055-02-10","2055-03-10","2055-04-10","2055-05-10","2055-06-10","2055-07-10","2055-08-10","2055-09-10","2055-10-10","2055-11-10","2055-12-10","2056-01-10","2056-02-10","2056-03-10","2056-04-10","2056-05-10","2056-06-10","2056-07-10","2056-08-10","2056-09-10","2056-10-10","2056-11-10","2056-12-10","2057-01-10","2057-02-10","2057-03-10","2057-04-10","2057-05-10","2057-06-10","2057-07-10","2057-08-10","2057-09-10","2057-10-10","2057-11-10","2057-12-10","2058-01-10","2058-02-10","2058-03-10","2058-04-10","2058-05-10","2058-06-10","2058-07-10","2058-08-10","2058-09-10","2058-10-10","2058-11-10","2058-12-10","2059-01-10","2059-02-10","2059-03-10","2059-04-10","2059-05-10","2059-06-10","2059-07-10","2059-08-10","2059-09-10","2059-10-10","2059-11-10","2059-12-10","2060-01-10","2060-02-10","2060-03-10","2060-04-10","2060-05-10","2060-06-10","2060-07-10","2060-08-10","2060-09-10","2060-10-10","2060-11-10","2060-12-10","2061-01-10","2061-02-10","2061-03-10","2061-04-10","2061-05-10","2061-06-10","2061-07-10","2061-08-10","2061-09-10","2061-10-10","2061-11-10","2061-12-10","2062-01-10","2062-02-10","2062-03-10","2062-04-10","2062-05-10","2062-06-10","2062-07-10","2062-08-10","2062-09-10","2062-10-10","2062-11-10","2062-12-10","2063-01-10","2063-02-10","2063-03-10","2063-04-10","2063-05-10","2063-06-10","2063-07-10","2063-08-10","2063-09-10","2063-10-10","2063-11-10","2063-12-10","2064-01-10","2064-02-10","2064-03-10","2064-04-10","2064-05-10","2064-06-10","2064-07-10","2064-08-10","2064-09-10","2064-10-10","2064-11-10","2064-12-10","2065-01-10","2065-02-10","2065-03-10","2065-04-10","2065-05-10","2065-06-10","2065-07-10","2065-08-10","2065-09-10","2065-10-10","2065-11-10","2065-12-10","2066-01-10","2066-02-10","2066-03-10","2066-04-10","2066-05-10","2066-06-10","2066-07-10","2066-08-10","2066-09-10","2066-10-10","2066-11-10","2066-12-10","2067-01-10","2067-02-10","2067-03-10","2067-04-10","2067-05-10","2067-06-10","2067-07-10","2067-08-10","2067-09-10","2067-10-10","2067-11-10","2067-12-10","2068-01-10","2068-02-10","2068-03-10","2068-04-10","2068-05-10","2068-06-10","2068-07-10","2068-08-10","2068-09-10","2068-10-10","2068-11-10","2068-12-10","2069-01-10","2069-02-10","2069-03-10","2069-04-10","2069-05-10","2069-06-10","2069-07-10","2069-08-10","2069-09-10","2069-10-10","2069-11-10","2069-12-10","2070-01-10","2070-02-10","2070-03-10","2070-04-10","2070-05-10","2070-06-10","2070-07-10","2070-08-10","2070-09-10","2070-10-10","2070-11-10","2070-12-10","2071-01-10","2071-02-10","2071-03-10","2071-04-10","2071-05-10","2071-06-10","2071-07-10","2071-08-10","2071-09-10","2071-10-10","2071-11-10","2071-12-10","2072-01-10","2072-02-10","2072-03-10","2072-04-10","2072-05-10","2072-06-10","2072-07-10","2072-08-10","2072-09-10","2072-10-10","2072-11-10","2072-12-10","2073-01-10","2073-02-10","2073-03-10","2073-04-10","2073-05-10","2073-06-10","2073-07-10","2073-08-10","2073-09-10","2073-10-10","2073-11-10","2073-12-10","2074-01-10","2074-02-10","2074-03-10","2074-04-10","2074-05-10","2074-06-10","2074-07-10","2074-08-10","2074-09-10","2074-10-10","2074-11-10","2074-12-10","2075-01-10","2075-02-10","2075-03-10","2075-04-10","2075-05-10","2075-06-10","2075-07-10","2075-08-10","2075-09-10","2075-10-10","2075-11-10","2075-12-10","2076-01-10","2076-02-10","2076-03-10","2076-04-10","2076-05-10","2076-06-10","2076-07-10","2076-08-10","2076-09-10","2076-10-10","2076-11-10","2076-12-10","2077-01-10","2077-02-10","2077-03-10","2077-04-10","2077-05-10","2077-06-10","2077-07-10","2077-08-10","2077-09-10","2077-10-10","2077-11-10","2077-12-10","2078-01-10","2078-02-10","2078-03-10","2078-04-10","2078-05-10","2078-06-10","2078-07-10","2078-08-10","2078-09-10","2078-10-10","2078-11-10","2078-12-10","2079-01-10","2079-02-10","2079-03-10","2079-04-10","2079-05-10","2079-06-10","2079-07-10","2079-08-10","2079-09-10","2079-10-10","2079-11-10","2079-12-10","2080-01-10","2080-02-10","2080-03-10","2080-04-10","2080-05-10","2080-06-10","2080-07-10","2080-08-10","2080-09-10","2080-10-10","2080-11-10","2080-12-10","2081-01-10","2081-02-10","2081-03-10","2081-04-10","2081-05-10","2081-06-10","2081-07-10","2081-08-10","2081-09-10","2081-10-10","2081-11-10","2081-12-10","2082-01-10","2082-02-10","2082-03-10","2082-04-10","2082-05-10","2082-06-10","2082-07-10","2082-08-10","2082-09-10","2082-10-10","2082-11-10","2082-12-10","2083-01-10","2083-02-10","2083-03-10","2083-04-10","2083-05-10","2083-06-10","2083-07-10","2083-08-10","2083-09-10","2083-10-10","2083-11-10","2083-12-10","2084-01-10","2084-02-10","2084-03-10","2084-04-10","2084-05-10","2084-06-10","2084-07-10","2084-08-10","2084-09-10","2084-10-10","2084-11-10","2084-12-10","2085-01-10","2085-02-10","2085-03-10","2085-04-10","2085-05-10","2085-06-10","2085-07-10","2085-08-10","2085-09-10","2085-10-10","2085-11-10","2085-12-10","2086-01-10","2086-02-10","2086-03-10","2086-04-10","2086-05-10","2086-06-10","2086-07-10","2086-08-10","2086-09-10","2086-10-10","2086-11-10","2086-12-10","2087-01-10","2087-02-10","2087-03-10","2087-04-10","2087-05-10","2087-06-10","2087-07-10","2087-08-10","2087-09-10","2087-10-10","2087-11-10","2087-12-10","2088-01-10","2088-02-10","2088-03-10","2088-04-10","2088-05-10","2088-06-10","2088-07-10","2088-08-10","2088-09-10","2088-10-10","2088-11-10","2088-12-10","2089-01-10","2089-02-10","2089-03-10","2089-04-10","2089-05-10","2089-06-10","2089-07-10","2089-08-10","2089-09-10","2089-10-10","2089-11-10","2089-12-10","2090-01-10","2090-02-10","2090-03-10","2090-04-10","2090-05-10","2090-06-10","2090-07-10","2090-08-10","2090-09-10","2090-10-10","2090-11-10","2090-12-10","2091-01-10","2091-02-10","2091-03-10","2091-04-10","2091-05-10","2091-06-10","2091-07-10","2091-08-10","2091-09-10","2091-10-10","2091-11-10","2091-12-10","2092-01-10","2092-02-10","2092-03-10","2092-04-10","2092-05-10","2092-06-10","2092-07-10","2092-08-10","2092-09-10","2092-10-10","2092-11-10","2092-12-10","2093-01-10","2093-02-10","2093-03-10","2093-04-10","2093-05-10","2093-06-10","2093-07-10","2093-08-10","2093-09-10","2093-10-10","2093-11-10","2093-12-10","2094-01-10","2094-02-10","2094-03-10","2094-04-10","2094-05-10","2094-06-10","2094-07-10","2094-08-10","2094-09-10","2094-10-10","2094-11-10","2094-12-10","2095-01-10","2095-02-10","2095-03-10","2095-04-10","2095-05-10","2095-06-10","2095-07-10","2095-08-10","2095-09-10","2095-10-10","2095-11-10","2095-12-10","2096-01-10","2096-02-10","2096-03-10","2096-04-10","2096-05-10","2096-06-10","2096-07-10","2096-08-10","2096-09-10","2096-10-10","2096-11-10","2096-12-10","2097-01-10","2097-02-10","2097-03-10","2097-04-10","2097-05-10","2097-06-10","2097-07-10","2097-08-10","2097-09-10","2097-10-10","2097-11-10","2097-12-10","2098-01-10","2098-02-10","2098-03-10","2098-04-10","2098-05-10","2098-06-10","2098-07-10","2098-08-10","2098-09-10","2098-10-10","2098-11-10","2098-12-10","2099-01-10","2099-02-10","2099-03-10","2099-04-10","2099-05-10","2099-06-10","2099-07-10","2099-08-10","2099-09-10","2099-10-10","2099-11-10","2099-12-10"],i=this;i.end_point_url=t.urls.get_invoice_credit_card,i.getInvoiceFor=function(t,n){var r=moment(n,"DD-MM-YYYY").format("YYYY-MM-DD"),o=i.end_point_url.replace(/credit_card_id/,t);return e.get(o+"?date="+r)},i.getCurrentInvoice=function(t){return url=i.end_point_url.replace(/credit_card_id/,t),e.get(url+"?current=true")},i.getCurrentOrUnpaidInvoice=function(t){return url=i.end_point_url.replace(/credit_card_id/,t),e.get(url+"?current_or_unpaid=true")},i.getInvoiceMonth=function(t){return moment(n[t],"YYYY-MM-DD").toDate()}}}]),t.filter("invoiceDateFormat",["$filter",function(t){return function(e){return t("date")(e,"MMMM 'de' yyyy")}}]),t.directive("creditCardInvoicesSelector",["CreditCardInvoices",function(){return{restrict:"EA",scope:{object:"=",onChange:"&"},replace:!0,template:"<div class='credit-card-invoices'>                      Fatura de                      <div class='drop-down black' data-drop-down='hover'>                        <a href='' onclick='return false'>{{object.invoice.date | invoiceDateFormat}}</a>                        <div class='drop-down-box' data-drop-down='box'>                          <ul>                            <li class='option-item' ng-repeat='option in options()' ng-class='{active: (option.id == object.invoice.id)}'>                              <a href='' ng-click='selectOption(option, $event)'>                                {{option.date | invoiceDateFormat}}                              </a>                            </li>                          </ul>                        </div>                      </div>                    </div>",controller:["$scope","$attrs","CreditCardInvoices","CreditCards","$filter",function(t,e,n,r){var o;t.credit_card=r.findBy({uuid:t.object.account_uuid}),t.$watch("object.date",function(e,n){e!=n&&t.credit_card&&s()}),t.$watch("object.account_uuid",function(e,n){e!=n&&(t.credit_card=r.findBy({uuid:t.object.account_uuid}))}),t.$watch("credit_card",function(e,n){e!=n&&(t.credit_card?s():t.object.invoice=null)}),t.options=function(){return t.object.invoice?(o||(o=a()),o):[]},t.selectOption=function(e,n){t.object.invoice=e,n.preventDefault()};var a=function(){var e=[];for(i=-2;i<3;i++){var n=moment(t.object.invoice.date).add({months:i}).toDate();e.push({date:n,id:t.object.invoice.id+i})}return e},s=function(){10===t.object.date.length&&n.getInvoiceFor(t.credit_card.id,t.object.date).success(function(e){t.object.invoice=e,o=null})}}]}}])}(),angular.module("service.credit_cards",["service.collections","service.autocomplete","service.context"]).factory("CreditCards",["Context","Collections",function(t,e){return new function(){var n=this;n.findBy=function(n){return e.findBy(t.credit_cards,n)},n.findIndexBy=function(n){return e.findIndexBy(t.credit_cards,n)},n.filterByName=e.filterByName,n.createOrUpdate=function(e){var i=n.findIndexBy({id:e.id});-1==i?t.credit_cards.push(e):t.credit_cards[i]=e},n.automatic=function(e){return _.filter(t.credit_cards,function(t){return 0==t.archived&&t.automatic==e})},n.active=function(){return _.filter(t.credit_cards,function(t){return 0==t.archived})},n.archived=function(){return _.filter(t.credit_cards,function(t){return 1==t.archived})}}}]),function(){var t=angular.module("service.currency",[]);t.filter("money",["Currency",function(t){return function(e){return t.symbol+" "+t.format(e)}}]),t.factory("Currency",[function(){var t=window.Currency;return t.symbol=t.source().symbol,t.thousands_separator=t.source().thousands_separator,t.subunit_to_unit=t.source().subunit_to_unit,t.decimal_mark=t.source().decimal_mark,t}])}(),models=angular.module("service.model",[]),models.factory("Validations",function(){function t(t,e){t.errors||(t.errors={}),_.isArray(t.errors[e])||(t.errors[e]=[]),t.errors.messagesFor||(t.errors.messagesFor=function(e){return t.errors[e]?t.errors[e].join(", "):""})}function e(t,e){return void 0!==t?t:e}function n(t){var e=!0,n=!1;return _.has(t,"if")&&(e=_.result(t,"if")),_.has(t,"unless")&&(n=_.result(t,"unless")),e&&!n}var i={},r=new RegExp(/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/gi),o={blank:"n\xe3o pode ficar em branco",invalid_currency:"formato inv\xe1lido",invalid_url:"url inv\xe1lida",accepted:"deve ser aceito",blank:"n\xe3o pode ficar em branco",confirmation:"n\xe3o est\xe1 de acordo com a confirma\xe7\xe3o",empty:"n\xe3o pode ficar vazio",even:"deve ser par",exclusion:"n\xe3o est\xe1 dispon\xedvel",inclusion:"n\xe3o est\xe1 inclu\xeddo na lista",invalid:"n\xe3o \xe9 v\xe1lido",not_a_number:"n\xe3o \xe9 um n\xfamero",not_an_integer:"n\xe3o \xe9 um n\xfamero inteiro",odd:"deve ser \xedmpar",equal_to:function(t){return"deve ser igual a "+t},greater_than:function(t){return"deve ser maior que "+t},greater_than_or_equal_to:function(t){return"deve ser maior ou igual a "+t},less_than:function(t){return"deve ser menor que "+t},less_than_or_equal_to:function(t){return"deve ser menor ou igual a "+t},taken:"j\xe1 est\xe1 em uso",too_long:function(t){return"\xe9 muito longo (m\xe1ximo: "+t+" caracteres)"},too_short:function(t){return"\xe9 muito curto (m\xednimo: "+t+" caracteres)"},less_than:function(t){return"deve ser menor que "+t},wrong_length:function(t){return"n\xe3o possui o tamanho esperado ("+t+" caracteres)"}};return i.getMessage=function(t,e){var n=o[t];return"function"==typeof n?n(e):n},i.required=function(r,o,a){if(n(a=e(a,{}))){t(r,o);var s=e(a.message,i.getMessage("blank"));_.contains(r.errors[o],s)||null!==r[o]&&r[o]!==undefined&&""!==r[o]||r.errors[o].push(s)}},i.url=function(o,a,s){if(n(s=e(s,{}))){t(o,a);var c=e(s.message,i.getMessage("invalid_url"));_.contains(o.errors[a],c)||(""+o[a]).match(r)||o.errors[a].push(c)}},i.greaterThan=function(r,o,a){if(n(a=e(a,{}))){t(r,o);var s=a.count,c=e(a.message,i.getMessage("greater_than",s));_.contains(r.errors[o],c)||r[o]>s||r.errors[o].push(c)}},i.validate=function(e,i,r,o){if(t(e,i),n(o)){var a=o.message;_.contains(e.errors[i],a)||r(e)||e.errors[i].push(a)}},i.isValid=function(t){return _.every(t.errors,function(t){return _.isEmpty(t)})},i}),models.factory("Model",["Validations",function(t){var e={},n=ContextSource.free;return e.models=[],e.Validations=t,e.assignAttributes=function(t,e){_.each(_.keys(e),function(n){t[n]=e[n]})},e.isAllowedResource=function(t){return!n||t.quantity<t.allowed},e.setAvailableResources=function(t,e){if(n){var i=angular.copy(t.quantity);t.quantity="more"===e?i+1:i-1}},e.buildCollection=function(t,e){return _.map(e,function(e){return new t(e)})},e.register=function(t){t.prototype=Object.create(e),t.prototype.constructor=t,t.prototype.isValid=function(){return e.Validations.isValid(this)},t.buildCollection=function(n){return e.buildCollection(t,n)},e.models.indexOf(t>-1)&&e.models.push(t)},e.validate=function(){},e}]),angular.module("service.tags",["service.collections","service.context"]).factory("Tags",["Context","Collections","$filter","$http",function(t,e,n,i){return new function(){var n=this,r="/"+t.current_entity.id+"/configuracoes/tags.json";n.fetchFromServer=function(){i.get(r).then(function(e){t.tags=e.data},function(){})},n.find=function(e){var n=(""+e).toLowerCase();return _.find(t.tags,function(t){return n===(""+t.name).toLowerCase()})},n.filter=function(e){var n=(""+e).toLowerCase();return _.filter(t.tags,function(t){return n===(""+t.name).toLowerCase()})},n.availableTags=function(t){return ContextSource.free?t.slice(0,3):t},n.sorted=function(){return _.sortBy(t.tags,function(t){return t.name.toLowerCase()})},n.createOrUpdate=function(n){var i=e.findIndexBy(t.tags,{hash_id:n.hash_id});-1==i?t.tags.push(n):t.tags[i]=n,t.tags=_.sortBy(t.tags,function(t){return t.name.toLowerCase()})}}}]),function(){var t=angular.module("service.uploaderFactory",["directive.ngFileUploadLink","service.context","service.model","angularFileUpload"]);t.directive("ngFileDragClass",["$timeout",function(t){return function(e,n,i){var r=$(n),o=i.ngFileDragClass,a=null;r.on("dragover",function(){r.addClass(o),t.cancel(a)}).on("dragleave",function(){a=t(function(){r.removeClass(o)},300)}).on("drop",function(){r.removeClass(o)})}}]),t.factory("UploaderFactory",["FileUploader","Model","Context",function(t,e,n){function i(i,r){var o=new t({url:r.url,headers:{"Access-Control-Request-Headers":"x-requested-with"},scope:i,autoUpload:!0,queueLimit:a()+i.transaction.attachments_count});return o.onBeforeUploadItem=function(t){t.file.fileName=c(t.file.name),t.file.s3ObjectKey=r.key_prefix+"/"+Application.uuid()+"/"+t.file.fileName,t.file.url=r.url+"/"+t.file.s3ObjectKey,t.file.human_type=l(t.file.type),t.destroyed=!1,t.formData=[{key:t.file.s3ObjectKey,acl:r.acl,AWSAccessKeyId:r.AWSAccessKeyId,policy:r.policy,signature:r.signature}]},o.onAfterAddingFile=function(){},o.onCompleteItem=function(){e.setAvailableResources(n.availableResources.attachments,"more"),o.queueLimit=a()+o.queue.length},o.onProgressItem=function(){},o}var r,o={};o.create=function(t,o){return t.removeFile=function(i,r){i.destroyed=!0,e.setAvailableResources(n.availableResources.attachments,"minus"),t.uploader.queueLimit=a()+t.uploader.queue.length,r.preventDefault()},o.s3Settings?(r=JSON.parse(o.s3Settings),i(t,r)):(url=o.url,s(t,url))};var a=function(){return n.availableResources.attachments.allowed-n.availableResources.attachments.quantity},s=function(e,n){return new t({url:n,scope:e,autoUpload:!0})},c=function(t){var e="";return t.split(".").length>1?(extension=t.split(".").pop(),e=(e=t.replace("."+extension,"").toLowerCase()).replace(/[^a-z0-9_\-]/gi,"_").toLowerCase()+"."+extension.toLowerCase()):e=t.replace(/[^a-z0-9_\-]/gi,"_").toLowerCase(),e},l=function(t){var e="general";return/image/.test(t)&&(e="image"),/pdf/.test(t)&&(e="pdf"),/powerpoint/.test(t)&&(e="ppt"),/audio/.test(t)&&(e="audio"),/text/.test(t)&&(e="txt"),(/excel/.test(t)||/spreadsheet/.test(t))&&(e="xls"),/zip/.test(t)&&(e="zip"),/word/.test(t)&&(e="word"),e};return o}])}(),function(){var t=angular.module("app.accountStatement",["service.model","service.categories","service.credit_cards_invoices","ngRoute","ngAnimate","directive.floatingTopBar"]);t.config(["$sceDelegateProvider",function(t){t.resourceUrlWhitelist(["self","http*://dksb2iyvxw73o.cloudfront.net/**"])}]),t.factory("ImportedTransaction",["Model",function(t){function e(e){var n=this;t.assignAttributes(n,e),n.balance=function(){return angular.isObject(n.conciliation)?0:n.candidate&&n.candidate.account_uuid==n.account_uuid?n.amount-n.candidate.amount:n.amount}}return t.register(e),e}]),t.factory("PeriodSurfer",["$filter",function(t){function e(e,n){var i=this;i.startDate=e,i.endDate=n,i.getLabel=function(){return t("date")(i.startDate,"MMMM 'de' yyyy")},i.forward=function(){i.startDate=moment(i.startDate).add(1,"month").toDate(),i.endDate=moment(i.endDate).add(1,"month").endOf("month").toDate(),r()},i.backward=function(t){i.startDate=moment(i.startDate).subtract(1,"month").toDate(),i.endDate=moment(i.endDate).subtract(1,"month").endOf("month").toDate(),r(),t&&t.stopPropagation()};var r=function(){"function"==typeof i.onChange&&i.onChange(i.startDate,i.endDate)}}return e}]),t.controller("appCtrl",["$scope","$http","$filter","$timeout","Context","ImportedTransaction","Categories","PeriodSurfer","CreditCardInvoices","$attrs",function(t,e,n,i,r,o,a,s,c){function l(){e.get(t.urls.sourceUrl).then(function(e){var n=e.data;t.conciliatingCreditCard="CreditCard"===n.accountType,t.creditCardId=n.creditCardId,t.importedTransactions=o.buildCollection(n.importedTransactions),t.dateRange={startDate:n.startDate,endDate:n.endDate},t.placeholders=_.where(n.importedTransactions,{is_placeholder:!0}),t.loadingSource=!1},function(){Flash.show("erro ao buscar dados do extrato","error"),t.loadingSource=!1})}function u(r,o,a){var s=n("date")(o,"yyyy-MM-dd"),c=n("date")(a,"yyyy-MM-dd");i(function(){e.get(r.candidates_url,{params:{start_date:s,end_date:c}}).then(function(e){t.candidates=e.data},function(){Flash.show("Ocorreu um erro ao buscar lan\xe7amentos","error")})},100)}function d(t){return _.pick(t,t.updateable_attributes)}function h(e){return e.amount||(e.amount=t.formatAmount(e.amount_in_cents)),e}function p(t){if(t.url)return e.put(t.url,{imported_transaction:d(t)})}function f(n){e.put(t.urls.hideConciliatedPreferenceUrl).then(function(){},function(){}),n&&n.preventDefault()}function g(n){e.put(t.urls.hideGhostCandidatePreferenceUrl).then(function(){},function(){}),n&&n.preventDefault()}t.hideGhostCandidates=tmp.hideGhostCandidates,t.hideConciliated=tmp.hideConciliated,t.urls=tmp.urls,t.loadingSource=!0,t.showCandidates=!1,t.candidates=[],t.periodSurfer=new s(new Date,new Date),l(),t.periodSurfer.onChange=function(e,n){u(t.currentImportedTransaction,e,n)},t.toggleCandidates=function(e,n){if(t.currentImportedTransaction=n,n){var i=moment(n.date).startOf("month").toDate(),r=moment(n.date).endOf("month").toDate();if(t.conciliatingCreditCard){var o;if(n.description.match(/\d/))o=c.getCurrentOrUnpaidInvoice(t.creditCardId);else{var a=""+moment(n.date).format("DD-MM-YYYY");o=c.getInvoiceFor(t.creditCardId,a)}o.success(function(e){var o=moment(e.date,"YYYY-MM-DD").toDate();i=moment(o).startOf("month").toDate(),r=moment(o).endOf("month").toDate(),t.periodSurfer.startDate=i,t.periodSurfer.endDate=r,u(n,i,r)})}else t.periodSurfer.startDate=i,t.periodSurfer.endDate=r,u(n,i,r)}t.showCandidates=!t.showCandidates,t.candidateDescription=null,e&&e.preventDefault()},t.toggleSelected=function(t,e){p(e)},t.toggleAll=function(){_.each(t.importedTransactions,function(e){e.is_placeholder||t.isConciliated(e)&&t.hideConciliated||(e.selected=t.selectAll,p(e))})},t.isSameActivityTypeSelected=function(){var e=0,n=0;return _.filter(t.importedTransactions,function(t){t.selected&&t.conciliate&&0===t.activity_type&&(e+=1),t.selected&&t.conciliate&&1===t.activity_type&&(n+=1)}),!(e>0&&n>0)},t.allSelected=function(){return _.filter(t.importedTransactions,function(t){return t.selected&&t.conciliate})},t.dropDispatcher=function(e,n,i,r){if(!(angular.isObject(r.conciliation)&&angular.isObject(r.candidate)&&angular.isObject(r.candidate.conciliation)))switch(i){case"assignCandidate":t.setCurrentImportedTransaction(undefined,r),t.assignCandidate(n.candidate)}},t.conciliate=function(n){n||(n=t.currentImportedTransaction),t.currentImportedTransaction||t.setCurrentImportedTransaction(undefined,n),t.assureSingleCandidates(n),e.post(n.conciliation_url).then(function(t){n.conciliation=t.data.conciliation,n.candidate=t.data.candidate},function(){Flash.show("Ocorreu um erro ao realizar a concilia\xe7\xe3o","error")})},t.assignCandidate=function(e,n){t.currentImportedTransaction&&!t.currentImportedTransaction.is_placeholder&&(_.isObject(e.conciliation)||e.conciliation_id||(t.currentImportedTransaction.candidate_id=e.id,t.currentImportedTransaction.candidate=h(e),p(t.currentImportedTransaction).then(function(){n&&n(),t.assureSingleCandidates(t.currentImportedTransaction)},function(){Flash.show("Ocorreu um erro ao salvar lan\xe7amento","error")}),t.showCandidates&&(t.showCandidates=!1)))},t.assureSingleCandidates=function(){for(var e=_.where(t.importedTransactions,{candidate_id:t.currentImportedTransaction.candidate_id}),n=0;n<e.length;n++)e[n].uuid!=t.currentImportedTransaction.uuid&&(e[n].candidate=null,e[n].candidate_id=null,e[n].conciliation=null,p(e[n]))},t.removeCandidate=function(e,n){var i=_.findIndex(t.importedTransactions,{uuid:n.uuid});t.importedTransactions[i].candidate=null,t.importedTransactions[i].candidate_id=null,p(t.importedTransactions[i]).then(function(){},function(){Flash.show("Ocorreu um errou um erro ao remover candidato","error")}),e&&e.preventDefault()},t.undoConciliation=function(n,i){var r=_.findIndex(t.importedTransactions,{uuid:i.uuid});e["delete"](i.undo_conciliation_url).then(function(e){e.data.transaction?(t.importedTransactions[r].conciliation=null,t.importedTransactions[r].candidate.conciliation=null):(t.importedTransactions[r].conciliation=null,t.importedTransactions[r].candidate=null,t.importedTransactions[r].candidate_id=null),p(t.importedTransactions[r])},function(){Flash.show("Ocorreu um erro ao desfazer est\xe1 concialia\xe7\xe3o","error")}),n&&n.preventDefault()},t.toggleHideConciliated=function(e){t.hideConciliated=!t.hideConciliated,t.hideConciliated&&_.each(t.conciliated(),function(t){t.selected&&(t.selected=!1,p(t))}),f(null),e&&e.preventDefault()},t.conciliatedLength=function(){return"("+t.conciliated().length+")"},t.toggleHideGhostCandidates=function(e){t.hideGhostCandidates=!t.hideGhostCandidates,g(null),e&&e.preventDefault()},t.ghostCandidatesLength=function(){return"("+t.ghostCandidates().length+")"},t.ghostCandidates=function(){return _.filter(t.importedTransactions,function(t){return t.is_placeholder&&t.candidate})},t.draggable=function(e){return!t.isConciliated(e)&&_.isObject(e.candidate)},t.isGhost=function(t){return t.is_placeholder},t.isConciliated=function(t){return angular.isObject(t.conciliation)&&angular.isObject(t.candidate)&&angular.isObject(t.candidate.conciliation)&&t.conciliation.id===t.candidate.conciliation.id},t.allSelectedConciliated=function(){_.filter(t.allSelected(),function(e){return t.isConciliated(e)})},t.previouslyConciliated=function(t){return!angular.isObject(t.conciliation)&&angular.isObject(t.candidate)&&angular.isObject(t.candidate.conciliation)},t.conciliated=function(){return _.filter(t.importedTransactions,function(t){return _.isObject(t.conciliation)})},t.categoryFor=function(t){return a.findBy({uuid:t.tag_uuid})},t.creditCardInvoiceFor=function(t){if(t&&t.credit_card_invoice_id)return moment(c.getInvoiceMonth(t.credit_card_invoice_id)).format("MMM/YYYY")},t.importedTransactionsToConciliate=function(){return _.filter(t.importedTransactions,function(t){return!_.isObject(t.conciliation)&&t.conciliate&&!t.is_placeholder})},t.setCurrentImportedTransaction=function(e,n){t.currentImportedTransaction=n,e&&e.preventDefault()},t.editCandidatePath=function(t){return 0===t.type?r.urls.edit_transaction.replace(/transaction_id/,t.id):1==t.type?r.urls.edit_transference.replace(/transaction_id/,t.id):void 0},t.customFilter=function(e){return(!t.isConciliated(e)||!t.hideConciliated)&&((!t.isGhost(e)||!t.hideGhostCandidates)&&!(t.isGhost(e)&&!e.candidate))},t.amountClassFor=function(t){return t<0?"negative":"positive"},t.columnClassFor=function(t){if(t)return t.amount<0?"red":"green"},t.trClassFor=function(t){switch(t.type){case 0:return t.amount<=0?"expense":"earning";case 1:return"transference";case 2:return"initial-amount"}return"expense"},t.formatAmount=function(t){return Number(t/100).toFixed(2)},t.initialize=l}]),t.directive("periodSurfer",[function(){return{restrict:"A",scope:{surfer:"="},controller:["$scope",function(){}]}}]),t.directive("addTransactionCallback",["$timeout","$http",function(t,e){return function(t){$("body").off("transactions:afterCreate.conciliations"),$("body").on("transactions:afterCreate.conciliations",function(e,n){if(_.isObject(n)){$("[data-row="+t.currentImportedTransaction.uuid+"]");t.$apply(function(){t.assignCandidate(n,t.conciliate)}),e&&e.preventDefault()}else t.$apply(function(){t.initialize(),t.selectAll=!1}),e&&e.preventDefault()}),$("body").off("transactions:afterUpdate.conciliations"),$("body").on("transactions:afterUpdate.conciliations",function(n,i){$("[data-row="+t.currentImportedTransaction.uuid+"]").highlight(),t.$apply(function(){e.get(t.urls.sourceUrl).then(function(){t.currentImportedTransaction.candidate.amount=t.formatAmount(i.amount_in_cents),t.currentImportedTransaction.candidate.description=i.description,t.currentImportedTransaction.candidate.date=i.date,i.credit_card_id&&(t.currentImportedTransaction.candidate.credit_card_invoice_id=i.credit_card_invoice_id)},function(){Flash.show("erro ao conciliar lan\xe7amento","error"),$scope.loadingSource=!1}),t.assignCandidate(i)}),n&&n.preventDefault()}),$("body").off("transactions:afterBulkUndo.conciliations"),$("body").on("transactions:afterBulkUndo.conciliations",function(e){t.$apply(function(){t.initialize(),t.selectAll=!1}),e&&e.preventDefault()})}}]),t.animation(".candidates-importer",function(){return{enter:function(t,e){return $element=$(t),$window=$element.find("*[popup-window]:first"),$dimming=$element.find("*[popup-dimming]:first"),_top=$(window).height()/2-$window.height()/2,_top<10&&(_top=10),_top+=$(window).scrollTop(),$window.css({top:_top}),$dimming.hide(),$window.hide(),$dimming.fadeIn(300,function(){$window.show(),$window.find("input[auto-focus=true]:first").focus(),e()}),function(e){e&&$(t).stop()}},leave:function(t){return $element=$(t),$window=$element.find("*[popup-window]:first"),$dimming=$element.find("*[popup-dimming]:first"),$dimming.fadeOut(300),$window.fadeOut(500),function(e){e&&$(t).stop()}}}}),t.animation(".col-row",function(){return{enter:function(t,e){return t.css({height:0,opacity:0}),jQuery(t).animate({height:64,opacity:1},300,e),function(e){e&&t.stop()}},leave:function(t,e){return t.css({height:64,opacity:1}),jQuery(t).animate({height:0,opacity:0},300,e),function(e){e&&t.stop()}}}})}(),angular.module("app.calendarEventForm",[]).controller("appCtrl",["$scope","$attrs",function(t,e){t.event=JSON.parse(e.event);var n=Date.today,i=n.getFullYear()+"-"+n.getMonth()+"-"+n.getDate(),r=t.event.date||i;splittedDate=r.split("-");var o=splittedDate[2]+"/"+splittedDate[1]+"/"+splittedDate[0];t.event.date=o,t.more_options={visible:{},show:function(e,n){t.more_options.visible[e]=!0,n.preventDefault()},hide:function(e,n){t.more_options.visible[e]=!1,n.preventDefault()}},t.more_options.visible.reminder=!!t.event.reminder,t.event.finite_periodicity||(t.event.finite_periodicity="monthly",t.event.month_times=2)}]),function(){var t=angular.module("app.categoriesForm",["directive.ngAutoFocus","service.categories","directive.ngKeepAdding"]);t.directive("ngSubmitWrapper",["Categories",function(t){return function(e,n){$(n).on("ajax:success.ngSubmitWrapper",function(n,i){i.errors?alert(i.errors.join("\n")):(t.createOrUpdate(i),i.keep_adding?e.$apply(function(){e.resetForm(i.new_category)}):Popup.closeCurrent(),$("body").trigger("categories:afterCreate",[i]),Flash.show(i.flash))})}}]),t.directive("ngColorPicker",["$parse",function(t){return{restrict:"A",link:function(e,n,i){var r=t(i.ngColorPicker),o=r.assign,a=Application.uuid();$(n).val(r(e)),$(n).attr("id",a),window.cp_init(a),$("body").off("color-picker:changed").on("color-picker:changed",function(t,n){e.$apply(function(){o(e,n.val())})})}}}]),t.controller("appCtrl",["$scope","$attrs","$timeout","Categories","Context",function(t,e,n,i){t.category=JSON.parse(e.source),t.parents=function(){return t.category.id?_.reject(i.parents("none"),function(e){return e.id===t.category.id}):i.parents("none")},t.$watch("category.root",function(){r()}),t.resetForm=function(e){t.category=e,r()};var r=function(){t.focusOnName=!1,n(function(){t.focusOnName=!0},50)}}])}(),function(){var t=angular.module("app.categoriesIndex",["service.categories","directive.ngAutoFocus"]);t.directive("subcategoriesForm",["Categories",function(t){return function(e,n,i){var r=e.$eval(i.subcategoriesForm);$(n).on("submit.subcategoriesForm",function(t){if(0===$(n).find("input[type=text]:first").val().length)return alert("Nome n\xe3o pode estar em branco!"),t.preventDefault(),!1}),$(n).on("ajax:success.subcategoriesForm",function(n,i){i.errors?alert(i.errors.join("\n")):(t.createOrUpdate(i),e.$apply(function(){e.subcategoryFormVisible[r.id]=!1,r.newChildName=""}),Flash.show(i.flash),$("body").trigger("categories:afterCreate",[i]))})}}]),t.controller("appCtrl",["$scope","$attrs","Categories","$timeout","$filter","Context",function(t,e,n,i){t.Categories=n,t.base_url=e.baseUrl,t.categoryOptionsIsVisible={},t.subcategoryFormVisible={},$("body").off("categories:afterCreate.categoriesIndex").on("categories:afterCreate.categoriesIndex",function(e,n){t.$digest(),i(function(){$("#category-"+n.id).effect("highlight")},350)}),t.ngStyleColorFor=function(t){return{color:"#"+t.color}}}])}(),function(){var t=angular.module("app.createEntity",["directive.ngAutoFocus","directive.inputMasks"]);t.directive("submitWrapper",function(){return function(t,e){$(e).on("submit",function(e){if(!t.validate())return t.$digest(),e.preventDefault(),!1}).on("ajax:beforeSend",function(){t.$apply(function(){t.loading()})}).on("ajax:success",function(e,n){t.$apply(function(){t.success(n.uuid)})}).on("ajax:error",function(e,n){t.$apply(function(){t.show_errors(JSON.parse(n.responseText))})})}}),t.directive("avatarClass",function(){return function(t,e,n){$(e).on("focus",function(){t.$apply(function(){t.avatar_class=n.avatarClass})})}}),t.controller("appCtrl",["$scope","$attrs",function(t,e){t.step="name",t.success_url=e.successUrl,t.loading=function(){t.step="loading"},t.goBackToChooseAccount=function(){window.history.back()},t.success=function(e){t.success_url=t.success_url.replace(":user_account_uuid",e),t.step="success"},t.show_errors=function(e){t.step="name",alert(e.join("\n"))},t.validate=function(){return t.errors={},_.isBlank(t.entity_name)&&(t.errors.entity_name=!0),_.isBlank(t.errors)}}])}(),function(){var t=angular.module("app.creditCardInvoices",["service.categories","service.tags","service.context","service.currency","ngResource"]);t.factory("Search",["$timeout",function(t){var e={highlight:function(e,n){t(function(){n.length>0&&($("td.description",e).data("timer",0).trigger("mouseenter"),$("td.value",e).data("timer",0).trigger("mouseenter")),$("td.description a",e).unhighlight({element:"em",className:"h"}).textHighlight(n,{element:"em",className:"h"}),$("td.value",e).unhighlight({element:"em",className:"h"}).textHighlight(n,{element:"em",className:"h"}),$("td.category",e).unhighlight({element:"em",className:"h"}).textHighlight(n,{element:"em",className:"h"})},600)}};return e}]),t.directive("searchWidget",["$timeout",function(){return function(t,e){var n=$(e),i=$("*[data-magnifier]:first",n),r=$("*[data-input]:first",n),o=$("*[data-cancel]:first",n),a=function(){n.addClass("active"),n.animate({width:250},{duration:200,easing:"easeOutQuart",complete:function(){r.focus(),o.show()}})},s=function(){o.hide(),n.removeClass("active"),n.animate({width:30},{duration:200,easing:"easeOutQuart",complete:function(){r.val("").trigger("input"),$(document).off("click.searchWidget:close")}})};i.off("click.searchWidget").on("click.searchWidget",function(t){a(),t.preventDefault()}),o.off("click.searchWidget").on("click.searchWidget",function(t){s(),t.preventDefault()}),r.off("keyup.searchWidget").on("keyup.searchWidget",function(t){27==t.keyCode&&s()})}}]),t.controller("searchCtrl",["$scope","$rootScope","$timeout","Filters","Search",function(t,e,n,i,r){var o;t.toggleSearch=function(r){e.searchOpen=!e.searchOpen,!e.searchOpen&&i.source.search.length>0?t.text="":e.searchOpen&&n(function(){$(".input-search input[type=text]:first").focus()},100),r.preventDefault()},t.addClass=function(t){e.searchOpen=!0,n(function(){$(".input-search input[type=text]:first").focus()},100),t.preventDefault()},t.removeClass=function(n){e.searchOpen=!1,i.source.search.length>0&&(t.text=""),n.preventDefault()};var a=function(){0===t.text.length?i.source.search=[]:i.source.search=[t.text],t.$root.$emit("afterSearch",t.text)};i.source.search.length>0&&(t.text=i.source.search[0],r.highlight("#transactions-table",t.text)),t.$watch("text",function(t,e){if(!_.isUndefined(t)&&t!=e){n.cancel(o);var i=400;""===t&&(i=10),o=n(function(){a()},i)}})}]),t.factory("Filters",[function(){var t={};return t.source=window.tmp.filters,t.isFilterEmpty=function(){var e=!0;for(var n in t.source){if(t.source[n].length>0){e=!1;break}}return e},t.findInFilter=function(e,n){return _.find(t.source[e],function(t){return t==n})},t}]),t.controller("filtersCtrl",["$scope","$rootScope","$attrs","Categories","Tags","Context","Filters",function(t,e,n,i,r,o,a){t.filters=a.source,t.Categories=i,t.Tags=r,e.filterOpen=!a.isFilterEmpty()&&0===a.source.search.length;var s={earnings:"receitas",expenses:"despesas",infinite:"lan\xe7amentos fixos",finite:"lan\xe7amentos parcelados"};t.presets={asArray:_.map(s,function(t,e){return{key:e,name:t}}),topLevelText:function(){return 0===t.filters.presets.length?"Tipo":s[t.filters.presets[0]]},toggle:function(e,n){a.findInFilter("presets",e.key)?l("presets",e.key):(t.filters.presets=[],c("presets",e.key)),n.preventDefault()}},t.addClass=function(t){e.filterOpen=!0,t.preventDefault()},t.removeClass=function(n){a.isFilterEmpty()||t.clearAll(n),e.filterOpen=!1,n.preventDefault()},t.categories={topLevelText:function(){return 0===t.filters.categories.length?"Categorias":1==t.filters.categories.length?i.findBy({uuid:t.filters.categories[0]}).name:t.filters.categories.length+" categorias"},toggle:function(e,n){if(a.findInFilter("categories",e.uuid))l("categories",e.uuid);else{var r=[e.uuid];"true"==e.is_root&&(r=r.concat(_.map(i.childrenFor(e),function(t){return t.uuid}))),t.filters.categories=_.uniq(t.filters.categories.concat(r)),u()}n.preventDefault()}},t.tags={topLevelText:function(){return 0===t.filters.tags.length?"Tags":1==t.filters.tags.length?t.filters.tags[0]:t.filters.tags.length+" tags"},toggle:function(e,n){a.findInFilter("tags",e.name)?l("tags",e.name):(t.filters.tags=_.uniq(t.filters.tags.concat([e.name])),u()),n.preventDefault()}},t.clearFilter=function(e,n){t.filters[e]=[],n&&n.preventDefault(),u()},t.clearAll=function(e){$.each(t.filters,function(e){t.filters[e]=[]}),e.preventDefault(),u()},t.inFilter=function(t,e){return!!a.findInFilter(t,e)},t.empty=function(){var e=!0;return $.each(t.filters,function(t,n){n.length>0&&"search"!=t&&(e=!1)}),e};var c=function(e,n){t.filters[e].push(n),u()},l=function(e,n){t.filters[e]=_.reject(t.filters[e],function(t){return t==n}),u()},u=function(){a.source=t.filters,t.$root.$emit("afterFilter",t.filters)}}]),t.filter("humanAmount",["Currency",function(t){return function(e){return t.symbol+" "+t.format(e/t.subunit_to_unit)}}]),t.filter("typeTransaction",[function(){return function(t){return 1===t?"receita":"despesa"}}]),t.factory("InvoiceFetcher",["Context","$rootScope","$resource",function(t,e,n){var i={},r=n(tmp.invoiceUrl,{},{responseType:"json"});return i.fetch=function(t,n,i){return t&&(e.loading=!0),r.get(n,function(){t&&(e.loading=!1),i&&i()})},i}]),t.controller("invoiceController",["$scope","Context","$http","$timeout","Search","Filters","InvoiceFetcher","$filter",function(t,e,n,i,r,o,a,s){t.invoice=tmp.invoice,t.creditCard=tmp.creditCard,t.transactions=tmp.transactions,t.newPaymentUrl=tmp.newPaymentUrl,t.isFiltered=function(){return!o.isFilterEmpty()},t.categoryIconClass=function(t){return"icon-category-"+(t.group_id+"").replace(/_/g,"-")},t.filteredBalance=function(){return _.reduce(t.transactions,function(t,e){return t+e.amount_in_cents},0)},t.fullDescription=function(t){return t.limited?t.description+" "+t.repeat_index+"/"+t.repeat_total:t.description},t.invoiceStatus=function(){return t.invoice.current?"current":t.invoice.paid?"paid":t.invoice.overdue?"overdue":void 0},t.paymentUrl=function(t){return"/"+e.current_entity.id+"/cartao-de-credito/"+t.paid_credit_card_id+"/faturas/"+t.paid_credit_card_invoice_id+"/payments/"+t.id},t.transactionUrl=function(t){return"/"+e.current_entity.id+"/transactions/"+t.id},t.duplicateTransactionUrl=function(t){return"/"+e.current_entity.id+"/transactions/new?clone_transaction_id="+t.id},t.invoiceUrl=function(t){return"/"+e.current_entity.id+"/cartao-de-credito/"+t.credit_card_id+"/faturas/"+t.id},t.invoiceLink=function(e){var n=s("date")(e.date,"MMMM 'de' yyyy");return'<a href="'+t.invoiceUrl(e)+'">fatura de '+n+"</a>"},t.changeInvoice=function(e,i){n.put(t.transactionUrl(e),{transaction:{credit_card_invoice_id:i}}).success(function(e){a.fetch(!0).$promise.then(function(e){t.invoice=JSON.parse(e.invoice),t.transactions=JSON.parse(e.transactions)}),Flash.show("Movimenta\xe7\xe3o lan\xe7ada na "+t.invoiceLink(e.invoice))}).error(function(){})},t.invoicePayment=function(e){return"CreditCardBillsPayment"==e.type&&e.paid_credit_card_invoice_id==t.invoice.id},t.$root.$on("afterFilter",function(e,n){a.fetch(!0,{filters:n}).$promise.then(function(e){t.invoice=JSON.parse(e.invoice),t.transactions=JSON.parse(e.transactions)})}),t.$root.$on("afterSearch",function(e,n){a.fetch(!0,{search:n}).$promise.then(function(e){t.invoice=JSON.parse(e.invoice),t.transactions=JSON.parse(e.transactions),r.highlight("#transactions-table",n)})}),t.undoConciliation=function(t,i){var r="/"+e.current_entity.id+"/conciliations/"+i.conciliation.account_statement_id+"/conciliations/"+i.conciliation.imported_transaction_id;n["delete"](r).then(function(t){Flash.show("Concilia\xe7\xe3o desfeita."),t.data.transaction?$("body").trigger("transactions:afterUpdate",[i]):$("body").trigger("transactions:afterDestroy",[i])},function(){Flash.show("Ocorreu um erro ao desfazer est\xe1 concilia\xe7\xe3o.","error")}),t&&t.preventDefault()};var c=function(t){i(function(){$("#bill-transaction-"+t.id).highlight()},500)};$("body").off("transactions:afterCreate").on("transactions:afterCreate",function(e,n){a.fetch(!1).$promise.then(function(e){t.invoice=JSON.parse(e.invoice),t.transactions=JSON.parse(e.transactions)}),c(n)}),$("body").off("transactions:afterUpdate").on("transactions:afterUpdate",function(e,n){a.fetch(!1).$promise.then(function(e){t.invoice=JSON.parse(e.invoice),t.transactions=JSON.parse(e.transactions)}),c(n)}),$("body").off("transactions:afterDestroy").on("transactions:afterDestroy",function(e,n){var i=!t.invoicePayment(n);a.fetch(i).$promise.then(function(e){t.invoice=JSON.parse(e.invoice),t.transactions=JSON.parse(e.transactions)})})}])}(),function(){var t=angular.module("app.imageUploader",[]);t.directive("ngFileSelect",["$timeout",function(){return function(t,e){var n=$(e),i=n.parents("form:first"),r=n.parents(".window");n.on("change.ngFileSelect",function(){i.submit()}),i.on("submit.ngFileSelect",function(){return t.$apply(function(){t.step="loading"}),!0}),n.on("dragover",function(){r.addClass("dragover")}).on("dragleave",function(){r.removeClass("dragover")}).on("drop",function(){r.removeClass("dragover")})}}]),t.directive("ngFileDragClass",["$timeout",function(t){return function(e,n,i){var r=$(n),o=i.ngFileDragClass,a=null;r.on("dragover",function(){r.addClass(o),t.cancel(a)}).on("dragleave",function(){a=t(function(){r.removeClass(o)},300)}).on("drop",function(){r.removeClass(o)})}}]),t.controller("appCtrl",["$scope",function(t){t.step="form"}])}(),angular.module("app.importerFileUploader",["service.accountables","directive.ngFileUploadLink","angularFileUpload"]).controller("appCtrl",["$scope","$attrs","FileUploader","Accounts","CreditCards","Accountables","$timeout","$animate","$interval",function(t,e,n,i,r,o,a,s,c){t.step="choose",t.state="wait",t.accounts=i.active(),t.credit_cards=r.active(),t.uploader=new n({scope:t,autoUpload:!1}),console.warn(t.accounts);var l,u=JSON.parse(e.params);t.showBackButton=_.isBlank(u.account_uuid),t.imagePathFor=function(t){return console.warn(t),""},t.ccImagePathFor=function(){return""},t.selectAccount=function(e,n){t.selected_account=e,t.step="ofx",t.uploader.clearQueue(),t.uploader.url=d(),window.setTimeout(function(){$("input[type=file][data-input=ofx]").trigger("ngFileUploadLink:position")},100),n&&n.preventDefault()},t.setOFX=function(e){t.step="ofx",t.uploader.clearQueue(),t.uploader.url=d(),e.preventDefault()},t.setXLS=function(e){t.step="xls",t.uploader.clearQueue(),t.uploader.url=h(),a(function(){$("input[type=file][data-input=xls]").trigger("ngFileUploadLink:position")},100),e.preventDefault()},t.goBackToChooseAccount=function(e){t.step="choose",e.preventDefault()},t.goBackToUpload=function(e){t.state="wait",t.uploader.clearQueue(),e.preventDefault()},t.uploader.customProgress=0,t.uploader.onAfterAddingFile=function(e,n){"uploading"==t.state?n.remove():(t.state="uploading",t.uploader.uploadAll()),l=c(function(){t.uploader.customProgress>=100?c.cancel(l):t.uploader.customProgress+=1},50)},t.uploader.onProgressItem=function(e){e.progress>t.uploader.customProgress&&(t.uploader.customProgress=e.progress)},t.uploader.onSuccessItem=function(e,n){_.isPresent(n.error)?(t.error=n.error,t.state="error"):window.setTimeout(function(){Turbolinks.visit(n.redirectTo)},300)},t.uploader.onErrorItem=function(){t.error="Ocorreu um erro ao processar o arquivo",t.state="error"},t.ngStyleForProgress=function(){return{width:t.uploader.customProgress+"%"}};var d=function(){return e.ofxUrl+"?account_uuid="+t.selected_account.uuid},h=function(){return window.location.href.indexOf("skip_preview=true")>-1?e.xlsUrl+"?account_uuid="+t.selected_account.uuid+"&skip_preview=true":e.xlsUrl+"?account_uuid="+t.selected_account.uuid};if(_.isPresent(u.account_uuid)){var p=o.findBy({uuid:u.account_uuid});t.selectAccount(p,null)}}]),function(){var t=angular.module("app.transactionsForm",["directive.money","directive.datePicker","directive.ngAutoFocus","directive.ngKeepAdding","service.uploaderFactory","service.model","service.accountables","service.categories","service.tags","service.credit_cards_invoices","ngAnimate","service.context"]);t.directive("tagsInput",["Context","Model","Tags",function(t,e,n){function i(i,r){i.inputTags=r.selectize({plugins:["remove_button"],options:n.availableTags(t.tags),items:i.transaction.joined_tags.split(", "),valueField:"name",labelField:"name",searchField:["name"],create:function(t){return{name:t}},render:{option_create:function(n,i){if(e.isAllowedResource(t.availableResources.tags))return'<div class="create">Adicionar <strong>'+i(n.input)+"</strong>&hellip;</div>"}},onOptionAdd:function(){e.setAvailableResources(t.availableResources.tags,"more")},onOptionRemove:function(){e.setAvailableResources(t.availableResources.tags,"minus")}})}return{restrict:"A",link:i}}]),t.directive("submitWrapper",["Context","Tags",function(t,e){return function(t,n){$(n).on("submit.transactionsForm",function(e){return _.isPresent(t.transaction.errors)&&t.transaction.errors.length>0?(window.alert(t.transaction.errors.join(" \n")),e.preventDefault(),e.stopPropagation(),!1):"update_all"!=t.recurrence_update||(!!window.confirm("Voc\xea tem certeza?!\nEssa opera\xe7\xe3o n\xe3o poder\xe1 ser desfeita. \nVoc\xea ir\xe1 atualizar todos os lan\xe7amentos, inclusive os de datas passadas. \nPreste aten\xe7\xe3o principalmente se voc\xea estiver atualizando o valor.")||(e.preventDefault(),e.stopPropagation(),!1))}),$(n).on("ajax:success.transactionsForm",function(n,i){if(!$(n.target).is("form"))return!0;i.errors?Flash.show(i.errors.join("\n"),"error"):(_.isPresent(i.keep_adding)?t.$apply(function(){t.resetForm(i.new_transaction)}):window.setTimeout(function(){Popup.closeCurrent()},150),_.isPresent(i.tags)&&i.tags.length>0&&e.fetchFromServer(),"create"==t.action?$("body").trigger("transactions:afterCreate",[i]):$("body").trigger("transactions:afterUpdate",[i]))}),$(n).on("ajax:error.transactionsForm",function(t,e){if(!$(t.target).is("form"))return!0;var n=JSON.parse(e.responseText);alert(n.join("\n"))})}}]),t.filter("humanAmount",["Currency",function(t){return function(e){return t.symbol+" "+t.format(e/t.subunit_to_unit)}}]),t.directive("dynamicTabindex",function(){var t=function(t){var e=t.find("input[type=text]:visible, textarea:visible, #input-tags_tag");_.each(e,function(t,e){$(t).attr("tabindex",e+1)}),t.find("button[type=submit]").attr("tabindex",e.length+1),t.find("a[ng-keep-adding]").attr("tabindex",e.length+2)};return function(e,n){$(n).on("dynamicTabindex:refresh",function(){t($(n))}),window.setTimeout(function(){t($(n))},400)}}),t.controller("appCtrl",["$scope","$attrs","UploaderFactory","Accountables","Accounts","CreditCardInvoices","$filter","Context","Model","$timeout",function(t,e,n,i,r,o,a,s,c,l){function u(){for(var t=[],e=2;e<=480;e++)t.push(e);return t}function d(e){t.transaction.category_uuid=null,e.activity_type=t.transaction.activity_type,e.account_uuid=t.transaction.account_uuid,e.debit_account_uuid=t.transaction.debit_account_uuid,e.credit_account_uuid=t.transaction.credit_account_uuid,e.invoice=t.transaction.invoice,t.transaction.date_from_params&&(e.date_from_params=t.transaction.date_from_params,e.date=e.date_from_params),t.transaction=e,f(t.transaction),t.moreOptionsVisible={},t.focusOnDescription=!1,t.uploader.queue=[],t.inputTags[0].selectize.clear(),l(function(){t.focusOnDescription=!0},100)}function h(){t.transaction.attachments.each(function(e){var n={file:{id:e.id,human_type:e.file_human_type,fileName:e.file_file_name,url:e.file_file_url},destroyed:!1,progress:100,isUploaded:!0,isSuccess:!0};t.uploader.queue.push(n)}),t.uploader.progress=100}function p(){return t.transaction.invoice?t.transaction.automatic||t.transaction.invoice.automatic:t.transaction.automatic}function f(e){e.date=moment(e.date,"YYYY-MM-DD").format("DD/MM/YYYY"),e.category_uuid=e.tag_uuid,e.amount=Math.abs(e.amount_in_cents/100),e.amount>0?t.setInstallmentValue():(t.installmentValue=0,t.transaction.repeat_total=2),"Transference"==e.type&&"update"==t.action&&(creditAccount=i.findBy({uuid:e.credit_account_uuid}),debitAccount=i.findBy({uuid:e.debit_account_uuid}),e.credit_account_name=creditAccount.name,e.debit_account_name=debitAccount.name),"CreditCard"==e.account_type&&(cc=i.findBy({uuid:e.account_uuid}),e.account_name=cc.name,e.invoice||o.getInvoiceFor(cc.id,e.date).success(function(t){e.invoice=t}))}t.transaction=tmp.transaction,t.uploader=n.create(t,e),t.Accounts=r,t.transaction.isAutomatic=p(),t.action=_.isUndefined(t.transaction.id)?"create":"update",t.times=u(),"create"==t.action&&t.$watch("transaction.date",function(e,n){if(e!=n){var i=moment(e,"DD/MM/YYYY").toDate();t.transaction.done=i<=Date.today}}),t.human_activity_type=function(){return 0==t.transaction.activity_type?"despesa":"receita"},t.moreOptionsVisible={},t.toggleMoreOptions=function(e,n){n.preventDefault(),1==t.moreOptionsVisible[e]?(t.moreOptionsVisible[e]=!1,"observation"==e&&(t.transaction.observation="")):t.moreOptionsVisible[e]=!0},t.isAllowedResource=function(t){return c.isAllowedResource(s.availableResources[t])},t.toggleDone=function(e){t.transaction.done=!t.transaction.done,e.preventDefault()},t.installmentValue=0,t.setInstallmentValue=function(){t.installmentValue=Number((t.transaction.amount/t.transaction.repeat_total).toFixed(3).slice(0,-1).replace(/\./g,""))},t.showAttachments=function(){return _.find(t.uploader.queue,function(t){return!t.destroyed})},t.resetForm=d,t.transaction.attachments&&t.transaction.attachments.length>0&&h(),f(t.transaction),t.moreOptionsVisible.observation=_.isPresent(t.transaction.observation)}]),t.animation(".input-row",["$rootScope",function(){var t=function(t){window.setTimeout(function(){var e=$("input[type=text]:first, textarea:first",t);e.hasClass("selectized")?e.parent().find(".selectize-input input[type=text]").focus():e.focus();t.parents("*[dynamic-tabindex]:first").trigger("dynamicTabindex:refresh")},100)};return{enter:function(e){var n=$(e);n.parent().find("> .input-row:visible:last").after(n),t(n)},removeClass:function(e,n){if("ng-hide"==n){var i=$(e);i.parent().find("> .input-row:visible:last").after(i),t(i)}}}}])}(),angular.module("app.transactionsImporter",["service.categories"]).controller("appCtrl",["$scope","$attrs",function(t){t.importedTransactions=window.tmp.importedTransactions}]);var bootstrapAngularApps=function(){$("*[ng-app]").each(function(){try{angular.bootstrap($(this),[$(this).attr("ng-app")])}catch(t){return!0}})};$(function(){bootstrapAngularApps()}),$(document).on("ajax:complete.angular",function(){bootstrapAngularApps()}),function(){window.Activities=function(){function t(){$("*[data-activity]").on("click",function(){return this.activityId=$(this).data("activity"),this.element=$("#activity-detail-"+this.activityId),this.button=$("#activity-"+this.activityId),this.opened=this.button.data("opened"),this.element.slideToggle(300),this.opened?(this.button.switchClass("icon-30","icon-20"),this.button.data("opened",!1)):(this.button.switchClass("icon-20","icon-30"),this.button.data("opened",!0))})}return t}()}.call(this),function(){this.Budgets={},Budgets.Index=function(){function t(){var t,n,i,r;for(this.scope=$("*[data-budget-scope=index]:first"),this.scope.find("*[data-budget-chart]").budgetChart(),t=0,n=(i=this.scope.find("*[data-toggle]")).length;t<n;t++)r=i[t],new e(r,this.scope)}var e;return e=function(){function t(t,e){var n,i;this.trigger=$(t),n=this.trigger.data("toggle"),this.target=e.find("*[data-toggle-target="+n+"]:first"),this.trigger.click((i=this,function(){return i.target.toggle("blind"),i.trigger.parent().toggleClass("opened"),!1}))}return t}(),t}()}.call(this),function(){Budgets.Chart=function(){function t(t,e){var n,i;i=[t,e],this.elem=i[0],this.settings=i[1],n=this.elem.data("budget-chart"),this.colors=function(){switch(n){case"expense":return["#62CD98","#FFDD6B","#FF847A"];case"earning":return["#FF847A","#FFDD6B","#62CD98"];default:throw"invalid budget chart type: "+n}}()}return t.prototype.highchart=function(){var t;return t=[{type:"pie",data:[{color:this.settings.value<=50?this.colors[0]:this.settings.value<=80?this.colors[1]:this.colors[2],y:this.settings.value},{color:"#EAEDED",y:100-this.settings.value}]}],new Highcharts.Chart({series:t,chart:{renderTo:this.elem[0],backgroundColor:"#FFFFFF",width:this.settings.size,height:this.settings.size,marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,spacing:[0,0,0,0]},plotOptions:{pie:{states:{hover:{enabled:!1}},shadow:!1,innerSize:Math.floor(.7*this.settings.size),borderWidth:0,dataLabels:{enabled:!1},size:this.settings.size}},title:{text:null},credits:!1,exporting:{enabled:!1},tooltip:{enabled:!1},legend:!1})},t}(),$.fn.extend({budgetChart:function(t){return this.each(function(){var e,n,i;if(!(e=$(this)).data("object.budget-chart"))return e.data("object.budget-chart",this),n={value:e.data("value")||0,size:e.data("size")||35},i=$.extend(n,t),new Budgets.Chart(e,i).highchart()})}})}.call(this),function(){this.Popup||(this.Popup={}),Popup.pushStateSupport=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/(iPod|iPhone|iPad|WebApps\/.+CFNetwork)/),Popup.closeAll=function(){var t,e,n,i,r,o;for(r=[],e=0,n=(i=$("*[popup-window]:visible")).length;e<n;e++)o=i[e],(t=$(o).data("object.popup"))?(t.close(),r.push(!1)):r.push(!0);return r},Popup.current=function(){var t;return(t=$("*[popup-window]:visible").topZindexElement())?t.data("object.popup"):null},Popup.closeCurrent=function(){var t,e;return!(t=$("*[popup-window]:visible").topZindexElement())||(!(e=t.data("object.popup"))||(e.close(),!1))},Popup.closeById=function(t){var e,n;return!(e=$("*[popup-id="+t+"] *[popup-window]:visible")).size()||(!(n=e.data("object.popup"))||(n.close(),!1))},Popup.addParam=function(t){var e;return-1===(e=t.attr("href")).indexOf("?")?t.attr("href",e+"?popup=true"):t.attr("href",e+"&popup=true")},Popup.onClick=function(t){var e;if(!(e=$(t)).data("popup.bind"))return e.data("popup.bind",!0),Popup.addParam(e),e.data("type","HTML").attr("data-remote",!0),e.off("ajax:complete.popup:open").on("ajax:complete.popup:open",function(t,e){var n;if((n=$(this)).data("object.popup")||n.data("object.popup",new Popup.Simple(n)),!n.data("object.popup").openned)return n.data("object.popup").loadHTML(e.responseText).open()}),$.rails.handleRemote(e)},$(function(){return $(document).on("click.popup-open","a[data-popup=simple], a[data-popup=true]",function(t){return Popup.onClick(this),t.preventDefault(),!1}),$(document).on("click.popup-close","a[data-close=popup], a[data-popup=close]",function(t){var e;return e=$(this).parents("*[popup-window]:first").data("object.popup"),_.isPresent(e)?(e.close(),t.stopPropagation(),t.preventDefault(),!1):(t.stopPropagation(),t.preventDefault(),!0)}),$(window).bind("keydown.popup:close",function(t){var e,n;return(t=null!=(e=t)?e:{e:null!=(n=window.event)?n:{event:null}}).keyCode&&27===t.keyCode&&Popup.closeCurrent(),!0})})}.call(this),function(){Popup.HistoryManager=function(){function t(){var t,e;this.states=[],e={href:window.location.href},(t=this.getParamsFromUrl()).popup&&(e.popup=t.popup),this.states.push(e),e.popup&&this.loadPopup(e.popup)}return t.prototype.push=function(t){return this.states.push({popup:t}),this.updateLocation()},t.prototype.replace=function(t){return this.states=[{popup:t}],this.updateLocation()},t.prototype.back=function(){return this.states.pop(),this.updateLocation()},t.prototype.currentState=function(){return this.states.length>0?this.states[this.states.length-1]:null},t.prototype.updateLocation=function(){var t;return null!==(t=this.currentState())&&t.popup?window.location.hash="popup="+t.popup:this.removeHash()},t.prototype.removeHash=function(){var t,e,n;return t=window.location,Popup.pushStateSupport?history.pushState("",document.title,t.pathname+t.search):(n=document.body.scrollTop,e=document.body.scrollLeft,t.hash="",document.body.scrollTop=n,document.body.scrollLeft=e)},t.prototype.getParamsFromUrl=function(){return{popup:window.location.hash.replace("#","").split("popup=")[1]}},t.prototype.loadPopup=function(t){return $.ajax({url:t,type:"GET",dataType:"html",success:function(t){var e;return(e=new Popup.Simple(null)).loadHTML(t),e.open(),$(document).trigger("ajax:complete")}})},t}(),$(function(){return Popup.historyManager=new Popup.HistoryManager,$(document).on("page:load",function(){var t;if(t=window.location.hash.replace("#","").split("popup=")[1])return Popup.historyManager.loadPopup(t)})})}.call(this),function(t){t.fn.popupHTML=function(){return this.each(function(){var e=t(this).attr("href"),n=t(e);t(this).off("click.popupSimpleHtml"),t(this).on("click.popupSimpleHtml",function(e){obj=new Popup.Simple(t(this)),obj.loadFromElement(n),obj.open(),e.preventDefault()})})}}(jQuery),function(){Popup.Simple=function(){function Simple(t){this.trigger=t,this.openned=!1}var PositionAnchored,PositionCenter;return Simple.prototype.loadFromElement=function(t){return this.htmlPopup=!0,this.wrapper=$("<div popup-wrapper='"+Application.uuid()+"'></div>"),this.wrapper.append(t),this.wrapper.find(".simple-popup").show(),this.dimming=this.wrapper.find("*[popup-dimming]:first"),this.window=this.wrapper.find("*[popup-window]:first"),this.window.data("object.popup",this),this.settings=$.extend({position:"center",dimming:this.dimming.length>0,historyTrack:!1,duration:250},{}),this.window.attr("popup-position")&&(this.settings.position=this.window.attr("popup-position")),this.settings.dimming&&this.dimming.hide(),this.window.hide(),this.wrapper.appendTo("body"),this},Simple.prototype.loadHTML=function(t){return this.wrapper=$("<div popup-wrapper='"+Application.uuid()+"'>"+t+"</div>"),this.dimming=this.wrapper.find("*[popup-dimming]:first"),this.window=this.wrapper.find("*[popup-window]:first"),this.window.data("object.popup",this),this.settings=$.extend({position:"center",dimming:this.dimming.length>0},{}),this.window.attr("popup-position")&&(this.settings.position=this.window.attr("popup-position")),this.settings.historyTrack=null!=this.trigger&&"anchored"!==this.settings.position,null!=this.trigger&&!1===this.trigger.data("history-track")&&(this.settings.historyTrack=!1),this.settings.dimming&&this.dimming.hide(),this.window.hide(),this.wrapper.appendTo("body"),this},Simple.prototype.open=function(){var base_zIndex,klass,_this;return this.openned=!0,base_zIndex=this.base_zIndex(),this.settings.dimming&&this.dimming.css({zIndex:base_zIndex}),this.window.css({zIndex:base_zIndex+1}),this.settings.position&&(klass=eval("Position"+this.settings.position.camelize()),this.positioner=new klass(this.trigger,this.window),window.setTimeout((_this=this,function(){return _this.positioner.position()}),this.settings.duration)),this.show_window(),this.wrapper.find("*[popup-move]:first").length>0&&this.window.draggable({handle:"*[popup-move]"}),this.window.off("popup:refresh-position").on("popup:refresh-position",function(t){return function(){return t.refresh_position()}}(this)),this},Simple.prototype.release=function(){return null!=this.wrapper&&this.wrapper.remove(),null!=this.trigger&&this.trigger.data("object.popup",null),this},Simple.prototype.refresh_position=function(){return this.positioner.position(),this},Simple.prototype.show_window=function(){var t;return this.settings.dimming?this.dimming.fadeIn(this.settings.duration,(t=this,function(){return t.window.fadeIn(200,function(){var e;if((e=$("*[auto-focus=true]:first",t.window)).focus(),e.is("*[type=text]"))return e.positionCursorRight()})})):this.window.fadeIn(this.settings.duration),this},Simple.prototype.close=function(){var t;return this.openned=!1,this.window.addClass("popup-closing"),null!=this.settings.dimming&&this.dimming.fadeOut(250),this.window.fadeOut(250,(t=this,function(){if(null==t.htmlPopup)return t.release()})),this.window.trigger("popup:close"),null!=this.trigger&&null==this.trigger.data("popup-no-event")&&this.trigger.trigger("popup:close"),this},Simple.prototype.base_zIndex=function(){var t;return(t=$("*[popup-window]:visible").topZindexElement())?parseFloat(t.css("zIndex"))+1:1001},Simple.prototype.restoreHistory=function(){return Popup.historyManager.back(),this},PositionCenter=function(){function t(t,e){var n;n=[t,e],this.trigger=n[0],this.window=n[1]}return t.prototype.position=function(){var t;return this.window.data("position-top")?t=this.window.data("position-top"):((t=$(window).height()/2-this.window.outerHeight()/2)<10&&(t=10),t+=$(window).scrollTop()),this.window.css({top:t})},t}(),PositionAnchored=function(){function t(t,e){var n;n=[t,e],this.trigger=n[0],this.window=n[1],this.arrow=$("<span class='arrow left'></span>"),this.window.prepend(this.arrow)}return t.prototype.position=function(){var t,e;return e={left:this.positionOnLeft(),top:this.positionTop()},this.window.css({marginLeft:0,left:e.left,top:e.top}),t=this.trigger.offset().top+this.trigger.outerHeight()/2,this.arrow.css({top:t-e.top-this.arrow.outerHeight()/2-10})},t.prototype.positionOnLeft=function(){var t;return(t=this.trigger.offset().left+this.trigger.width()+12)<0&&(t=0),t+this.window.width()>$(window).width()?this.positionOnRight():t},t.prototype.positionOnRight=function(){var t;return this.arrow.removeClass("left").addClass("right"),(t=this.trigger.offset().left-this.window.width()-40)<0&&(t=0),t},t.prototype.positionTop=function(){var t,e;return e=$(document).scrollTop()+$(window).height()-this.window.outerHeight()-50,(t=this.trigger.offset().top-20)<0&&(t=0),t>e&&(t=e),t},t}(),Simple}()}.call(this),function(){window.Reports={}}.call(this),function(){Reports.Accounts=function(){function t(t,e,n){var i;i=[t,e,n],this.renderTo=i[0],this.series=i[1],this.labels=i[2],Highcharts.setOptions({lang:{loading:"Carregando...",decimalPoint:",",thousandsSep:"."}}),this.highchart()}return t.prototype.tooltip=function(){var t;return t="<div class='chart-tip "+this.point.tipClass+"'>",t+="<span class='title'>"+this.point.title+"</span> ",t+="<strong>"+Currency.source().symbol+" "+Currency.format(this.point.y)+"</strong>",t+="</div>"},t.prototype.labelStep=function(){return this.labels.length>20?2*Math.floor(this.labels.length/20):0},t.prototype.labelRotation=function(){return this.labels.length>20?-45:0},t.prototype.width=function(){return $(".graphic").width()},t.prototype.highchart=function(){return null!=this._highchart&&this._highchart.destroy(),this._highchart=new Highcharts.Chart({series:this.series,chart:{renderTo:this.renderTo,defaultSeriesType:"column",backgroundColor:"#FEFDF9",height:300,width:this.width(),plotBorderColor:"#F0F0F0",plotBorderWidth:1,marginTop:0,marginLeft:0,marginRight:0,events:{load:function(){return $(".highcharts-legend-item rect").attr("height","2").attr("width","10px").attr("y","10")}}},title:{text:null},credits:!1,exporting:{enabled:!1},legend:{borderColor:null,itemDistance:30,itemStyle:{color:"#7F7F83","text-transform":"lowercase",font:"300 12px CircularStd","line-height":"12px"}},plotOptions:{areaspline:{fillOpacity:.1,zIndex:-1,lineWidth:1.5,shadow:!1,states:{hover:{marker:{enabled:!0},lineWidth:1.5}},marker:{fillColor:"#0099CC",symbol:"circle",enabled:!1,radius:1}},area:{zIndex:3,lineWidth:1.6,shadow:!1,fillOpacity:.1,borderRadius:4,borderWidth:0},column:{zIndex:3,lineWidth:1.6,shadow:!1,fillOpacity:.1,borderRadius:4,borderWidth:0}},xAxis:{title:null,categories:this.labels,lineWidth:0,tickLength:0,offset:5,gridLineWidth:1,gridLineColor:"#f2f4ef",labels:{useHTML:!0,style:{font:"300 10px CircularStd",color:"#7F7F83"},step:this.labelStep(),staggerLines:1}},yAxis:{title:null,gridLineColor:"#f2f4ef",gridLineWidth:1,labels:{enabled:!1}},tooltip:{shared:!1,useHTML:!0,backgroundColor:"transparent",borderWidth:0,borderRadius:0,formatter:this.tooltip,valuePrefix:"R$ ",valueDecimals:2,shadow:!1}})},t}()}.call(this),function(){Reports.Categories={},Reports.Categories.Table=function(){function t(t){var i,r,o,a;for(this.table=t,this.carousel=new e(this.table,this.table.parent().find(".next.nav"),this.table.parent().find(".previous.nav")),this.togglers=[],i=0,r=(o=this.table.find("*[data-toggle-link-for]")).length;i<r;i++)a=o[i],this.togglers.push(new n(this.table,a));this.table.data("object",this)}var e,n;return t.prototype.close_all=function(){var t,e,n,i,r;for(i=[],t=0,e=(n=this.togglers).length;t<e;t++)r=n[t],i.push(r.close());return i},t.prototype.open_all=function(){var t,e,n,i,r;for(i=[],t=0,e=(n=this.togglers).length;t<e;t++)r=n[t],i.push(r.open());return i},n=function(){function t(t,e){var n,i;n=[t,$(e)],this.table=n[0],this.link=n[1],this.uuid=this.link.data("toggle-link-for"),this.url=this.link.attr("href"),this.openned=!1,this.parent_tr=this.link.parents("tr:first"),this.link.click((i=this,function(){return i.toggle(),!1})),this.link.data("object",this)}return t.prototype.content_loaded=function(){return this.table.find("*[data-toggle-content-for="+this.uuid+"]").length>0},t.prototype.toggle=function(){return this.openned?this.close():this.open()},t.prototype.open=function(){return this.table.find("*[data-toggle-content-for="+this.uuid+"]").show(),this.parent_tr.addClass("actived"),this.openned=!0},t.prototype.close=function(){var t,e,n,i;for(this.table.find("*[data-toggle-content-for="+this.uuid+"]").hide(),e=0,n=(i=this.table.find("*[data-toggle-content-for="+this.uuid+"] *[data-toggle-link-for]")).length;e<n;e++)t=i[e],$(t).data("object")&&$(t).data("object").close();return this.parent_tr.removeClass("actived"),this.openned=!1},t}(),e=function(){function t(t,e,n){var i,r;i=[t,e,n],this.table=i[0],this.nextLink=i[1],this.prevLink=i[2],this.number_of_tds=this.table.find("tbody").find("tr").first().find("td").length,this.number_of_tds>=5&&(this.nextLink.show(),this.prevLink.show()),this.nextLink.click((r=this,function(){return r.animateNext(),!1})),this.prevLink.click(function(t){return function(){return t.animatePrev(),!1}}(this)),this.currentIndex=0,this.animateToBeginning(),this.number_of_tds<=this.visible_items()&&this.nextLink.hide()}return t.prototype.settings={scroll:1,speed:200},t.prototype.visible_items=function(){return 1100===$(".container:first").width()?7:5},t.prototype.last_index=function(){return this.number_of_tds-this.visible_items()},t.prototype.animateToBeginning=function(){return this.table.parent().scrollTo("td:eq(0)",1,{offset:-1})},t.prototype.animateNext=function(){return this.currentIndex+=this.settings.scroll,this.currentIndex===this.last_index()&&this.nextLink.hide(),this.table.parent().scrollTo("td:eq("+this.currentIndex+")",this.settings.speed,{offset:-1}),this.prevLink.removeClass("disabled")},t.prototype.animatePrev=function(){return this.currentIndex-=this.settings.scroll,this.currentIndex<0&&(this.currentIndex=0),this.table.parent().scrollTo("td:eq("+this.currentIndex+")",this.settings.speed,{offset:-1}),0===this.currentIndex&&this.prevLink.addClass("disabled"),this.nextLink.show()},t}(),t}(),Reports.Categories.Chart=function(){function t(t,e,n){var i;i=[t,e,n],this.renderTo=i[0],this.series=i[1],this.labels=i[2],Highcharts.setOptions({lang:{loading:"Carregando...",decimalPoint:",",thousandsSep:"."}}),"pie"===this.series[0].type?(this.type=this.series[0].type,this.height=220,this.width=350):(this.type="area",this.height=230,this.width=this.line_width()),this.highchart()}return t.prototype.line_width=function(){return $(".graphic").width()-100},t.prototype.tooltip=function(){var t;return t="<div class='chart-tip "+this.point.activity_type+"'>",t+="<span class='title'>"+this.point.title.truncate({length:25})+"</span> ",t+="<strong>"+Currency.source().symbol+" "+Currency.format(this.point.y)+"</strong>",t+="</div>"},t.prototype.labelStep=function(){return this.labels.length>20?2*Math.floor(this.labels.length/20):0},t.prototype.labelRotation=function(){return this.labels.length>20?-80:0},t.prototype.offset=function(){return this.labels.length>20?20:5},t.prototype.highchart=function(){return null!=this._highchart&&this._highchart.destroy(),this._highchart=new Highcharts.Chart({series:this.series,chart:{type:this.type,renderTo:this.renderTo,backgroundColor:"rgba(0,0,0,0)",width:this.width,height:this.height,spacing:0,margin:this.margin,events:{load:function(){return $(".highcharts-legend-item rect").attr("height","2").attr("width","10px").attr("y","10")}}},plotOptions:{pie:{size:"100%",cursor:"pointer",innerSize:"55%",borderWidth:0,dataLabels:{enabled:!1},events:{click:function(t){var e,n,i,r;if((e=$("*[data-categories-report-table="+t.point.activity_type+"]:first")).data("object").close_all(),n=e.find("*[data-toggle-link-for="+t.point.dom_id+"]:first"))return n.data("object").open(),r=(i=n.parents("tr:first")).offset().top-40,$("html:first").stop().animate({scrollTop:r},700,function(){return i.highlight()}),!0}}},area:{lineWidth:1.3,shadow:!1,fillOpacity:.4,states:{hover:{marker:{enabled:!0},lineWidth:1.3}},marker:{lineWidth:1.3,fillColor:"#FEFDF9",symbol:"circle",enabled:!1,radius:2}}},title:{text:null},credits:!1,exporting:{enabled:!1},xAxis:{categories:this.labels,labels:{useHTML:!0,style:{font:"300 10px CircularStd",color:"#7F7F83"},step:this.labelStep(),rotation:this.labelRotation()},lineWidth:0,tickLength:0,offset:this.offset(),gridLineColor:"#F0F0F0",gridLineWidth:1},yAxis:{title:!1,labels:{enabled:!1},gridLineColor:"#F0F0F0",gridLineWidth:1,lineWidth:0,tickLength:0},tooltip:{shared:!1,useHTML:!0,backgroundColor:"transparent",borderWidth:0,borderRadius:0,formatter:this.tooltip,valuePrefix:"R$ ",valueDecimals:2,shadow:!1},legend:{borderColor:null,itemDistance:30,itemStyle:{color:"#7F7F83","text-transform":"lowercase",font:"300 12px CircularStd","line-height":"12px"}}})},t}()}.call(this),function(){Reports.General=function(){function t(t,e,n){var i;i=[t,e,n],this.renderTo=i[0],this.series=i[1],this.labels=i[2],Highcharts.setOptions({lang:{loading:"Carregando...",decimalPoint:",",thousandsSep:"."}}),this.highchart()}return t.prototype.tooltip=function(){var t;return t="<div class='chart-tip "+this.point.tipClass+"'>",t+="<span class='title'>"+this.point.title+"</span> ",t+="<strong>"+Currency.source().symbol+" "+Currency.format(this.point.y)+"</strong>",t+="</div>"},t.prototype.labelStep=function(){return this.labels.length>20?2*Math.floor(this.labels.length/20):0},t.prototype.labelRotation=function(){return this.labels.length>20?-45:0},t.prototype.width=function(){return $(".graphic").width()},t.prototype.highchart=function(){return null!=this._highchart&&this._highchart.destroy(),this._highchart=new Highcharts.Chart({series:this.series,chart:{renderTo:this.renderTo,defaultSeriesType:"column",backgroundColor:"#FEFDF9",height:300,plotBorderColor:"#F0F0F0",plotBorderWidth:1,width:this.width(),marginTop:0,marginLeft:0,marginRight:0,spacingTop:0,events:{load:function(){return $(".highcharts-legend-item rect").attr("height","2").attr("width","10px").attr("y","10")}}},title:{text:null},credits:!1,exporting:{enabled:!1},legend:{borderColor:null,itemDistance:30,itemStyle:{color:"#7F7F83","text-transform":"lowercase",font:"300 12px CircularStd","line-height":"12px"}},plotOptions:{areaspline:{fillOpacity:.1,zIndex:-1,lineWidth:1,lineColor:"#BADCEE",shadow:!1,states:{hover:{marker:{enabled:!0},lineWidth:1}},marker:{fillColor:"#0099CC",symbol:"circle",enabled:!1,radius:1}},column:{zIndex:3,lineWidth:1.6,shadow:!1,fillOpacity:.1,borderRadius:4,borderWidth:0}},xAxis:{title:null,categories:this.labels,lineWidth:0,tickLength:0,gridLineColor:"#f2f4ef",gridLineWidth:1,labels:{useHTML:!0,style:{font:"300 10px CircularStd",color:"#7F7F83"},step:this.labelStep(),staggerLines:1}},yAxis:{title:null,gridLineColor:"#f2f4ef",gridLineWidth:1,labels:{enabled:!1}},tooltip:{shared:!1,useHTML:!0,backgroundColor:"transparent",borderWidth:0,borderRadius:0,formatter:this.tooltip,valuePrefix:"R$ ",valueDecimals:2,shadow:!1}})},t}()}.call(this),function(){Reports.Tags={},Reports.Tags.Table=function(){function t(t){var i,r,o,a;for(this.table=t,this.carousel=new e(this.table,this.table.parent().find(".next.nav"),this.table.parent().find(".previous.nav")),this.togglers=[],i=0,r=(o=this.table.find("*[data-toggle-link-for]")).length;i<r;i++)a=o[i],this.togglers.push(new n(this.table,a));this.table.data("object",this)}var e,n;return t.prototype.close_all=function(){var t,e,n,i,r;for(i=[],t=0,e=(n=this.togglers).length;t<e;t++)r=n[t],i.push(r.close());return i},t.prototype.open_all=function(){var t,e,n,i,r;for(i=[],t=0,e=(n=this.togglers).length;t<e;t++)r=n[t],i.push(r.open());return i},n=function(){function t(t,e){var n,i;n=[t,$(e)],this.table=n[0],this.link=n[1],this.transactionId=this.link.data("toggle-link-for"),this.url=this.link.attr("href"),this.openned=!1,this.parent_tr=this.link.parents("tr:first"),this.link.click((i=this,function(){return i.toggle(),!1})),this.link.data("object",this)}return t.prototype.content_loaded=function(){return this.table.find("*[data-toggle-content-for="+this.transactionId+"]").length>0},t.prototype.toggle=function(){return this.openned?this.close():this.open()},t.prototype.open=function(){return this.table.find("*[data-toggle-content-for="+this.transactionId+"]").show(),this.parent_tr.addClass("actived"),this.openned=!0},t.prototype.close=function(){var t,e,n,i;for(this.table.find("*[data-toggle-content-for="+this.transactionId+"]").hide(),e=0,n=(i=this.table.find("*[data-toggle-content-for="+this.transactionId+"] *[data-toggle-link-for]")).length;e<n;e++)t=i[e],$(t).data("object")&&$(t).data("object").close();return this.parent_tr.removeClass("actived"),this.openned=!1},t}(),e=function(){function t(t,e,n){var i,r;i=[t,e,n],this.table=i[0],this.nextLink=i[1],this.prevLink=i[2],this.number_of_tds=this.table.find("tbody").find("tr").first().find("td").length,this.number_of_tds>=5&&(this.nextLink.show(),this.prevLink.show()),this.nextLink.click((r=this,function(){return r.animateNext(),!1})),this.prevLink.click(function(t){return function(){return t.animatePrev(),!1}}(this)),this.currentIndex=0,this.animateToBeginning(),this.number_of_tds<=this.visible_items()&&this.nextLink.hide()}return t.prototype.settings={scroll:1,speed:200},t.prototype.visible_items=function(){return 1100===$(".container:first").width()?7:5},t.prototype.last_index=function(){return this.number_of_tds-this.visible_items()},t.prototype.animateToBeginning=function(){return this.table.parent().scrollTo("td:eq(0)",1,{offset:-1})},t.prototype.animateNext=function(){return this.currentIndex+=this.settings.scroll,this.currentIndex===this.last_index()&&this.nextLink.hide(),this.table.parent().scrollTo("td:eq("+this.currentIndex+")",this.settings.speed,{offset:-1}),this.prevLink.removeClass("disabled")},t.prototype.animatePrev=function(){return this.currentIndex-=this.settings.scroll,this.currentIndex<0&&(this.currentIndex=0),this.table.parent().scrollTo("td:eq("+this.currentIndex+")",this.settings.speed,{offset:-1}),0===this.currentIndex&&this.prevLink.addClass("disabled"),this.nextLink.show()},t}(),t}(),Reports.Tags.Line=function(){function t(t,e,n){var i;i=[t,e,n],this.renderTo=i[0],this.series=i[1],this.labels=i[2],Highcharts.setOptions({lang:{loading:"Carregando...",decimalPoint:",",thousandsSep:"."}}),this.highchart()}return t.prototype.tooltip=function(){var t;return t="<div class='chart-tip "+this.point.tipClass+"'>",t+="<span class='title'>"+this.point.title+"</span> ",t+="<strong>"+Currency.source().symbol+" "+Currency.format(this.point.y)+"</strong>",t+="</div>"},t.prototype.labelStep=function(){return this.labels.length>20?2*Math.floor(this.labels.length/20):0},t.prototype.labelRotation=function(){return this.labels.length>20?-45:0},t.prototype.width=function(){return $(".graphic").width()},t.prototype.seriesWidth=function(){switch(!1){case!(this.series.length<=2):return 250;case!(this.series.length<=3):return 114;case!(this.series.length<=5):return 94;case!(this.series.length<=6):return 80;case!(this.series.length<=8):return 60;case!(this.series.length<=13):return 40;case!(this.series.length<=18):return 30;case!(this.series.length<=28):return 20;case!(this.series.length<=34):return 15;case!(this.series.length<=50):return 10;default:return 7}},t.prototype.seriesMarginLeft=function(){switch(!1){case!(this.series.length<=3):return 200;case!(this.series.length<=4):return 150;case!(this.series.length<=6):return 60;default:return 20}},t.prototype.seriesMarginRight=function(){switch(!1){case!(this.series.length<=3):return 200;case!(this.series.length<=4):return 150;case!(this.series.length<=6):return 60;default:return 8}},t.prototype.highchart=function(){return null!=this._highchart&&this._highchart.destroy(),this._highchart=new Highcharts.Chart({series:this.series,chart:{renderTo:this.renderTo,defaultSeriesType:"column",backgroundColor:"#FEFDF9",height:300,width:this.width(),plotBorderColor:"#F0F0F0",marginTop:0,marginLeft:this.seriesMarginLeft(),marginRight:this.seriesMarginRight(),spacing:[0,0,0,0],events:{load:function(){return $(".highcharts-legend-item rect").attr("height","2").attr("width","10px").attr("y","10")}}},title:{text:null},credits:!1,exporting:{enabled:!1},legend:{borderColor:null,itemDistance:30,itemStyle:{color:"#7F7F83",cursor:"default","text-transform":"lowercase",font:"300 12px CircularStd","line-height":"12px"},itemHoverStyle:{color:"#7F7F83"}},plotOptions:{column:{cursor:"pointer",events:{click:function(t){var e,n,i,r;if((e=$("*[data-tags-report-table="+t.point.activity_type+"]:first")).data("object").close_all(),n=e.find("*[data-toggle-link-for="+t.point.dom_id+"]:first"))return n.data("object").open(),r=(i=n.parents("tr:first")).offset().top-40,$("html:first").stop().animate({scrollTop:r},700,function(){return i.highlight()}),!0}},pointWidth:this.seriesWidth()},areaspline:{fillOpacity:.1,zIndex:-1,lineWidth:1.5,shadow:!1,states:{hover:{marker:{enabled:!0},lineWidth:1.5}},marker:{fillColor:"#0099CC",symbol:"circle",enabled:!1,radius:1}},area:{zIndex:3,lineWidth:1.6,shadow:!1,fillOpacity:.1},series:{groupPadding:.2,events:{legendItemClick:function(){return!1}}}},xAxis:{title:null,categories:this.labels,lineWidth:0,tickLength:0,offset:5,gridLineColor:"FFFFFF",labels:{useHTML:!0,style:{font:"300 1px CircularStd",color:"#FEFDF9"},step:this.labelStep(),staggerLines:1}},yAxis:{title:null,gridLineColor:"#FEFDF9",gridLineWidth:1,labels:{enabled:!1}},tooltip:{shared:!1,useHTML:!0,backgroundColor:"transparent",borderWidth:0,borderRadius:0,formatter:this.tooltip,valuePrefix:"R$ ",valueDecimals:2,shadow:!1,followPointer:!0}})},t}()}.call(this),window.Transactions={},Transactions.FloatingBalance=(FloatingBalance=function(t){if(this.scope=t,this.$scope=$(this.scope),this.$innerDiv=$("*[data-inner]:first",this.$scope),0!=this.$scope.length){this.offsetTop=$(this.scope).offset().top;var e=this;$(window).off("scroll.floatingBalance").on("scroll.floatingBalance",function(){"finance transactions"==$("body").data("section")?e.shouldFloat()?(e.$scope.css({height:e.$innerDiv.outerHeight()}),e.$innerDiv.addClass("floating")):(e.$scope.css({height:"auto"}),e.$innerDiv.removeClass("floating"),e.offsetTop=e.$scope.offset().top):(Transactions.FloatingBalance.instance=null,$(window).off("scroll.floatingBalance"))}),$(window).trigger("scroll.floatingBalance"),$(document).one("page:fetch",function(){$(window).off("scroll.floatingBalance")})}},FloatingBalance.prototype.shouldFloat=function(){return $(window).height()+$(window).scrollTop()-this.$scope.outerHeight()<this.offsetTop},FloatingBalance.prototype.refresh=function(){this.$scope=$(this.scope),this.$innerDiv=$("*[data-inner]:first",this.$scope),0!=this.$scope.length&&(this.offsetTop=this.$scope.offset().top,$(window).trigger("scroll.floatingBalance"))},FloatingBalance.position=function(){if(Transactions.FloatingBalance.instance||(Transactions.FloatingBalance.instance=new Transactions.FloatingBalance("#transaction-list-results")),0==$(Transactions.FloatingBalance.instance.scope).length)return!0;Transactions.FloatingBalance.instance.refresh()},FloatingBalance),function(){window.TransactionsImporter={init:function(){return $("input.file_field").on("change",TransactionsImporter.form.fileField.change)},form:{fileField:{change:function(){return $(this).parents("form").submit(),$(this).parents("*[data-import-button=true]").hide().next().show().find("*[data-import-filename=true]").html(TransactionsImporter.form.fileField.sanitizedValue(this.value)).highlight(2e3)},sanitizedValue:function(t){return t.replace("fakepath","")}}},preview:{selectAll:function(t){return $(".importCb").prop("checked",$(t).is(":checked"))}}}}.call(this),function(){var t={};window.UIComponent=t}(),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.Autocomplete=function(){function e(e,n){var i,r,o;this._select=t(this._select,this),this._source=t(this._source,this),this._renderItem=t(this._renderItem,this),this.not_found_url=t(this.not_found_url,this),this.scope=$(e),this.settings=$.extend({valueMethod:"value",selectedItem:null,onSelect:null,sorted:!0,minLength:0,notFoundText:"n\xe3o existe",emptyDataText:"nenhum item adicionado.",addNewItemUrl:null,delay:0,renderItem:null,findFunction:null},n||{}),this.source=this.settings.source,this.findFunction=this.settings.findFunction,r=this.settings.valueMethod,this.findFunction||(this.findFunction=function(t,e){return _.filter(t,function(t){return(""+t[r]).toLowerCase().indexOf(e)>-1})}),this.input=$("input[type=text]:first",this.scope).attr("autocomplete",!1),this.settings.selectedItem&&this.input.val(this.settings.selectedItem[this.settings.valueMethod]),i=$('<a class="open-autocomplete" title="Mostra todas as op\xe7\xf5es" href=""><i class="icon i10 icon-4"></i></a>'),this.input.after(i),this.widgetName=Application.uuid(),$.widget("custom."+this.widgetName,$.ui.autocomplete,{_renderItem:this._renderItem}),i.on("click",(o=this,function(t){return o.toggle_menu(),t.preventDefault()})),this.input[this.widgetName]({minLength:this.settings.minLength,delay:this.settings.delay,source:this._source,appendTo:this.scope,select:this._select}),this.input.on("focus",function(t){return function(){var e;if(e=t.input[t.widgetName]("instance"),_.isBlank(t.input.val()))return e.search("")}}(this)),this.closeTimeout=null,this.input.off("blur").on("blur",function(t){return function(){return t.closeTimeout=setTimeout(function(){return t.hide_menu()},300)}}(this)),this.input.on("keydown.captureEscape",function(t){return function(e){if(27===e.keyCode)return e.preventDefault(),e.stopPropagation(),t.input[t.widgetName]("close")}}(this))}return e.prototype.is_selected=function(t){return this.settings.selectedItem&&this.settings.selectedItem.id===t.id},e.prototype.toggle_menu=function(){return this.input[this.widgetName]("instance").menu.element.is(":visible")?this.hide_menu():(this.show_menu(),this.input.focus())},e.prototype.show_menu=function(){return clearTimeout(this.closeTimeout),this.input[this.widgetName]("instance").search("")},e.prototype.hide_menu=function(){if(this.input[this.widgetName]("instance"))return this.input[this.widgetName]("instance").close()},e.prototype.select=function(t){if(this.select_without_callback(t),this.settings.onSelect)return this.settings.onSelect(this.settings.selectedItem)},e.prototype.select_without_callback=function(t){return this.settings.selectedItem=t,this.settings.selectedItem?this.input.val(this.settings.selectedItem[this.settings.valueMethod]):this.input.val("")},e.prototype.reset=function(){if(this.settings.selectedItem=null,this.input.val(""),this.settings.onSelect)return this.settings.onSelect({})},e.prototype.not_found_url=function(t){return t.searchTerm.length>0?this.settings.addNewItemUrl.split("?").length>1?this.settings.addNewItemUrl+"&"+this.settings.valueMethod+"="+encodeURIComponent(t.searchTerm):this.settings.addNewItemUrl+"?"+this.settings.valueMethod+"="+encodeURIComponent(t.searchTerm):this.settings.addNewItemUrl},e.prototype._renderItem=function(t,e){var n,i,r;return e.emptyData?((i=$("<li>")).addClass("empty"),i.html("<span>"+this.settings.emptyDataText+"</span>"),i.appendTo(t),i):e.addLink?this.settings.renderAddLink?this.settings.renderAddLink(t,e):(i=$("<li>"),r=this.not_found_url(e),i.addClass("empty"),i.html("<a href='"+r+"' data-popup='true'>Clique para adicionar</a>"),i.appendTo(t),i):e.notFound?((i=$("<li>")).addClass("empty"),i.html("<span>"+e.searchTerm+" "+this.settings.notFoundText+".</span>"),i.appendTo(t),i):null!=this.settings.renderItem?this.settings.renderItem(t,e):((i=$("<li>")).attr("data-value",e[this.settings.valueMethod]).addClass("option-item"),(n=$("<a>")).html("<span class='label'>"+e[this.settings.valueMethod]+"</span>"),this.is_selected(e)&&i.addClass("selected"),i.append(n),i.appendTo(t),i)},e.prototype._source=function(t,e){var n,i,r,o;return r=(t.term||"").toLowerCase(),0===this.source.length&&_.isPresent(this.settings.emptyDataText)?(n=[{emptyData:!0}],_.isPresent(this.settings.addNewItemUrl)&&n.push({addLink:!0,searchTerm:r}),e(n)):0===(i=this.findFunction(this.source,r)).length&&_.isPresent(this.settings.notFoundText)?(n=[{notFound:!0,searchTerm:r}],_.isPresent(this.settings.addNewItemUrl)&&n.push({addLink:!0,searchTerm:r}),e(n)):this.settings.sorted?e(_.sortBy(i,(o=this,function(t){return t[o.settings.valueMethod].toLowerCase()}))):e(i)},e.prototype._select=function(t,e){return!!(e.item.emptyData||e.item.addLink||e.item.notFound)||(this.select(e.item),t.stopPropagation(),t.preventDefault())},e}()}.call(this),function(){var t;t={data_attribute:"ui-component:date-mask",baseZindex:2003},UIComponent.DatePicker=function(){function e(e){var n,i,r;this.input=e,this.input.mask("99/99/9999"),this.input.data(t.data_attribute,this),this.widget=$(this.buildWidget()),this.widget.find("*[data-shortcut='today']:first").html(window.i18n.strings.today),this.widget.find("*[data-shortcut='yesterday']:first").html(window.i18n.strings.yesterday),this.widget.find("*[data-shortcut='tomorrow']:first").html(window.i18n.strings.tomorrow),t.baseZindex+=1,this.widget.css({zIndex:t.baseZindex}),this.input.before(this.widget),this.input.on("input",(r=this,function(){return r.input.off("focus.datePicker"),window.setTimeout(function(){return r.input.on("focus.datePicker",function(){return r.widget.show()})},100)})),this.input.on("focus.datePicker",function(e){return function(){return t.baseZindex+=1,e.widget.css({zIndex:t.baseZindex}),e.widget.show(),!0}}(this)),this.input.on("keydown.datePicker",function(t){return function(e){return t.keydown(e),!0}}(this)),this.input.on("keyup.datePicker",function(t){return function(){return 8===t.input.val().replace(/\D/g,"").length&&t.jqueryWidgetElement.datepicker("setDate",t.input.val()),!0}}(this)),this.widget.find("*[data-shortcut]").click(function(t){return function(e){return t.shortcutClick($(e.currentTarget)),!1}}(this)),this.jqueryWidgetElement=this.widget.find("*[jquery-widget=true]:first"),n=this.input.val()||this.input.prop("placeholder"),this.jqueryWidgetElement.datepicker({dateFormat:$.datepicker._defaults.dateFormat,constrainInput:!1,defaultDate:n,onSelect:function(t){return function(){return t.onSelectDate()}}(this)}),i="click.ui-component:date-picker-"+this.jqueryWidgetElement.attr("id"),$("html").off(i),$("html").on(i,function(t){return function(){return t.close()}}(this)),this.input.parent().on(i,function(t){return t.stopPropagation()}),this.arrowsHandler=new UIComponent.DatePicker.ArrowsHandler(this)}return e.prototype.onSelectDate=function(){return this.updateInputField(),this.input.trigger("input"),this.close()},e.prototype.keydown=function(t){var e;return 13===(e=t.keyCode||t.which)||27===e?(this.close(),void t.preventDefault()):9!==e?39===e?(this.arrowsHandler.right(),void t.preventDefault()):37===e?(this.arrowsHandler.left(),void t.preventDefault()):38===e?(this.arrowsHandler.up(),void t.preventDefault()):void(40===e&&(this.arrowsHandler.down(),t.preventDefault())):void this.close()},e.prototype.close=function(){return this.widget.hide()},e.prototype.shortcutClick=function(t){switch(t.data("shortcut")){case"yesterday":this.jqueryWidgetElement.datepicker("setDate",Date.yesterday);break;case"today":this.jqueryWidgetElement.datepicker("setDate",Date.today);break;case"tomorrow":this.jqueryWidgetElement.datepicker("setDate",Date.tomorrow);break;default:alert("invalid shortcut")}return this.onSelectDate()},e.prototype.updateInputField=function(){return this.input.val($.datepicker.formatDate(this.jqueryWidgetElement.datepicker("option","dateFormat"),this.jqueryWidgetElement.datepicker("getDate")))},e.prototype.buildWidget=function(){return"<div class='date-picker' style='display: none'>\n  <ul class='action-bar'>\n    <li>\n      <a href='' data-shortcut='yesterday'></a>\n    </li>\n    <li>\n      <a href='' data-shortcut='today'></a>\n    </li>\n    <li>\n      <a href='' data-shortcut='tomorrow'></a>\n    </li>\n  </ul>\n  <div class='calendar' jquery-widget='true'></div>\n</div>"},e}(),UIComponent.DatePicker.ArrowsHandler=function(){function t(t){this.datePicker=t}return t.prototype.right=function(){var t;return(t=this.datePicker.jqueryWidgetElement.datepicker("getDate")).setDate(t.getDate()+1),this.datePicker.jqueryWidgetElement.datepicker("setDate",t),this.datePicker.updateInputField()},t.prototype.left=function(){var t;return(t=this.datePicker.jqueryWidgetElement.datepicker("getDate")).setDate(t.getDate()-1),this.datePicker.jqueryWidgetElement.datepicker("setDate",t),this.datePicker.updateInputField()},t.prototype.up=function(){var t;return(t=this.datePicker.jqueryWidgetElement.datepicker("getDate")).setDate(t.getDate()-7),this.datePicker.jqueryWidgetElement.datepicker("setDate",t),this.datePicker.updateInputField()},t.prototype.down=function(){var t;return this.datePicker.jqueryWidgetElement.is(":hidden")?this.datePicker.widget.show():((t=this.datePicker.jqueryWidgetElement.datepicker("getDate")).setDate(t.getDate()+7),this.datePicker.jqueryWidgetElement.datepicker("setDate",t),this.datePicker.updateInputField())},t}()}.call(this),function(){$(function(){return $(document).on("mouseover.drop-down","*[data-drop-down=hover], *[data-drop-down=click]",function(){return window.clearTimeout($(this).data("drop-down.closeTimer"))}),$(document).on("mouseenter.drop-down:hover","*[data-drop-down=hover]",function(){var t,e;return t=$(this),e=window.setTimeout(function(){var e;return e=t.data("options")||{duration:100},t.find("*[data-drop-down=box]:first").fadeIn(e.duration)},100),t.data("drop-down.openTimer",e)}),$(document).on("mouseleave.drop-down:hover","*[data-drop-down=hover]",function(){var t,e;if(window.clearTimeout($(this).data("drop-down.openTimer")),"locked"!==(t=$(this)).data("drop-down"))return e=window.setTimeout(function(){var e;return e=t.data("options")||{duration:100},t.find("*[data-drop-down=box]:first").fadeOut(e.duration)},100),t.data("drop-down.closeTimer",e)}),$(document).on("click.drop-down:click","*[data-drop-down=click] *[data-trigger]",function(){var t,e,n;return e=$(this).parents("*[data-drop-down=click]:first"),t=e.find("*[data-drop-down=box]:first"),n=e.data("options")||{duration:100},t.is(":hidden")?t.fadeIn(n.duration,function(){return t.find("*[data-auto-focus]").focus()}):t.fadeOut(n.duration),!1}),$(document).on("mouseleave.drop-down:click","*[data-drop-down=click]",function(){var t,e;return t=$(this),e=window.setTimeout(function(){var e;return e=t.data("options")||{duration:100},t.find("*[data-drop-down=box]:first").fadeOut(e.duration)},400),t.data("drop-down.closeTimer",e)})})}.call(this),/*!
Chosen, a Select Box Enhancer for jQuery and Prototype
by Patrick Filler for Harvest, http://getharvest.com
Version 1.5.1
Full source at https://github.com/harvesthq/chosen
Copyright (c) 2011-2016 Harvest http://getharvest.com
MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md
This file is generated by `grunt build`, do not edit it by hand.
*/function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(i=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,n,i,r,o,a;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),title:t.title?t.title:void 0,children:0,disabled:t.disabled,classes:t.className}),a=[],i=0,r=(o=t.childNodes).length;i<r;i++)n=o[i],a.push(this.add_option(n,e,t.disabled));return a},t.prototype.add_option=function(t,e,n){if("OPTION"===t.nodeName.toUpperCase())return""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,title:t.title?t.title:void 0,selected:t.selected,disabled:!0===n?n:t.disabled,group_array_index:e,group_label:null!=e?this.parsed[e].label:null,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},t.prototype.escapeExpression=function(t){var e,n;return null==t||!1===t?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(n,function(t){return e[t]||"&amp;"})):t},t}()).select_to_array=function(t){var e,n,r,o,a;for(n=new i,r=0,o=(a=t.childNodes).length;r<o;r++)e=a[r],n.add_node(e);return n.parsed},e=function(){function t(e,n){this.form_field=e,this.options=null!=n?n:{},t.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.on_ready())}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||Infinity,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options,this.include_group_label_in_selected=this.options.include_group_label_in_selected||!1,this.max_shown_results=this.options.max_shown_results||Number.POSITIVE_INFINITY},t.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||t.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||t.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||t.default_no_result_text},t.prototype.choice_label=function(t){return this.include_group_label_in_selected&&null!=t.group_label?"<b class='group-name'>"+t.group_label+"</b>"+t.html:t.html},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(){var t=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return t.blur_test()},100)},t.prototype.results_option_build=function(t){var e,n,i,r,o,a,s;for(e="",r=0,o=0,a=(s=this.results_data).length;o<a&&(i="",""!==(i=(n=s[o]).group?this.result_add_group(n):this.result_add_option(n))&&(r++,e+=i),(null!=t?t.first:void 0)&&(n.selected&&this.is_multiple?this.choice_build(n):n.selected&&!this.is_multiple&&this.single_set_selected_text(this.choice_label(n))),!(r>=this.max_shown_results));o++);return e},t.prototype.result_add_option=function(t){var e,n;return t.search_match&&this.include_option_in_results(t)?(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),(n=document.createElement("li")).className=e.join(" "),n.style.cssText=t.style,n.setAttribute("data-option-array-index",t.array_index),n.innerHTML=t.search_text,t.title&&(n.title=t.title),this.outerHTML(n)):""},t.prototype.result_add_group=function(t){var e,n;return(t.search_match||t.group_match)&&t.active_options>0?((e=[]).push("group-result"),t.classes&&e.push(t.classes),(n=document.createElement("li")).className=e.join(" "),n.innerHTML=t.search_text,t.title&&(n.title=t.title),this.outerHTML(n)):""},t.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing)return this.winnow_results()},t.prototype.reset_single_select_options=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.results_data).length;e<n;e++)(t=i[e]).selected?r.push(t.selected=!1):r.push(void 0);return r},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.winnow_results=function(){var t,e,n,i,r,o,a,s,c,l,u,d;for(this.no_results_clear(),i=0,t=(o=this.get_search_text()).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),c=new RegExp(t,"i"),n=this.get_search_regex(t),l=0,u=(d=this.results_data).length;l<u;l++)(e=d[l]).search_match=!1,r=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(0===(r=this.results_data[e.group_array_index]).active_options&&r.search_match&&(i+=1),r.active_options+=1),e.search_text=e.group?e.label:e.html,e.group&&!this.group_search||(e.search_match=this.search_string_match(e.search_text,n),e.search_match&&!e.group&&(i+=1),e.search_match?(o.length&&(a=e.search_text.search(c),s=e.search_text.substr(0,a+o.length)+"</em>"+e.search_text.substr(a+o.length),e.search_text=s.substr(0,a)+"<em>"+s.substr(a)),null!=r&&(r.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));return this.result_clear_highlight(),i<1&&o.length?(this.update_results_content(""),this.no_results(o)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},t.prototype.get_search_regex=function(t){var e;return e=this.search_contains?"":"^",new RegExp(e+t,"i")},t.prototype.search_string_match=function(t,e){var n,i,r,o;if(e.test(t))return!0;if(this.enable_split_word_search&&(t.indexOf(" ")>=0||0===t.indexOf("["))&&(i=t.replace(/\[|\]/g,"").split(" ")).length)for(r=0,o=i.length;r<o;r++)if(n=i[r],e.test(n))return!0},t.prototype.choices_count=function(){var t,e,n;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,t=0,e=(n=this.form_field.options).length;t<e;t++)n[t].selected&&(this.selected_option_count+=1);return this.selected_option_count},t.prototype.choices_click=function(t){if(t.preventDefault(),!this.results_showing&&!this.is_disabled)return this.results_show()},t.prototype.keyup_checker=function(t){var e,n;switch(e=null!=(n=t.which)?n:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:case 18:break;default:return this.results_search()}},t.prototype.clipboard_event_checker=function(){var t=this;return setTimeout(function(){return t.results_search()},50)},t.prototype.container_width=function(){return null!=this.options.width?this.options.width:this.form_field.offsetWidth+"px"},t.prototype.include_option_in_results=function(t){return!(this.is_multiple&&!this.display_selected_options&&t.selected)&&(!(!this.display_disabled_options&&t.disabled)&&!t.empty)},t.prototype.search_results_touchstart=function(t){return this.touch_started=!0,this.search_results_mouseover(t)},t.prototype.search_results_touchmove=function(t){return this.touch_started=!1,this.search_results_mouseout(t)},t.prototype.search_results_touchend=function(t){if(this.touch_started)return this.search_results_mouseup(t)},t.prototype.outerHTML=function(t){var e;return t.outerHTML?t.outerHTML:((e=document.createElement("div")).appendChild(t),e.innerHTML)},t.browser_is_supported=function(){return!/iP(od|hone)/i.test(window.navigator.userAgent)&&((!/Android/i.test(window.navigator.userAgent)||!/Mobile/i.test(window.navigator.userAgent))&&(!/IEMobile/i.test(window.navigator.userAgent)&&(!/Windows Phone/i.test(window.navigator.userAgent)&&(!/BlackBerry/i.test(window.navigator.userAgent)&&(!/BB10/i.test(window.navigator.userAgent)&&("Microsoft Internet Explorer"!==window.navigator.appName||document.documentMode>=8))))))},t.default_multiple_text="Select Some Options",t.default_single_text="Select an Option",t.default_no_result_text="No results match",t}(),(t=jQuery).fn.extend({chosen:function(i){return e.browser_is_supported()?this.each(function(){var e,r;r=(e=t(this)).data("chosen"),"destroy"!==i?r instanceof n||e.data("chosen",new n(this,i)):r instanceof n&&r.destroy()}):this}}),n=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return o(n,e),n.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},n.prototype.set_up_html=function(){var e,n;return(e=["chosen-container"]).push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),n={"class":e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(n.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",n),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior()},n.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})},n.prototype.register_observers=function(){var t=this;return this.container.bind("touchstart.chosen",function(e){return t.container_mousedown(e),e.preventDefault()}),this.container.bind("touchend.chosen",function(e){return t.container_mouseup(e),e.preventDefault()}),this.container.bind("mousedown.chosen",function(e){t.container_mousedown(e)}),this.container.bind("mouseup.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mouseenter.chosen",function(e){t.mouse_enter(e)}),this.container.bind("mouseleave.chosen",function(e){t.mouse_leave(e)}),this.search_results.bind("mouseup.chosen",function(e){t.search_results_mouseup(e)}),this.search_results.bind("mouseover.chosen",function(e){t.search_results_mouseover(e)}),this.search_results.bind("mouseout.chosen",function(e){t.search_results_mouseout(e)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(e){t.search_results_mousewheel(e)}),this.search_results.bind("touchstart.chosen",function(e){t.search_results_touchstart(e)}),this.search_results.bind("touchmove.chosen",function(e){t.search_results_touchmove(e)}),this.search_results.bind("touchend.chosen",function(e){t.search_results_touchend(e)}),this.form_field_jq.bind("chosen:updated.chosen",function(e){t.results_update_field(e)}),this.form_field_jq.bind("chosen:activate.chosen",function(e){t.activate_field(e)}),this.form_field_jq.bind("chosen:open.chosen",function(e){t.container_mousedown(e)}),this.form_field_jq.bind("chosen:close.chosen",function(e){t.input_blur(e)}),this.search_field.bind("blur.chosen",function(e){t.input_blur(e)}),this.search_field.bind("keyup.chosen",function(e){t.keyup_checker(e)}),this.search_field.bind("keydown.chosen",function(e){t.keydown_checker(e)}),this.search_field.bind("focus.chosen",function(e){t.input_focus(e)}),this.search_field.bind("cut.chosen",function(e){t.clipboard_event_checker(e)}),this.search_field.bind("paste.chosen",function(e){t.clipboard_event_checker(e)}),this.is_multiple?this.search_choices.bind("click.chosen",function(e){t.choices_click(e)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},n.prototype.destroy=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},n.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},n.prototype.container_mousedown=function(e){if(!this.is_disabled&&(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null==e||!t(e.target).hasClass("search-choice-close")))return this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field()},n.prototype.container_mouseup=function(t){if("ABBR"===t.target.nodeName&&!this.is_disabled)return this.results_reset(t)},n.prototype.search_results_mousewheel=function(t){var e;if(t.originalEvent&&(e=t.originalEvent.deltaY||-t.originalEvent.wheelDelta||t.originalEvent.detail),null!=e)return t.preventDefault(),"DOMMouseScroll"===t.type&&(e*=40),this.search_results.scrollTop(e+this.search_results.scrollTop())},n.prototype.blur_test=function(){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},n.prototype.close_field=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},n.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},n.prototype.test_active_click=function(e){var n;return(n=t(e.target).closest(".chosen-container")).length&&this.container[0]===n[0]?this.active_field=!0:this.close_field()},n.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=i.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},n.prototype.result_do_highlight=function(t){var e,n,i,r,o;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),r=(i=parseInt(this.search_results.css("maxHeight"),10))+(o=this.search_results.scrollTop()),(e=(n=this.result_highlight.position().top+this.search_results.scrollTop())+this.result_highlight.outerHeight())>=r)return this.search_results.scrollTop(e-i>0?e-i:0);if(n<o)return this.search_results.scrollTop(n)}},n.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},n.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},n.prototype.update_results_content=function(t){return this.search_results.html(t)},n.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},n.prototype.set_tab_index=function(){var t;if(this.form_field.tabIndex)return t=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=t},n.prototype.set_label_behavior=function(){var e=this;if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0)return this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()})},n.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},n.prototype.search_results_mouseup=function(e){var n;if((n=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first()).length)return this.result_highlight=n,this.result_select(e),this.search_field.focus()},n.prototype.search_results_mouseover=function(e){var n;if(n=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first())return this.result_do_highlight(n)},n.prototype.search_results_mouseout=function(e){if(t(e.target).hasClass("active-result"))return this.result_clear_highlight()},n.prototype.choice_build=function(e){var n,i,r=this;return n=t("<li />",{"class":"search-choice"}).html("<span>"+this.choice_label(e)+"</span>"),e.disabled?n.addClass("search-choice-disabled"):((i=t("<a />",{"class":"search-choice-close","data-option-array-index":e.array_index})).bind("click.chosen",function(t){return r.choice_destroy_link_click(t)}),n.append(i)),this.search_container.before(n)},n.prototype.choice_destroy_link_click=function(e){if(e.preventDefault(),e.stopPropagation(),!this.is_disabled)return this.choice_destroy(t(e.target))},n.prototype.choice_destroy=function(t){if(this.result_deselect(t[0].getAttribute("data-option-array-index")))return this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()},n.prototype.results_reset=function(){if(this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field)return this.results_hide()},n.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},n.prototype.result_select=function(t){var e,n;if(this.result_highlight)return e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):this.reset_single_select_options(),e.addClass("result-selected"),(n=this.results_data[e[0].getAttribute("data-option-array-index")]).selected=!0,this.form_field.options[n.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(n):this.single_set_selected_text(this.choice_label(n)),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.show_search_field_default(),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[n.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,t.preventDefault(),this.search_field_scale())},n.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").html(t)},n.prototype.result_deselect=function(t){var e;return e=this.results_data[t],!this.form_field.options[e.options_index].disabled&&(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},n.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},n.prototype.get_search_text=function(){return t("<div/>").text(t.trim(this.search_field.val())).html()},n.prototype.winnow_results_set_highlight=function(){var t,e;if(null!=(t=(e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result")).length?e.first():this.search_results.find(".active-result").first()))return this.result_do_highlight(t)},n.prototype.no_results=function(e){var n;return(n=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>')).find("span").first().html(e),this.search_results.append(n),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},n.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},n.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},n.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result")).length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight()):void 0:this.results_show()},n.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last()).length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0},n.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},n.prototype.keydown_checker=function(t){var e,n;switch(e=null!=(n=t.which)?n:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:this.results_showing&&t.preventDefault();break;case 32:this.disable_search&&t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},n.prototype.search_field_scale=function(){var e,n,i,r,o,a,s,c;if(this.is_multiple){for(0,a=0,r="position:absolute; left: -1000px; top: -1000px; display:none;",s=0,c=(o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"]).length;s<c;s++)r+=(i=o[s])+":"+this.search_field.css(i)+";";return(e=t("<div />",{style:r})).text(this.search_field.val()),t("body").append(e),a=e.width()+25,e.remove(),a>(n=this.container.outerWidth())-10&&(a=n-10),this.search_field.css({width:a+"px"})}},n}()}.call(this),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Clipboard=t()}}(function(){return function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return r(n||t)},u,u.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e){var n=t("matches-selector");e.exports=function(t,e,i){for(var r=i?t:t.parentNode;r&&r!==document;){if(n(r,e))return r;r=r.parentNode}}},{"matches-selector":5}],2:[function(t,e){function n(t,e,n,r,o){var a=i.apply(this,arguments);return t.addEventListener(n,a,o),{destroy:function(){t.removeEventListener(n,a,o)}}}function i(t,e,n,i){return function(n){n.delegateTarget=r(n.target,e,!0),n.delegateTarget&&i.call(t,n)}}var r=t("closest");e.exports=n},{closest:1}],3:[function(t,e,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return"string"==typeof t||t instanceof String},n.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},{}],4:[function(t,e){function n(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!a.string(e))throw new TypeError("Second argument must be a String");if(!a.fn(n))throw new TypeError("Third argument must be a Function");if(a.node(t))return i(t,e,n);if(a.nodeList(t))return r(t,e,n);if(a.string(t))return o(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function i(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function r(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}function o(t,e,n){return s(document.body,t,e,n)}var a=t("./is"),s=t("delegate");e.exports=n},{"./is":3,delegate:2}],5:[function(t,e){function n(t,e){if(r)return r.call(t,e);for(var n=t.parentNode.querySelectorAll(e),i=0;i<n.length;++i)if(n[i]==t)return!0;return!1}var i=Element.prototype,r=i.matchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector;e.exports=n},{}],6:[function(t,e){function n(t){var e;if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName)t.focus(),t.setSelectionRange(0,t.value.length),e=t.value;else{t.hasAttribute("contenteditable")&&t.focus();var n=window.getSelection(),i=document.createRange();i.selectNodeContents(t),n.removeAllRanges(),n.addRange(i),e=n.toString()}return e}e.exports=n},{}],7:[function(t,e){function n(){}n.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function i(){r.off(t,i),e.apply(n,arguments)}var r=this;return i._=e,this.on(t,i,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,r=n.length;r>i;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],r=[];if(i&&e)for(var o=0,a=i.length;a>o;o++)i[o].fn!==e&&i[o].fn._!==e&&r.push(i[o]);return r.length?n[t]=r:delete n[t],this}},e.exports=n},{}],8:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=i(t("select")),s=function(){function t(e){r(this,t),this.resolveOptions(e),this.initSelection()}return t.prototype.resolveOptions=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action=t.action,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""},t.prototype.initSelection=function(){if(this.text&&this.target)throw new Error('Multiple attributes declared, use either "target" or "text"');if(this.text)this.selectFake();else{if(!this.target)throw new Error('Missing required attributes, use either "target" or "text"');this.selectTarget()}},t.prototype.selectFake=function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandler=document.body.addEventListener("click",function(){return t.removeFake()}),this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px",this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=a["default"](this.fakeElem),this.copyText()},t.prototype.removeFake=function(){this.fakeHandler&&(document.body.removeEventListener("click"),this.fakeHandler=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},t.prototype.selectTarget=function(){this.selectedText=a["default"](this.target),this.copyText()},t.prototype.copyText=function(){var t=void 0;try{t=document.execCommand(this.action)}catch(n){t=!1}this.handleResult(t)},t.prototype.handleResult=function(t){t?this.emitter.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.emitter.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},t.prototype.clearSelection=function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()},t.prototype.destroy=function(){this.removeFake()},o(t,[{key:"action",set:function(){var t=arguments.length<=0||void 0===arguments[0]?"copy":arguments[0];if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!=typeof t||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');this._target=t}},get:function(){return this._target}}]),t}();n["default"]=s,e.exports=n["default"]},{select:6}],9:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}n.__esModule=!0;var s=i(t("./clipboard-action")),c=i(t("tiny-emitter")),l=i(t("good-listener")),u=function(t){function e(n,i){r(this,e),t.call(this),this.resolveOptions(i),this.listenClick(n)}return o(e,t),e.prototype.resolveOptions=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText},e.prototype.listenClick=function(t){var e=this;this.listener=l["default"](t,"click",function(t){return e.onClick(t)})},e.prototype.onClick=function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new s["default"]({action:this.action(e),target:this.target(e),text:this.text(e),trigger:e,emitter:this})},e.prototype.defaultAction=function(t){return a("action",t)},e.prototype.defaultTarget=function(t){var e=a("target",t);return e?document.querySelector(e):void 0},e.prototype.defaultText=function(t){return a("text",t)},e.prototype.destroy=function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)},e}(c["default"]);n["default"]=u,e.exports=n["default"]},{"./clipboard-action":8,"good-listener":4,"tiny-emitter":7}]},{},[9])(9)});var hex_grid=[],cp_grid=[["f0f0f0","ffd6d6","ffd6ad","fff0e1","e3f3c6","a3eac2","9adedf","ddffff","d5d6ff","ffd5ff"],["dbdfdc","ff9d9d","ffbd5c","fee9b7","daee8e","82d7ac","25d5ba","52d6ff","abacff","ffabff"],["cacfd2","ff8585","ed9836","fbd985","8dd47f","4bcf99","46c1a0","39c4ff","8384d8","d783d7"],["aab7b8","f55142","fa873e","ffd719","bede34","29c287","42b5b1","007ac1","6e60bb","cd6fce"],["8995a1","de6a67","dc7633","fcb813","a7cb34","9edd94","3cc1bf","6c91c8","726aaf","af79c6"],["566573","e14b46","c66136","d8ad57","88b538","489c6f","438b83","5f74b0","6a6399","895ca9"],["4c5661","ab5349","9d4b48","ae855a","719a38","437a58","467c6e","304c8f","605791","70518c"]],cp_dom=null,cp_caller=null,cp_defaultcolour="ffffff",cp_closePID=null;/*!
* Focus element overlay (Focusable) v0.1
* https://github.com/zzarcon/focusable
*
* Copyright (c) 2014 @zzarcon <hezarco@gmail.com>
*
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in
* all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
* SOFTWARE.
*
* Date: 2014-11-18
*/!function(t){function e(){b=$("body"),n(),g(),i()}function n(){window.jQuery&&window.$&&window.$.fn&&($.fn.focusable=function(t){return Focusable.setFocus(this,t),this})}function i(){b.on("click",k,a),$(window).on("resize",r),$(window).on("keyup",o)}function r(){w&&(w=T.findOnResize?$(w.selector):w,y())}function o(t){T.hideOnESC&&27===t.keyCode&&x&&l()}function a(){T.hideOnClick&&l()}function s(t,e){$("body").css("overflow","hidden"),T=$.extend(T,e),w=t,u(),T.circle&&p(),b.find(k).fadeIn(T.fadeDuration)}function c(){b.find(k).remove()}function l(){x=!1,w=null,$("body").css("overflow",""),b.find(k).fadeOut(T.fadeDuration,c)}function u(t){if(w){var e=0;for(x=!0,c();e<4;)d(e),e++;!0===t&&$(k).show()}}function d(t){var e=w.offset(),n=0,i=0,r=f(w.outerWidth()+20),o="100%",a="";switch(t){case 0:r=f(e.left-10);break;case 1:i=f(e.left-10),o=f(e.top-10);break;case 2:i=f(e.left-10),n=f(w.outerHeight()+20+e.top-10);break;case 3:r="100%",i=f(w.outerWidth()+20+e.left-10)}a="top:"+n+";left:"+i+";width:"+r+";height:"+o,b.prepend('<div class="'+C+'" style="'+a+'"></div>')}function h(t,e,n){return $("<svg width="+t+" height="+e+'><defs>    <mask id="hole">        <rect width="100%" height="100%" fill="white"/>        <circle r="'+n+'" cx="'+t/2+'" cy="'+e/2+'" />    </mask></defs><rect id="donut" style="fill:rgba(0,0,0,0.8);" width="'+t+'" height="'+e+'" mask="url(#hole)" /></svg>')}function p(){var t=w.get(0).getBoundingClientRect(),e=h(t.width,t.height,Math.min(t.width/2,t.height/2));e.attr("class",C),e.css({left:t.left,top:t.top,background:"transparent"}),b.prepend(e)}function f(t){return t+"px"}function g(){var t;((t=document.createElement("style")).appendChild(document.createTextNode("")),document.head.appendChild(t),t.sheet).insertRule(k+"{ display:none; position: absolute; z-index: 9999; background: rgba(0,0,0,0.8); }",0)}function m(){return w}function v(){return T}function _(){return x}function y(){u(!0)}var b=null,w=null,x=!1,C="focusable-column",k="."+C,T={fadeDuration:700,hideOnClick:!1,hideOnESC:!1,findOnResize:!1};$(document).ready(e),t.Focusable={setFocus:s,hide:l,refresh:y,getActiveElement:m,getOptions:v,isVisible:_}}(window);var Froogaloop=function(){function t(e){return new t.fn.init(e)}function e(t,e,n){if(!n.contentWindow.postMessage)return!1;t=JSON.stringify({method:t,value:e}),n.contentWindow.postMessage(t,a)}function n(e){var n,i;try{i=(n=JSON.parse(e.data)).event||n.method}catch(t){}if("ready"!=i||o||(o=!0),!/^https?:\/\/player.vimeo.com/.test(e.origin))return!1;"*"===a&&(a=e.origin),e=n.value;var s=n.data,c=""===c?null:n.player_id;return n=c?r[c][i]:r[i],i=[],!!n&&(void 0!==e&&i.push(e),s&&i.push(s),c&&i.push(c),0<i.length?n.apply(null,i):n.call())}function i(t,e,n){n?(r[n]||(r[n]={}),r[n][t]=e):r[t]=e}var r={},o=!1,a="*";return t.fn=t.prototype={element:null,init:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this.element=t,this},api:function(t,n){if(!this.element||!t)return!1;var r=this.element,o=""!==r.id?r.id:null,a=n&&n.constructor&&n.call&&n.apply?null:n,s=n&&n.constructor&&n.call&&n.apply?n:null;return s&&i(t,s,o),e(t,a,r),this},addEvent:function(t,n){if(!this.element)return!1;var r=this.element,a=""!==r.id?r.id:null;return i(t,n,a),"ready"!=t?e("addEventListener",t,r):"ready"==t&&o&&n.call(null,a),this},removeEvent:function(t){if(!this.element)return!1;var n=this.element,i=""!==n.id?n.id:null;t:{if(i&&r[i]){if(!r[i][t]){i=!1;break t}r[i][t]=null}else{if(!r[t]){i=!1;break t}r[t]=null}i=!0}"ready"!=t&&i&&e("removeEventListener",t,n)}},t.fn.init.prototype=t.fn,window.addEventListener?window.addEventListener("message",n,!1):window.attachEvent("onmessage",n),window.Froogaloop=window.$f=t}();(function(){$.fn.extend({ajaxUpload:function(){return this.each(function(){var t,e,n;if(!(t=$(this)).is("form"))throw"AjaxUpload: Element should be a form";return n="ajax-upload-iframe-"+(new Date).getTime(),(e=$("<iframe id='"+n+"' name='"+n+"'></iframe>")).css({display:"none",width:0,height:0,position:"absolute"}),t.append(e),t.attr("multipart",!0),t.attr("target",n),this})}})}).call(this),function(t){t.fn.animatedAnchor=function(){return this.each(function(){var e=t(this),n={duration:e.data("duration")?e.data("duration"):400,offset:e.data("offset")?e.data("offset"):0,pathName:e.attr("href").split("#")[0].replace(/\/$/,""),hash:e.attr("href").split("#")[1]},i=window.location.pathname.replace(/\/$/,""),r=function(){t(window).data("animatedAnchor.animating",!0),e.trigger("animatedAnchor:started"),window.setTimeout(function(){t.scrollTo("#"+n.hash,{duration:parseFloat(n.duration),offset:parseFloat(n.offset),onAfter:o})},100)},o=function(){window.setTimeout(function(){t(window).data("animatedAnchor.animating",!1),e.trigger("animatedAnchor:finished")},100)};t(this).off("click.animatedAnchor"),t(this).on("click.animatedAnchor",function(t){""!=n.pathName&&i!=n.pathName||(r(),t.preventDefault())})})}}(jQuery),function(t){var e={},n={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){},onSliderResize:function(){}};t.fn.bxSlider=function(r){if(0==this.length)return this;if(this.length>1)return this.each(function(){t(this).bxSlider(r)}),this;var o={},a=this;e.el=this;var s=t(window).width(),c=t(window).height(),l=function(){o.settings=t.extend({},n,r),o.settings.slideWidth=parseInt(o.settings.slideWidth),o.children=a.children(o.settings.slideSelector),o.children.length<o.settings.minSlides&&(o.settings.minSlides=o.children.length),o.children.length<o.settings.maxSlides&&(o.settings.maxSlides=o.children.length),o.settings.randomStart&&(o.settings.startSlide=Math.floor(Math.random()*o.children.length)),o.active={index:o.settings.startSlide},o.carousel=o.settings.minSlides>1||o.settings.maxSlides>1,o.carousel&&(o.settings.preloadImages="all"),o.minThreshold=o.settings.minSlides*o.settings.slideWidth+(o.settings.minSlides-1)*o.settings.slideMargin,o.maxThreshold=o.settings.maxSlides*o.settings.slideWidth+(o.settings.maxSlides-1)*o.settings.slideMargin,o.working=!1,o.controls={},o.interval=null,o.animProp="vertical"==o.settings.mode?"top":"left",o.usingCSS=o.settings.useCSS&&"fade"!=o.settings.mode&&function(){var t=document.createElement("div"),e=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var n in e)if(void 0!==t.style[e[n]])return o.cssPrefix=e[n].replace("Perspective","").toLowerCase(),o.animProp="-"+o.cssPrefix+"-transform",!0;return!1}(),"vertical"==o.settings.mode&&(o.settings.maxSlides=o.settings.minSlides),a.data("origStyle",a.attr("style")),a.children(o.settings.slideSelector).each(function(){t(this).data("origStyle",t(this).attr("style"))}),u()},u=function(){a.wrap('<div class="bx-wrapper"><div class="bx-viewport"></div></div>'),o.viewport=a.parent(),o.loader=t('<div class="bx-loading" />'),o.viewport.prepend(o.loader),a.css({width:"horizontal"==o.settings.mode?100*o.children.length+215+"%":"auto",position:"relative"}),o.usingCSS&&o.settings.easing?a.css("-"+o.cssPrefix+"-transition-timing-function",o.settings.easing):o.settings.easing||(o.settings.easing="swing"),m(),o.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),o.viewport.parent().css({maxWidth:f()}),o.settings.pager||o.viewport.parent().css({margin:"0 auto 0px"}),o.children.css({float:"horizontal"==o.settings.mode?"left":"none",listStyle:"none",position:"relative"}),o.children.css("width",g()),"horizontal"==o.settings.mode&&o.settings.slideMargin>0&&o.children.css("marginRight",o.settings.slideMargin),"vertical"==o.settings.mode&&o.settings.slideMargin>0&&o.children.css("marginBottom",o.settings.slideMargin),"fade"==o.settings.mode&&(o.children.css({position:"absolute",zIndex:0,display:"none"}),o.children.eq(o.settings.startSlide).css({zIndex:o.settings.slideZIndex,display:"block"})),o.controls.el=t('<div class="bx-controls" />'),o.settings.captions&&$(),o.active.last=o.settings.startSlide==v()-1,o.settings.video&&a.fitVids();var e=o.children.eq(o.settings.startSlide);"all"==o.settings.preloadImages&&(e=o.children),o.settings.ticker?o.settings.pager=!1:(o.settings.pager&&x(),o.settings.controls&&C(),o.settings.auto&&o.settings.autoControls&&k(),(o.settings.controls||o.settings.autoControls||o.settings.pager)&&o.viewport.after(o.controls.el)),d(e,h)},d=function(e,n){var i=e.find("img, iframe").length;if(0!=i){var r=0;e.find("img, iframe").each(function(){t(this).one("load",function(){++r==i&&n()}).each(function(){this.complete&&t(this).load()})})}else n()},h=function(){if(o.settings.infiniteLoop&&"fade"!=o.settings.mode&&!o.settings.ticker){var e="vertical"==o.settings.mode?o.settings.minSlides:o.settings.maxSlides,n=o.children.slice(0,e).clone().addClass("bx-clone"),i=o.children.slice(-e).clone().addClass("bx-clone");a.append(n).prepend(i)}o.loader.remove(),y(),"vertical"==o.settings.mode&&(o.settings.adaptiveHeight=!0),o.viewport.height(p()),a.redrawSlider(),o.settings.onSliderLoad(o.active.index),o.initialized=!0,o.settings.responsive&&t(window).bind("resize",H),o.settings.auto&&o.settings.autoStart&&M(),o.settings.ticker&&L(),o.settings.pager&&A(o.settings.startSlide),o.settings.controls&&j(),o.settings.touchEnabled&&!o.settings.ticker&&N()},p=function(){var e=0,n=t();if("vertical"==o.settings.mode||o.settings.adaptiveHeight)if(o.carousel){var r=1==o.settings.moveSlides?o.active.index:o.active.index*_();for(n=o.children.eq(r),i=1;i<=o.settings.maxSlides-1;i++)n=r+i>=o.children.length?n.add(o.children.eq(i-1)):n.add(o.children.eq(r+i))}else n=o.children.eq(o.active.index);else n=o.children;return"vertical"==o.settings.mode?(n.each(function(){e+=t(this).outerHeight()}),o.settings.slideMargin>0&&(e+=o.settings.slideMargin*(o.settings.minSlides-1))):e=Math.max.apply(Math,n.map(function(){return t(this).outerHeight(!1)}).get()),e},f=function(){var t="100%";return o.settings.slideWidth>0&&(t="horizontal"==o.settings.mode?o.settings.maxSlides*o.settings.slideWidth+(o.settings.maxSlides-1)*o.settings.slideMargin:o.settings.slideWidth),t},g=function(){var t=o.settings.slideWidth,e=o.viewport.width();return 0==o.settings.slideWidth||o.settings.slideWidth>e&&!o.carousel||"vertical"==o.settings.mode?t=e:o.settings.maxSlides>1&&"horizontal"==o.settings.mode&&(e>o.maxThreshold||e<o.minThreshold&&(t=(e-o.settings.slideMargin*(o.settings.minSlides-1))/o.settings.minSlides)),t},m=function(){var t=1;if("horizontal"==o.settings.mode&&o.settings.slideWidth>0)if(o.viewport.width()<o.minThreshold)t=o.settings.minSlides;else if(o.viewport.width()>o.maxThreshold)t=o.settings.maxSlides;else{var e=o.children.first().width();t=Math.floor(o.viewport.width()/e)}else"vertical"==o.settings.mode&&(t=o.settings.minSlides);return t},v=function(){var t=0;if(o.settings.moveSlides>0)if(o.settings.infiniteLoop)t=o.children.length/_();else for(var e=0,n=0;e<o.children.length;)++t,e=n+m(),n+=o.settings.moveSlides<=m()?o.settings.moveSlides:m();else t=Math.ceil(o.children.length/m());return t},_=function(){return o.settings.moveSlides>0&&o.settings.moveSlides<=m()?o.settings.moveSlides:m()},y=function(){if(o.children.length>o.settings.maxSlides&&o.active.last&&!o.settings.infiniteLoop){if("horizontal"==o.settings.mode){var t=o.children.last(),e=t.position();b(-(e.left-(o.viewport.width()-t.width())),"reset",0)}else if("vertical"==o.settings.mode){var n=o.children.length-o.settings.minSlides;e=o.children.eq(n).position();b(-e.top,"reset",0)}}else{e=o.children.eq(o.active.index*_()).position();o.active.index==v()-1&&(o.active.last=!0),null!=e&&("horizontal"==o.settings.mode?b(-e.left,"reset",0):"vertical"==o.settings.mode&&b(-e.top,"reset",0))}},b=function(t,e,n,i){if(o.usingCSS){var r="vertical"==o.settings.mode?"translate3d(0, "+t+"px, 0)":"translate3d("+t+"px, 0, 0)";a.css("-"+o.cssPrefix+"-transition-duration",n/1e3+"s"),"slide"==e?(a.css(o.animProp,r),a.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){a.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),F()})):"reset"==e?a.css(o.animProp,r):"ticker"==e&&(a.css("-"+o.cssPrefix+"-transition-timing-function","linear"),a.css(o.animProp,r),a.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){a.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),b(i.resetValue,"reset",0),P()}))}else{var s={};s[o.animProp]=t,"slide"==e?a.animate(s,n,o.settings.easing,function(){F()}):"reset"==e?a.css(o.animProp,t):"ticker"==e&&a.animate(s,speed,"linear",function(){b(i.resetValue,"reset",0),P()})}},w=function(){for(var e="",n=v(),i=0;n>i;i++){var r="";o.settings.buildPager&&t.isFunction(o.settings.buildPager)?(r=o.settings.buildPager(i),o.pagerEl.addClass("bx-custom-pager")):(r=i+1,o.pagerEl.addClass("bx-default-pager")),e+='<div class="bx-pager-item"><a href="" data-slide-index="'+i+'" class="bx-pager-link">'+r+"</a></div>"}o.pagerEl.html(e)},x=function(){o.settings.pagerCustom?o.pagerEl=t(o.settings.pagerCustom):(o.pagerEl=t('<div class="bx-pager" />'),o.settings.pagerSelector?t(o.settings.pagerSelector).html(o.pagerEl):o.controls.el.addClass("bx-has-pager").append(o.pagerEl),w()),o.pagerEl.on("click","a",D)},C=function(){o.controls.next=t('<a class="bx-next" href="">'+o.settings.nextText+"</a>"),o.controls.prev=t('<a class="bx-prev" href="">'+o.settings.prevText+"</a>"),o.controls.next.bind("click",T),o.controls.prev.bind("click",S),o.settings.nextSelector&&t(o.settings.nextSelector).append(o.controls.next),o.settings.prevSelector&&t(o.settings.prevSelector).append(o.controls.prev),o.settings.nextSelector||o.settings.prevSelector||(o.controls.directionEl=t('<div class="bx-controls-direction" />'),o.controls.directionEl.append(o.controls.prev).append(o.controls.next),o.controls.el.addClass("bx-has-controls-direction").append(o.controls.directionEl))},k=function(){o.controls.start=t('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+o.settings.startText+"</a></div>"),o.controls.stop=t('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+o.settings.stopText+"</a></div>"),o.controls.autoEl=t('<div class="bx-controls-auto" />'),o.controls.autoEl.on("click",".bx-start",E),o.controls.autoEl.on("click",".bx-stop",I),o.settings.autoControlsCombine?o.controls.autoEl.append(o.controls.start):o.controls.autoEl.append(o.controls.start).append(o.controls.stop),o.settings.autoControlsSelector?t(o.settings.autoControlsSelector).html(o.controls.autoEl):o.controls.el.addClass("bx-has-controls-auto").append(o.controls.autoEl),O(o.settings.autoStart?"stop":"start")},$=function(){o.children.each(function(){var e=t(this).find("img:first").attr("title");null!=e&&(""+e).length&&t(this).append('<div class="bx-caption"><span>'+e+"</span></div>")})},T=function(t){o.settings.auto&&a.stopAuto(),a.goToNextSlide(),t.preventDefault()},S=function(t){o.settings.auto&&a.stopAuto(),a.goToPrevSlide(),t.preventDefault()},E=function(t){a.startAuto(),t.preventDefault()},I=function(t){a.stopAuto(),t.preventDefault()},D=function(e){o.settings.auto&&a.stopAuto();var n=t(e.currentTarget),i=parseInt(n.attr("data-slide-index"));i!=o.active.index&&a.goToSlide(i),e.preventDefault()},A=function(e){var n=o.children.length;return"short"==o.settings.pagerType?(o.settings.maxSlides>1&&(n=Math.ceil(o.children.length/o.settings.maxSlides)),void o.pagerEl.html(e+1+o.settings.pagerShortSeparator+n)):(o.pagerEl.find("a").removeClass("active"),void o.pagerEl.each(function(n,i){t(i).find("a").eq(e).addClass("active")}))},F=function(){if(o.settings.infiniteLoop){var t="";0==o.active.index?t=o.children.eq(0).position():o.active.index==v()-1&&o.carousel?t=o.children.eq((v()-1)*_()).position():o.active.index==o.children.length-1&&(t=o.children.eq(o.children.length-1).position()),t&&("horizontal"==o.settings.mode?b(-t.left,"reset",0):"vertical"==o.settings.mode&&b(-t.top,"reset",0))}o.working=!1,o.settings.onSlideAfter(o.children.eq(o.active.index),o.oldIndex,o.active.index)},O=function(t){o.settings.autoControlsCombine?o.controls.autoEl.html(o.controls[t]):(o.controls.autoEl.find("a").removeClass("active"),o.controls.autoEl.find("a:not(.bx-"+t+")").addClass("active"))},j=function(){1==v()?(o.controls.prev.addClass("disabled"),o.controls.next.addClass("disabled")):!o.settings.infiniteLoop&&o.settings.hideControlOnEnd&&(0==o.active.index?(o.controls.prev.addClass("disabled"),o.controls.next.removeClass("disabled")):o.active.index==v()-1?(o.controls.next.addClass("disabled"),o.controls.prev.removeClass("disabled")):(o.controls.prev.removeClass("disabled"),o.controls.next.removeClass("disabled")))},M=function(){o.settings.autoDelay>0?setTimeout(a.startAuto,o.settings.autoDelay):a.startAuto(),o.settings.autoHover&&a.hover(function(){o.interval&&(a.stopAuto(!0),o.autoPaused=!0)},function(){o.autoPaused&&(a.startAuto(!0),o.autoPaused=null)})},L=function(){var e=0;if("next"==o.settings.autoDirection)a.append(o.children.clone().addClass("bx-clone"));else{a.prepend(o.children.clone().addClass("bx-clone"));var n=o.children.first().position();e="horizontal"==o.settings.mode?-n.left:-n.top}b(e,"reset",0),o.settings.pager=!1,o.settings.controls=!1,o.settings.autoControls=!1,o.settings.tickerHover&&!o.usingCSS&&o.viewport.hover(function(){a.stop()},function(){var e=0;o.children.each(function(){e+="horizontal"==o.settings.mode?t(this).outerWidth(!0):t(this).outerHeight(!0)});var n=o.settings.speed/e,i="horizontal"==o.settings.mode?"left":"top",r=n*(e-Math.abs(parseInt(a.css(i))));P(r)}),P()},P=function(t){speed=t||o.settings.speed;var e={left:0,top:0},n={left:0,top:0};"next"==o.settings.autoDirection?e=a.find(".bx-clone").first().position():n=o.children.first().position();var i="horizontal"==o.settings.mode?-e.left:-e.top,r="horizontal"==o.settings.mode?-n.left:-n.top;b(i,"ticker",speed,{resetValue:r})},N=function(){o.touch={start:{x:0,y:0},end:{x:0,y:0}},o.viewport.bind("touchstart",R)},R=function(t){if(o.working)t.preventDefault();else{o.touch.originalPos=a.position();var e=t.originalEvent;o.touch.start.x=e.changedTouches[0].pageX,o.touch.start.y=e.changedTouches[0].pageY,o.viewport.bind("touchmove",B),o.viewport.bind("touchend",z)}},B=function(t){var e=t.originalEvent,n=Math.abs(e.changedTouches[0].pageX-o.touch.start.x),i=Math.abs(e.changedTouches[0].pageY-o.touch.start.y);if(3*n>i&&o.settings.preventDefaultSwipeX?t.preventDefault():3*i>n&&o.settings.preventDefaultSwipeY&&t.preventDefault(),"fade"!=o.settings.mode&&o.settings.oneToOneTouch){var r=0;if("horizontal"==o.settings.mode){var a=e.changedTouches[0].pageX-o.touch.start.x;r=o.touch.originalPos.left+a}else{a=e.changedTouches[0].pageY-o.touch.start.y;r=o.touch.originalPos.top+a}b(r,"reset",0)}},z=function(t){o.viewport.unbind("touchmove",B);var e=t.originalEvent,n=0;if(o.touch.end.x=e.changedTouches[0].pageX,o.touch.end.y=e.changedTouches[0].pageY,"fade"==o.settings.mode){(i=Math.abs(o.touch.start.x-o.touch.end.x))>=o.settings.swipeThreshold&&(o.touch.start.x>o.touch.end.x?a.goToNextSlide():a.goToPrevSlide(),a.stopAuto())}else{var i=0;"horizontal"==o.settings.mode?(i=o.touch.end.x-o.touch.start.x,n=o.touch.originalPos.left):(i=o.touch.end.y-o.touch.start.y,n=o.touch.originalPos.top),!o.settings.infiniteLoop&&(0==o.active.index&&i>0||o.active.last&&0>i)?b(n,"reset",200):Math.abs(i)>=o.settings.swipeThreshold?(0>i?a.goToNextSlide():a.goToPrevSlide(),a.stopAuto()):b(n,"reset",200)}o.viewport.unbind("touchend",z)},H=function(){var e=t(window).width(),n=t(window).height();(s!=e||c!=n)&&(s=e,c=n,a.redrawSlider(),o.settings.onSliderResize.call(a,o.active.index))};return a.goToSlide=function(e,n){if(!o.working&&o.active.index!=e)if(o.working=!0,o.oldIndex=o.active.index,o.active.index=0>e?v()-1:e>=v()?0:e,o.settings.onSlideBefore(o.children.eq(o.active.index),o.oldIndex,o.active.index),"next"==n?o.settings.onSlideNext(o.children.eq(o.active.index),o.oldIndex,o.active.index):"prev"==n&&o.settings.onSlidePrev(o.children.eq(o.active.index),o.oldIndex,o.active.index),o.active.last=o.active.index>=v()-1,o.settings.pager&&A(o.active.index),o.settings.controls&&j(),"fade"==o.settings.mode)o.settings.adaptiveHeight&&o.viewport.height()!=p()&&o.viewport.animate({height:p()},o.settings.adaptiveHeightSpeed),o.children.filter(":visible").fadeOut(o.settings.speed).css({zIndex:0}),o.children.eq(o.active.index).css("zIndex",o.settings.slideZIndex+1).fadeIn(o.settings.speed,function(){t(this).css("zIndex",o.settings.slideZIndex),F()});else{o.settings.adaptiveHeight&&o.viewport.height()!=p()&&o.viewport.animate({height:p()},o.settings.adaptiveHeightSpeed);var i=0,r={left:0,top:0};if(!o.settings.infiniteLoop&&o.carousel&&o.active.last)if("horizontal"==o.settings.mode){r=(c=o.children.eq(o.children.length-1)).position(),i=o.viewport.width()-c.outerWidth()}else{var s=o.children.length-o.settings.minSlides;r=o.children.eq(s).position()}else if(o.carousel&&o.active.last&&"prev"==n){var c,l=1==o.settings.moveSlides?o.settings.maxSlides-_():(v()-1)*_()-(o.children.length-o.settings.maxSlides);r=(c=a.children(".bx-clone").eq(l)).position()}else if("next"==n&&0==o.active.index)r=a.find("> .bx-clone").eq(o.settings.maxSlides).position(),o.active.last=!1;else if(e>=0){var u=e*_();r=o.children.eq(u).position()}if(void 0!==r){var d="horizontal"==o.settings.mode?-(r.left-i):-r.top;b(d,"slide",o.settings.speed)}}},a.goToNextSlide=function(){if(o.settings.infiniteLoop||!o.active.last){var t=parseInt(o.active.index)+1;a.goToSlide(t,"next")}},a.goToPrevSlide=function(){if(o.settings.infiniteLoop||0!=o.active.index){var t=parseInt(o.active.index)-1;a.goToSlide(t,"prev")}},a.startAuto=function(t){o.interval||(o.interval=setInterval(function(){"next"==o.settings.autoDirection?a.goToNextSlide():a.goToPrevSlide()},o.settings.pause),o.settings.autoControls&&1!=t&&O("stop"))},a.stopAuto=function(t){o.interval&&(clearInterval(o.interval),o.interval=null,o.settings.autoControls&&1!=t&&O("start"))},a.getCurrentSlide=function(){return o.active.index},a.getCurrentSlideElement=function(){return o.children.eq(o.active.index)},a.getSlideCount=function(){return o.children.length},a.redrawSlider=function(){o.children.add(a.find(".bx-clone")).outerWidth(g()),o.viewport.css("height",p()),o.settings.ticker||y(),o.active.last&&(o.active.index=v()-1),o.active.index>=v()&&(o.active.last=!0),o.settings.pager&&!o.settings.pagerCustom&&(w(),A(o.active.index))},a.destroySlider=function(){o.initialized&&(o.initialized=!1,t(".bx-clone",this).remove(),o.children.each(function(){null!=t(this).data("origStyle")?t(this).attr("style",t(this).data("origStyle")):t(this).removeAttr("style")}),null!=t(this).data("origStyle")?this.attr("style",t(this).data("origStyle")):t(this).removeAttr("style"),t(this).unwrap().unwrap(),o.controls.el&&o.controls.el.remove(),o.controls.next&&o.controls.next.remove(),o.controls.prev&&o.controls.prev.remove(),o.pagerEl&&o.settings.controls&&o.pagerEl.remove(),t(".bx-caption",this).remove(),o.controls.autoEl&&o.controls.autoEl.remove(),clearInterval(o.interval),o.settings.responsive&&t(window).unbind("resize",H))},a.reloadSlider=function(t){null!=t&&(r=t),a.destroySlider(),l()},l(),this}}(jQuery),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){"use strict";function e(t){if(t instanceof Date)return t;if(String(t).match(a))return String(t).match(/^[0-9]*$/)&&(t=Number(t)),String(t).match(/\-/)&&(t=String(t).replace(/\-/g,"/")),new Date(t);throw new Error("Couldn't cast `"+t+"` to a date object.")}function n(t){var e=t.toString().replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");return new RegExp(e)}function i(t){return function(e){var i=e.match(/%(-|!)?[A-Z]{1}(:[^;]+;)?/gi);if(i)for(var o=0,a=i.length;o<a;++o){var s=i[o].match(/%(-|!)?([a-zA-Z]{1})(:[^;]+;)?/),l=n(s[0]),u=s[1]||"",d=s[3]||"",h=null;s=s[2],c.hasOwnProperty(s)&&(h=c[s],h=Number(t[h])),null!==h&&("!"===u&&(h=r(d,h)),""===u&&h<10&&(h="0"+h.toString()),e=e.replace(l,h.toString()))}return e.replace(/%%/,"%")}}function r(t,e){var n="s",i="";return t&&(1===(t=t.replace(/(:|;|\s)/gi,"").split(/\,/)).length?n=t[0]:(i=t[0],n=t[1])),Math.abs(e)>1?n:i}var o=[],a=[],s={precision:100,elapse:!1,defer:!1};a.push(/^[0-9]*$/.source),a.push(/([0-9]{1,2}\/){2}[0-9]{4}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),a.push(/[0-9]{4}([\/\-][0-9]{1,2}){2}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),a=new RegExp(a.join("|"));var c={Y:"years",m:"months",n:"daysToMonth",d:"daysToWeek",w:"weeks",W:"weeksToMonth",H:"hours",M:"minutes",S:"seconds",D:"totalDays",I:"totalHours",N:"totalMinutes",T:"totalSeconds"},l=function(e,n,i){this.el=e,this.$el=t(e),this.interval=null,this.offset={},this.options=t.extend({},s),this.instanceNumber=o.length,o.push(this),this.$el.data("countdown-instance",this.instanceNumber),i&&("function"==typeof i?(this.$el.on("update.countdown",i),this.$el.on("stoped.countdown",i),this.$el.on("finish.countdown",i)):this.options=t.extend({},s,i)),this.setFinalDate(n),!1===this.options.defer&&this.start()};t.extend(l.prototype,{start:function(){null!==this.interval&&clearInterval(this.interval);var t=this;this.update(),this.interval=setInterval(function(){t.update.call(t)},this.options.precision)},stop:function(){clearInterval(this.interval),this.interval=null,this.dispatchEvent("stoped")},toggle:function(){this.interval?this.stop():this.start()},pause:function(){this.stop()},resume:function(){this.start()},remove:function(){this.stop.call(this),o[this.instanceNumber]=null,delete this.$el.data().countdownInstance},setFinalDate:function(t){this.finalDate=e(t)},update:function(){if(0!==this.$el.closest("html").length){var e,n=void 0!==t._data(this.el,"events"),i=new Date;e=this.finalDate.getTime()-i.getTime(),e=Math.ceil(e/1e3),e=!this.options.elapse&&e<0?0:Math.abs(e),this.totalSecsLeft!==e&&n&&(this.totalSecsLeft=e,this.elapsed=i>=this.finalDate,this.offset={seconds:this.totalSecsLeft%60,minutes:Math.floor(this.totalSecsLeft/60)%60,hours:Math.floor(this.totalSecsLeft/60/60)%24,days:Math.floor(this.totalSecsLeft/60/60/24)%7,daysToWeek:Math.floor(this.totalSecsLeft/60/60/24)%7,daysToMonth:Math.floor(this.totalSecsLeft/60/60/24%30.4368),weeks:Math.floor(this.totalSecsLeft/60/60/24/7),weeksToMonth:Math.floor(this.totalSecsLeft/60/60/24/7)%4,months:Math.floor(this.totalSecsLeft/60/60/24/30.4368),years:Math.abs(this.finalDate.getFullYear()-i.getFullYear()),totalDays:Math.floor(this.totalSecsLeft/60/60/24),totalHours:Math.floor(this.totalSecsLeft/60/60),totalMinutes:Math.floor(this.totalSecsLeft/60),totalSeconds:this.totalSecsLeft},this.options.elapse||0!==this.totalSecsLeft?this.dispatchEvent("update"):(this.stop(),this.dispatchEvent("finish")))}else this.remove()},dispatchEvent:function(e){var n=t.Event(e+".countdown");n.finalDate=this.finalDate,n.elapsed=this.elapsed,n.offset=t.extend({},this.offset),n.strftime=i(this.offset),this.$el.trigger(n)}}),t.fn.countdown=function(){var e=Array.prototype.slice.call(arguments,0);return this.each(function(){var n=t(this).data("countdown-instance");if(void 0!==n){var i=o[n],r=e[0];l.prototype.hasOwnProperty(r)?i[r].apply(i,e.slice(1)):null===String(r).match(/^[$A-Z_][0-9A-Z_$]*$/i)?(i.setFinalDate.call(i,r),i.start()):t.error("Method %s does not exist on jQuery.countdown".replace(/\%s/gi,r))}else new l(this,e[0],e[1])})}}),function(){$.fn.extend({fileDownload:function(t){return this.each(function(){var e,n;return this.token=(new Date).getTime(),this.start=function(){return window.setTimeout((t=this,function(){return t.verify()}),500);var t},this.verify=function(){return window.clearTimeout(this.timer),$.getScript(t+"?download_token="+this.token,(e=this,function(t){return JSON.parse(t)?e.elem.trigger("fileDownload:complete"):e.timer=window.setTimeout(function(){return e.verify()},500)}));var e},this.elem=$(this),this.elem.is("form")?(this.elem.append("<input type='hidden' value='"+this.token+"' name='download_token' />"),this.elem.on("submit.fileDownload",(n=this,function(){return n.start(),!0}))):(e=this.elem.attr("href").split("?").length>1?this.elem.attr("href")+"&download_token="+this.token:this.elem.attr("href")+"?download_token="+this.token,this.elem.attr("href",e),this.elem.on("click.fileDownload",function(t){return function(){return t.start(),!0}}(this))),this})}})}.call(this),function(t){t.fn.floatingMenu=function(){return this.each(function(){var e=t(this),n=e.offset().top,i=e.width();t(window).off("scroll.floatingMenu"),t(window).on("scroll.floatingMenu",function(){t(window).scrollTop()>n?"fixed"!=e.css("position")&&(e.css({position:"fixed",top:0,width:i}),e.addClass("fixed")):"relative"!=e.css("position")&&(e.css({position:"relative"}),e.removeClass("fixed"))});var r=e.find("a").map(function(){var e=t(this).attr("href");return{link:t(this),section:t(e),offsetTop:t(e).offset().top-30}});t(window).off("scroll.floatingMenu:activator"),t(window).on("scroll.floatingMenu:activator",function(){if(!t(window).data("animatedAnchor.animating")){var e=null;r.each(function(){this.link.parent().removeClass("actived"),t(window).scrollTop()>this.offsetTop&&(null==e||this.offsetTop>e.offsetTop)&&(e=this)}),null!=e&&e.link.parent().addClass("actived")}})})}}(jQuery),function(){$.fn.extend({formUsability:function(){return this.each(function(){var t,e;if(!(t=$(this)).is("form"))throw"AjaxUpload: Element should be a form";return this.scope=t.parents("*[data-form-scope]:first"),this.success=this.scope.find("*[data-form-success]"),this.fields=this.scope.find("*[data-form-fields]"),this.loader=this.scope.find("*[data-form-loader]"),t.on("formUsability:before",(e=this,function(){if(e.fields.size()&&e.fields.hide(),e.success.size()&&e.success.hide(),e.loader.size())return e.loader.show()})),t.on("formUsability:success",function(t){return function(){return t.loader.size()&&t.loader.hide(),t.success.size()?t.success.show():t.fields.size()?t.fields.show():void 0}}(this)),t.on("formUsability:error",function(t){return function(){if(t.loader.size()&&t.loader.hide(),t.success.size()&&t.success.hide(),t.fields.size())return t.fields.show()}}(this)),t.on("submit.usability",function(){return $(this).trigger("formUsability:before"),!0}),t.on("ajax:complete.usability",function(){return $(this).trigger("formUsability:success"),!0}),this})}})}.call(this),function(){$.fn.extend({formValidation:function(t){return this.each(function(){if(this.form=$(this),!this.form.is("form"))throw"FormValidation: Element should be a form";var e;return this.options=t,this.errors={},this.validate_presence=function(t){var e;return(e=this.form.find("input[name='"+t+"']")).is("input[type=checkbox]")&&(e=this.form.find("input[name='"+t+"']:checked")),null!=e.val()&&""!==e.val().trim()||this.errors.push([t,"presence"]),!0},this.form.on("submit.formValidation",(e=this,function(t){return e.run_validations(),!(e.errors.length>0&&(e.form.trigger("formValidation:error",[e.errors]),t.stopImmediatePropagation(),t.preventDefault(),1))})),this.run_validations=function(){var t,e,n,i;for(t in this.errors=[],n=[],e=this.options)i=e[t],n.push(this["validate_"+i](t));return n},this})}})}.call(this),function(t){t.Jcrop=function(e,n){function i(t){return parseInt(t,10)+"px"}function r(t){return parseInt(t,10)+"%"}function o(t){return z.baseClass+"-"+t}function a(){return t.fx.step.hasOwnProperty("backgroundColor")}function s(e){var n=t(e).offset();return[n.left,n.top]}function c(t){return[t.pageX-R[0],t.pageY-R[1]]}function l(e){"object"!=typeof e&&(e={}),"function"!=typeof(z=t.extend(z,e)).onChange&&(z.onChange=function(){}),"function"!=typeof z.onSelect&&(z.onSelect=function(){}),"function"!=typeof z.onRelease&&(z.onRelease=function(){})}function u(t){t!==B&&(pt.setCursor(t),B=t)}function d(t,e){if(R=s(W),pt.setCursor("move"===t?t:t+"-resize"),"move"===t)return pt.activateHandlers(f(e),b);var n=dt.getFixed(),i=g(t),r=dt.getCorner(g(i));dt.setPressed(dt.getCorner(i)),dt.setCurrent(r),pt.activateHandlers(p(t,n),b)}function p(t,e){return function(n){if(z.aspectRatio)switch(t){case"e":case"w":n[1]=e.y+1;break;case"n":case"s":n[0]=e.x+1}else switch(t){case"e":case"w":n[1]=e.y2;break;case"n":case"s":n[0]=e.x2}dt.setCurrent(n),ht.update()}}function f(t){var e=t;return ft.watchKeys(),function(t){dt.moveOffset([t[0]-e[0],t[1]-e[1]]),e=t,ht.update()}}function g(t){switch(t){case"n":return"sw";case"s":case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function m(t){return function(e){return!z.disabled&&(!("move"===t&&!z.allowMove)&&(ot=!0,d(t,c(e)),e.stopPropagation(),e.preventDefault(),!1))}}function v(t,e,n){var i=t.width(),r=t.height();i>e&&e>0&&(i=e,r=e/t.width()*t.height()),r>n&&n>0&&(r=n,i=n/t.height()*t.width()),it=t.width()/i,rt=t.height()/r,t.width(i).height(r)}function _(t){return{x:parseInt(t.x*it,10),y:parseInt(t.y*rt,10),x2:parseInt(t.x2*it,10),y2:parseInt(t.y2*rt,10),w:parseInt(t.w*it,10),h:parseInt(t.h*rt,10)}}function b(){var t=dt.getFixed();t.w>z.minSelect[0]&&t.h>z.minSelect[1]?(ht.enableHandles(),ht.done()):ht.release(),pt.setCursor(z.allowSelect?"crosshair":"default")}function C(t){if(z.disabled)return!1;if(!z.allowSelect)return!1;ot=!0,R=s(W),ht.disableHandles(),u("crosshair");var e=c(t);return dt.setPressed(e),ht.update(),pt.activateHandlers(k,b),ft.watchKeys(),t.stopPropagation(),t.preventDefault(),!1}function k(t){dt.setCurrent(t),ht.update()}function $(){var e=t("<div></div>").addClass(o("tracker"));return t.browser.msie&&e.css({opacity:0,backgroundColor:"white"}),e}function T(t){K.removeClass().addClass(o("holder")).addClass(t)}function S(t,e){function n(){window.setTimeout(_,d)}var i=parseInt(t[0],10)/it,r=parseInt(t[1],10)/rt,o=parseInt(t[2],10)/it,a=parseInt(t[3],10)/rt;if(!at){var s=dt.flipCoords(i,r,o,a),c=dt.getFixed(),l=[c.x,c.y,c.x2,c.y2],u=l,d=z.animationDelay,h=s[0]-l[0],p=s[1]-l[1],f=s[2]-l[2],g=s[3]-l[3],m=0,v=z.swingSpeed;x=u[0],y=u[1],o=u[2],a=u[3],ht.animMode(!0);var _=function(){m+=(100-m)/v,u[0]=x+m/100*h,u[1]=y+m/100*p,u[2]=o+m/100*f,u[3]=a+m/100*g,m>=99.8&&(m=100),m<100?(I(u),n()):(ht.done(),"function"==typeof e&&e.call(gt))};n()}}function E(t){I([parseInt(t[0],10)/it,parseInt(t[1],10)/rt,parseInt(t[2],10)/it,parseInt(t[3],10)/rt])}function I(t){dt.setPressed([t[0],t[1]]),dt.setCurrent([t[2],t[3]]),ht.update()}function D(){return _(dt.getFixed())}function A(){return dt.getFixed()}function F(t){l(t),N()}function O(){z.disabled=!0,ht.disableHandles(),ht.setCursor("default"),pt.setCursor("default")}function j(){z.disabled=!1,N()}function M(){ht.done(),pt.activateHandlers(null,null)}function L(){K.remove(),q.show(),t(e).removeData("Jcrop")}function P(t,e){ht.release(),O();var n=new Image;n.onload=function(){var i=n.width,r=n.height,o=z.boxWidth,a=z.boxHeight;W.width(i).height(r),W.attr("src",t),Q.attr("src",t),v(W,o,a),Y=W.width(),V=W.height(),Q.width(Y).height(V),ct.width(Y+2*st).height(V+2*st),K.width(Y).height(V),j(),"function"==typeof e&&e.call(gt)},n.src=t}function N(t){z.allowResize?t?ht.enableOnly():ht.enableHandles():ht.disableHandles(),pt.setCursor(z.allowSelect?"crosshair":"default"),ht.setCursor(z.allowMove?"move":"default"),z.hasOwnProperty("setSelect")&&(E(z.setSelect),ht.done(),delete z.setSelect),z.hasOwnProperty("trueSize")&&(it=z.trueSize[0]/Y,rt=z.trueSize[1]/V),z.hasOwnProperty("bgColor")&&(a()&&z.fadeTime?K.animate({backgroundColor:z.bgColor},{queue:!1,duration:z.fadeTime}):K.css("backgroundColor",z.bgColor),delete z.bgColor),z.hasOwnProperty("bgOpacity")&&(lt=z.bgOpacity,ht.isAwake()&&(z.fadeTime?W.fadeTo(z.fadeTime,lt):K.css("opacity",z.opacity)),delete z.bgOpacity),G=z.maxSize[0]||0,tt=z.maxSize[1]||0,et=z.minSize[0]||0,nt=z.minSize[1]||0,z.hasOwnProperty("outerImage")&&(W.attr("src",z.outerImage),delete z.outerImage),ht.refresh()}var R,B,z=t.extend({},t.Jcrop.defaults),H=!1;t.browser.msie&&"6"===t.browser.version.split(".")[0]&&(H=!0),"object"!=typeof e&&(e=t(e)[0]),"object"!=typeof n&&(n={}),l(n);var U={border:"none",margin:0,padding:0,position:"absolute"},q=t(e),W=q.clone().removeAttr("id").css(U);W.width(q.width()),W.height(q.height()),q.after(W).hide(),v(W,z.boxWidth,z.boxHeight);var Y=W.width(),V=W.height(),K=t("<div />").width(Y).height(V).addClass(o("holder")).css({position:"relative",backgroundColor:z.bgColor}).insertAfter(q).append(W);delete z.bgColor,z.addClass&&K.addClass(z.addClass);var Q=t("<img />").attr("src",W.attr("src")).css(U).width(Y).height(V),X=t("<div />").width(r(100)).height(r(100)).css({zIndex:310,position:"absolute",overflow:"hidden"}).append(Q),J=t("<div />").width(r(100)).height(r(100)).css("zIndex",320),Z=t("<div />").css({position:"absolute",zIndex:300}).insertBefore(W).append(X,J);H&&Z.css({overflowY:"hidden"});var G,tt,et,nt,it,rt,ot,at,st=z.boundary,ct=$().width(Y+2*st).height(V+2*st).css({position:"absolute",top:i(-st),left:i(-st),zIndex:290}).mousedown(C),lt=z.bgOpacity;R=s(W);var ut=function(){function t(){var t,e={},n=["touchstart","touchmove","touchend"],i=document.createElement("div");try{for(t=0;t<n.length;t++){var r=n[t],o=(r="on"+r)in i;o||(i.setAttribute(r,"return;"),o="function"==typeof i[r]),e[n[t]]=o}return e.touchstart&&e.touchend&&e.touchmove}catch(a){return!1}}function e(){return!0===z.touchSupport||!1===z.touchSupport?z.touchSupport:t()}return{createDragger:function(t){return function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,!z.disabled&&(!("move"===t&&!z.allowMove)&&(ot=!0,d(t,c(e)),e.stopPropagation(),e.preventDefault(),!1))}},newSelection:function(t){return t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,C(t)},isSupported:t,support:e()}}(),dt=function(){function t(t){t=a(t),g=p=t[0],m=f=t[1]}function e(t){t=a(t),u=t[0]-g,d=t[1]-m,g=t[0],m=t[1]}function n(){return[u,d]}function i(t){var e=t[0],n=t[1];0>p+e&&(e-=e+p),0>f+n&&(n-=n+f),V<m+n&&(n+=V-(m+n)),Y<g+e&&(e+=Y-(g+e)),p+=e,g+=e,f+=n,m+=n}function r(t){var e=o();switch(t){case"ne":return[e.x2,e.y];case"nw":return[e.x,e.y];case"se":return[e.x2,e.y2];case"sw":return[e.x,e.y2]}}function o(){if(!z.aspectRatio)return c();var t,e,n=z.aspectRatio,i=z.minSize[0]/it,r=z.maxSize[0]/it,o=z.maxSize[1]/rt,a=g-p,u=m-f,d=Math.abs(a),v=Math.abs(u);return 0===r&&(r=10*Y),0===o&&(o=10*V),d/v<n?(e=m,w=v*n,(t=a<0?p-w:w+p)<0?(t=0,h=Math.abs((t-p)/n),e=u<0?f-h:h+f):t>Y&&(t=Y,h=Math.abs((t-p)/n),e=u<0?f-h:h+f)):(t=g,h=d/n,(e=u<0?f-h:f+h)<0?(e=0,w=Math.abs((e-f)*n),t=a<0?p-w:w+p):e>V&&(e=V,w=Math.abs(e-f)*n,t=a<0?p-w:w+p)),t>p?(t-p<i?t=p+i:t-p>r&&(t=p+r),e=e>f?f+(t-p)/n:f-(t-p)/n):t<p&&(p-t<i?t=p-i:p-t>r&&(t=p-r),e=e>f?f+(p-t)/n:f-(p-t)/n),t<0?(p-=t,t=0):t>Y&&(p-=t-Y,t=Y),e<0?(f-=e,e=0):e>V&&(f-=e-V,e=V),l(s(p,f,t,e))}function a(t){return t[0]<0&&(t[0]=0),t[1]<0&&(t[1]=0),t[0]>Y&&(t[0]=Y),t[1]>V&&(t[1]=V),[t[0],t[1]]}function s(t,e,n,i){var r=t,o=n,a=e,s=i;return n<t&&(r=n,o=t),i<e&&(a=i,s=e),[Math.round(r),Math.round(a),Math.round(o),Math.round(s)]}function c(){var t,e=g-p,n=m-f;return G&&Math.abs(e)>G&&(g=e>0?p+G:p-G),tt&&Math.abs(n)>tt&&(m=n>0?f+tt:f-tt),nt/rt&&Math.abs(n)<nt/rt&&(m=n>0?f+nt/rt:f-nt/rt),et/it&&Math.abs(e)<et/it&&(g=e>0?p+et/it:p-et/it),p<0&&(g-=p,p-=p),f<0&&(m-=f,f-=f),g<0&&(p-=g,g-=g),m<0&&(f-=m,m-=m),g>Y&&(p-=t=g-Y,g-=t),m>V&&(f-=t=m-V,m-=t),p>Y&&(m-=t=p-V,f-=t),f>V&&(m-=t=f-V,f-=t),l(s(p,f,g,m))}function l(t){return{x:t[0],y:t[1],x2:t[2],y2:t[3],w:t[2]-t[0],h:t[3]-t[1]}}var u,d,p=0,f=0,g=0,m=0;return{flipCoords:s,setPressed:t,setCurrent:e,getOffset:n,moveOffset:i,getCorner:r,getFixed:o}}(),ht=function(){function e(e){var n=t("<div />").css({position:"absolute",opacity:z.borderOpacity}).addClass(o(e));return X.append(n),n}function n(e,n){var i=t("<div />").mousedown(m(e)).css({cursor:e+"-resize",position:"absolute",zIndex:n});return ut.support&&i.bind("touchstart",ut.createDragger(e)),J.append(i),i}function a(t){return n(t,T++).css({top:i(1-I),left:i(1-I),opacity:z.handleOpacity}).addClass(o("handle"))}function s(t){var e=z.handleSize,o=e,a=e,s=I,c=I;switch(t){case"n":case"s":a=r(100);break;case"e":case"w":o=r(100)}return n(t,T++).width(a).height(o).css({top:i(1-s),left:i(1-c)})}function c(t){var e;for(e=0;e<t.length;e++)S[t[e]]=a(t[e])}function l(t){var e=Math.round(t.h/2-I),n=Math.round(t.w/2-I),r=t.w-I,o=t.h-I;S.e&&(S.e.css({top:i(e),left:i(r)}),S.w.css({top:i(e)}),S.s.css({top:i(o),left:i(n)}),S.n.css({left:i(n)})),S.ne&&(S.ne.css({left:i(r)}),S.se.css({top:i(o),left:i(r)}),S.sw.css({top:i(o)})),S.b&&(S.b.css({top:i(o)}),S.r.css({left:i(r)}))}function u(t,e){Q.css({top:i(-e),left:i(-t)}),Z.css({top:i(e),left:i(t)})}function d(t,e){Z.width(t).height(e)}function h(){var t=dt.getFixed();dt.setPressed([t.x,t.y]),dt.setCurrent([t.x2,t.y2]),p()}function p(){if(k)return f()}function f(){var t=dt.getFixed();d(t.w,t.h),u(t.x,t.y),E&&l(t),k||g(),z.onChange.call(gt,_(t))}function g(){Z.show(),z.bgFade?W.fadeTo(z.fadeTime,lt):W.css("opacity",lt),k=!0}function v(){w(),Z.hide(),z.bgFade?W.fadeTo(z.fadeTime,1):W.css("opacity",1),k=!1,z.onRelease.call(gt)}function y(){E&&(l(dt.getFixed()),J.show())}function b(){if(E=!0,z.allowResize)return l(dt.getFixed()),J.show(),!0}function w(){E=!1,J.hide()}function x(t){at===t?w():b()}function C(){x(!1),h()}var k,T=370,S={},E=!1,I=z.handleOffset;z.drawBorders&&(e("hline"),e("hline bottom"),e("vline"),e("vline right")),z.dragEdges&&(S.t=s("n"),S.b=s("s"),S.r=s("e"),S.l=s("w")),z.sideHandles&&c(["n","s","e","w"]),z.cornerHandles&&c(["sw","nw","ne","se"]);var D=$().mousedown(m("move")).css({cursor:"move",position:"absolute",zIndex:360});return ut.support&&D.bind("touchstart.jcrop",ut.createDragger("move")),X.append(D),w(),{updateVisible:p,update:f,release:v,refresh:h,isAwake:function(){return k},setCursor:function(t){D.css("cursor",t)},enableHandles:b,enableOnly:function(){E=!0},showHandles:y,disableHandles:w,animMode:x,done:C}}(),pt=function(){function e(){ct.css({zIndex:450}),h&&t(document).bind("mousemove",i).bind("mouseup",r)}function n(){ct.css({zIndex:290}),h&&t(document).unbind("mousemove",i).unbind("mouseup",r)}function i(t){return u(c(t)),!1}function r(t){return t.preventDefault(),t.stopPropagation(),ot&&(ot=!1,d(c(t)),ht.isAwake()&&z.onSelect.call(gt,_(dt.getFixed())),n(),u=function(){},d=function(){}),!1}function o(t,n){return ot=!0,u=t,d=n,e(),!1}function a(t){return t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,i(t)}function s(t){return t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,r(t)}function l(t){ct.css("cursor",t)}var u=function(){},d=function(){},h=z.trackDocument;return ut.support&&t(document).bind("touchmove",a).bind("touchend",s),h||ct.mousemove(i).mouseup(r).mouseout(r),W.before(ct),{activateHandlers:o,setCursor:l}}(),ft=function(){function e(){z.keySupport&&(o.show(),o.focus())}function n(){o.hide()}function i(t,e,n){z.allowMove&&(dt.moveOffset([e,n]),ht.updateVisible()),t.preventDefault(),t.stopPropagation()}function r(t){if(t.ctrlKey)return!0;var e=!!t.shiftKey?10:1;switch(t.keyCode){case 37:i(t,-e,0);break;case 39:i(t,e,0);break;case 38:i(t,0,-e);break;case 40:i(t,0,e);break;case 27:ht.release();break;case 9:return!0}return!1}var o=t('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}),a=t("<div />").css({position:"absolute",overflow:"hidden"}).append(o);return z.keySupport&&(o.keydown(r).blur(n),H||!z.fixedSupport?(o.css({position:"absolute",left:"-20px"}),a.append(o).insertBefore(W)):o.insertBefore(W)),{watchKeys:e}}();ut.support&&ct.bind("touchstart",ut.newSelection),J.hide(),N(!0);var gt={setImage:P,animateTo:S,setSelect:E,setOptions:F,tellSelect:D,tellScaled:A,setClass:T,disable:O,enable:j,cancel:M,release:ht.release,destroy:L,focus:ft.watchKeys,getBounds:function(){return[Y*it,V*rt]},getWidgetSize:function(){return[Y,V]},getScaleFactor:function(){return[it,rt]},ui:{holder:K,selection:Z}};return t.browser.msie&&K.bind("selectstart",function(){return!1}),q.data("Jcrop",gt),gt},t.fn.Jcrop=function(e,n){function i(i){var r="object"==typeof e?e:{},o=r.useImg||i.src,a=new Image;a.onload=function(){function e(){var e=t.Jcrop(i,r);"function"==typeof n&&n.call(e)}function o(){a.width&&a.height?e():window.setTimeout(o,50)}window.setTimeout(o,50)},a.src=o}return this.each(function(){if(t(this).data("Jcrop")){if("api"===e)return t(this).data("Jcrop");t(this).data("Jcrop").setOptions(e)}else i(this)}),this},t.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:9,handleOffset:5,aspectRatio:0,keySupport:!0,cornerHandles:!0,sideHandles:!0,drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onRelease:function(){}}}(jQuery),/*!jQuery Knob*/function(t){"use strict";var e={},n=Math.max,i=Math.min;e.c={},e.c.d=t(document),e.c.t=function(t){return t.originalEvent.touches.length-1},e.o=function(){var n=this;this.o=null,this.$=null,this.i=null,this.g=null,this.v=null,this.cv=null,this.x=0,this.y=0,this.$c=null,this.c=null,this.t=0,this.isInit=!1,this.fgColor=null,this.pColor=null,this.dH=null,this.cH=null,this.eH=null,this.rH=null,this.run=function(){var e=function(t,e){var i;for(i in e)n.o[i]=e[i];n.init(),n._configure()._draw()};if(!this.$.data("kontroled"))return this.$.data("kontroled",!0),this.extend(),this.o=t.extend({min:this.$.data("min")||0,max:this.$.data("max")||100,stopper:!0,readOnly:this.$.data("readonly"),cursor:(!0===this.$.data("cursor")?30:this.$.data("cursor"))||0,thickness:this.$.data("thickness")||.35,lineCap:this.$.data("linecap")||"butt",width:this.$.data("width")||200,height:this.$.data("height")||200,displayInput:null==this.$.data("displayinput")||this.$.data("displayinput"),displayPrevious:this.$.data("displayprevious"),fgColor:this.$.data("fgcolor")||"#87CEEB",inputColor:this.$.data("inputcolor")||this.$.data("fgcolor")||"#87CEEB",inline:!1,step:this.$.data("step")||1,draw:null,change:null,cancel:null,release:null},this.o),this.$.is("fieldset")?(this.v={},this.i=this.$.find("input"),this.i.each(function(e){var i=t(this);n.i[e]=i,n.v[e]=i.val(),i.bind("change",function(){var t={};t[e]=i.val(),n.val(t)})}),this.$.find("legend").remove()):(this.i=this.$,this.v=this.$.val(),""==this.v&&(this.v=this.o.min),this.$.bind("change",function(){n.val(n._validate(n.$.val()))})),!this.o.displayInput&&this.$.hide(),this.$c=t('<canvas width="'+this.o.width+'px" height="'+this.o.height+'px"></canvas>'),this.c=this.$c[0].getContext("2d"),this.$.wrap(t('<div style="'+(this.o.inline?"display:inline;":"")+"width:"+this.o.width+"px;height:"+this.o.height+'px;"></div>')).before(this.$c),this.v instanceof Object?(this.cv={},this.copy(this.v,this.cv)):this.cv=this.v,this.$.bind("configure",e).parent().bind("configure",e),this._listen()._configure()._xy().init(),this.isInit=!0,this._draw(),this},this._draw=function(){var t=!0,e=document.createElement("canvas");e.width=n.o.width,e.height=n.o.height,n.g=e.getContext("2d"),n.clear(),n.dH&&(t=n.dH()),!1!==t&&n.draw(),n.c.drawImage(e,0,0),e=null},this._touch=function(t){var i=function(t){var e=n.xy2val(t.originalEvent.touches[n.t].pageX,t.originalEvent.touches[n.t].pageY);e!=n.cv&&(n.cH&&!1===n.cH(e)||(n.change(n._validate(e)),n._draw()))};return this.t=e.c.t(t),i(t),e.c.d.bind("touchmove.k",i).bind("touchend.k",function(){e.c.d.unbind("touchmove.k touchend.k"),n.rH&&!1===n.rH(n.cv)||n.val(n.cv)}),this},this._mouse=function(t){var i=function(t){var e=n.xy2val(t.pageX,t.pageY);e!=n.cv&&(n.cH&&!1===n.cH(e)||(n.change(n._validate(e)),n._draw()))};return i(t),e.c.d.bind("mousemove.k",i).bind("keyup.k",function(t){if(27===t.keyCode){if(e.c.d.unbind("mouseup.k mousemove.k keyup.k"),n.eH&&!1===n.eH())return;n.cancel()}}).bind("mouseup.k",function(){e.c.d.unbind("mousemove.k mouseup.k keyup.k"),n.rH&&!1===n.rH(n.cv)||n.val(n.cv)}),this},this._xy=function(){var t=this.$c.offset();return this.x=t.left,this.y=t.top,this},this._listen=function(){return this.o.readOnly?this.$.attr("readonly","readonly"):(this.$c.bind("mousedown",function(t){t.preventDefault(),n._xy()._mouse(t)}).bind("touchstart",function(t){t.preventDefault(),n._xy()._touch(t)}),this.listen()),this},this._configure=function(){return this.o.draw&&(this.dH=this.o.draw),this.o.change&&(this.cH=this.o.change),this.o.cancel&&(this.eH=this.o.cancel),this.o.release&&(this.rH=this.o.release),this.o.displayPrevious?(this.pColor=this.h2rgba(this.o.fgColor,"0.4"),this.fgColor=this.h2rgba(this.o.fgColor,"0.6")):this.fgColor=this.o.fgColor,this},this._clear=function(){this.$c[0].width=this.$c[0].width},this._validate=function(t){return~~((t<0?-.5:.5)+t/this.o.step)*this.o.step},this.listen=function(){},this.extend=function(){},this.init=function(){},this.change=function(){},this.val=function(){},this.xy2val=function(){},this.draw=function(){},this.clear=function(){this._clear()},this.h2rgba=function(t,e){var n;return t=t.substring(1,7),"rgba("+(n=[parseInt(t.substring(0,2),16),parseInt(t.substring(2,4),16),parseInt(t.substring(4,6),16)])[0]+","+n[1]+","+n[2]+","+e+")"},this.copy=function(t,e){for(var n in t)e[n]=t[n]}},e.Dial=function(){e.o.call(this),this.startAngle=null,this.xy=null,this.radius=null,this.lineWidth=null,this.cursorExt=null,this.w2=null,this.PI2=2*Math.PI,this.extend=function(){this.o=t.extend({bgColor:this.$.data("bgcolor")||"#EEEEEE",angleOffset:this.$.data("angleoffset")||0,angleArc:this.$.data("anglearc")||360,inline:!0},this.o)},this.val=function(t){if(null==t)return this.v;this.cv=this.o.stopper?n(i(t,this.o.max),this.o.min):t,this.v=this.cv,this.$.val(this.v),this._draw()},this.xy2val=function(t,e){var r,o;return r=Math.atan2(t-(this.x+this.w2),-(e-this.y-this.w2))-this.angleOffset,this.angleArc!=this.PI2&&r<0&&r>-.5?r=0:r<0&&(r+=this.PI2),o=~~(.5+r*(this.o.max-this.o.min)/this.angleArc)+this.o.min,this.o.stopper&&(o=n(i(o,this.o.max),this.o.min)),o},this.listen=function(){var e,r,o=this,a=function(t){t.preventDefault();var e=t.originalEvent,n=e.detail||e.wheelDeltaX,i=e.detail||e.wheelDeltaY,r=parseInt(o.$.val())+(n>0||i>0?o.o.step:n<0||i<0?-o.o.step:0);o.cH&&!1===o.cH(r)||o.val(r)},s=1,c={37:-o.o.step,38:o.o.step,39:o.o.step,40:-o.o.step};this.$.bind("keydown",function(a){var l=a.keyCode;if(l>=96&&l<=105&&(l=a.keyCode=l-48),e=parseInt(String.fromCharCode(l)),isNaN(e)&&(13!==l&&8!==l&&9!==l&&189!==l&&a.preventDefault(),t.inArray(l,[37,38,39,40])>-1)){a.preventDefault();var u=parseInt(o.$.val())+c[l]*s;o.o.stopper&&(u=n(i(u,o.o.max),o.o.min)),o.change(u),o._draw(),r=window.setTimeout(function(){s*=2},30)}}).bind("keyup",function(){isNaN(e)?r&&(window.clearTimeout(r),r=null,s=1,o.val(o.$.val())):o.$.val()>o.o.max&&o.$.val(o.o.max)||o.$.val()<o.o.min&&o.$.val(o.o.min)}),this.$c.bind("mousewheel DOMMouseScroll",a),this.$.bind("mousewheel DOMMouseScroll",a)},this.init=function(){(this.v<this.o.min||this.v>this.o.max)&&(this.v=this.o.min),this.$.val(this.v),this.w2=this.o.width/2,this.cursorExt=this.o.cursor/100,this.xy=this.w2,this.lineWidth=this.xy*this.o.thickness,this.lineCap=this.o.lineCap,this.radius=this.xy-this.lineWidth/2,this.o.angleOffset&&(this.o.angleOffset=isNaN(this.o.angleOffset)?0:this.o.angleOffset),this.o.angleArc&&(this.o.angleArc=isNaN(this.o.angleArc)?this.PI2:this.o.angleArc),this.angleOffset=this.o.angleOffset*Math.PI/180,this.angleArc=this.o.angleArc*Math.PI/180,this.startAngle=1.5*Math.PI+this.angleOffset,this.endAngle=1.5*Math.PI+this.angleOffset+this.angleArc;var t=n(String(Math.abs(this.o.max)).length,String(Math.abs(this.o.min)).length,2)+2;this.o.displayInput&&this.i.css({width:(this.o.width/2+4>>0)+"px",height:(this.o.width/3>>0)+"px",position:"absolute","vertical-align":"middle","margin-top":(this.o.width/3>>0)+"px","margin-left":"-"+(3*this.o.width/4+2>>0)+"px",border:0,background:"none",font:"bold "+(this.o.width/t>>0)+"px Arial","text-align":"center",color:this.o.inputColor||this.o.fgColor,padding:"0px","-webkit-appearance":"none"})||this.i.css({width:"0px",visibility:"hidden"})},this.change=function(t){this.cv=t,this.$.val(t)},this.angle=function(t){return(t-this.o.min)*this.angleArc/(this.o.max-this.o.min)},this.draw=function(){var t,e,n=this.g,i=this.angle(this.cv),r=this.startAngle,o=r+i,a=1;n.lineWidth=this.lineWidth,n.lineCap=this.lineCap,this.o.cursor&&(r=o-this.cursorExt)&&(o+=this.cursorExt),n.beginPath(),n.strokeStyle=this.o.bgColor,n.arc(this.xy,this.xy,this.radius,this.endAngle-1e-5,this.startAngle+1e-5,!0),n.stroke(),this.o.displayPrevious&&(e=this.startAngle+this.angle(this.v),t=this.startAngle,this.o.cursor&&(t=e-this.cursorExt)&&(e+=this.cursorExt),n.beginPath(),n.strokeStyle=this.pColor,n.arc(this.xy,this.xy,this.radius,t,e,!1),n.stroke(),a=this.cv==this.v),n.beginPath(),n.strokeStyle=a?this.o.fgColor:this.fgColor,n.arc(this.xy,this.xy,this.radius,r,o,!1),n.stroke()},this.cancel=function(){this.val(this.v)}},t.fn.dial=t.fn.knob=function(n){return this.each(function(){var i=new e.Dial;i.o=n,i.$=t(this),i.run()}).parent()}}(jQuery),function(t){t.browser||(t.browser={},t.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),t.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),t.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),t.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()));var e={destroy:function(){return t(this).unbind(".maskMoney"),t.browser.msie?this.onpaste=null:t.browser.mozilla&&this.removeEventListener("input",blurEvent,!1),this},mask:function(){return this.trigger("mask")},init:function(e){return e=t.extend({symbol:"",symbolStay:!1,thousands:",",decimal:".",precision:2,defaultZero:!0,allowZero:!1,allowNegative:!1},e),this.each(function(){function n(){_=!0}function i(){_=!1}function r(e){var r=(e=e||window.event).which||e.charCode||e.keyCode;if(r==undefined)return!1;if(r<48||r>57)return 45==r?(n(),v.val(f(v)),!1):43==r?(n(),v.val(v.val().replace("-","")),!1):13==r||9==r?(_&&(i(),t(this).change()),!0):!(!t.browser.mozilla||37!=r&&39!=r||0!=e.charCode)||(c(e),!0);if(v.val().length>=v.attr("maxlength"))return!1;c(e);var o=String.fromCharCode(r),a=v.get(0),s=m(a),u=s.start,d=s.end;return a.value=a.value.substring(0,u)+o+a.value.substring(d,a.value.length),l(a,u+1),n(),!1}function o(e){var r=(e=e||window.event).which||e.charCode||e.keyCode;if(r==undefined)return!1;var o=v.get(0),a=m(o),s=a.start,u=a.end;return 8==r?(c(e),s==u?(o.value=o.value.substring(0,s-1)+o.value.substring(u,o.value.length),s-=1):o.value=o.value.substring(0,s)+o.value.substring(u,o.value.length),l(o,s),n(),!1):9==r?(_&&(t(this).change(),i()),!0):46!=r&&63272!=r||(c(e),o.selectionStart==o.selectionEnd?o.value=o.value.substring(0,s)+o.value.substring(u+1,o.value.length):o.value=o.value.substring(0,s)+o.value.substring(u,o.value.length),l(o,s),n(),!1)}function a(){var t=h();if(v.val()==t||""==v.val()&&e.defaultZero&&v.val(p(t)),this.createTextRange){var n=this.createTextRange();n.collapse(!1),n.select()}}function s(n){t.browser.msie&&r(n),""==v.val()||v.val()==p(h())||v.val()==e.symbol?e.allowZero?e.symbolStay?v.val(p(h())):v.val(h()):v.val(""):e.symbolStay?e.symbolStay&&v.val()==e.symbol&&v.val(p(h())):v.val(v.val().replace(e.symbol,""))}function c(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function l(t,e){var n=v.val().length;v.val(d(t.value));var i=v.val().length;g(v,e-=n-i)}function u(){var t=v.val();v.val(d(t))}function d(t){var n="0123456789",i=(t=t.replace(e.symbol,"")).length,r="",o="",a="";if(0!=i&&"-"==t.charAt(0)&&(t=t.replace("-",""),e.allowNegative&&(v.addClass("negative"),a="-")),0==i){if(!e.defaultZero)return o;o="0.00"}for(var s=0;s<i&&("0"==t.charAt(s)||t.charAt(s)==e.decimal);s++);for(;s<i;s++)-1!=n.indexOf(t.charAt(s))&&(r+=t.charAt(s));var c=parseFloat(r);o=(c=isNaN(c)?0:c/Math.pow(10,e.precision)).toFixed(e.precision),s=0==e.precision?0:1;var l,u=(o=o.split("."))[s].substr(0,e.precision);for(l=(o=o[0]).length;(l-=3)>=1;)o=o.substr(0,l)+e.thousands+o.substr(l);return e.precision>0?p(a+o+e.decimal+u+Array(e.precision+1-u.length).join(0)):p(a+o)}function h(){return(parseFloat("0")/Math.pow(10,e.precision)).toFixed(e.precision).replace(new RegExp("\\.","g"),e.decimal)}function p(t){if(""!=e.symbol){var n="";0!=t.length&&"-"==t.charAt(0)&&(t=t.replace("-",""),n="-"),t.substr(0,e.symbol.length)!=e.symbol&&(t=n+e.symbol+" "+t)}return t}function f(t){if(e.allowNegative){t.val();return""!=t.val()&&"-"==t.val().charAt(0)?(v.removeClass("negative"),t.val().replace("-","")):(v.addClass("negative"),"-"+t.val())}return t.val()}function g(e,n){return t(e).each(function(t,e){if(e.setSelectionRange)e.focus(),e.setSelectionRange(n,n);else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",n),i.select()}}),this}function m(t){var e,n,i,r,o,a=0,s=0;return"number"==typeof t.selectionStart&&"number"==typeof t.selectionEnd?(a=t.selectionStart,s=t.selectionEnd):(n=document.selection.createRange())&&n.parentElement()==t&&(r=t.value.length,e=t.value.replace(/\r\n/g,"\n"),(i=t.createTextRange()).moveToBookmark(n.getBookmark()),(o=t.createTextRange()).collapse(!1),i.compareEndPoints("StartToEnd",o)>-1?a=s=r:(a=-i.moveStart("character",-r),a+=e.slice(0,a).split("\n").length-1,i.compareEndPoints("EndToEnd",o)>-1?s=r:(s=-i.moveEnd("character",-r),s+=e.slice(0,s).split("\n").length-1))),{start:a,end:s}}var v=t(this),_=!1;e.symbol=v.attr("data-mask-money-symbol")?v.attr("data-mask-money-symbol"):e.symbol,v.attr("readonly")||(v.unbind(".maskMoney"),v.bind("keypress.maskMoney",r),v.bind("keydown.maskMoney",o),v.bind("blur.maskMoney",s),v.bind("focus.maskMoney",a),v.bind("mask.maskMoney",u))})}};t.fn.maskMoney=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on jQuery.tooltip"):e.init.apply(this,arguments)}}(jQuery),function(t){var e=(t.browser.msie?"paste":"input")+".maskedInput",n=window.orientation!=undefined;t.maskedInput={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"}},t.fn.extend({caret:function(t,e){if(0!=this.length){if("number"==typeof t)return e="number"==typeof e?e:t,this.each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(t,e);else if(this.createTextRange){var n=this.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",t),n.select()}});if(this[0].setSelectionRange)t=this[0].selectionStart,e=this[0].selectionEnd;else if(document.selection&&document.selection.createRange){var n=document.selection.createRange();t=0-n.duplicate().moveStart("character",-1e5),e=t+n.text.length}return{begin:t,end:e}}},unmaskInput:function(){return this.trigger("unmaskInput")},maskedInput:function(i,r){if(this.trigger("unmaskInput"),!i&&this.length>0){var o=t(this[0]),a=o.data("tests");return t.map(o.data("buffer"),function(t,e){return a[e]?t:null}).join("")}r=t.extend({placeholder:"_",completed:null},r);var s=t.maskedInput.definitions,c=(a=[],i.length),l=null,u=i.length;return t.each(i.split(""),function(t,e){"?"==e?(u--,c=t):s[e]?(a.push(new RegExp(s[e])),null==l&&(l=a.length-1)):a.push(null)}),this.each(function(){function o(t){for(;++t<=u&&!a[t];);return t}function d(t){for(;!a[t]&&--t>=0;);for(var e=t;e<u;e++)if(a[e]){y[e]=r.placeholder;var n=o(e);if(!(n<u&&a[e].test(y[n])))break;y[e]=y[n]}m(),_.caret(Math.max(l,t))}function h(t){for(var e=t,n=r.placeholder;e<u;e++)if(a[e]){var i=o(e),s=y[e];if(y[e]=n,!(i<u&&a[i].test(s)))break;n=s}}function p(e){var i=t(this).caret(),r=e.keyCode;return b=r<16||r>16&&r<32||r>32&&r<41,i.begin-i.end==0||b&&8!=r&&46!=r||g(i.begin,i.end),8==r||46==r||n&&127==r?(d(i.begin+(46==r?0:-1)),!1):27==r?(_.val(w),_.caret(0,v()),!1):void 0}function f(e){if(b)return b=!1,8!=e.keyCode&&null;var n=(e=e||window.event).charCode||e.keyCode||e.which,i=t(this).caret();if(e.ctrlKey||e.altKey||e.metaKey)return!0;if(n>=32&&n<=125||n>186){var s=o(i.begin-1);if(s<u){var c=String.fromCharCode(n);if(a[s].test(c)){h(s),y[s]=c,m();var l=o(s);t(this).caret(l),r.completed&&l==u&&r.completed.call(_)}}}return!1}function g(t,e){for(var n=t;n<e&&n<u;n++)a[n]&&(y[n]=r.placeholder)}function m(){return _.val(y.join("")).val()}function v(t){for(var e=_.val(),n=-1,i=0,o=0;i<u;i++)if(a[i]){for(y[i]=r.placeholder;o++<e.length;){var s=e.charAt(o-1);if(a[i].test(s)){y[i]=s,n=i;break}}if(o>e.length)break}else y[i]==e[o]&&i!=c&&(o++,n=i);return!t&&n+1<c?(_.val(""),g(0,u)):(t||n+1>=c)&&(m(),t||_.val(_.val().substring(0,n+1))),c?i:l}var _=t(this),y=t.map(i.split(""),function(t){if("?"!=t)return s[t]?r.placeholder:t}),b=!1,w=_.val();_.data("buffer",y).data("tests",a),_.attr("readonly")||_.one("unmaskInput",function(){_.unbind(".maskedInput").removeData("buffer").removeData("tests")}).bind("focus.maskedInput",function(){w=_.val();var t=v();m(),setTimeout(function(){t==i.length?_.caret(0,t):_.caret(t)},0)}).bind("blur.maskedInput",function(){v(),_.val()!=w&&_.change()}).bind("keydown.maskedInput",p).bind("keypress.maskedInput",f).bind(e,function(){setTimeout(function(){_.caret(v(!0))},0)}),_.bind("maskedInput",function(){w=_.val();v();m()}),v()})}})}(jQuery),function(){var t,e,n,i,r,o,a,s,c,l,u,d,h,p,f,g,m,v,_,y,b,w,x,C,k=[].slice,$=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};(t=window.jQuery||window.Zepto||window.$).payment={},t.payment.fn={},t.fn.payment=function(){var e,n;return n=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],t.payment.fn[n].apply(this,e)},r=/(\d{1,4})/g,t.payment.cards=i=[{type:"elo",patterns:[4011,4312,4389,4514,4573,4576,5041,5066,5067,509,6277,6362,6363,650,6516,6550],format:r,length:[16],cvcLength:[3],luhn:!0},{type:"visaelectron",patterns:[4026,417500,4405,4508,4844,4913,4917],format:r,length:[16],cvcLength:[3],luhn:!0},{type:"maestro",patterns:[5018,502,503,506,56,58,639,6220,67],format:r,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"forbrugsforeningen",patterns:[600],format:r,length:[16],cvcLength:[3],luhn:!0},{type:"dankort",patterns:[5019],format:r,length:[16],cvcLength:[3],luhn:!0},{type:"visa",patterns:[4],format:r,length:[13,16],cvcLength:[3],luhn:!0},{type:"mastercard",patterns:[51,52,53,54,55,22,23,24,25,26,27],format:r,length:[16],cvcLength:[3],luhn:!0},{type:"amex",patterns:[34,37],format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"diners",patterns:[30,36,38,39],format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvcLength:[3],luhn:!0},{type:"discover",patterns:[60,64,65,622],format:r,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",patterns:[62,88],format:r,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"jcb",patterns:[35],format:r,length:[16],cvcLength:[3],luhn:!0},{type:"aura",patterns:[50],format:r,length:[16,17,18,19],cvcLength:[3],luhn:!0}],e=function(t){var e,n,r,o,a,s,c;for(t=(t+"").replace(/\D/g,""),n=0,o=i.length;n<o;n++)for(r=0,a=(c=(e=i[n]).patterns).length;r<a;r++)if(s=c[r]+"",t.substr(0,s.length)===s)return e},n=function(t){var e,n,r;for(n=0,r=i.length;n<r;n++)if((e=i[n]).type===t)return e},h=function(t){var e,n,i,r,o,a;for(o=!0,a=0,i=0,r=(n=(t+"").split("").reverse()).length;i<r;i++)e=n[i],e=parseInt(e,10),(o=!o)&&(e*=2),e>9&&(e-=9),a+=e;return a%10==0},d=function(t){var e;return null!=t.prop("selectionStart")&&t.prop("selectionStart")!==t.prop("selectionEnd")||!(null==("undefined"!=typeof document&&null!==document&&null!=(e=document.selection)?e.createRange:void 0)||!document.selection.createRange().text)},x=function(t,e){var n,i,r,o,a;try{i=e.prop("selectionStart")}catch(s){s,i=null}if(o=e.val(),e.val(t),null!==i&&e.is(":focus"))return i===o.length&&(i=t.length),o!==t&&(a=o.slice(i-1,+i+1||9e9),n=t.slice(i-1,+i+1||9e9),r=t[i],/\d/.test(r)&&a===r+" "&&n===" "+r&&(i+=1)),e.prop("selectionStart",i),e.prop("selectionEnd",i)},v=function(t){var e,n,i,r,o,a,s,c;for(null==t&&(t=""),i="\uff10\uff11\uff12\uff13\uff14\uff15\uff16\uff17\uff18\uff19",r="0123456789",c="",o=0,s=(e=t.split("")).length;o<s;o++)n=e[o],(a=i.indexOf(n))>-1&&(n=r[a]),c+=n;return c},m=function(e){var n;return n=t(e.currentTarget),setTimeout(function(){var t;return t=n.val(),t=(t=v(t)).replace(/\D/g,""),x(t,n)})},f=function(e){var n;return n=t(e.currentTarget),setTimeout(function(){var e;return e=n.val(),e=v(e),e=t.payment.formatCardNumber(e),x(e,n)})},s=function(n){var i,r,o,a,s,c,l;if(o=String.fromCharCode(n.which),/^\d+$/.test(o)&&(i=t(n.currentTarget),l=i.val(),r=e(l+o),a=(l.replace(/\D/g,"")+o).length,c=16,r&&(c=r.length[r.length.length-1]),!(a>=c||null!=i.prop("selectionStart")&&i.prop("selectionStart")!==l.length)))return(s=r&&"amex"===r.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/).test(l)?(n.preventDefault(),setTimeout(function(){return i.val(l+" "+o)})):s.test(l+o)?(n.preventDefault(),setTimeout(function(){return i.val(l+o+" ")})):void 0},o=function(e){var n,i;if(n=t(e.currentTarget),i=n.val(),8===e.which&&(null==n.prop("selectionStart")||n.prop("selectionStart")===i.length))return/\d\s$/.test(i)?(e.preventDefault(),setTimeout(function(){return n.val(i.replace(/\d\s$/,""))})):/\s\d?$/.test(i)?(e.preventDefault(),setTimeout(function(){return n.val(i.replace(/\d$/,""))})):void 0},g=function(e){var n;return n=t(e.currentTarget),setTimeout(function(){var e;return e=n.val(),e=v(e),e=t.payment.formatExpiry(e),x(e,n)})},c=function(e){var n,i,r;if(i=String.fromCharCode(e.which),/^\d+$/.test(i))return n=t(e.currentTarget),r=n.val()+i,/^\d$/.test(r)&&"0"!==r&&"1"!==r?(e.preventDefault(),setTimeout(function(){return n.val("0"+r+" / ")})):/^\d\d$/.test(r)?(e.preventDefault(),setTimeout(function(){var t,e;return t=parseInt(r[0],10),(e=parseInt(r[1],10))>2&&0!==t?n.val("0"+t+" / "+e):n.val(r+" / ")})):void 0},l=function(e){var n,i,r;if(i=String.fromCharCode(e.which),/^\d+$/.test(i))return r=(n=t(e.currentTarget)).val(),/^\d\d$/.test(r)?n.val(r+" / "):void 0},u=function(e){var n,i,r;if("/"===(r=String.fromCharCode(e.which))||" "===r)return i=(n=t(e.currentTarget)).val(),/^\d$/.test(i)&&"0"!==i?n.val("0"+i+" / "):void 0},a=function(e){var n,i;if(n=t(e.currentTarget),i=n.val(),8===e.which&&(null==n.prop("selectionStart")||n.prop("selectionStart")===i.length))return/\d\s\/\s$/.test(i)?(e.preventDefault(),setTimeout(function(){return n.val(i.replace(/\d\s\/\s$/,""))})):void 0},p=function(e){var n;return n=t(e.currentTarget),setTimeout(function(){var t;return t=n.val(),t=(t=v(t)).replace(/\D/g,"").slice(0,4),x(t,n)})},w=function(t){var e;return!(!t.metaKey&&!t.ctrlKey)||32!==t.which&&(0===t.which||(t.which<33||(e=String.fromCharCode(t.which),!!/[\d\s]/.test(e))))},y=function(n){var i,r,o,a;if(i=t(n.currentTarget),o=String.fromCharCode(n.which),/^\d+$/.test(o)&&!d(i))return a=(i.val()+o).replace(/\D/g,""),(r=e(a))?a.length<=r.length[r.length.length-1]:a.length<=16},b=function(e){var n,i;if(n=t(e.currentTarget),i=String.fromCharCode(e.which),/^\d+$/.test(i)&&!d(n))return!((n.val()+i).replace(/\D/g,"").length>6)&&void 0},_=function(e){var n,i;if(n=t(e.currentTarget),i=String.fromCharCode(e.which),/^\d+$/.test(i)&&!d(n))return(n.val()+i).length<=4},C=function(e){var n,r,o,a,s;if(s=(n=t(e.currentTarget)).val(),a=t.payment.cardType(s)||"unknown",!n.hasClass(a))return r=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)o=i[t],n.push(o.type);return n}(),n.removeClass("unknown"),n.removeClass(r.join(" ")),n.addClass(a),n.toggleClass("identified","unknown"!==a),n.trigger("payment.cardType",a)},t.payment.fn.formatCardCVC=function(){return this.on("keypress",w),this.on("keypress",_),this.on("paste",p),this.on("change",p),this.on("input",p),this},t.payment.fn.formatCardExpiry=function(){return this.on("keypress",w),this.on("keypress",b),this.on("keypress",c),this.on("keypress",u),this.on("keypress",l),this.on("keydown",a),this.on("change",g),this.on("input",g),this},t.payment.fn.formatCardNumber=function(){return this.on("keypress",w),this.on("keypress",y),this.on("keypress",s),this.on("keydown",o),this.on("keyup",C),this.on("paste",f),this.on("change",f),this.on("input",f),this.on("input",C),this},t.payment.fn.restrictNumeric=function(){return this.on("keypress",w),this.on("paste",m),this.on("change",m),this.on("input",m),this},t.payment.fn.cardExpiryVal=function(){return t.payment.cardExpiryVal(t(this).val())},t.payment.cardExpiryVal=function(t){var e,n,i;return e=(n=t.split(/[\s\/]+/,2))[0],2===(null!=(i=n[1])?i.length:void 0)&&/^\d+$/.test(i)&&(i=(new Date).getFullYear().toString().slice(0,2)+i),{month:e=parseInt(e,10),year:i=parseInt(i,10)}},t.payment.validateCardNumber=function(t){var n,i;return t=(t+"").replace(/\s+|-/g,""),!!/^\d+$/.test(t)&&(!!(n=e(t))&&(i=t.length,$.call(n.length,i)>=0&&(!1===n.luhn||h(t))))},t.payment.validateCardExpiry=function(e,n){var i,r,o;return"object"==typeof e&&"month"in e&&(e=(o=e).month,n=o.year),!(!e||!n)&&(e=t.trim(e),n=t.trim(n),!!/^\d+$/.test(e)&&(!!/^\d+$/.test(n)&&(1<=e&&e<=12&&(2===n.length&&(n=n<70?"20"+n:"19"+n),4===n.length&&(r=new Date(n,e),i=new Date,r.setMonth(r.getMonth()-1),r.setMonth(r.getMonth()+1,1),r>i)))))},t.payment.validateCardCVC=function(e,i){var r,o;return e=t.trim(e),!!/^\d+$/.test(e)&&(null!=(r=n(i))?(o=e.length,$.call(r.cvcLength,o)>=0):e.length>=3&&e.length<=4)},t.payment.cardType=function(t){var n;return t&&(null!=(n=e(t))?n.type:void 0)||null},t.payment.formatCardNumber=function(n){var i,r,o,a;return n=n.replace(/\D/g,""),(i=e(n))?(a=i.length[i.length.length-1],n=n.slice(0,a),i.format.global?null!=(o=n.match(i.format))?o.join(" "):void 0:null!=(r=i.format.exec(n))?(r.shift(),(r=t.grep(r,function(t){return t})).join(" ")):void 0):n},t.payment.formatExpiry=function(t){var e,n,i,r;return(n=t.match(/^\D*(\d{1,2})(\D+)?(\d{1,4})?/))?(e=n[1]||"",i=n[2]||"",(r=n[3]||"").length>0?i=" / ":" /"===i?(e=e.substring(0,1),i=""):2===e.length||i.length>0?i=" / ":1===e.length&&"0"!==e&&"1"!==e&&(e="0"+e,i=" / "),e+i+r):""}}.call(this),$.fn.extend({topZindexElement:function(){return $topElement=null,_max=0,this.each(function(){$elem=$(this),_zindex=parseFloat($elem.css("zIndex")),!isNaN(_zindex)&&_zindex>=_max&&(_max=_zindex,$topElement=$elem)}),$topElement},positionCursorRight:function(){return this.each(function(){strLength=2*$(this).val().length,$(this)[0].setSelectionRange(strLength,strLength)})},highlight:function(t){return t||(t={}),t.delay||(t.delay=0),t.duration||(t.duration=800),this.each(function(){$(this).delay(t.delay).effect("highlight",t)})},isElementInViewport:function(){var t=$(this)[0].getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}}),/*!
* jQuery.scrollTo
* Copyright (c) 2007-2014 Ariel Flesler - aflesler<a>gmail<d>com | http://flesler.blogspot.com
* Licensed under MIT
* http://flesler.blogspot.com/2007/10/jqueryscrollto.html
* @projectDescription Easy element scrolling using jQuery.
* @author Ariel Flesler
* @version 1.4.13
*/function(t){"use strict";t(["jquery"],function(t){function e(e){return t.isFunction(e)||"object"==typeof e?e:{top:e,left:e}}var n=t.scrollTo=function(e,n,i){return t(window).scrollTo(e,n,i)};return n.defaults={axis:"xy",duration:parseFloat(t.fn.jquery)>=1.3?0:1,limit:!0},n.window=function(){return t(window)._scrollable()},t.fn._scrollable=function(){return this.map(function(){var e=this;if(!(!e.nodeName||-1!=t.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"])))return e;var n=(e.contentWindow||e).document||e.ownerDocument||e;return/webkit/i.test(navigator.userAgent)||"BackCompat"==n.compatMode?n.body:n.documentElement})},t.fn.scrollTo=function(i,r,o){return"object"==typeof r&&(o=r,r=0),"function"==typeof o&&(o={onAfter:o}),"max"==i&&(i=9e9),o=t.extend({},n.defaults,o),r=r||o.duration,o.queue=o.queue&&o.axis.length>1,o.queue&&(r/=2),o.offset=e(o.offset),o.over=e(o.over),this._scrollable().each(function(){function a(t){l.animate(d,r,o.easing,t&&function(){t.call(this,u,o)})}if(null!=i){var s,c=this,l=t(c),u=i,d={},h=l.is("html,body");switch(typeof u){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(u)){u=e(u);break}if(!(u=h?t(u):t(u,this)).length)return;case"object":(u.is||u.style)&&(s=(u=t(u)).offset())}var p=t.isFunction(o.offset)&&o.offset(c,u)||o.offset;t.each(o.axis.split(""),function(t,e){var i="x"==e?"Left":"Top",r=i.toLowerCase(),f="scroll"+i,g=c[f],m=n.max(c,e);if(s)d[f]=s[r]+(h?0:g-l.offset()[r]),o.margin&&(d[f]-=parseInt(u.css("margin"+i))||0,d[f]-=parseInt(u.css("border"+i+"Width"))||0),d[f]+=p[r]||0,o.over[r]&&(d[f]+=u["x"==e?"width":"height"]()*o.over[r]);else{var v=u[r];d[f]=v.slice&&"%"==v.slice(-1)?parseFloat(v)/100*m:v}o.limit&&/^\d+$/.test(d[f])&&(d[f]=d[f]<=0?0:Math.min(d[f],m)),!t&&o.queue&&(g!=d[f]&&a(o.onAfterFirst),delete d[f])}),a(o.onAfter)}}).end()},n.max=function(e,n){var i="x"==n?"Width":"Height",r="scroll"+i;if(!t(e).is("html,body"))return e[r]-t(e)[i.toLowerCase()]();var o="client"+i,a=e.ownerDocument.documentElement,s=e.ownerDocument.body;return Math.max(a[r],s[r])-Math.min(a[o],s[o])},n})}("function"==typeof define&&define.amd?define:function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}),function(t){t.fn.searchWidget=function(){return this.each(function(){var e=this;this.scope=t(this),this.magnifier=t("*[data-magnifier]:first",this.scope),this.input=t("*[data-input]:first",this.scope),this.closeLink=t("*[data-cancel]:first",this.scope),this.magnifier.on("click",function(t){e.open(),t.preventDefault()}),this.closeLink.on("click",function(t){e.close(),t.preventDefault()}),this.open=function(){this.scope.addClass("active"),this.scope.animate({width:250},{duration:200,easing:"easeOutQuart",complete:function(){e.input.focus(),e.closeLink.show(),e.afterOpen()}})},this.close=function(){this.closeLink.hide(),this.scope.removeClass("active"),this.scope.animate({width:30},{duration:200,easing:"easeOutQuart",complete:function(){e.input.val("").trigger("input"),t("body").off("click.searchWidget:close")}})},this.afterOpen=function(){t("body").off("click.searchWidget:close").on("click.searchWidget:close",function(n){e.input.val().length>1||(e.scope.has(t(n.target)).length>0||e.close())})},this.input.on("keyup.searchWidget",function(t){27==t.keyCode&&e.close()})})}}(jQuery),jQuery.extend({textHighlight:function(t,e,n,i){if(3===t.nodeType){var r=t.data.match(e);if(r){var o=document.createElement(n||"span");o.className=i||"highlight";var a=t.splitText(r.index);a.splitText(r[0].length);var s=a.cloneNode(!0);return o.appendChild(s),a.parentNode.replaceChild(o,a),1}}else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName)&&(t.tagName!==n.toUpperCase()||t.className!==i))for(var c=0;c<t.childNodes.length;c++)c+=jQuery.textHighlight(t.childNodes[c],e,n,i);return 0}}),jQuery.fn.unhighlight=function(t){var e={className:"highlight",element:"span"};return jQuery.extend(e,t),this.find(e.element+"."+e.className).each(function(){var t=this.parentNode;t.replaceChild(this.firstChild,this),t.normalize()}).end()},jQuery.fn.textHighlight=function(t,e){var n={className:"highlight",element:"span",caseSensitive:!1,wordsOnly:!1};if(jQuery.extend(n,e),t.constructor===String&&(t=[t]),t=jQuery.grep(t,function(t){return""!=t}),0==(t=jQuery.map(t,function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")})).length)return this;var i=n.caseSensitive?"":"i",r="("+t.join("|")+")";n.wordsOnly&&(r="\\b"+r+"\\b");var o=new RegExp(r,i);return this.each(function(){jQuery.textHighlight(this,o,n.element,n.className)})},/*!matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license*//*!NOTE: If you're already including a window.matchMedia polyfill via Modernizr or otherwise, you don't need this part*/window.matchMedia=window.matchMedia||function(t){var e,n=t.documentElement,i=n.firstElementChild||n.firstChild,r=t.createElement("body"),o=t.createElement("div");return o.id="mq-test-1",o.style.cssText="position:absolute;top:-100em",r.appendChild(o),function(t){return o.innerHTML='&shy;<style media="'+t+'"> #mq-test-1 { width: 42px; }</style>',n.insertBefore(r,i),e=42==o.offsetWidth,n.removeChild(r),{matches:e,media:t}}}(document),/*!Respond.js v1.1.0: min/max-width media query polyfill. (c) Scott Jehl. MIT/GPLv2 Lic. j.mp/respondjs*/function(t){function e(){w(!0)}if(t.respond={},respond.update=function(){},respond.mediaQueriesSupported=t.matchMedia&&t.matchMedia("only all").matches,!respond.mediaQueriesSupported){var n,i,r,o=t.document,a=o.documentElement,s=[],c=[],l=[],u={},d=30,h=o.getElementsByTagName("head")[0]||a,p=o.getElementsByTagName("base")[0],f=h.getElementsByTagName("link"),g=[],m=function(){for(var e,n,i,r,o=f,a=o.length,s=0;s<a;s++)n=(e=o[s]).href,i=e.media,r=e.rel&&"stylesheet"===e.rel.toLowerCase(),n&&r&&!u[n]&&(e.styleSheet&&e.styleSheet.rawCssText?(_(e.styleSheet.rawCssText,n,i),u[n]=!0):(/^([a-zA-Z:]*\/\/)/.test(n)||p)&&n.replace(RegExp.$1,"").split("/")[0]!==t.location.host||g.push({href:n,media:i}));v()},v=function(){if(g.length){var t=g.shift();x(t.href,function(e){_(e,t.href,t.media),u[t.href]=!0,v()})}},_=function(t,e,n){var i,r,o,a,l,u=t.match(/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi),d=u&&u.length||0,h=function(t){return t.replace(/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,"$1"+e+"$2$3")},p=!d&&n,f=0;for((e=e.substring(0,e.lastIndexOf("/"))).length&&(e+="/"),p&&(d=1);f<d;f++)for(i=0,p?(r=n,c.push(h(t))):(r=u[f].match(/@media *([^\{]+)\{([\S\s]+?)$/)&&RegExp.$1,c.push(RegExp.$2&&h(RegExp.$2))),l=(a=r.split(",")).length;i<l;i++)o=a[i],s.push({media:o.split("(")[0].match(/(only\s+)?([a-zA-Z]+)\s?/)&&RegExp.$2||"all",rules:c.length-1,hasquery:o.indexOf("(")>-1,minw:o.match(/\(min\-width:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:o.match(/\(max\-width:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||"")});w()},b=function(){var t,e=o.createElement("div"),n=o.body,i=!1;return e.style.cssText="position:absolute;font-size:1em;width:1em",n||(n=i=o.createElement("body")),n.appendChild(e),a.insertBefore(n,a.firstChild),t=e.offsetWidth,i?a.removeChild(n):n.removeChild(e),t=r=parseFloat(t)},w=function(t){var e="clientWidth",u=a[e],p="CSS1Compat"===o.compatMode&&u||o.body[e]||u,g={},m=f[f.length-1],v=(new Date).getTime();if(t&&n&&v-n<d)return clearTimeout(i),void(i=setTimeout(w,d));for(var _ in n=v,s){var y=s[_],x=y.minw,C=y.maxw,k=null===x,$=null===C,T="em";x&&(x=parseFloat(x)*(x.indexOf(T)>-1?r||b():1)),C&&(C=parseFloat(C)*(C.indexOf(T)>-1?r||b():1)),y.hasquery&&(k&&$||!(k||p>=x)||!($||p<=C))||(g[y.media]||(g[y.media]=[]),g[y.media].push(c[y.rules]))}for(var _ in l)l[_]&&l[_].parentNode===h&&h.removeChild(l[_]);for(var _ in g){var S=o.createElement("style"),E=g[_].join("\n");S.type="text/css",S.media=_,h.insertBefore(S,m.nextSibling),S.styleSheet?S.styleSheet.cssText=E:S.appendChild(o.createTextNode(E)),l.push(S)}},x=function(t,e){var n=C();n&&(n.open("GET",t,!0),n.onreadystatechange=function(){4!=n.readyState||200!=n.status&&304!=n.status||e(n.responseText)},4!=n.readyState&&n.send(null))},C=function(){var t=!1;try{t=new XMLHttpRequest}catch(y){t=new ActiveXObject("Microsoft.XMLHTTP")}return function(){return t}}();m(),respond.update=m,t.addEventListener?t.addEventListener("resize",e,!1):t.attachEvent&&t.attachEvent("onresize",e)}}(this),window.alert=function(t){$popupHtml=$("<div class='simple-popup confirm small-popup'>              <div class='dimming' popup-dimming=''></div>              <div class='window' popup-window=''>                <div class='popup-header'>                  <h1></h1>                </div>                <div class='popup-content'>                  <p></p>                  <button class='button button-red' data-submit=''>OK</button>                </div>              </div>            </div>"),$popupHtml.find(".popup-content p").html(t);var e=new Popup.Simple;return e.loadFromElement($popupHtml),e.settings.duration=50,e.open(),$popupHtml.find("button[data-submit]").on("click.alert",function(){e.close()}),!0},window.alertMore=function(t,e){let n;return n=t,n+="<br/><strong>"+e+"</strong>",window.alert(n)};var Calculator={Accum:0,FlagNewNum:!1,PendingOp:"",op_id:null,init:function(){$(window).off("keypress.calculator").on("keypress.calculator",Calculator.checkKeypress)},unbind:function(){Calculator.clear(),$(window).off("keypress.calculator")},clear:function(){Calculator.Accum=0,Calculator.PendingOp="",Calculator.ClearEntry(),Calculator.click("op_clear")},checkKeypress:function(t){var e=window.event?window.event.keyCode:t?t.which:0,n=48,i=57,r=46,o=44,a=43,s=45,c=42,l=47,u=37,d=13,h=61;if(8==e||0==e)return Calculator.ClearEntry(),!1;if(e>=97&&e<=122&&(e-=32),e>=n&&e<=i){var p=e-n;return Calculator.NumPressed(p),!1}return e==r||e==o?(Calculator.Decimal(),!1):e==h||e==d?(Calculator.op_id="result",Calculator.Operation("="),!1):e==a?(Calculator.op_id="plus",Calculator.Operation("+"),!1):e==s?(Calculator.op_id="minus",Calculator.Operation("-"),!1):e==c?(Calculator.op_id="times",Calculator.Operation("*"),!1):e==l?(Calculator.op_id="div",Calculator.Operation("/"),!1):e!=u||(Calculator.Percent(),!1)},NumPressed:function(t){var e=document.Keypad;Calculator.FlagNewNum?(e.ReadOut.value=t,Calculator.FlagNewNum=!1):"0"==e.ReadOut.value?e.ReadOut.value=t:e.ReadOut.value+=t,Calculator.click("num_"+t)},Operation:function(t){var e=document.Keypad;Calculator.FlagNewNum&&"="!=Calculator.PendingOp||(Calculator.FlagNewNum=!0,"+"==Calculator.PendingOp?Calculator.Accum+=parseFloat(e.ReadOut.value):"-"==Calculator.PendingOp?Calculator.Accum-=parseFloat(e.ReadOut.value):"/"==Calculator.PendingOp?Calculator.Accum/=parseFloat(e.ReadOut.value):"*"==Calculator.PendingOp?Calculator.Accum*=parseFloat(e.ReadOut.value):Calculator.Accum=parseFloat(e.ReadOut.value),e.ReadOut.value=Calculator.Accum,Calculator.PendingOp=t),Calculator.click("op_"+Calculator.op_id),"="==t&&$("#visor").highlight(1e3)},Decimal:function(){var t=document.Keypad;Calculator.FlagNewNum?(t.ReadOut.value="0.",Calculator.FlagNewNum=!1):-1==t.ReadOut.value.indexOf(".")&&(t.ReadOut.value+="."),Calculator.click("op_decimal")},ClearEntry:function(){document.Keypad.ReadOut.value="0",Calculator.FlagNewNum=!0,Calculator.click("op_clear")},Neg:function(){var t=document.Keypad;t.ReadOut.value=-1*parseFloat(t.ReadOut.value),Calculator.click("op_neg")},Percent:function(){var t=document.Keypad;t.ReadOut.value=parseFloat(t.ReadOut.value)/100*parseFloat(Calculator.Accum),Calculator.click("op_percent")},click:function(t){$("#"+t).addClass("hover"),window.setTimeout(function(){$("#"+t).removeClass("hover")},100)}},CalendarEvents={currentTask:!1,ctrlKey_on:!1,initialized:!1,currentDay:null,copyKeyCodes:[17,224],ipad_or_iphone:null!=navigator.userAgent.match(/iPad|iPhone/i),init:function(){CalendarEvents.initialized?CalendarEvents.refreshDragNDrop():(CalendarEvents.initialized=!0,CalendarEvents.startObserveCopy(),CalendarEvents.startDragNDrop()),CalendarEvents.ipad_or_iphone&&$("table.calendar td.day").bind("touchstart",function(){$("table.calendar td.day .actionBar a").hide(),$(this).find(".actionBar a").show()})},startObserveCopy:function(){$(document).keydown(CalendarEvents.enableCopy),$(document).keyup(CalendarEvents.disableCopy)},stopObservingCopy:function(){$(document).unbind("keydown",CalendarEvents.enableCopy),$(document).unbind("keyup",CalendarEvents.disableCopy)},enableCopy:function(t){(t=t||(window.event?event:null)).keyCode&&CalendarEvents.copyKeyCodes.include(t.keyCode)&&CalendarEvents.currentTask&&(CalendarEvents.ctrlKey_on=!0,$("#"+CalendarEvents.currentTask).addClass("copying"),$("#"+CalendarEvents.currentTask+"_clone").show())},disableCopy:function(t){(t=t||(window.event?event:null)).keyCode&&CalendarEvents.copyKeyCodes.include(t.keyCode)&&(CalendarEvents.ctrlKey_on=!1,CalendarEvents.currentTask&&($("#"+CalendarEvents.currentTask).removeClass("copying"),$("#"+CalendarEvents.currentTask+"_clone").hide()))},startDragNDrop:function(){$(".calendar-draggable").draggable({handle:"strong",revert:"invalid",start:function(t,e){CalendarEvents.currentTask=$(e.helper).attr("id"),CalendarEvents.currentDay=$(e.helper).parent().attr("id"),$(e.helper).parent().parent().addClass("draggingStartDay"),$("table.calendar td").addClass("dragging")},stop:function(){CalendarEvents.currentTask&&($("#"+CalendarEvents.currentTask).removeClass("copying"),$("#"+CalendarEvents.currentTask+"_clone").hide(),CalendarEvents.currentTask=!1),$("table.calendar td").removeClass("dragging"),$("body").css({"overflow-x":"hidden"})}}),$(".calendar-droppable").droppable({hoverClass:"hover",accept:".calendar-draggable",drop:CalendarEvents.pasteTask})},refreshDragNDrop:function(){$(".ui-draggable").draggable("destroy"),$(".ui-droppable").droppable("destroy"),CalendarEvents.startDragNDrop()},toggleTaskStatus:function(t){$(".calendar_event_"+t).toggleClass("task-done"),$("#calendar_event_"+t+"_clone").toggleClass("task-done"),_url="/"+ContextSource.current_entity.id+"/calendar_events/"+t+"/set_status",$.post(_url),Popup.closeCurrent()},pasteTask:function(t,e){var n=e.draggable.attr("calendar_event_id"),i=$(this).find("ul").attr("id");Loader.show(),$("#"+CalendarEvents.currentTask).removeClass("copying"),CalendarEvents.currentTask=!1,_url="/"+ContextSource.current_entity.id+"/calendar_events/"+n+"/paste",$.ajax({url:_url,type:"post",data:{day:i,copy:CalendarEvents.ctrlKey_on},success:function(){Loader.hide()}})}};(function(){window.Cashflow=function(){function t(t){this.carousel=new n($(".numbers.carousel table"),$(".thead .next.nav"),$(".thead .previous.nav")),$(".description-name td.with_children a").click(function(){var t;return t=$(this).attr("id"),$("tr[parent_id="+t+"]").toggle().addClass("actived"),$(this).parent().parent().toggleClass("actived"),$(this).find("i:first").toggleClass("icon-24").toggleClass("icon-25"),$("tr."+t).toggleClass("actived"),!1}),$("*[data-predicted-filter]").length>0&&new r("1"===t),new e,new i}var e,n,i,r;return i=function(){function t(){var t;this.wrapper=$("*[data-cashflow-floating-bar=wrapper]:first"),this.bar=$("*[data-cashflow-floating-bar=floater]:first"),this.wrapper.css({height:44}),this.bar.css({zIndex:99}),this.scroll_limit=this.bar.offset().top,$(window).scroll((t=this,function(){return t.on_scroll()}))}return t.prototype.on_scroll=function(){return $(window).scrollTop()>this.scroll_limit?this.make_it_float():this.stop_floating()},t.prototype.make_it_float=function(){if("fixed"!==this.bar.css("position"))return this.bar.css({position:"fixed",top:0}).addClass("floating")},t.prototype.stop_floating=function(){if("fixed"===this.bar.css("position"))return this.bar.css({position:"relative"}).removeClass("floating")},t}(),e=function(){function t(){$("*[data-account-filter]").click(function(){return $("*[data-account-filter]").parent().parent().find("li").removeClass("actived"),$(this).parent().addClass("actived"),$("*[data-account-filter=selected]:first").html($(this).attr("data-account-filter")),!0})}return t}(),r=function(){function t(t){var e;$("body").css({overflowY:"scroll"}),this.openned=t,this.topLevel=$("*[data-predicted-filter=selected]:first"),this.openned?this.show():this.hide(),$("div.predicted").addClass("transiction"),$("*[data-predicted-filter=1]").click((e=this,function(t){var n;return e.openned||(n=$(t.currentTarget),$("*[data-predicted-filter=0]:first").parent().removeClass("actived"),n.parent().addClass("actived"),e.topLevel.html(n.html()),e.show(),e.openned=!0,$("#clear-filters").show(),e.runAjax(n.attr("href"))),!1})),$("*[data-predicted-filter=0]").click(function(t){return function(e){var n;return t.openned&&(n=$(e.currentTarget),$("*[data-predicted-filter=1]:first").parent().removeClass("actived"),n.parent().addClass("actived"),t.topLevel.html(n.html()),t.hide(),t.openned=!1,$("[data-account=all]").hide(),t.runAjax(n.attr("href"))),!1}}(this))}return t.prototype.show=function(){return $("div.predicted").css({height:15}),$(".predicted-hide").hide()},t.prototype.hide=function(){return $("div.predicted").css({height:0}),$(".predicted-hide").show()},t.prototype.runAjax=function(t){return $.getScript(t)},t}(),n=function(){function t(t,e,n){var i,r;i=[t,e,n],this.tables=i[0],this.nextLink=i[1],this.prevLink=i[2],this.number_of_tds=this.tables.first().find("td").length,this.tables.css("width",1312/(12/this.number_of_tds)),this.nextLink.click((r=this,function(){return r.animateNext(),!1})),this.prevLink.click(function(t){return function(){return t.animatePrev(),!1}}(this)),this.currentIndex=0,this.animateToBeginning(),this.number_of_tds<=this.visible_items()&&this.nextLink.hide()}return t.prototype.settings={scroll:1,speed:200},t.prototype.visible_items=function(){return 1100===$(".container:first").width()?7:5},t.prototype.last_index=function(){return this.number_of_tds-this.visible_items()},t.prototype.animateToBeginning=function(){return $(".numbers.carousel").scrollTo("td:eq(0)",1,{offset:-1})},t.prototype.animateNext=function(){return this.currentIndex+=this.settings.scroll,this.currentIndex===this.last_index()&&this.nextLink.hide(),$(".numbers.carousel").scrollTo("td:eq("+this.currentIndex+")",this.settings.speed,{offset:-1}),this.prevLink.removeClass("disabled")},t.prototype.animatePrev=function(){return this.currentIndex-=this.settings.scroll,this.currentIndex<0&&(this.currentIndex=0),$(".numbers.carousel").scrollTo("td:eq("+this.currentIndex+")",this.settings.speed,{offset:-1}),0===this.currentIndex&&this.prevLink.addClass("disabled"),this.nextLink.show()},t}(),t}()}).call(this),function(){window.Charts||(window.Charts={}),Charts.BackgroundChart=function(){function t(t,e,n){var i;i=[t,e,n],this.renderTo=i[0],this.series=i[1],this.labels=i[2],Highcharts.setOptions({lang:{loading:"Carregando...",decimalPoint:",",thousandsSep:"."}}),this.highchart()}return t.prototype.tooltip=function(){var t;return t="<div class='chart-tip "+this.point.tipClass+"'>",t+="<span class='title'>"+this.point.title+"</span> ",(t+="<strong>"+this.point.currency+"</strong>")+"</div>"},t.prototype.labelStep=function(){return this.labels.length>10?3:0},t.prototype.highchart=function(){return null!=this._highchart&&this._highchart.destroy(),this._highchart=new Highcharts.Chart({series:[this.series],chart:{renderTo:this.renderTo,defaultSeriesType:"areaspline",backgroundColor:"transparent",height:120,margin:[0,-58,0,-58],padding:[0,0,0,0],maxPadding:[0,0,0,0],spacing:[0,0,0,0]},exporting:{enabled:!1},title:{text:null},credits:!1,legend:{enabled:!1},plotOptions:{line:{lineWidth:0,visible:!1,marker:{enabled:!0}},areaspline:{zIndex:0,lineWidth:0,lineColor:"#000000",fillOpacity:"0.04",states:{hover:{enabled:!1}},marker:{fillColor:"#000000",symbol:"circle",enabled:!1}},spline:{zIndex:1,lineWidth:0,states:{hover:{enabled:!1}}}},xAxis:{minPadding:0,maxPadding:0,endOnTick:!1,startOnTick:!1,title:null,categories:this.labels,labels:{enabled:!1},lineWidth:0,tickLength:0,gridLineWidth:0},yAxis:{gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,title:null,tickLength:0,labels:{enabled:!1}},tooltip:{enabled:!1}})},t}()}.call(this),function(){window.Charts||(window.Charts={}),Charts.BalanceChart=function(){function t(t,e,n){var i;i=[t,e,n],this.renderTo=i[0],this.series=i[1],this.labels=i[2],Highcharts.setOptions({lang:{loading:"Carregando...",decimalPoint:",",thousandsSep:"."}}),this.highchart()}return t.prototype.tooltip=function(){var t;return t="<div class='chart-tip "+this.point.tipClass+"'>",t+="<span class='title'>"+this.point.title+"</span> ",(t+="<strong>"+this.point.currency+"</strong>")+"</div>"},t.prototype.labelStep=function(){return this.labels.length>10?3:0},t.prototype.highchart=function(){return null!=this._highchart&&this._highchart.destroy(),this._highchart=new Highcharts.Chart({series:this.series,chart:{renderTo:this.renderTo,defaultSeriesType:"area",backgroundColor:"transparent",height:90,marginTop:0,marginRight:0,marginBottom:30,marginLeft:0},title:{text:null},credits:!1,legend:{enabled:!1},plotOptions:{series:{fillOpacity:.3}},xAxis:{categories:this.labels,lineWidth:0,minorGridLineWidth:0,lineColor:"transparent",labels:{style:{color:"#B4B9C1",font:"11px/20px CircularStd;",textTransform:"lowercase"},autoRotation:0},minorTickLength:0,tickLength:0},yAxis:{gridLineColor:"transparent",labels:{enabled:!1},title:{text:null}},exporting:{enabled:!1},tooltip:{shared:!1,useHTML:!0,backgroundColor:"transparent",borderWidth:0,borderRadius:0,formatter:this.tooltip,valuePrefix:"R$ ",valueDecimals:2,shadow:!1}})},t}()}.call(this),function(){window.Charts||(window.Charts={}),Charts.TopCategories=function(){function t(t,e){this.renderTo=t,this.series=e,Highcharts.setOptions({lang:{loading:"Carregando...",decimalPoint:",",thousandsSep:"."}}),this.highchart()}return t.prototype.tooltip=function(){var t;return t="<div class='chart-tip "+this.point.activity_type+"'>",t+="<span class='title'>"+this.point.title.truncate({length:25})+"</span> ",t+="<strong>"+Currency.source().symbol+" "+Currency.format(this.point.y)+"</strong>",t+="</div>"},t.prototype.hoverCategory=function(t){if(this._highchart)return this._highchart.series[0].points.find(function(e){return e.dom_id===t}).onMouseOver()},t.prototype.selectCategory=function(t){return this._highchart.series[0].points.find(function(e){return e.dom_id===t}).select()},t.prototype.hideTooltip=function(){if(this._highchart)return this._highchart.tooltip.hide()},t.prototype.highchart=function(){return null!=this._highchart&&this._highchart.destroy(),this._highchart=new Highcharts.Chart({series:this.series,chart:{renderTo:this.renderTo,backgroundColor:"#FFFFFF",width:150,height:150,marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,alignTicks:!1},plotOptions:{pie:{cursor:"pointer",innerSize:"55%",borderWidth:0,dataLabels:{enabled:!1}}},title:{text:null},credits:!1,exporting:{enabled:!1},tooltip:{shared:!1,useHTML:!0,backgroundColor:"transparent",borderWidth:0,borderRadius:0,formatter:this.tooltip,valuePrefix:"R$ ",valueDecimals:2,shadow:!1},legend:!1})},t}()}.call(this),function(){window.Charts||(window.Charts={}),Charts.TopCategoriesAccounts=function(){function t(t,e){var n;this.renderTo=t,this.series=e,Highcharts.setOptions({lang:{loading:"Carregando...",decimalPoint:",",thousandsSep:"."}}),window.setTimeout((n=this,function(){if($("#"+n.renderTo).size())return n.highchart()}),300)}return t.prototype.tooltip=function(){var t;return t="<div class='chart-tip "+this.point.activity_type+"'>",t+="<span class='title'>"+this.point.title.truncate({length:25})+"</span> ",t+="<strong>"+this.point.currency+"</strong>",t+="</div>"},t.prototype.hoverCategory=function(t){if(this._highchart)return this._highchart.series[0].points.find(function(e){return e.dom_id===t}).onMouseOver()},t.prototype.selectCategory=function(t){return this._highchart.series[0].points.find(function(e){return e.dom_id===t}).select()},t.prototype.hideTooltip=function(){if(this._highchart)return this._highchart.tooltip.hide()},t.prototype.highchart=function(){return null!=this._highchart&&this._highchart.destroy(),this._highchart=new Highcharts.Chart({series:this.series,chart:{renderTo:this.renderTo,backgroundColor:"#FFFFFF",width:150,height:150,marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,alignTicks:!1},plotOptions:{pie:{cursor:"pointer",innerSize:"55%",borderWidth:0,allowPointSelect:!0,dataLabels:{enabled:!1}}},title:{text:null},credits:!1,exporting:{enabled:!1},tooltip:{shared:!1,useHTML:!0,backgroundColor:"transparent",borderWidth:0,borderRadius:0,formatter:this.tooltip,valuePrefix:"R$ ",valueDecimals:2,shadow:!1},legend:!1})},t}()}.call(this),window.Confirm={},Confirm.show=function(t){var e,n=t.data("confirm")||"",i="";i="<div class='simple-popup confirm small-popup'>              <div class='dimming' popup-dimming=''></div>              <div class='window' popup-window=''>                <div class='popup-header'>                  <h1></h1>                  <a href='' class='close-popup' data-close='popup'>                    <i class='icon i16 icon-41'></i>                  </a>                </div>                <div class='popup-content'>                  <p></p>                  <button class='button button-red' data-submit=''>Sim</button>                  <a class='button' data-close='popup' href=''>N\xe3o</a>                </div>              </div>            </div>",e=new Popup.Simple(t),$popup=$(i),$popup.find(".popup-content p").html(n),$popup.find("button[data-submit]").on("click.confirm:success",function(n){Loader.top.show(),$(document).one("ajax:success.confirm",function(){e.close(),Loader.top.hide()}),$.rails.handleRemote(t),n.preventDefault()}),e.loadFromElement($popup),e.open(),window.setTimeout(function(){$popup.find("button[data-submit]:first").focus()},350)},$(function(){$(document).on("confirm.Confirm","a[data-confirm]",function(t){var e=$(t.target);Confirm.show(e)}),$.rails.confirm=function(){return!1}}),function(){var t={source:function(){return(window.ContextSource||window.Context||{}).currency||{symbol:"R$",thousands_separator:".",decimal_mark:","}},parse:function(e){for(var n=t.source().symbol,i=t.source().thousands_separator,r=t.source().decimal_mark,o=e.replace(n,"");o.indexOf(i)>=0;)o=o.replace(i,"");return o=o.replace(r,"."),parseFloat(o)},format:function(e){t.source().symbol;var n=t.source().thousands_separator,i=t.source().decimal_mark,r=(e=isNaN(e)?0:parseFloat(e))<0?"-":"",o=e.toFixed(2).toString().split("."),a=o[0].replace(/-/,""),s=o[1],c=0,l=a.length;l>3&&(c=l%3==0?l/3-1:(l-l%3)/3);for(var u,d=1,h=a;d<=c;)u=l-3*d,h=a.substring(0,u)+n+h.substring(u),d+=1;return r+h+i+s}};window.Currency=t}(),function(){var t=function(){var t;t="<div class='flash-message' style='display: none' id='flash'>",t+="<span><i class='icon i36'></i></span>",t+="<p data-content=''>",t+="</p>",t+="</div>",this.element=$(t),this.content=this.element.find("*[data-content]:first"),this.visible=!1};t.prototype.show=function(e,n){this.visible||$("body").prepend(this.element),window.clearTimeout(this.hideTimer),this.content.html(e),this.element.off("click.flash"),this.element.on("click.flash",function(){t.instance.hide()}),this.element.attr("class",n||"success").addClass("flash-message").css({opacity:0}).show().animate({right:0,opacity:1,duration:400}),this.hideTimer=window.setTimeout(function(){t.instance.hide()},7e3)},t.prototype.hide=function(){var t=this;this.element.animate({right:-290,opacity:0,duration:400},function(){t.element.remove(),t.visible=!1})},t.show=function(e,n){t.instance||(t.instance=new t),t.instance.show(e,n)},t.hide=function(){t.instance||(t.instance=new t),t.instance.hide()},window.Flash=t}(),function(){this.Dispatcher={},Dispatcher.dispatch=function(t,e){var n,i,r;if(!_.isUndefined(e)&&!_.isUndefined(e.data)){if(e.data.constructor===Array)switch(t.type){case"CREATE":e.data.push(t.object);break;case"UPDATE":e.data=e.data.map(function(e){return e.id===t.object.id?t.object:e});break;case"DELETE":e.data=_.filter(e.data,function(e){return e.id!==t.object_id});break;case"DELETE_ALL":e.data=[]}else switch(t.type){case"UPDATE_ATTRIBUTES":for(n in i=t.attributes)r=i[n],e.data[n]=r}return e.notify_listeners_about_change(t)}}}.call(this),function(){this.Store=function(){function t(t){this.data=t,this.listeners=[]}return t.prototype.add_listener=function(t){return this.listeners.push(t)},t.prototype.notify_listeners_about_change=function(t){return this.listeners.each((e=this,function(n){return n.store_changed(t,e)}));var e},t}()}.call(this),function(){var t=function(t){this.scope=t?$(t):$(document),this.selectors={phone:"input[data-mask=phone]",percentage:"input[data-mask=percentage]",money:"input[data-mask=money]",number:"input[data-mask=number]",credit_card:"input[data-mask=credit-card]"},$(this.selectors.credit_card,this.scope).maskedInput("9999 9999 9999 9999",{placeholder:"\u2022"}),$(this.selectors.phone,this.scope).maskedInput("(99) 9999-9999?9").off("keyup.InputMasks").on("keyup.InputMasks",function(){var t=$(this).val().match(/[0-9]/g);_.isBlank(t)||(11==t.length&&$(this).maskedInput("(99) 99999-9999"),10==t.length&&$(this).maskedInput("(99) 9999-9999?9"))}),$(this.selectors.cep,this.scope).maskedInput("99999-999"),$(this.selectors.percentage,this.scope).each(function(){if("percentage"!=$(this).data("masked")){$(this).data("masked","percentage");var t={symbol:!1,thousands:",",decimal:".",precision:2,defaultZero:!0,allowZero:!0,allowNegative:!1},e=$(this).val();e||(e=0),$(this).val(parseFloat(e).toFixed(2)),$(this).before("<small>%</small>"),$(this).attr("maxlength",5).maskMoney(t).maskMoney("mask")}}),$(this.selectors.money,this.scope).each(function(){if("money"!=$(this).data("masked")){$(this).data("masked","money");var t={symbol:!1,thousands:Currency.source().thousands_separator,decimal:Currency.source().decimal_mark,precision:2,defaultZero:!0,allowZero:!0,allowNegative:$(this).attr("allowNegative")};$(this).before("<small>"+Currency.source().symbol+"</small>"),$(this).attr("maxlength",17).maskMoney(t).maskMoney("mask")}}),$(this.selectors.number,this.scope).on("keydown.InputMasks",function(t){-1!==$.inArray(t.keyCode,[46,8,9,27,13,110,190])||65==t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||86==t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||67==t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||t.keyCode>=35&&t.keyCode<=40||(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault()})};window.InputMasks=t}(),function(){function t(){this.img=$('<div class="application-loader" data-loader=""><svg class="circular" viewBox="25 25 50 50"><circle class="load" cx="50" cy="50" r="20" fill="none" stroke-width="3" stroke-miterlimit="10"/></svg></div>')}t.big=function(){return t.instance.img.attr("class","application-loader big")[0].outerHTML},t.medium=function(){return t.instance.img.attr("class","application-loader medium")[0].outerHTML},t.small=function(){return t.instance.img.attr("class","application-loader small")[0].outerHTML},t.show=function(e){switch($(e).attr("loader")){case"databox":return void t.dataBox.show($(e).data("loader-target"));case"false":return;default:return void t.top.show()}},t.hide=function(e){switch($(e).attr("loader")){case"databox":t.dataBox.hide();break;case"false":break;default:t.top.hide()}},t.top={show:function(){var e=$("#loading-top");0===e.size()&&(e=$('<div id="loading-top" style="display: none">'+t.small()+"<span>Carregando...</span></div>"),$("body").prepend(e)),e.show()},hide:function(){$("#loading-top").hide().remove()}},t.dataBox={show:function(e){e||(e="#content"),$(e).html('<div class="application-loader-wrapper">'+t.big()+"</div>")},hide:function(){return!0}},t.instance=new t,window.Loader=t}(),$(function(){$(document).on("ajax:beforeSend.loader",function(t){Loader.show(t.target)}).on("ajax:complete.loader",function(t){Loader.hide(t.target)})}),function(){var t={};window.Referrals=t}(),function(){var t=function(t,e,n,i){var r=this;r.$scope=$(t),r.referralUrl=e,r.gmailCallback=n,r.contacts=i,r.numberOfSteps=$("*[data-step]",r.$scope).length,r.currentStep=0,r.toggleStepTo=function(t){$("*[data-step="+r.currentStep+"]",r.$scope).fadeOut(300,"swing",function(){r.currentStep=t,$("*[data-step="+r.currentStep+"]",r.$scope).fadeIn(300,"swing")})},r.nextStep=function(){$("*[data-step="+r.currentStep+"]",r.$scope).fadeOut(300,"swing",function(){r.currentStep++,$("*[data-step="+r.currentStep+"]",r.$scope).fadeIn(300,"swing")})},r.previousStep=function(){$("*[data-step="+r.currentStep+"]",r.$scope).fadeOut(300,"swing",function(){r.currentStep--,$("*[data-step="+r.currentStep+"]",r.$scope).fadeIn(300,"swing")})},r.shareThroughFacebook=function(t,e){var n="https://www.facebook.com/dialog/share?app_id=145634995501895&display=popup&href="+t+"&quote="+e,i=$(window).width()/2-250;window.open(n,"_blank","width=500,height=250,left="+i+",top=300,resizable=no")},r.shareThroughTwitter=function(t,e){var n="https://twitter.com/intent/tweet?url="+r.referralUrl+"&text="+t+"&via="+e,i=$(window).width()/2-250;window.open(n,"_blank","width=500,height=300,left="+i+",top=250,resizable=no")},r.gmailCallback?r.contacts?setTimeout(function(){r.toggleStepTo(3)},400):setTimeout(function(){alert("Nenhum contato encontrado."),r.gmailCallback=!1,r.toggleStepTo(2)},400):setTimeout(function(){r.toggleStepTo(1)},400),$("#share-facebook").on("click",function(t){var e=$(this).attr("data-url"),n=$(this).attr("data-title");r.shareThroughFacebook(e,n),t.preventDefault()}),$("#share-twitter").on("click",function(t){var e=$(this).attr("data-text"),n=$(this).attr("data-user");r.shareThroughTwitter(e,n),t.preventDefault()}),$("#share-emails").on("click",function(t){r.toggleStepTo(2),setTimeout(function(){$(".tagsinput").find("input").focus()},500),t.preventDefault()}),$(".cancel").on("click",function(t){r.toggleStepTo(1),t.preventDefault()}),$(".button.success").on("click",function(t){r.toggleStepTo(1),t.preventDefault()}),$("#check-all").on("click",function(){$(".content-table input:checkbox").not(this).prop("checked",this.checked)}),r.$button=r.$scope.find(".copy-button"),r.clipboard=new Clipboard(".copy-button"),r.clipboard.on("success",function(t){r.$button.addClass("success").html("Copiado"),setTimeout(function(){r.$button.removeClass("success").html("Copiar")},1500),t.clearSelection()}),r.clipboard.on("error",function(){/Mac/i.test(navigator.userAgent)?r.$button.html("Aperte \u2318 + C para copiar"):r.$button.html("Aperte Ctrl + C para copiar")}),r.email_regex="([a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?)",r.$emailsInput=$("#referrals-email"),r.$emailsInput.selectize({plugins:["remove_button"],valueField:"email",labelField:"email",searchField:["email"],createFilter:function(t){return new RegExp("^"+r.email_regex+"$","i").test(t)},create:function(t){return new RegExp("^"+r.email_regex+"$","i").test(t)?{email:t}:(alert("Email inv\xe1lido."),!1)},render:{option_create:function(t,e){return'<div class="create">Adicionar <strong>'+e(t.input)+"</strong>&hellip;</div>"}}}),r.$form=r.$scope.find("form"),r.$form.on("ajax:beforeSend",function(){r.stepBeforeSend=r.currentStep,r.toggleStepTo(0)}).on("ajax:success",function(){r.$emailsInput[0].selectize.clear(),setTimeout(function(){r.toggleStepTo(4)},700)}).on("ajax:error",function(t,e){setTimeout(function(){alert(e.responseText,"error"),r.toggleStepTo(r.stepBeforeSend)},700)})};Referrals.Invite=t}(),function(){var t;$(function(){return Turbolinks.enableProgressBar(!1),Turbolinks.pagesCached(0),$(document).on("click.turbolinks","a",function(){return TurbolinksLoader.current=new TurbolinksLoader($(this)),!0}),$(document).on("page:fetch",function(){return TurbolinksLoader.current||(TurbolinksLoader.current=new TurbolinksLoader($(this))),TurbolinksLoader.current.show(),window.tmp={}}),$(document).on("page:change",function(){return window.prevPageYOffset=window.pageYOffset,window.prevPageXOffset=window.pageXOffset}),$(document).on("page:load",function(){return window.scrollTo(window.prevPageXOffset,window.prevPageYOffset),null!=TurbolinksLoader.current&&TurbolinksLoader.current.hide(),$(document).trigger("ajax:complete"),TurbolinksLoader.current=null}),Turbolinks.visit_silent=function(e){return TurbolinksLoader.current=new t,Turbolinks.visit(e),TurbolinksLoader.current=null}}),t=function(){function t(){}return t.prototype.show=function(){return!0},t.prototype.hide=function(){return!0},t}(),this.TurbolinksLoader=function(){function t(t){var e;this.link=t,null==t||t.is("a")||(this.link=t.parents("a:first")),e=null!=this.link&&this.link.attr("loader")||"databox",this.loader=function(){switch(e){case"databox":return Loader.dataBox;case"top":return Loader.top;default:return!1}}()}return t.prototype.show=function(){var t;if((t=null!=this.link?this.link.data("loader-target"):null)||(t=$("#secondary-content")[0]),this.loader)return this.loader.show(t)},t.prototype.hide=function(){var t;if(t=null!=this.link?this.link.data("loader-target"):null,this.loader)return this.loader.hide(t)},t}()}.call(this),function(){window._||(window._={});var t=window._;t.isBlank=function(e){return!!t.isUndefined(e)||("object"==typeof e?t.isEmpty(e):"number"!=typeof e&&0==e)},t.isPresent=function(e){return!t.isBlank(e)},t.presence=function(e){return t.isBlank(e)?null:e},t.repeat=function(t){for(var e=0,n="";e<num;e++)n+=t;return n},t.ljust=function(e,n,i){return e=""+e,i=(i=i||" ").substring(0,1),e.length<n?e+t.repeat(i,n-e.length):e},t.rjust=function(e,n,i){return e=""+e,i=(i=i||" ").substring(0,1),e.length<n?t.repeat(i,n-e.length)+e:e},t.center=function(e,n,i){if(e=""+e,i=(i=i||" ").substring(0,1),e.length<n){var r=n-e.length,o=r%2==0?"":i,a=t.repeat(i,parseInt(r/2));return a+e+a+o}return e},t.fetch=function(e,n,i){var r=e[n];return t.isUndefined(r)&&(r=i),r},t.unwrap=function(e){return t.isFunction(e)?e():e}}(),window.UserAccountsMenu=function(){function t(){this.menu=$("*[data-user-accounts=menu]:first"),this.trigger=$("*[data-user-accounts=trigger]:first"),this.openned=this.menu.is(":visible");var t=this;this.trigger.on("click",function(e){t.openned?t.close():t.open(),e.preventDefault()}),$(document).on("keyup.UserAccountsMenu",function(e){27==e.keyCode&&t.close()})}return t.prototype.open=function(){this.menu.show().css({minHeight:$(document).height()-this.menu.position().top});var t=this;this.menu.animate({marginLeft:0},300,function(){t.openned=!0}),this.trigger.parent().addClass("active")},t.prototype.close=function(){var t=this;this.menu.animate({marginLeft:-224},300,function(){t.openned=!1,t.menu.hide()}),this.trigger.parent().removeClass("active")},t}(),$.datepicker.regional["pt-BR"]={closeText:"Fechar",prevText:"Anterior",nextText:"Pr\xf3ximo",currentText:"Hoje",monthNames:["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","S\xe1b"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sex","S\xe1b"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},$.datepicker.regional["en-US"]={dateFormat:"dd/mm/yy"},window.i18n&&("pt"===window.i18n.locale?$.datepicker.setDefaults($.datepicker.regional["pt-BR"]):"en"===window.i18n.locale?$.datepicker.setDefaults($.datepicker.regional["en-US"]):$.datepicker.setDefaults($.datepicker.regional[window.i18n.locale])),window.Tracking=window.Tracking||{},Tracking.Clevertap={initwithSettings:function(){},identify:function(){},trackEvent:function(){}},Tracking.GA=(window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),{trackEvent:function(t,e){window.gtag("js",new Date),window.gtag("event",t,e)}}),Tracking.Mixpanel=function(){var t={};const e={enabled:!1,appID:null,entityID:null,debug:!1},n=function(e){return window.location.pathname.includes("/"+t.entityID+"/")?e.slice(t.entityID.length+1):e},i={initwithSettings:function(n){var i,r,o,a,s,c;jQuery.extend(t,e,n),t.enabled&&(i=document,(r=window.mixpanel||[]).__SV||(window.mixpanel=r,r._i=[],r.init=function(t,e,n){function i(t,e){var n=e.split(".");2==n.length&&(t=t[n[0]],e=n[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}var o=r;for(void 0!==n?o=r[n]=[]:n="mixpanel",o.people=o.people||[],o.toString=function(t){var e="mixpanel";return"mixpanel"!==n&&(e+="."+n),t||(e+=" (stub)"),e},o.people.toString=function(){return o.toString(1)+".people (stub)"},s="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" "),c=0;c<s.length;c++)i(o,s[c]);var a="set set_once union unset remove delete".split(" ");o.get_group=function(){function t(t){e[t]=function(){call2_args=arguments,call2=[t].concat(Array.prototype.slice.call(call2_args,0)),o.push([n,call2])}}for(var e={},n=["get_group"].concat(Array.prototype.slice.call(arguments,0)),i=0;i<a.length;i++)t(a[i]);return e},r._i.push([t,e,n])},r.__SV=1.2,(o=i.createElement("script")).type="text/javascript",o.async=!0,o.src="undefined"!=typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===i.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js",(a=i.getElementsByTagName("script")[0]).parentNode.insertBefore(o,a)),mixpanel.init(t.appID,{debug:t.debug}))},identify:function(e){t.enabled&&mixpanel.identify(e)},register:function(e){t.enabled&&mixpanel.register(e)},track:function(e,n){t.enabled&&mixpanel.track(e,n)},peopleSet:function(e){t.enabled&&mixpanel.people.set(e)},clickTrackingBind:function(t){t(function(){$(document).off("click.mixpanel").on("click.mixpanel","a, button, .ngdialog-close, *[data-mixpanel-click]",function(){var t,e,r,o,a,s=$(this);return t=s.data("mixpanel-click")||"undefined",e=s.attr("href")||"undefined",r=s.attr("class")||"undefined",o=s.attr("id")||"undefined",elementText=s.text().replace(/[\r\n]/gm,"").trim(),a={"Element Clicked":t,"Element Clicked Text":elementText,"Element Clicked href":n(e),"Element Clicked class":r,"Element Clicked id":o,"Element Clicked Offset":s.offset()},i.track("User Click",a),!0})})},openPageHistoryBind:function(t){var e=null;!function(t){var e=t.pushState;t.pushState=function(n){return"function"==typeof t.onpushstate&&t.onpushstate({state:n}),e.apply(t,arguments)}}(t),window.onpopstate=t.onpushstate=function(){window.clearTimeout(e),e=window.setTimeout(function(){var t=window.location.pathname,e=window.location.hash,i=n(t);""!=e&&(i+=e),Tracking.Mixpanel.track("Open Page",{"Page Location":i})},200)}}};return i}(),Tracking.OneSignal=function(){window.OneSignal=window.OneSignal||[];var t={};const e={env:"development",appId:null,safari_web_id:null},n=function(e){"development"===t.env&&console.log(e)};return{initwithSettings:function(n){jQuery.extend(t,e,n);var i={appId:t.appId,safari_web_id:t.safari_web_id,notifyButton:{enable:!0,text:{"tip.state.unsubscribed":"Ative as notifica\xe7\xf5es do Organizze","tip.state.subscribed":"Voc\xea est\xe1 recebendo as notifica\xe7\xf5es","tip.state.blocked":"Voc\xea bloqueou as notifica\xe7\xf5es","message.prenotify":"Clique para se receber as notifica\xe7\xf5es","message.action.subscribed":"Obrigado por se inscrever!","message.action.resubscribed":"Voc\xea est\xe1 recebendo as notifica\xe7\xf5es","message.action.unsubscribed":"Voc\xea n\xe3o receber\xe1 as notifica\xe7\xf5es novamente","dialog.main.title":"Gerenciar as notifica\xe7\xf5es do Site","dialog.main.button.subscribe":"INSCREVER-SE","dialog.main.button.unsubscribe":"DESINSCREVER-SE","dialog.blocked.title":"Desbloquear Notifica\xe7\xf5es","dialog.blocked.message":"Siga as instru\xe7\xf5es para permitir as notifica\xe7\xf5es:"}}};"development"===t.env&&(i.subdomainName="organizze"),window.OneSignal.push(function(){window.OneSignal.init(i)})},setEmail:function(t){window.OneSignal.push(function(){window.OneSignal.setEmail(t)})},setExternalUserId:function(t){window.OneSignal.push(function(){window.OneSignal.setExternalUserId(t)})},sendTags:function(t){window.OneSignal.push(function(){window.OneSignal.sendTags(t).then(function(t){n("=============== DEBUG: OneSignal Tags Sent ============="),n(t),n("========================================================")})})}}}(),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self,function(){var n=t.Cookies,i=t.Cookies=e();i.noConflict=function(){return t.Cookies=n,i}}())}(this,function(){"use strict";function t(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function e(n,i){function r(e,r,o){if("undefined"!=typeof document){"number"==typeof(o=t({},i,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in o)o[s]&&(a+="; "+s,!0!==o[s]&&(a+="="+o[s].split(";")[0]));return document.cookie=e+"="+n.write(r,e)+a}}function o(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var e=document.cookie?document.cookie.split("; "):[],i={},r=0;r<e.length;r++){var o=e[r].split("="),a=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(i[s]=n.read(a,s),t===s)break}catch(c){}}return t?i[t]:i}}return Object.create({set:r,get:o,remove:function(e,n){r(e,"",t({},n,{expires:-1}))},withAttributes:function(n){return e(this.converter,t({},this.attributes,n))},withConverter:function(n){return e(t({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(n)}})}return e({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Boleto=e():t.Boleto=e()}(window,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(e){return t[e]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=n(1),o=n(3),a=n(4).modulo11,s=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bankSlipNumber=e.replace(/[^\d]/g,""),!this.valid())throw new Error("Invalid bank slip number")}var e,n,s;return e=t,(n=[{key:"valid",value:function(){if(47!==this.bankSlipNumber.length)return!1;var t=this.barcode().split(""),e=t.splice(4,1);return a(t).toString()===e.toString()}},{key:"barcode",value:function(){return this.bankSlipNumber.replace(/^(\d{4})(\d{5})\d{1}(\d{10})\d{1}(\d{10})\d{1}(\d{15})$/,"$1$5$2$3$4")}},{key:"number",value:function(){return this.bankSlipNumber}},{key:"prettyNumber",value:function(){return this.bankSlipNumber.replace(/^(\d{5})(\d{5})(\d{5})(\d{6})(\d{5})(\d{6})(\d{1})(\d{14})$/,"$1.$2 $3.$4 $5.$6 $7 $8")}},{key:"bank",value:function(){switch(this.barcode().substr(0,3)){case"001":return"Banco do Brasil";case"007":return"BNDES";case"033":return"Santander";case"069":return"Crefisa";case"077":return"Banco Inter";case"102":return"XP Investimentos";case"104":return"Caixa Econ\xf4mica Federal";case"140":return"Easynvest";case"197":return"Stone";case"208":return"BTG Pactual";case"212":return"Banco Original";case"237":return"Bradesco";case"260":return"Nu Pagamentos";case"341":return"Ita\xfa";case"389":return"Banco Mercantil do Brasil";case"422":return"Banco Safra";case"505":return"Credit Suisse";case"633":return"Banco Rendimento";case"652":return"Ita\xfa Unibanco";case"735":return"Banco Neon";case"739":return"Banco Cetelem";case"745":return"Citibank";default:return"Unknown"}}},{key:"currency",value:function(){switch(this.barcode()[3]){case"9":return{code:"BRL",symbol:"R$",decimal:","};default:return"Unknown"}}},{key:"checksum",value:function(){return this.barcode()[4]}},{key:"expirationDate",value:function(){var t=new Date(8762364e5),e=this.barcode().substr(5,4);return new Date(t.getTime()+864e5*e)}},{key:"amount",value:function(){return(this.barcode().substr(9,10)/100).toFixed(2)}},{key:"prettyAmount",value:function(){var t=this.currency();return"Unknown"===t?this.amount():"".concat(t.symbol," ").concat(this.amount().replace(".",t.decimal))}},{key:"toSVG",value:function(t){var e=o.encode(this.barcode());return new r(e).render(t)}}])&&i(e.prototype,n),s&&i(e,s),t}();t.exports=s},function(t,e,n){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=n(2),o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stripes=e.split("").map(function(t){return parseInt(t,10)}),this.stripeWidth=n||4}var e,n,o;return e=t,o=[{key:"color",value:function(t){return t%2?"#ffffff":"#000000"}}],(n=[{key:"render",value:function(e){for(var n=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=0,o=0,a=0;a<this.stripes.length;a+=1,i+=o){o=this.stripeWidth*this.stripes[a];var s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.setAttribute("width",o),s.setAttribute("height",100),s.setAttribute("fill",t.color(a)),s.setAttribute("x",i),s.setAttribute("y",0),n.appendChild(s)}return n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.setAttribute("viewBox","0 0 ".concat(this.viewBoxWidth()," 100")),void 0===e?r.serializeToString(n):(document.querySelector(e).appendChild(n),null)}},{key:"viewBoxWidth",value:function(){return this.stripes.reduce(function(t,e){return t+e},0)*this.stripeWidth}}])&&i(e.prototype,n),o&&i(e,o),t}();t.exports=o},function(t,e){var n,i,r;i=[],void 0===(r="function"==typeof(n=function(){var t=function(t){var e=t.tagName;return"http://www.w3.org/1999/xhtml"===t.namespaceURI&&(e=e.toLowerCase()),e},e=function(t){return Array.prototype.map.call(t.childNodes,function(t){return i(t)}).join("")},n=function(n,i){var r="<"+t(n);return r+=function(t,e){return Array.prototype.map.call(t.attributes||t.attrs,function(t){return t.name}).indexOf("xmlns")>=0||!e&&t.namespaceURI===t.parentNode.namespaceURI?"":' xmlns="'+t.namespaceURI+'"'}(n,i),Array.prototype.forEach.call(n.attributes||n.attrs,function(t){r+=function(t){var e=t.value;return" "+t.name+'="'+e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+'"'}(t)}),n.childNodes.length>0?(r+=">",r+=e(n),r+="</"+t(n)+">"):r+="/>",r},i=function(t,i){var r=i&&i.rootNode;return"#document"===t.nodeName||"#document-fragment"===t.nodeName?e(t):t.tagName?n(t,r):"#text"===t.nodeName?function(t){return(t.nodeValue||t.value||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(t):"#comment"===t.nodeName?function(t){return"<!--"+t.data.replace(/-/g,"&#45;")+"-->"}(t):"#cdata-section"===t.nodeName?function(t){return"<![CDATA["+t.nodeValue+"]]>"}(t):void 0};return{serializeToString:function(t){return i(t,{rootNode:!0}).replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]/g,"")}}})?n.apply(e,i):n)||(t.exports=r)},function(t){function e(t){for(var e=n[Math.floor(t/10)],i=n[t%10],r="",o=0;o<5;o+=1)r+=e[o],r+=i[o];return r}var n=["11221","21112","12112","22111","11212","21211","12211","11122","21121","12121"];t.exports={encode:function(t){return"1111"+t.match(/(..?)/g).map(e).join("")+"211"}}},function(t){t.exports={modulo11:function(t){var e=t;"string"==typeof e&&(e=e.split("")),e.reverse();for(var n=0,i=0;i<e.length;i+=1)n+=(i%8+2)*e[i];return(11-n%11)%10||1}}}])}),function(){try{console}catch(n){window.console={},window.console.log=function(){},window.console.debug=function(){},window.console.warn=function(){},window.console.error=function(){},window.console.dir=function(){}}var t={randomString:function(){return(new Date).getTime()+""},uuid:function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})}},e={openNewTab:function(t){window.open(t,"_blank")},redirectTo:function(t){window.location=t},reload:function(){window.location.reload()},redirectToPremium:function(t,e){$(function(){setTimeout(function(){if(window.ContextSource&&ContextSource.current_entity){var n="/"+ContextSource.current_entity.id+"/a/premium/"+t;_.isBlank(e)?Turbolinks.visit_silent(n):Turbolinks.visit(n)}else console.error("This code must run only at legacy environment. Where we have the window.ContextSource variable set.")},300)})},refresh:function(t){t||(t=.3),$("#content").css({opacity:t}),$.get(window.location.pathname,function(t){$("#content").html(t),$("#content").css({opacity:1}),$(document).trigger("page:refresh"),$(document).trigger("ajax:complete")})}};window.Application=t,window.Page=e}(),window.tmp={},$(document).ready(function(){$(document).on("ajax:beforeSend.before","*[data-remote=true][data-before]",function(){eval($(this).data("before"))}),$(document).tooltip({items:"*[title]",track:!0})});